{"version":3,"sources":["directives.js","util.js","mast.js","nav.js","svg.js","remote.js","widget.js","layer.js","layer/details-panel.js","layer/dialog.js","layer/editable-text.js","layer/flash.js","layer/loading.js","layer/panel.js","layer/quickhelp.js","layer/veil.js","remote/rest.js","remote/urlfn.js","remote/websocket.js","remote/wsock.js","svg/geodata.js","svg/glyph.js","svg/glyphData.js","svg/icon.js","svg/map.js","svg/sprite.js","svg/spriteData.js","svg/svgUtil.js","svg/zoom.js","util/ee.js","util/fn.js","util/keys.js","util/lion.js","util/prefs.js","util/random.js","util/theme.js","widget/button.js","widget/chartBuilder.js","widget/listBuilder.js","widget/table.js","widget/tableBuilder.js","widget/tableDetail.js","widget/toolbar.js","widget/tooltip.js","app/app.js","cluster/cluster.js","device/device.js","flow/flow.js","group/group.js","host/host.js","intent/intent.js","link/link.js","meter/meter.js","partition/partition.js","pipeconf/pipeconf.js","port/port.js","processor/processor.js","settings/settings.js","topo/topo.js","topo/topoD3.js","topo/topoDialog.js","topo/topoEvent.js","topo/topoFilter.js","topo/topoForce.js","topo/topoInst.js","topo/topoLink.js","topo/topoMap.js","topo/topoModel.js","topo/topoOblique.js","topo/topoOverlay.js","topo/topoPanel.js","topo/topoProtectedIntent.js","topo/topoProtectedIntentOverlay.js","topo/topoSelect.js","topo/topoSprite.js","topo/topoToolbar.js","topo/topoTraffic.js","topo/topoTrafficNew.js","topo2/topo2.js","topo2/topo2Background.js","topo2/topo2Badge.js","topo2/topo2Breadcrumb.js","topo2/topo2Collection.js","topo2/topo2DetailsPanel.js","topo2/topo2Device.js","topo2/topo2DeviceDetailsPanel.js","topo2/topo2Event.js","topo2/topo2Force.js","topo2/topo2Host.js","topo2/topo2HostsPanel.js","topo2/topo2Instance.js","topo2/topo2KeyCommands.js","topo2/topo2Label.js","topo2/topo2LabelCollection.js","topo2/topo2Layout.js","topo2/topo2Link.js","topo2/topo2LinkLabel.js","topo2/topo2LinkPanel.js","topo2/topo2Map.js","topo2/topo2MapConfig.js","topo2/topo2Mastership.js","topo2/topo2Model.js","topo2/topo2NoDevicesConnected.js","topo2/topo2NodeModel.js","topo2/topo2NodePosition.js","topo2/topo2Overlay.js","topo2/topo2Panel.js","topo2/topo2PeerRegion.js","topo2/topo2Prefs.js","topo2/topo2Region.js","topo2/topo2RegionNavigation.js","topo2/topo2Select.js","topo2/topo2SpriteLayer.js","topo2/topo2SubRegion.js","topo2/topo2SubRegionPanel.js","topo2/topo2SummaryPanel.js","topo2/topo2Toolbar.js","topo2/topo2Traffic.js","topo2/topo2TrafficOverlay.js","topo2/topo2View.js","topo2/topo2ViewController.js","topo2/topo2Zoom.js","topo2/uiView.js","tunnel/tunnel.js"],"names":["angular","module","directive","$window","fs","scope","offsetHeight","offsetWidth","notifier","link","element","elem","d3","select","$watchCollection","h","innerHeight","w","innerWidth","offH","offW","wsz","windowSize","style","height","width","isF","bind","$apply","$last","$emit","$broadcast","ls","dialogOpts","edge","getLion","x","bundle","lion","controller","$log","$scope","$location","wss","ns","ds","_ls_","triggerRefresh","action","content","uicomp","okupd","openDialog","setTitle","addContent","createDiv","append","text","addOk","debug","location","reload","addCancel","bindKeys","bindHandlers","guiAdded","guiRemoved","this","toggleNav","username","onosUser","helpTip","directTo","curId","path","replace","helpUrl","onos","open","log","factory","mastHeight","isMobile","navShown","updatePane","vis","showNav","hideNav","hideIfShown","navTo","params","url","warn","isO","search","undefined","absUrl","href","_$log_","_$location_","_$window_","_fs_","ps","mast","is","EditableTextComponent","panel","pStartY","wSize","options","container","top","bottom","wssHandlers","topPdg","defaultLabelWidth","defaultValueWidth","createDetailsPanel","name","_options","createPanel","noPxStyle","pHeight","el","position","hide","setResponse","callback","additionalHandler","_","extend","addContainers","classed","addCloseButton","onClose","closeBtn","loadEmbeddedIcon","on","addHeading","icon","makeEditable","nameChangeRequest","keyBindings","addTable","parent","className","addProp","tbody","key","value","tr","addCell","cls","txt","attr","addPropsList","props","tblDiv","left","right","keys","each","indexOf","length","empty","id","destroy","unbindHandlers","_ps_","_mast_","_wss_","_is_","_etc_","create","ks","pApi","dApi","defaultSettings","createDialog","opts","header","body","footer","settings","p","cssCls","reset","appendHeader","node","appendChild","appendBody","appendFooter","destroyPanel","title","addButton","cb","chained","invoke","clearBindings","keyName","isS","_addOk","addOkChained","dialogKeys","show","closeDialog","div","document","createElement","_ks_","EditableText","onEdit","editingName","prototype","enter","save","esc","cancel","unbindKeys","addTextField","panelData","focus","enableGlobalKeys","exit","a","b","ev","val","newVal","property","trim","sendEvent","$timeout","enabled","flashDiv","svg","fade","showFor","xpad","ypad","rx","vbox","timer","data","computeBox","box","getBBox","y","updateFlash","items","viewBox","selectAll","msg","class","opacity","transition","duration","remove","delay","flash","enable","tempDiv","ms","_$timeout_","initFlash","ts","img","th","idx","task","wait","dir","pfx","speed","images","dbg","args","Array","slice","call","arguments","unshift","apply","fname","i","nextFrame","startAnim","theme","start","stop","waiting","_ts_","addImg","Image","src","push","preloadImages","self","_setLoadingDelegate","panels","panelLayer","margin","hideMargin","xtnTime","init","noop","noPx","what","Number","widthVal","pxHide","makePanel","api","showPanel","hidePanel","toggle","panelWidth","panelHeight","bbox","getBoundingClientRect","isVisible","bool","endCb","endOpacity","debugOn","sus","yCount","qhdiv","pane","rect","pad","offy","sepYDelta","colXDelta","yTextSpc","offDesc","keyDisp","equals","slash","backSlash","backQuote","leftArrow","upArrow","rightArrow","downArrow","neededBindings","ri","xCount","clsPfx","forEach","d","c","oy","aggKey","gcol","transform","translate","j","k","v","ox","addColumn","updateKeyItems","rows","r","dy","sep","type","x1","y1","x2","y2","ibox","paneW","paneH","buildBlock","map","fmt","get","isA","dfn","dval","cap","emptyRow","mkMapRow","addRow","row","aggregateData","bindings","vfmt","n","na","hf","gmap","globalKeys","gfmt","globalFormat","vmap","viewKeys","vgest","viewGestures","sort","popBind","_fade","o","_sus_","hideQuickHelp","initQuickHelp","showQuickHelp","warnPrefix","isEmptyObject","every","$route","gs","veil","ww","wh","shrink","birdDim","birdCenter","addGlyph","msgs","pdiv","line","enableKeys","lostServer","ctrlName","current","$$route","_$route_","_gs_","_setVeilDelegate","$http","ufs","errorCb","fullUrl","rsUrl","then","response","emsg","status","post","callbacks","success","error","uiContext","$loc","urlBase","protocol","port","host","match","appPrefix","suffix","wsUrl","wsport","wsock","vs","webSockOpts","ws","wsUp","handlers","pendingEvents","clusterNodes","clusterIndex","connectRetries","openListeners","nextListenerId","loggedInUser","builtinHandlers","bootstrap","user","uiAttached","info","ip","glyphs","gdata","viewbox","registerGlyphs","m","message","handleOpen","_send","lsnr","handleMessage","msgEvent","JSON","parse","e","event","payload","handleClose","gsucc","ncn","findGuiSuccessor","createWebSocket","send","stringify","noHandlersWarn","caller","resetState","_host_","newWebSocket","onopen","onmessage","onclose","token","onosAuth","handlerMap","dups","eventId","fn","addOpenListener","removeOpenListener","evType","setVeilDelegate","vd","setLoadingDelegate","ld","_$loc_","_ufs_","_wsock_","isConnected","WebSocket","cache","bundledUrlPrefix","clearCache","fetchTopoData","promise","meta","wasCached","topodata","set","defaultGenSettings","objectTag","projection","geo","mercator","logicalSize","mapFillScale","createPathGenerator","topoData","topoObject","objects","geoData","topojson","feature","proj","dim","mfs","rescaleProjection","adjustScale","geodata","pathgen","adj","scale","bounds","dx","s","Math","min","t","_$http_","gd","msgGS","rg","rgs","addToMap","overwrite","vb","reportDups","which","ok","clear","registerCoreGlyphs","missing","missvb","vbk","registerGlyphSet","_viewbox","ids","glyph","glyphDefined","has","loadDefs","defs","glyphIds","noClear","list","html","g","size","glyphId","overlay","trans","sz","ovr","atr","xlink:href","_gd_","run","logos","_bird","bird","_cord","cord","tableFrame","rSquare","octagon","arrowsLR","laser","glyphDataSet","unknown","query","switch","router","circle","roadm","otn","roadm_otn","fiber_switch","microwave","endstation","bgpSpeaker","chain","crown","lock","topo","refresh","garbage","cog","delta","nonzero","download","upload","flowTable","portTable","groupTable","meterTable","pipeconfTable","summary","details","ports","cycleLabels","oblique","filters","resetZoom","relatedIntents","nextIntent","prevIntent","intentTraffic","allTraffic","flows","eqMaster","xClose","badgeDataSet","checkMark","xMark","triangleUp","triangleDown","plus","minus","play","spriteData","_cloud","cloud","m_octagon","m_switch_arrows","m_otn_base","mojoDataSet","m_cloud","m_map","m_selectMap","thatsNoMoon","m_ports","m_switch","m_roadm","m_router","m_uiAttached","m_office","m_home","m_summary","m_details","m_oblique","m_filters","m_cycleLabels","m_prev","m_next","m_flows","m_allTraffic","m_diamond","m_xMark","m_resetZoom","m_eqMaster","m_unknown","m_controller","m_virtual","m_other","m_endstation","m_bgpSpeaker","m_otn","m_roadm_otn","m_fiberSwitch","m_microwave","m_relatedIntents","m_intentTraffic","m_firewall","m_balancer","m_ips","m_ids","m_olt","m_onu","m_swap","m_shortestGeoPath","m_source","m_destination","m_topo","m_shortestPath","m_disjointPaths","m_region","extraGlyphs","_yang","yang","gsApi","vboxSize","cornerSize","glyphMapping","active","inactive","close","appInactive","devIcon_SWITCH","devIcon_ROADM","devIcon_OTN","portIcon_DEFAULT","meter","deviceTable","hostIcon_endstation","hostIcon_router","hostIcon_bgpSpeaker","nav_apps","nav_settings","nav_cluster","nav_processors","nav_topo","nav_topo2","nav_devs","nav_links","nav_hosts","nav_intents","nav_tunnels","nav_yang","ensureIconLibDefs","loadIcon","installGlyph","svgClass","svgCls","gid","loadIconByClass","iconCls","addDeviceIcon","iconDim","addHostIcon","radius","xlate","sortIcons","_s","asc","desc","none","registerIconMapping","iconId","restrict","attrs","$observe","iconSize","$q","gds","loadMapInto","mapLayer","mapPath","deferredProjection","defer","hasOwnProperty","gen","resolve","features","reshade","shading","loadMapRegionInto","pathGen","countryFeature","countries","filter","countryFilter","sh","paths","stroke","fill","bg","palette","outline","flip","sea","land","_$q_","_gds_","sds","sprites","layouts","optDefaults","sprite","builder","addRect","addPath","layout","grid","addSprite","anchor","addLabel","fontStyle","spriteBuilder","rects","join","register","layoutBuilder","sprs","labs","labels","registerCoreSprites","createSprite","createLayout","registerSprite","json","registerLayout","count","dump","_sds_","stroke-miterlimit","ssApi","createDragBehavior","force","selectCb","atDragEnd","dragEnabled","clickEnabled","zs","draggedThreshold","linear","domain","range","clamp","fSel","fEnd","fDEn","fCEn","bad","naf","dragged","threshold","alpha","oldX","px","oldY","py","abs","behavior","drag","origin","fixed","dragStarted","sourceEvent","stopPropagation","loadGlow","glow","String","loadGlowDefs","colors","light","norm","ordinal","mute","dark","cat7","tcid","getColor","muted","ln","lm","dn","dm","testCard","dom","f","cx","cy","skewX","rotate","deg","stripPx","safeId","visible","zoomMin","zoomMax","zoomEnabled","zoomCallback","createZoomer","zoomer","cz","d3s","zoom","scaleExtent","adjustZoomLayer","fail","zoomLayer","panZoom","fcc","fromCharCode","beans","genMap","split","eecode","computeTransform","toLowerCase","cluck","foo","floor","random","endsWith","_flash_","debugFlags","cca","charCodeAt","isArray","constructor","Object","contains","areFunctions","fnNames","fnLookup","extraFound","areFunctionsNonStrict","oh","ow","ua","navigator","userAgent","test","isChrome","isChromium","chrome","vendorName","vendor","isOpera","isSafari","isFirefox","InstallTrigger","find","array","tag","_tag","inArray","item","removeFromArray","found","splice","obj","sameObjProps","obj1","obj2","containsObj","arr","len","toUpperCase","num","prop","str","_trieOp","op","trie","word","f1","q","shift","np","f2","_data","reverse","addToTrie","removeFromTrie","trieLookup","hasOwn","classNames","classes","arg","argType","protoProps","staticProps","child","__super__","matcher","whitelist","evillist","sanitize","matches","exec","full","analyze","re","RegExp","dbgstr","ee","qhs","lookup","globalEnabled","keyHandler","maskedKeys","viewFn","seq","matching","matched","textFieldDoesNotBlock","keyIn","keyCode","code","whatKey","textBlockable","modifiers","metaKey","altKey","shiftKey","target","tagName","kh","gk","gcb","dk","dcb","vk","kl","_keyListener","vcb","matchSeq","qhlion","qhlionShowHide","qhlionHintEsc","qhlionHintT","quickHelp","view","escapeKey","toggleTheme","filterMaskedKeys","masked","unexParam","checkNotGlobal","oops","_ns_","_ee_","bindQhs","_qhs_","installOn","T","viewFunction","keyArg","kFunc","kMap","addSeq","remSeq","gestureNotes","uberlion","ubercache","locale","bundleId","listeners","getPrefs","defaults","qparams","asNumbers","not","skip","setPrefs","mergePrefs","merged","updatePrefs","addListener","listener","removeListener","isDefined","userPrefs","spread","randDim","thidx","themes","themeStr","spriteColors","gray1","gold1","blue1","updateBodyClass","getTheme","applyTheme","evt","spriteColor","color","tts","btnSize","btnPadding","divExists","buttonWidth","button","tooltip","btnDiv","cbFnc","addTooltip","initState","sel","togDiv","_toggle","nocb","selected","toggleNoCb","radioSet","rset","rDiv","rads","idxByKey","currIdx","rbclick","invokeCurrent","curr","index","selectedIndex","btn","rid","initSel","rbdiv","_tts_","$interval","buildChart","refreshPromise","root","req","resp","onResp","respCb","oldChartData","requestCb","fetchDataIfNotWaiting","reqParams","startRefresh","stopRefresh","chartData","changedData","autoRefresh","autoRefreshTip","lion_toggle_auto_refresh","annots","copy","requestCallback","toggleRefresh","$on","_$interval_","listProps","sepLast","propOrder","label","propLabels","propValues","pdg","colWidth","cstmWidths","_width","setTdWidths","tds","td","toString","adjustTable","haveItems","tableElems","thead","table","sortState","first","second","touched","adiv","touch","s1","update","s2","tableIconTdSize","tableData","id2","dir2","thElem","col","sortParams","firstCol","firstDir","secondCol","secondDir","sortCallback","$parse","trs","idProp","highlightRows","changedRows","classRows","buildTable","onSel","selCb","idKey","oldTableData","requestTableData","payloadParams","selectCallback","$event","selRow","selId","forceRefesh","buildBasePanel","popTop","popMid","popBot","bns","arrowSize","shown","tbars","createToolbar","arrowDiv","tbid","currentRow","rowButtonIds","tbWidth","maxWidth","dupId","adjustWidth","btnWidth","bid","rowClear","rowSetText","rowAddButton","rowClassed","panelId","addToggle","tid","tog","addRadioSet","rad","addSeparator","setText","destroyToolbar","tb","_bns_","$rootScope","currElemId","hoverHeight","hoverDelay","exitDelay","showTooltip","cancelTooltip","mouseX","mouseY","winWidth","winHeight","pageX","pageY","display","ttMsg","_$rootScope_","detailsPanel","middle","warnDeactivate","warnOwnRisk","friendlyProps","activateImmediately","pName","detailsReq","appUrlPrefix","iconUrlSuffix","strongWarning","org.onosproject.drivers","closePanel","setUpPanel","ndiv","tcls","nTable","hdr","populateTop","u","propsBody","populateDetails","addItems","readme","required_apps","permissions","respDetailsCb","ctrlBtnState","selection","_$scope_","tbs","uploadTip","activateTip","deactivateTip","uninstallTip","downloadTip","refreshCtrls","rowIdx","installed","state","confirmAction","itemId","spar","sortCol","sortDir","_helpFormat","appAction","downloadApp","window","formData","FormData","appFile","transformRequest","identity","headers","Content-Type","finally","getElementById","appDropped","defineProperty","out","queryBy","queryTxt","dispatchEvent","MouseEvent","modelSetter","fileModel","assign","files","$document","onDragEnd","preventDefault","onAppDrop","onFileDrop","file","dataTransfer","unbindWatch","heightCalc","initPanel","browser","$watch","topTable","iconDiv","ctnrPdg","scrollSize","portsTblPdg","deviceCols","handleEscape","l","populateBottom","devices","tbHeight","theader","device","overflow","dps","detailsResp","nameChangeReq","portCols","friendlyPortCols","_iconid_type","URI","Type","Master ID","Chassis ID","Vendor","mfr","H/W Version","hw","S/W Version","sw","Protocol","Serial #","serial","Pipeconf","btmTbl","respNameCb","_dps_","flowTip","portTip","groupTip","meterTip","pipeconfTip","nav","devId","topSelTable","topTrtTable","flowId","tbodySel","tbodyTrt","selArray","selector","treat","treatment","getLionProps","addLabVal","lv","bits","popInstrList","immed","clearDef","_tbs_","deviceTip","briefTip","detailTip","brief","appId","briefToggle","tabhead","$sce","group","buckets","trustAsHtml","Host ID","IP Address","MAC Address","mac","VLAN","vlan","Configured","configured","Location","hostId","dropdown","tov","dialogId","intentData","appName","intentType","intentState","showDropdown","fired","showIntent","nh","overlaysAcceptingIntents","setOvAndNavigate","tt","overlayId","_tov_","_ds_","executeAction","bPurge","intentPurge","resubmitIntent","removeIntent","topoTip","resubmitTip","purgeTip","purgeAllTip","canShowIntent","isIntentInstalled","isIntentWithdrawn","isHavingWithdrawn","isWithdrawn","intent","deactivateIntent","purgeIntent","purgeIntents","removeIntents","direction","ID","Device","App Id","Bytes","Burst","Packets","State","_prefs_","bands","pipeconf","pWidth","pTopHeight","fetchPipeconfData","requestData","pipeConfRespCb","pipelineModel","noPipeconfRespCb","viewDestroy","headerSelectCb","selectedId","subtitles","isMetadata","tables","fields","noDataText","populateDetailPanel","actionSelectCb","tableSelectCb","maxSize","hasCounters","supportAging","matchFields","mp","field","bitWidth","matchType","actions","populateDetailTables","tableContainer","tableTitle","tableHeaders","detailPanelTable","headerTr","populateDetailTable","topTitle","topSubtitles","st","typeText","bottomHeight","resizeDetailPanel","pipeConfResponse","noPipeconfResp","invalidDevId","collapsePipeconf","collapseHeaders","collapseActions","collapseTables","mapToNames","matMatchFields","mf","autoHeightElem","prefs","nz","del","nzFilter","showDelta","defaultPortPrefsState","prefsState","updatePrefsState","toggleNZState","toggleDeltaState","Speed","Enabled","tableApi","filterToggleState","toggleDeltaTip","toggleNZTip","toggleNZ","toggleDelta","isDelta","isNZ","customFilter","operator","opFunc","gt","gte","lt","searchText","lte","getOperatorFromQuery","rowValue","parseInt","keysIn","requestTip","component","t3s","tes","tfs","tps","tis","tms","tss","tls","tos","fltr","ttbs","tspr","ovtopo","mapG","spriteG","forceG","noDevsLayer","actionMap","topoLion","setUpKeys","overlayKeys","extra","_hf","I","toggleInstances","O","toggleSummary","D","toggleUseDetailsFlag","H","toggleHosts","M","toggleOffline","P","togglePorts","dash","showBadLinks","B","toggleMap","G","openMapSelection","S","toggleSprites","X","resetAllLocations","Z","toggleOblique","N","clickAction","L","cycleDeviceLabels","shift-L","cycleHostLabels","U","unpin","R","dot","toggleToolbar","E","equalizeMasters","F1","fnkey","F2","F3","F4","F5","keyListener","_keyOrder","updateDeviceColors","_togSvgLayer","verb","showMaster","cancelAffinity","hooks","escape","deselectAll","deselectAllLinks","summaryVisible","hideSummary","notValid","getActionEntry","entry","sc","tx","ty","setNodeScale","recenterLabel","showNoDevs","countryFilters","s_america","properties","continent","ns_america","custom","subregion","japan","geounit","europe","italy","uk","adm0_a3","s_korea","australia","tintOn","shadeFlip","shadePalette","setMap","setUpMap","opacifyMap","currentMap","mapid","mapscale","mapfilepath","tint","cfilter","mapId","mapFilePath","mapScale","childNodes","mapReshader","mapShader","applyPreferences","topoStartDone","reselect","_$cookies_","_zs_","_ms_","_th_","_tds_","_t3s_","_tes_","_tfs_","_tps_","_tis_","_tss_","_tls_","_tos_","_fltr_","_ttbs_","_tms_","_tspr_","_ttip_","sprId","selOverlay","uplink","notifyResize","newDim","destroyPanels","destroyInst","destroyForce","z","setLionBundle","defaultPrefs","loadSprites","initForce","initInst","showMastership","initPanels","insts","detail","hosts","offdev","porthl","spr","setToolbar","toolbar","setDevLabIndex","dlbls","setHostLabIndex","hlbls","selectOverlay","ovid","devIconDim","labelPad","badgeConfig","yoff","gdelta","halfDevIcon","devBadgeOff","hostBadgeOff","remappedDeviceTypes","virtual","remappedHostTypes","deviceLabelIndex","hostLabelIndex","dColTheme","online","offline","setDeviceColor","otag","master","incDevLabIndex","mode","incHostLabIndex","hostLabel","deviceLabel","trimLabel","computeLabelWidth","iconBox","labelWidth","updateDeviceRendering","bdg","badge","renderBadge","boff","bsel","bcr","bcgd","updateHostLabel","deviceExisting","posNode","hostExisting","deviceEnter","crect","deviceScale","hostEnter","showHosts","hostRadius","hostExit","deviceExit","linkEntering","linkWidthScale","restyleLinkElement","linkLabelOffset","applyLinkLabels","updateLinkLabelModel","linkLabel","rectAroundText","ldata","transformLabel","getLabelPos","newId","newX","newY","lab","minX","maxX","minY","maxY","xMid","yMid","pos","applyPortLabels","portLabelG","entering","labelScale","labelPoint","linkPos","calcGroupPos","moved","hashAttrs","sqrt","moveAmtX","hashLength","moveAmtY","mid","angle","atan","linkConfig","baseColor","textLabelPos","point","applyNumLinkLabels","lblsG","linkCoords","initD3","_api_","_zoomer_","destroyD3","updateDeviceLabel","openListener","wsOpen","showSummary","showDetails","showHighlights","addInstance","updateInstance","removeInstance","addDevice","updateDevice","removeDevice","addHost","updateHost","moveHost","removeHost","addLink","updateLink","removeLink","spriteListResponse","spriteDataResponse","layerType","lionKey","smax","layerLookup","hostLink","direct","indirect","tunnel","optical","dispatch","suppressLayers","showLayer","layer","inLayer","look","initFilter","td3","tpis","lu","rlk","fTimer","fNodesTimer","fLinksTimer","linkG","linkLabelG","numLinkLblsG","nodeG","inColor","outColor","inWidth","outWidth","network","nodes","links","linksByDevice","revLinkToKey","showOffline","nodeLock","linkNums","devIconDimMin","devIconDimMax","portLabelDim","gravity","friction","charge","_def_","linkDistance","linkStrength","mergeNodeData","createDeviceNode","updateNodes","fStart","wasOnline","positionNode","sendUpdateMeta","tick","findAttachedLinks","updateOfflineVisibility","findAttachedHosts","removeHostElement","removeLinkElement","fResume","removeDeviceElement","createHostNode","createHostLinks","allCps","updateLinks","cps","model","cp","linkData","dst","dstPort","lnk","createHostLink","removeAllLinkElements","result","findLink","badLogic","fromTarget","keyRev","createLink","makeNodeKey","findNodePair","devicePair","updateWith","removeRawLink","nodeById","node1","node2","widthRatio","linkScale","allLinkTypes","allLinkSubTypes","immediate","lw","linkWidth","modeCls","expected","removed","upd","dev","updDev","findDevices","clearPos","ll","metaUi","lngLatFromCoord","equivLoc","lng","lat","memento","mkSvgClass","findHosts","hov","hovered","masterId","supAmt","less","unsuppressNode","unsuppressLink","badLinks","findBadLinks","multiplier","_updateNodes","nodeMouseOver","nodeMouseOut","exiting","getDefaultPos","source","calcPosition","linkSrcId","linkArr","numLinks","multiLink","amt","flipped","mult","offsetAmt","needToFlip","_updateLinks","stroke-width","stroke-dasharray","isOblique","resume","tickStuff","nodeAttr","isNaN","linkAttr","linkLabelAttr","findLinkById","zoomingOrPanning","clickConsumed","allTrafficClasses","clearLinkTrafficStyle","removeLinkLabels","clearNodeDeco","removeNodeBadges","mkTrafficApi","somethingSelected","selectOrder","updateLinksAndNodes","_td3_","_tpis_","_svg_","_uplink_","_dim_","setApi","findNodeById","supLayers","unsupNode","unsupLink","initModel","instVisible","initSelect","initTraffic","initProtectedIntents","initOblique","nodeGBBox","old","calcLinkPos","initLink","selectObject","destroyLink","destroyOblique","destroyTraffic","destroyProtectedIntents","destroySelect","destroyModel","onosInstances","onosOrder","oiShowMaster","oiBox","showLogicErrors","idIns","instOpts","updateInstances","logicError","clickInst","attachUiBadge","instSvg","headRect","bodyRect","roy","titleAttr","onoses","nSw","updAttr","ready","switches","addAttr","showInsts","hideInsts","toggleInsts","showPorts","enhancedLink","selectedLinks","getLogicalMousePosition","mouse","sq","mdist","prox","dist","computeNearestLink","minDist","proximity","nearest","x3","y3","enhanceLink","unenhance","locatePortLabel","tgtPort","srcPort","enhance","nearX","nearY","unselLink","selLink","mouseMoveHandler","mouseClickHandler","philite","handler","delegate","order","maps","mapItems","msgHandlers","closeMapSelection","dOk","filePath","dClose","selectMap","handleMapResponse","form","description","mapSelectorResponse","rnd","nearDist","coordFromLngLat","loc","longOrX","latOrY","coord","invert","forUpdate","xy","setLongLat","rand","locType","mkSvgCls","dh","ndh","ndht","devPort","linkKey","linkEndPoints","fromSource","wt","max","srcId","dstId","srcNode","dstNode","sMiss","missMsg","dMiss","makeLinkKey","rawLink","keyrev","linkRev","linksForDevPair","rmvIdx","multilink","offlineOnly","lnks","tgt","_rnd_","oldNodeLock","xsky","xsk","ysc","time","pkt","opt","xffn","plane","planeId","ytfn","toObliqueView","ins","insert","yt","ax","ay","showPlane","obTransitionNodes","toNormalView","rem","hidePlane","oldxy","coords","overlays","mkGlyphId","oid","note","over","kb","_glyphId","mkGid","mkId","fullkey","ov","aicb","acceptIntent","augmentRbset","switchFn","tbSelection","same","doop","updateDetail","coreButtons","showDeviceView","showFlowView","showPortView","showGroupView","showMeterView","_getButtonDef","btns","buttons","installButtons","addAction","addDetailButton","_hook","escapeHook","eh","emptySelectHook","singleSelectHook","multiSelectHook","mouseOverHook","mouseOutHook","showIntentHook","doHighlight","subdue","hdata","badgeData","ddata","css","_showHighlights","inj","injectLion","resetOnToolbarDestroy","emptySelect","singleSelect","multiSelect","mouseOver","mouseOut","sumFromTop","pCls","idSum","idDet","panelOpts","sumMax","padTop","padFudge","useDetails","haveDetails","createTopoPanel","pid","setup","adjustHeight","fromTop","totalPHeight","avSpace","_adjustBody","addBtnFooter","sepAlreadyThere","navPathIdKey","displaySingle","navFn","navPath","displayMulti","displayNothing","hideDetailPanel","displaySomething","showDetailPanel","_show","augmentDetailPanel","populateSummary","down","sumpan","hideSummaryPanel","up","downPos","ypos","_move","yp","ss","detailVisible","showingProtectedIntent","cancelHighlights","showProtectedIntent","activate","deactivate","startsWith","selections","consumeClick","nSel","getSel","nodeEv","deselectObject","skipUpdate","something","itemClass","sourceId","targetId","targetPort","isEdgeLink","sourcePort","requestDetails","allSelectionsClass","addHostIntent","addMultiSourceIntent","cc","selectionContext","types","spriteLayer","defsElement","tssid","fontsize","registerPathsAsGlyphs","applyStrokeStyle","use","applyFillClass","doLabel","inList","names","inData","defn","load","pathmeta","no","defn_name","defn_desc","def","pmeta","xfm","labelyoff","subpaths","subpathfill","defsElem","defname","keyData","cachedState","thirdRow","ovRset","ovIndex","cooktag","soa","selOver","k2b","isel","prohibited","concat","defaultPrefsState","prefsMap","cfg","setInitToggleState","deferredText","suppressIfMobile","switchOverlayActions","prohibits","persistTopoPrefs","ttfn","addOverlays","pidx","allTrafficTypes","allTrafficMsgs","trafficMode","hoverMode","allTrafficIndex","requestTrafficForMode","requestDeviceLinkFlows","requestRelatedIntents","hover","cancelTraffic","forced","showAllTraffic","trafficType","showDeviceLinkFlows","showRelatedIntents","showPrevIntent","showNextIntent","showSelectedIntentTraffic","selectIntent","so","one","two","purge","showDeviceFlows","showRelatedTraffic","0","A","F","V","W","single","multi","mouseover","mouseout","t2es","t2fs","t2is","t2bcs","t2kcs","t2ms","t2zs","ovtopo2","useCfg","offsetX","offsetY","_t2es_","_t2fs_","_t2is_","_t2bcs_","_t2kcs_","_t2ms_","_t2zs_","t2sls","summaryPanel","t2tbs","t2ndcs","t2os","_t2ts_","intentKey","intentAppId","intentAppName","setOverlay","instance","getZoom","usr","zoomPan","zoomScale","ViewController","t2mcs","BackgroundView","displayName","appendElement","getZoomer","addLayout","background","bgType","bgId","zoomData","bgZoom","_this","pan","bgFilePath","region","loaded","panAndZoom","loadLayout","spriteLayout","getBackgroundType","t2rns","breadcrumbContainer","breadcrumbs","render","addBreadcrumb","crumbs","navigateToRegion","translateInterpolator","interpolateString","styleTween","_layout_","_t2rns_","Model","Collection","models","_reset","initialize","comparator","add","addModel","getPrototypeOf","collection","_byId","toJSON","_Model_","Panel","getInstance","_summaryPanel_","panelPadding","summaryInstance","createDeviceCollection","DeviceCollection","deviceLayer","_c_","_nm_","nodeType","multiSelectEnabled","events","click","super","onChange","svgClassName","devGlyphColor","setOfflineVisibility","updateDetails","displayMastership","mastershipService","mastership","suppress","onExit","bs","devicePath","emptyRegions","appendToHeader","appendToBody","appendToFooter","renderSingle","renderMulti","_bs_","showMulti","_t2ovs_","topo2AllInstances","topo2CurrentLayout","topo2CurrentRegion","topo2PeerRegions","topo2UiModelEvent","topo2Highlights","t2rs","t2ls","t2vs","t2ss","t2bgs","t2mss","_forceG_","_opts_","regionId","createForceElements","transitionDownRegion","allInstances","currentLayout","currentRegion","peers","modelEvent","showMastershipFor","elements","regionNodes","regionLinks","resetNodeLocation","filterRegionNodes","resetPosition","fix","_t2rs_","_t2ls_","_t2vs_","zoomService","_t2ss_","_t2bgs_","_t2tbs_","_t2mss_","addZoomEventListener","isLoadComplete","setScale","hostIconDim","createHostCollection","HostCollection","hostsLayer","NodeModel","t2hds","t2ps","displayPanel","labelIndex","nli","updateLabel","isEmpty","multipler","setVisibility","onEnter","glyphSize","labelText","setUpEvents","hostPanel","hostData","hostPath","format","MAC","IP","-","setMastership","members","member","Boolean","t2sp","t2dp","toggleBackground","toggleDetails","toggleInstancePanel","unpinNode","toggleOfflineDevices","9","fnKey","bindCommands","additional","am","deselectAllNodes","deselectLink","newDeviceLabelIndex","deviceLabelFlashMessage","newHostLabelIndex","hostLabelFlashMessage","togglePortHighlights","actionedFlashed","_t2ps_","_t2sp_","_t2dp_","defaultStyles","_iconG","_labelG","beforeRender","afterRender","_position","setPosition","applyStyles","styles","renderText","renderIcon","iconX","iconY","LabelCollection","targetNode","updateTimer","UiEdgeLink","Layout","navToRegion","navigateToRegionHandler","prevForce","addElement","numLinksLabels","portLabels","settingOrDefault","settingName","createForceLayout","getDimensions","centerLayout","layoutBBox","setLinkPosition","_update","setDimensions","navigateToRegionComplete","transitionUpRegion","t2lps","t2ts","linkPoints","isLinkOnline","allNodes","sourceNode","createLinkCollection","_region","LinkModel","enhanced","suppressedmax","linkLabelCSSClass","sourceOnline","targetOnline","getPortHighlighting","rectSize","defaultPosition","calcMovement","multiline","deviceLinks","updatePortPosition","sourcePos","targetPos","getSelected","deselect","displayLink","offset","sourceX","sourceY","targetX","targetY","rangeRoundPoints","selectedTrafficOverlay","linkWidthRatio","_t2lps_","_fn_","Label","maxHeight","minHeight","adjustmentScale","linkPanel","A Type","A Id","A Label","A Port","B Type","B Id","B Label","B Port","Promise","loadMap","getCurrentMap","MastershipController","currentMastership","attributes","silent","unset","changes","changing","_changing","_previousAttributes","changed","previous","attribute","isEqual","_pending","NoDevicesConnected","t2nps","dUseTheme","_t2mcs_","_t2nps_","createNode","_events","mouseoverHandler","mouseoutHandler","onClick","defaultPrevented","labelBox","_textPad","addLabelElements","labelG","addIconElements","iconG","labelElements","rs","setElCoord","coordFromXY","getWidth","yOffset","getHeight","_rs_","_t2sls_","t2lc","LinkLabel","linkLabelsDOM","nodeLink","getLink","_t2lc_","_t2ll_","View","createCollection","t2srp","dblclick","topo2Prefs","preferences","t2sr","t2ds","t2hs","t2dps","t2pr","Region","bgRendered","regionData","RegionModel","createEmptyModel","subregions","createSubRegionCollection","peerRegions","startRegion","layerOrder","sortMultiLinks","assignPeerLocations","isRootRegion","displayNoDevs","removePort","peerLocations","peer","deviceConnections","epA","epB","forIn","linkId","getDevice","deviceId","predicate","lookupPrefState","updatePrefState","LINK_ADDED_OR_UPDATED","memo","LINK_REMOVED","subject","DEVICE_ADDED_OR_UPDATED","DEVICE_REMOVED","HOST_ADDED_OR_UPDATED","REGION_ADDED_OR_UPDATED","RegionNavigationService","sub","notifyListeners","destory","t2ddp","previousNearestLink","mx","my","SelectionService","selectedNodes","selectionOrder","clearSelection","nodeCount","nodeIndex","removeNode","_t2ddp_","createSpriteDefs","renderLayout","renderGrid","renderSprite","spriteEl","subRegionPanel","subRegionData","nDevs","nHosts","summaryData","_detailsPanel_","summaryHeight","t2ov","Toolbar","initKeyData","addFirstRow","addSecondRow","getKey","defaultOverlay","currentIndex","allIndex","_t2ov_","dimensions","viewOptions","linkPortHighlighting","_dimensions","zoomEventListeners","origCallback","removeZoomEventListener","evIndex","findZoomEventListener","_scale","$el"],"mappings":"CAEC,WACG,aAEAA,QAAQC,OAAO,WAEVC,UAAU,SAAU,CAAC,UAAW,YAAa,SAAUC,EAASC,GAC7D,MAAO,CACHC,MAAO,CACHC,aAAc,IACdC,YAAa,IACbC,SAAU,KAEdC,KAAM,SAAUJ,EAAOK,GACnB,IAAIC,EAAOC,GAAGC,OAAOH,EAAQ,IAC7BL,EAAMS,iBAAiB,WACnB,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACC,IAAIC,EAAOd,EAAMC,cAAgB,EAC7Bc,EAAOf,EAAME,aAAe,EAC5Bc,EAAMjB,EAAGkB,WAAWH,EAAMC,GAE9BT,EAAKY,MAAM,CACPC,OAAQH,EAAIG,OAAS,KACrBC,MAAOJ,EAAII,MAAQ,OAGnBrB,EAAGsB,IAAIrB,EAAMG,WACbH,EAAMG,aAIdR,QAAQU,QAAQP,GAASwB,KAAK,SAAU,WACpCtB,EAAMuB,gBAMrB1B,UAAU,mBAAoB,CAAC,WAC5B,OAAO,SAAUG,GACTA,EAAMwB,QACNxB,EAAMyB,MAAM,oBACZzB,EAAM0B,WAAW,yBA7CrC;CCDC,WACG,aAEA/B,QAAQC,OAAO,WAAY,IAH/B;CCAC,WACG,aAEA,IAMI+B,EAJAC,EAAa,CACTC,KAAM,QAKd,SAASC,EAAQC,GAEb,OADWJ,EAAGK,OAAO,eACdC,CAAKF,GAGhBpC,QAAQC,OAAO,WAAY,CAAC,YACvBsC,WAAW,WACZ,CAAC,OAAQ,SAAU,YAAa,UAAW,mBACvC,aAAc,gBAAiB,cAEnC,SAAUC,EAAMC,EAAQC,EAAWvC,EAASwC,EAAKC,EAAIC,EAAIC,GAOrD,SAASC,EAAeC,GACpB,IAKQC,EALJC,EAA4Bf,EAAR,QAAXa,EAA2B,eACA,kBACpCG,EAAQhB,EAAQ,mBAiBpBU,EAAGO,WAAW,aAAcnB,GACvBoB,SAASlB,EAAQ,0BACjBmB,aAhBGL,EAAUJ,EAAGU,aACTC,OAAO,KAAKC,KAAKP,EAAS,IAAMC,GACjCF,IAeNS,MAZL,WACIlB,EAAKmB,MAAM,kBACXxD,EAAQyD,SAASC,WAWhBC,UARL,WACItB,EAAKmB,MAAM,2BAQVI,WA7BT/B,EAAKc,EAELL,EAAOH,KAAOH,EA8BdQ,EAAIqB,aAAa,CACbC,SAAY,WAAclB,EAAe,QACzCmB,WAAc,WAAcnB,EAAe,UApCpCoB,KAuCNC,UAAY,WACbxB,EAAGwB,aAGP3B,EAAO4B,SAAW,WACd,OAAOC,UAAYnC,EAAQ,iBAG/BM,EAAO8B,QAAU,GAEjB9B,EAAO+B,SAAW,WACd,IAAIC,EAAQ/B,EAAUgC,OAAOC,QAAQ,IAAK,IAEtCC,EADUnC,EAAOoC,KAAc,QACbJ,GACtBtE,EAAQ2E,KAAKF,IAGjBpC,EAAKuC,IAAI,gCAGZC,QAAQ,cAAe,CAAC,YAAa,SAAU5E,GAC5C,MAAO,CACH6E,WAAY,WACR,OAAO7E,EAAG8E,WAAaD,GAjFtB,QAHrB;CCAC,WACG,aAEA,IAAIzC,EAAME,EAAWvC,EAASC,EAE1B+E,GAAW,EAEf,SAASC,IACL,IAAIC,EAAMF,EAAW,UAAY,SACjCvE,GAAGC,OAAO,QAAQU,MAAM,aAAc8D,GAG1C,SAASC,IACLH,GAAW,EACXC,IAEJ,SAASG,IACLJ,GAAW,EACXC,IAEJ,SAAShB,IACLe,GAAYA,EACZC,IAEJ,SAASI,IACL,QAAIL,IACAI,KACO,GAKf,SAASE,EAAMf,EAAMgB,GACjB,IAAIC,EACJ,IAAKjB,EAED,OADAlC,EAAKoD,KAAK,+BACH,KAEXlD,EAAUiD,IAAI,IAAMjB,GAEhBtE,EAAGyF,IAAIH,GACPhD,EAAUoD,OAAOJ,QACCK,IAAXL,GACPlD,EAAKoD,KAAK,6BAA8BF,GAG5CC,EAAMjD,EAAUsD,SAChBxD,EAAKuC,IAAI,iBAAkBY,GAC3BxF,EAAQyD,SAASqC,KAAON,EAG5B3F,QAAQC,OAAO,UAAW,IACrBsC,WAAW,UAAW,CAAC,OAEpB,SAAU2D,GAEN1D,EAAO0D,EADI/B,KAGNoB,QAAUA,EACf/C,EAAKuC,IAAI,+BAGhBC,QAAQ,aACL,CAAC,OAAQ,YAAa,UAAW,YAEjC,SAAUkB,EAAQC,EAAaC,EAAWC,GAMtC,OALA7D,EAAO0D,EACPxD,EAAYyD,EACZhG,EAAUiG,EACVhG,EAAKiG,EAEE,CACHf,QAASA,EACTC,QAASA,EACTnB,UAAWA,EACXoB,YAAaA,EACbC,MAAOA,MA5E3B;CCAC,WACG,aAEAzF,QAAQC,OAAO,UAAW,CAAC,aAH/B;CCAC,WACG,aAEAD,QAAQC,OAAO,aAAc,CAAC,aAHlC;CCAC,WACG,aAEAD,QAAQC,OAAO,aAAc,IAHjC;CCAC,WACG,aAEAD,QAAQC,OAAO,YAAa,CAAC,aAHjC;CCAA,WAEI,IAAIqG,EAAIlG,EAAImG,EAAM5D,EAAK6D,EAAIC,EAEvBC,EACAC,EACAC,EAEAC,EAMAC,EACAC,EACAC,EATAC,EAAc,GAGdC,EAAS,GACTC,EAAoB,IACpBC,EAAoB,GAMxB,SAASC,EAAmBC,EAAMC,GAe9B,OAbAlH,OADAwG,EAAUU,GACMlH,MAEhBqG,EAAQJ,EAAGkB,YAAYF,EAAMT,GAe7BF,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC/C0F,EAAKtB,aAAeiC,EAC1BN,EAAQxG,EAAGkB,WAAWqF,GACtBe,QAAUd,EAAMpF,OAdhBkF,EAAMiB,KAAKpG,MAAM,CACbqG,SAAU,WACVb,IAAKJ,EAAU,OAGnBkB,IAEOnB,EAUX,SAASmB,IACLnB,EAAMmB,OAGV,SAASC,EAAYR,EAAMS,GACvB,IAAIC,EAAoB,GACxBA,EAAkBV,GAAQS,EAE1BpF,EAAIqB,aAAagE,GACjBf,EAAcgB,EAAEC,OAAO,GAAIjB,EAAae,GAG5C,SAASG,IACLrB,EAAYJ,EAAMlD,OAAO,OAAO4E,QAAQ,aAAa,GACrDrB,EAAMD,EAAUtD,OAAO,OAAO4E,QAAQ,OAAO,GAC7CpB,EAASF,EAAUtD,OAAO,OAAO4E,QAAQ,UAAU,GAGvD,SAASC,EAAeC,GACpB,IAAIC,EAAWxB,EAAIvD,OAAO,OAAO4E,QAAQ,aAAa,GAEtD5B,EAAGgC,iBAAiBD,EAAU,QAAS,IACvCA,EAASE,GAAG,QAASH,GAAW,cAGpC,SAASI,EAAWC,EAAMC,GACtB7B,EAAIvD,OAAO,OAAO4E,QAAQ,WAAaO,GAAM,GAEzCC,EACA,IAAInC,EAAsBM,EAAIvD,OAAO,MAAO,CACxCnD,MAAOwG,EAAQxG,MACfwI,kBAAmBhC,EAAQgC,kBAC3BC,YAAajC,EAAQiC,cAGzB/B,EAAIvD,OAAO,MAInB,SAASuF,EAASC,EAAQC,GACtB,OAAOD,EAAOxF,OAAO,OAAO4E,QAAQa,GAAW,GAAMzF,OAAO,SAGhE,SAAS0F,EAAQC,EAAOC,EAAKC,GACzB,IAAIC,EAAKH,EAAM3F,OAAO,MAEtB,SAAS+F,EAAQC,EAAKC,EAAKhI,GACvB6H,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAKE,KAAK,QAASjI,GAAOgC,KAAKgG,GAGjEF,EAAQ,QAASH,EAAM,KAAMjC,GAC7BoC,EAAQ,QAASF,EAAOjC,GAG5B,SAASuC,EAAahC,EAAIiC,GACtB,IAAIC,EAASlC,EAAGnE,OAAO,OAAO4E,QAAQ,cAAc,GAChD0B,EAAOf,EAASc,EAAQ,QAAQrG,OAAO,SACvCuG,EAAQhB,EAASc,EAAQ,SAASrG,OAAO,SAEzCwG,EAAO/B,EAAE+B,KAAKJ,GAElB3B,EAAEgC,KAAKL,EAAO,SAAUP,EAAOD,GACfY,EAAKE,QAAQd,GAEbY,EAAKG,OAAS,EACtBjB,EAAQY,EAAMV,EAAKC,GAEnBH,EAAQa,EAAOX,EAAKC,KAKhC,SAASe,IACL1D,EAAM0D,QAGV,SAASvJ,EAAOwJ,GACZ,OAAO3D,EAAMiB,KAAK9G,OAAOwJ,GAG7B,SAASC,IACL3H,EAAI4H,eAAetD,GAGvBjH,QAAQC,OAAO,aACV+E,QAAQ,sBAAuB,CAE5B,eAAgB,YAAa,cAAe,mBAC5C,cAAe,wBAEf,SAAUwF,EAAMnE,EAAMoE,EAAQC,EAAOC,EAAMC,GASvC,OAPAtE,EAAKkE,EACLpK,EAAKiG,EACLE,EAAOkE,EACP9H,EAAM+H,EACNlE,EAAKmE,EACLlE,EAAwBmE,EAEjB,CACHC,OAAQxD,EACRS,YAAaA,EAEbK,cAAeA,EACfE,eAAgBA,EAChBK,WAAYA,EACZiB,aAAcA,EAEd7C,UAAW,WAAc,OAAOA,GAChCC,IAAK,WAAc,OAAOA,GAC1BC,OAAQ,WAAc,OAAOA,GAC7BnG,OAAQA,EAERuJ,MAAOA,EACPvC,KAAMA,EACNyC,QAASA,MA9J7B;CCAC,WACG,aAEA,IAAI9H,EAAMpC,EAAIkG,EAAIwE,EAOdC,EAAMrE,EAAOsE,EALbC,EAAkB,CACdxJ,MAAO,IACPS,KAAM,QAIV4G,EAAc,GAElB,SAASoC,EAAab,EAAIc,GACtB,IAAIC,EAAQC,EAAMC,EACdC,EAAWvL,QAAQkI,OAAO,GAAI+C,EAAiBE,GAC/CK,EAAIlF,EAAGkB,YAAY6C,EAAIkB,GACvB/B,EAAM2B,GAAQA,EAAKM,OA+CvB,OA7CAD,EAAEpD,QAAQ,UAAU,GAChBoB,GACAgC,EAAEpD,QAAQoB,GAAK,GAEnB9C,EAAQ8E,EAyCD,CACHE,MAxCJ,WACIF,EAAEpB,QACFoB,EAAEhI,OAAO,OAAO4E,QAAQ,UAAU,GAClCoD,EAAEhI,OAAO,OAAO4E,QAAQ,QAAQ,GAChCoD,EAAEhI,OAAO,OAAO4E,QAAQ,UAAU,GAElCgD,EAASI,EAAE7D,KAAK9G,OAAO,WACvBwK,EAAOG,EAAE7D,KAAK9G,OAAO,SACrByK,EAASE,EAAE7D,KAAK9G,OAAO,YAiCvB8K,aA9BJ,SAAiBvJ,GACb,MAAiB,iBAANA,EACAgJ,EAAO5H,OAAOpB,IAEzBgJ,EAAOQ,OAAOC,YAAYzJ,EAAEwJ,QACrBR,IA0BPU,WAvBJ,SAAiB1J,GACb,MAAiB,iBAANA,EACAiJ,EAAK7H,OAAOpB,IAEvBiJ,EAAKO,OAAOC,YAAYzJ,EAAEwJ,QACnBP,IAmBPU,aAhBJ,SAAiB3J,GACb,MAAiB,iBAANA,EACAkJ,EAAO9H,OAAOpB,IAEzBkJ,EAAOM,OAAOC,YAAYzJ,EAAEwJ,QACrBN,IAYPhB,QATJ,WACIhE,EAAG0F,aAAa3B,KAiCxB,SAAShH,EAAS4I,GAId,OAHIlB,GACAA,EAAKY,aAAa,MAAMlI,KAAKwI,GAE1BjB,EAGX,SAAS1H,EAAWL,GAIhB,OAHI8H,GACAA,EAAKe,WAAW7I,GAEb+H,EAGX,SAASkB,EAAUC,EAAI1I,EAAM2F,EAAKgD,GA/B9B,SAASC,IACLF,GAAMA,IACDC,IACDE,IACA5F,EAAMmB,QARlB,IAAoBE,EAAUtE,EAAM8I,EAASH,EACrCD,EACA/C,EAqCJ,OAHI2B,GACAA,EAAKgB,cArCOhE,EAqCiBoE,EArCP1I,EAqCWA,EArCL8I,EAqCWnD,EArCFgD,EAqCOA,EApC5CD,EAAK/L,EAAGsB,IAAIqG,IACZqB,EAAMhJ,EAAGoM,IAAID,MAWbzD,EAAYM,GAAOiD,GAGhB9I,EAAU,iBACZE,KAAKA,GACLgF,GAAG,QAAS4D,KAqBVrB,EAGX,SAASyB,EAAON,EAAI1I,EAAM2I,GACtB,OAAOF,EAAUC,EAAI1I,GAAQ,KAAM,QAAS2I,GAGhD,SAAS1I,EAAMyI,EAAI1I,GACf,OAAOgJ,EAAON,EAAI1I,GAAM,GAG5B,SAASiJ,EAAaP,EAAI1I,GACtB,OAAOgJ,EAAON,EAAI1I,GAAM,GAG5B,SAASK,EAAUqI,EAAI1I,GACnB,OAAOyI,EAAUC,EAAI1I,GAAQ,SAAU,OAG3C,SAAS6I,IACLxD,EAAc,GACdgC,EAAG6B,aAGP,SAASvJ,EAAWiH,EAAIc,GAmBpB,OAlBA3I,EAAKmB,MAAM,cAAe0G,EAAIc,IAE1BJ,EADCA,GACMG,EAAab,EAAIc,IAEvBO,QACLhF,EAAMkG,OAEN5B,EAAO,CACH3H,SAAUA,EACVC,WAAYA,EACZ4I,UAAWA,EACXxI,MAAOA,EACPgJ,aAAcA,EACd5I,UAAWA,EACXC,SAAU,WACN+G,EAAG6B,WAAW7D,KAM1B,SAAS+D,IACLrK,EAAKmB,MAAM,gBACPoH,IACAuB,IACA5F,EAAMmB,OACNkD,EAAKT,UAELU,EADAD,EAAO,MAKf,SAASxH,EAAUiG,GACf,IAAIsD,EAAMlM,GAAGC,OAAOkM,SAASC,cAAc,QAI3C,OAHIxD,GACAsD,EAAI1E,QAAQoB,GAAK,GAEdsD,EAGX9M,QAAQC,OAAO,aACd+E,QAAQ,gBACL,CAAC,OAAQ,YAAa,eAAgB,aAGtC,SAAUkB,EAAQG,EAAMmE,EAAMyC,GAM1B,OALAzK,EAAO0D,EACP9F,EAAKiG,EACLC,EAAKkE,EACLM,EAAKmC,EAEE,CACH7J,WAAYA,EACZyJ,YAAaA,EACbtJ,UAAWA,MA/L3B;CCAA,WAIuB,SAAf2J,EAAyBvF,EAAId,GAC7B1C,KAAKwD,GAAKA,EACVxD,KAAK9D,MAAQwG,EAAQxG,MACrB8D,KAAK0C,QAAUA,EAEf1C,KAAKwD,GAAGS,QAAQ,sBAAsB,GAAMK,GAAG,QAAStE,KAAKgJ,OAAOxL,KAAKwC,OACzEA,KAAKiJ,aAAc,EARvB,IAAItC,EAAInI,EAWRuK,EAAaG,UAAY,CAErBrJ,aAAc,WACV8G,EAAGhC,YAAY,CACXwE,MAASnJ,KAAKoJ,KAAK5L,KAAKwC,MACxBqJ,IAAO,CAACrJ,KAAKsJ,OAAO9L,KAAKwC,MAAO,8BAIxCoG,eAAgB,WACZO,EAAG4C,aAECvJ,KAAK0C,QAAQiC,aACbgC,EAAGhC,YAAY3E,KAAK0C,QAAQiC,cAIpC6E,aAAc,WACV,OAAOxJ,KAAKwD,GAAGnE,OAAO,SAAS4E,QAAQ,cAAc,GAChDsB,KAAK,OAAQ,QACbA,KAAK,QAASvF,KAAK9D,MAAMuN,UAAUtG,MAAM,GAAG,IAGrD6F,OAAQ,WACJ,IAAKhJ,KAAKiJ,YAAa,CACnBjJ,KAAKwD,GAAGS,QAAQ,sBAAsB,GACtCjE,KAAKwD,GAAGlE,KAAK,IAEb,IAAIkE,EAAKxD,KAAKwJ,eACdhG,EAAGkG,QACHlG,EAAG9G,SACHsD,KAAKiJ,aAAc,EAEnBjJ,KAAKH,eAEL8G,EAAGgD,kBAAiB,KAI5BC,KAAM,SAAUzG,GACZnD,KAAKwD,GAAGlE,KAAK6D,GACbnD,KAAKwD,GAAGS,QAAQ,sBAAsB,GACtCjE,KAAKiJ,aAAc,EACnBtC,EAAGgD,kBAAiB,GACpB3J,KAAKoG,kBAGTkD,OAAQ,SAAUO,EAAGC,EAAGC,GAEpB,QAAI/J,KAAKiJ,cACLjJ,KAAK4J,KAAK5J,KAAK9D,MAAMuN,UAAUtG,OACxB,IAMfiG,KAAM,WACF,IACIY,EACAC,EAFA/D,EAAKlG,KAAK9D,MAAMuN,UAAUvD,GAI1BlG,KAAKiJ,cAELgB,GADAD,EAAMhK,KAAKwD,GAAG9G,OAAO,SAASwN,SAAS,SAASC,SAChCjE,EAEhBlG,KAAK4J,KAAKK,GACVjK,KAAK9D,MAAMuN,UAAUtG,KAAO8G,EAC5BzL,EAAI4L,UAAUpK,KAAK0C,QAAQgC,kBAAmB,CAAEwB,GAAIA,EAAI/C,KAAM6G,OAM1EnO,QAAQC,OAAO,aACV+E,QAAQ,wBAAyB,CAE9B,aAAc,mBAEd,SAAUiI,EAAMvC,GAIZ,OAHAI,EAAKmC,EACLtK,EAAM+H,EAECwC,KAhGvB;CCAC,WACG,aAEA,IAAIsB,EAaAjD,EAGAkD,EAEAC,EAAUC,EAhBV1D,EAAkB,CACd2D,KAAM,IACNC,QAAS,MAEb5N,EAAI,OACJF,EAAI,IACJ+N,EAAO,GACPC,EAAO,GACPC,EAAK,GACLC,EAAO,SAAYlO,EAAE,EAAK,QAAUA,EAGpCmO,EAAQ,KACRC,EAAO,GAMX,SAASC,EAAWzH,GAChB,IACI0H,EADO1H,EAAG9G,OAAO,QACN+K,OAAO0D,UAUtB,OARAD,EAAIjN,GAAKiN,EAAI5N,MAAQ,EACrB4N,EAAIE,GAAKF,EAAI7N,OAAS,EAEtB6N,EAAIjN,GAAK0M,EACTO,EAAI5N,OAAgB,EAAPqN,EACbO,EAAIE,GAAKR,EACTM,EAAI7N,QAAiB,EAAPuN,EAEPM,EAGX,SAASG,IASL,IAAIC,GAPAd,EADCA,GACKD,EAASlL,OAAO,OAAOkG,KAAK,CAC9BjI,MAAOR,EACPO,OAAQT,EACR2O,QAAST,KAIDU,UAAU,cACrBR,KAAKA,GAEVM,EAAMxF,KAAK,SAAU2F,GACjB,IACIP,EADA1H,EAAK/G,GAAGC,OAAOsD,MAGnBwD,EAAG9G,OAAO,QAAQ4C,KAAKmM,GACvBP,EAAMD,EAAWzH,GACjBA,EAAG9G,OAAO,QAAQ6I,KAAK2F,KAIZI,EAAMnC,QAChB9J,OAAO,KACPkG,KAAK,CACFmG,MAAO,YACPC,QAAS,IAEZC,aACAC,SAASzE,EAASqD,MAClBlF,KAAK,UAAW,GAEZO,KAAK,SAAU2F,GACpB,IACIP,EADA1H,EAAK/G,GAAGC,OAAOsD,MAGnBwD,EAAGnE,OAAO,QAAQkG,KAAK,KAAMsF,GAC7BrH,EAAGnE,OAAO,QAAQC,KAAKmM,GACvBP,EAAMD,EAAWzH,GACjBA,EAAG9G,OAAO,QAAQ6I,KAAK2F,KAG3BI,EAAM1B,OACDgC,aACAC,SAASzE,EAASqD,MAClBlF,KAAK,UAAW,GAChBuG,SAEDtB,GAAuB,IAAhBQ,EAAKhF,SACZwE,EAAIoB,aACCG,MAAM3E,EAASqD,KAAO,IACtBqB,SACLtB,EAAM,MAId,SAASwB,EAAMP,GACNnB,IAEDS,GACAV,EAASf,OAAOyB,GAGpBA,EAAQV,EAAS,WACbW,EAAO,GACPK,KACDjE,EAASsD,SAEZM,EAAO,CAACS,GACRJ,KAGJ,SAASY,EAAOnC,GACZQ,IAAYR,EAGhB,SAASoC,EAAQC,GACb,IAAIxD,EAAMlM,GAAGC,OAAO,QAAQ2C,OAAO,OAAO4E,QAAQ,YAAY,GAG9D,OADAoG,EAAS,WAAc1B,EAAImD,eADPlK,IAAPuK,GAAoBA,EAAK,IAAO,IAAOA,GAE7CxD,EAGX9M,QAAQC,OAAO,aACV+E,QAAQ,eAAgB,CAAC,WAC1B,SAAUuL,GASN,OARA/B,EAAW+B,EAQJ,CACHC,UAPJ,SAAmBrF,GACfI,EAAWvL,QAAQkI,OAAO,GAAI+C,EAAiBE,GAC/CuD,EAAW9N,GAAGC,OAAO,UACrB4N,GAAU,GAKV0B,MAAOA,EACPC,OAAQA,EACRC,QAASA,MAzIzB;CCAC,WACG,aAEA,IAAI7B,EAAUiC,EAAIrQ,EASd0M,EACA4D,EACAC,EACAC,EACAC,EACAC,EAZAzG,EAAK,eACL0G,EAAM,oBACNC,EAAM,SAENC,EAAQ,IASRC,EAAS,GAEb,SAASC,IACL,IAAIC,EAAOC,MAAMhE,UAAUiE,MAAMC,KAAKC,WACtCJ,EAAKK,QAAQ,WACbrR,EAAGuD,MAAM+N,MAAMvN,KAAMiN,GAoBzB,SAASO,EAAMC,EAAGjB,GAEd,OAAOI,EAAMJ,EAAKK,GADN,EAAJY,EAAQ,GAAK,KACOA,EAAI,OAGpC,SAASC,IACLjB,EAAc,KAARA,EAAa,EAAIA,EAAM,EAC7BF,EAAIhH,KAAK,MAAOiI,EAAMf,EAAKD,IAC3BE,EAAOrC,EAASqD,EAAWZ,GAG/B,SAASa,IACLX,EAAI,mBACJR,EAAKF,EAAGsB,SACRjF,EAAMlM,GAAGC,OAAO,IAAIwJ,IACZD,UACJ0C,EAAMlM,GAAGC,OAAO,QAAQ2C,OAAO,OAAOkG,KAAK,KAAMW,GACjDqG,EAAM5D,EAAItJ,OAAO,OAAOkG,KAAK,MAAOiI,EAAM,EAAGhB,IAC7CC,EAAM,EACNC,EAAOrC,EAASqD,EAAWZ,IAanC,SAASe,IACLb,EAAI,oBACJL,EAAOtC,EAASsD,EAnEJ,KAsEhB,SAASG,IACDnB,IACAK,EAAI,kBACJ3C,EAASf,OAAOqD,GAChBA,EAAO,MAjBXK,EAAI,oBACAN,IACArC,EAASf,OAAOoD,GAChBA,EAAO,MAEXjQ,GAAGC,OAAO,IAAIwJ,GAAI4F,SAiBtB,SAASiC,IACL,QAASpB,EAGb9Q,QAAQC,OAAO,aACV+E,QAAQ,iBACT,CAAC,WAAY,eAAgB,YAAa,mBAEtC,SAAUuL,EAAY4B,EAAM9L,EAAM1D,GAClC6L,EAAW+B,EACXE,EAAK0B,EACL/R,EAAKiG,EA1Eb,WACI,IAAIuK,EAEJ,SAASwB,EAAOzB,GACZ,IAAID,EAAM,IAAI2B,MACd3B,EAAI4B,IAAMX,EAAMf,EAAKD,GACrBO,EAAOqB,KAAK7B,GAIhB,IADAS,EAAI,2BACCP,EAAI,EAAGA,GA5BJ,GA4BgBA,IACpBwB,EAAO,SACPA,EAAO,QAEXjB,EAAI,uBAAwBD,GA8DxBsB,GAEA,IAAIC,EAAO,CACPT,MAAOA,EACPC,KAAMA,EACNC,QAASA,GAGb,OADAvP,EAAI+P,oBAAoBD,GACjBA,KA9GnB;CCAC,WACG,aAEA,IAAIjQ,EAAMpC,EAWNuS,EACAC,EAVA3H,EAAkB,CAClB/I,KAAM,QACNT,MAAO,IACPoR,OAAQ,GACRC,WAAY,GACZC,QAAS,IACTnE,MAAM,GAOV,SAASoE,KACLJ,EAAahS,GAAGC,OAAO,iBACZ4C,KAAK,IAChBkP,EAAS,GAGb,SAASM,KAQT,SAASC,EAAK1H,EAAG2H,GACb,OAAOC,OAAO5H,EAAE7D,GAAGpG,MAAM4R,GAAMxO,QAAQ,MAAO,KAElD,SAAS0O,EAAS7H,GACd,OAAO0H,EAAK1H,EAAG,SAQnB,SAAS8H,EAAO9H,GACZ,OAAoBA,EAfXD,SAASuH,WAeOO,EAAS7H,GAA2B,EAArB0H,EAAK1H,EAAG,WAAmB,KAGvE,SAAS+H,EAAUlJ,EAAIkB,GACnB,IAAIC,EAAI,CACAnB,GAAIA,EACJkB,SAAUA,EACV9C,IAAI,EACJd,GAAI,MAER6L,EAAM,CACF5G,KAAM6G,EACN5L,KAAM6L,EACNC,OA2CR,SAAqBxH,GACbX,EAAE/C,GACFiL,EAAUvH,GAEVsH,EAAUtH,GAEd,OAAOX,EAAE/C,IAhDL2B,MAmDR,WACI,OAAOoB,EAAE7D,GAAGlE,KAAK,KAnDbD,OAsDR,SAAqB2P,GACjB,OAAO3H,EAAE7D,GAAGnE,OAAO2P,IAtDf1R,MAAOmS,EACPpS,OAAQqS,EACRC,KAqER,WACI,OAAOtI,EAAE7D,GAAGiE,OAAOmI,yBArEfC,UAwER,WACI,OAAOxI,EAAE/C,IAxELL,QA2ER,SAAiBoB,EAAKyK,GAClB,OAAOzI,EAAE7D,GAAGS,QAAQoB,EAAKyK,IA3ErBtM,GA8ER,WACI,OAAO6D,EAAE7D,KA/Db,SAAS8L,EAAUtH,GACf,IAAI+H,EAAQ9T,EAAGsB,IAAIyK,IAAO8G,EAC1BzH,EAAE/C,IAAK,EACP+C,EAAE7D,GAAGoI,aAAaC,SAASxE,EAAED,SAASwH,SACjC9I,KAAK,MAAOiK,GACZ3S,MAAMiK,EAAED,SAASrJ,KAAasJ,EA5D9BD,SAASsH,OAeC,MA8CVtR,MAAM,UAAW,GAG1B,SAASmS,EAAUvH,GACf,IAAI+H,EAAQ9T,EAAGsB,IAAIyK,IAAO8G,EACtBkB,EAAa3I,EAAED,SAASqD,KAAO,EAAI,EACvCpD,EAAE/C,IAAK,EACP+C,EAAE7D,GAAGoI,aAAaC,SAASxE,EAAED,SAASwH,SACjC9I,KAAK,MAAOiK,GACZ3S,MAAMiK,EAAED,SAASrJ,KAAMoR,EAAO9H,IAC9BjK,MAAM,UAAW4S,GAoB1B,SAASP,EAAW3S,GAChB,QAAU8E,IAAN9E,EACA,OAAOoS,EAAS7H,GAEpBA,EAAE7D,GAAGpG,MAAM,QAASN,EAAI,MAG5B,SAAS4S,EAAY9S,GACjB,QAAUgF,IAANhF,EACA,OAxFDmS,EAwFkB1H,EAxFV,UA0FXA,EAAE7D,GAAGpG,MAAM,SAAUR,EAAI,MAmB7B,OA/EAyK,EAAE7D,GAAKiL,EAAWpP,OAAO,OACpBkG,KAAK,KAAMW,GACXX,KAAK,QAAS,cACdnI,MAAM,UAAW,GAEtBiK,EAAE7D,GAAGpG,MAAMiK,EAAED,SAASrJ,KAAMoR,EAAO9H,IACnCoI,EAAWpI,EAAED,SAAS9J,OAClB+J,EAAED,SAAS/J,QACXqS,EAAYrI,EAAED,SAAS/J,QAG3BmR,EAAOtI,GAAMmB,EAoENgI,EAQXxT,QAAQC,OAAO,aACd+E,QAAQ,eACL,CAAC,OAAQ,UAAW,YAEpB,SAAUkB,EAAQE,EAAWC,GAiCzB,OAhCA7D,EAAO0D,EACP9F,EAAKiG,EA+BE,CACH2M,KAAMA,EACNxL,YA/BJ,SAAqB6C,EAAIc,GACrB,IAAII,EAAWvL,QAAQkI,OAAO,GAAI+C,EAAiBE,GACnD,OAAKd,EAIDsI,EAAOtI,IACP7H,EAAKoD,KAAK,kBAAoByE,EAAK,oBAC5B,OAEPjK,EAAGgU,QAAQ,WACX5R,EAAKmB,MAAM,kBAAmB0G,EAAIkB,GAE/BgI,EAAUlJ,EAAIkB,KAVjB/I,EAAKoD,KAAK,4BACH,OA4BXoG,aAhBJ,SAAsB3B,GA7B9B,IAAqBA,EA8BLsI,EAAOtI,IACHjK,EAAGgU,QAAQ,WACX5R,EAAKmB,MAAM,oBAAqB0G,GAhC/BA,EAkCOA,EAjCxBuI,EAAW/R,OAAO,IAAMwJ,GAAI4F,gBACrB0C,EAAOtI,IAkCEjK,EAAGgU,QAAQ,WACX5R,EAAKmB,MAAM,uBAAwB0G,QA5L3D;CCAC,WACG,aAEA,IAAI7H,EAAMpC,EAAIiU,EAAKrS,EAefuJ,EAEA+I,EAEAC,EAAO5F,EAAK6F,EAAMC,EAAMhF,EAjBxBxE,EAAkB,CACd2D,KAAM,KAEV3N,EAAI,OACJF,EAAI,MACJkO,EAAO,iBACPyF,EAAM,GACNC,EAAO,GACPC,EAAY,GACZC,EAAY,GACZC,EAAW,GACXC,EAAU,EAGV5F,EAAO,GAKP6F,EAAU,CACVC,OAAQ,IACRC,MAAO,IACPC,UAAW,KACXC,UAAW,IACXC,UAAW,UACXC,QAAS,UACTC,WAAY,UACZC,UAAW,WAGXC,EAAiB,CACjB,aAAc,eAAgB,WAAY,gBAe9C,SAASnS,EAAWqE,EAAIwH,EAAMuG,GAC1B,IAAIC,EAAS,EACTC,EAAS,OAASF,EAAK,KA8C3B,OAJAvG,EAAK0G,QAAQ,SAAUC,EAAGlE,IAxC1B,SAAmBjK,EAAIoO,EAAGnE,GACtB,IAAIpI,EAAMoM,EAAShE,EACfoE,EAAK,EACLC,EAAStO,EAAGnE,OAAO,KAAKkG,KAAK,aAAc,UAC3CwM,EAAOvO,EAAGnE,OAAO,KAAKkG,KAAK,CACvBmG,MAASrG,EACT2M,UAAW9B,EAAI+B,UAAUT,EAAQ,KAGzCI,EAAEF,QAAQ,SAAUQ,GAChB,IAAIC,EAAID,EAAE,GACNE,EAAIF,EAAE,GAEA,MAANC,IACAL,EAAOzS,OAAO,QAAQC,KAAK6S,GAE3BJ,EAAK1S,OAAO,QAAQC,KAAK6S,GACpB5M,KAAK,CACFmG,MAAS,MACTN,EAAGyG,IAEXE,EAAK1S,OAAO,QAAQC,KAAK8S,GACpB7M,KAAK,CACFmG,MAAS,OACTN,EAAGyG,KAIfA,GAAMlB,IAGV,IACI0B,EADOP,EAAOrK,OAAO0D,UACX7N,MAAQsT,EACtBmB,EAAKvG,UAAU,SAASjG,KAAK,IAAK8M,GAClCP,EAAOhG,SAEP,IAAI6D,EAAOoC,EAAKtK,OAAO0D,UACvBqG,GAAU7B,EAAKrS,MAAQoT,EAIvB4B,CAAU9O,EAAImO,EAAGlE,KAGdjK,EAAGiE,OAAO0D,UAAU9N,OAG/B,SAASkV,IACL,IAAIC,EAAOlH,EAAME,UAAU,UAAUR,KAAKA,GAE1CmF,EAASK,EAEMgC,EAAKrJ,QACf9J,OAAO,KACPkG,KAAK,CACFmG,MAAS,UAGR5F,KAAK,SAAU2M,EAAGhF,GACvB,IAEIiF,EAtEJtH,EAoEI5H,EAAK/G,GAAGC,OAAOsD,MACf2S,EAAiB,QAAXF,EAAEG,KAGZpP,EAAG+B,KAAK,YAAa2K,EAAI+B,UAAU,EAAG9B,IAElCwC,GA1EJvH,EAAIqF,EAAU,EAAI,EA2EDjN,EA1ElBnE,OAAO,QACLkG,KAAK,CAAEmG,MAAS,WAAYmH,GAAI,EAAGC,GAAI1H,EAAG2H,GAAI,EAAGC,GAAI5H,IA0ElD+E,GAAUM,IAEViC,EAAKvT,EAAWqE,EAAIiP,EAAEzH,KAAMyC,GAC5B0C,GAAUuC,KAIlB,IAAIO,EAAO3H,EAAM7D,OAAO0D,UACpB+H,EAAQD,EAAK3V,MAAc,EAANiT,EACrB4C,EAAQF,EAAK5V,OAASmT,EAE1BlF,EAAME,UAAU,aAAajG,KAAK,KAAM0N,EAAK3V,OAC7CgO,EAAM/F,KAAK,YAAa2K,EAAI+B,WAAWiB,EAAM,GAAI3C,IACjDD,EAAK/K,KAAK,CACNjI,MAAO4V,EACP7V,OAAQ8V,EACRnB,UAAW9B,EAAI+B,WAAWiB,EAAM,EAAE3C,EAAK,KAuB/C,SAAS6C,EAAWC,EAAKC,GACrB,IAAIxJ,EAAI,GAYR,OAXAwJ,EAAI5B,QAAQ,SAAUS,GAClB,IA5HWjM,EACXkM,EA2HIA,EAAIiB,EAAIE,IAAIpB,GACZtI,EAAI5N,EAAGuX,IAAIpB,GACXT,EAAK9H,GAAKA,EAAE,GACZ4J,EAAMxX,EAAGsB,IAAIoU,GACb+B,EAAQD,GAAOA,KAAU9B,EAEnB,MAANQ,IAAauB,GACb5J,EAAEsE,KAAK,EAnIAlI,EAmIWiM,EAlItBC,EAAIvB,EAAQ3K,IAAOA,EAChBjK,EAAG0X,IAAIvB,IAiIgBsB,MAGvB5J,EAGX,SAAS8J,IACL,MAAO,CAAEhB,KAAM,MAAO5H,KAAM,IAiBhC,SAAS6I,EAASR,EAAKC,GACnB,IAAI3B,EAAIiC,IAER,OADAjC,EAAE3G,KAAKoD,KAAKgF,EAAWC,EAAKC,IACrB3B,EAGX,SAASmC,EAAOC,GACZ,IAAIpC,EAAIoC,GAAO,CAAEnB,KAAM,OACvB5H,EAAKoD,KAAKuD,GAGd,SAASqC,EAAcC,GACnB,IAKIC,EArEUZ,EACVzJ,EACAsK,EACA1V,EACA2V,EAwCef,EAAKC,EACpB3B,EAPU2B,EACV3B,EAyBA0C,EAAK,cACLC,EAAO7X,GAAG4W,IAAIY,EAASM,YACvBC,EAAOP,EAASQ,aAChBC,EAAOjY,GAAG4W,IAAIY,EAASU,UACvBC,EAAQX,EAASY,aApEPvB,EAuEEoB,EAAKnB,IAAIc,GAtErBxK,EAAI5N,EAAGuX,IAAIF,GACXa,EAAItK,GAAKA,EAAE7D,OAEXoO,EADA3V,EAAK,EAoETyV,EAjEIC,IACAtK,EAAE6H,QAAQ,SAAUC,GAChB1V,EAAGuX,IAAI7B,IAAMyC,IACbnY,EAAGoM,IAAIsJ,IAAMlT,MAEb2V,IAAOD,GAAK1V,IAAO0V,GACZtK,EAGR,KAyDP6K,EAAK5I,OAAOuI,GAIRH,EAFCA,GACOQ,EAAK7O,OACAiP,OAGjB9J,EAAO,GAEP8I,EAAOD,EAASS,EAAME,IACtBV,IACAA,EAAO7X,EAAGuX,IAAIU,EAAK,KAvCAb,EAuCoBqB,EAvCfpB,EAuCqBY,EAtCzCvC,EAAIiC,IACRN,EAAI5B,QAAQ,SAAU7H,GAClB8H,EAAE3G,KAAKoD,KAAKgF,EAAWC,EAAKxJ,MAEzB8H,GAkC8CkC,EAASa,EAAMR,IACpEJ,IACAA,GA/CcR,EA+CEsB,GA9CZjD,EAAIiC,KACN5I,KAAKoD,KAAKkF,GACL3B,IAoDX,SAASoD,EAAQd,GACb5D,EAAO7F,EAAInL,OAAO,KACbkG,KAAK,CACFmG,MAAO,OACPC,QAAS,IAGjB2E,EAAOD,EAAKhR,OAAO,QACdkG,KAAK,KAAM,GAEhB8K,EAAKhR,OAAO,QACPC,KAfMzB,EAAGK,OAAO,oBACdC,CAAK,aAePoH,KAAK,CACFmG,MAAO,QACPgH,GAAI,QACJV,UAAW9B,EAAI+B,WAAW1B,EAAK,KAGvCjF,EAAQ+E,EAAKhR,OAAO,KACpB2U,EAAcC,GACd1B,IAEAyC,EAAM,GAOV,SAASA,EAAMC,GACXzK,EAAIgB,UAAU,UACTI,aACAC,SAASzE,EAASqD,MAClBlF,KAAK,UAAW0P,GAoCzBpZ,QAAQC,OAAO,aACd+E,QAAQ,mBACL,CAAC,OAAQ,YAAa,iBAAkB,cAExC,SAAUkB,EAAQG,EAAMgT,EAAOvW,GAwB3B,SAASwW,IAEL,QADA3K,EAAM4F,EAAM1T,OAAO,QACVuJ,UAzEjB+O,EAAM,GAoBNxK,EAAIoB,aACCG,MAAM3E,EAASqD,KAAO,IACtBqB,UAsDc,GAKf,OAjCAzN,EAAO0D,EACP9F,EAAKiG,EACLgO,EAAMgF,EACNrX,EAAKc,EA8BE,CACHyW,cA7BJ,SAAuBpO,GACnBI,EAAWvL,QAAQkI,OAAO,GAAI+C,EAAiB7K,EAAGyF,IAAIsF,IACtDoJ,EAAQ3T,GAAGC,OAAO,eA4BlB2Y,cAzBJ,SAAuBpB,GAEnB,GADAzJ,EAAM4F,EAAM1T,OAAO,OAjCvB4Y,EAAa,0CADCrB,EAmCQA,IAjCRhY,EAAGyF,IAAIuS,KAAahY,EAAGsZ,cAActB,GAIjD3C,EAAekE,MAAM,SAAUvQ,GAAO,OAAOA,KAAOgP,MACtD5V,EAAKoD,KACD6T,EACA,+CACAhE,GAEG,IATPjT,EAAKoD,KAAK6T,EAAa,2BAChB,IAgCC,OAAO,KApCvB,IAAsBrB,EACdqB,EAqCQ9K,EAAIvE,SApDhBuE,EAAM4F,EAAM/Q,OAAO,OACdkG,KAAK,CACFjI,MAAOR,EACPO,OAAQT,EACR2O,QAAST,IAkDLiK,EAAQd,IAERkB,KAiBJA,cAAeA,MA1V/B;CCAC,WACG,aAEA,IAAI9W,EAAMoX,EAAQxZ,EAAI0K,EAAI+O,EAEtBC,EAEJ,SAAS9G,IACL,IAMIrE,EANA/H,EAAQxG,EAAGkB,aACXyY,EAAKnT,EAAMnF,MACXuY,EAAKpT,EAAMpF,OACXyY,EAAc,GAALD,EACTE,EAAUF,EAAKC,EACfE,GAAcJ,EAAKG,GAAW,EAKlCvL,GAFAmL,EAAOlZ,GAAGC,OAAO,UAENA,OAAO,OAAO6I,KAAK,CAC1BjI,MAAOsY,EACPvY,OAAQwY,IACTzY,MAAM,UAAW,IAEpBsY,EAAGO,SAASzL,EAAK,OAAQuL,GAAS,EAAO,CAACC,EAAYF,EAAO,IAGjE,SAASrN,EAAKgD,GACV,IAAIyK,EAAOja,EAAGuX,IAAI/H,IAAQ,CAACA,GACvB0K,EAAOR,EAAKjZ,OAAO,QACvByZ,EAAK3K,UAAU,KAAKM,SAEpBoK,EAAKxE,QAAQ,SAAU0E,GACnBD,EAAK9W,OAAO,KAAKC,KAAK8W,KAG1BT,EAAKvY,MAAM,UAAW,SACtBuJ,EAAG0P,YAAW,GAGlB,SAAS3S,IACLiS,EAAKvY,MAAM,UAAW,QACtBuJ,EAAG0P,YAAW,GAGlB,SAASC,EAAWC,EAAU9K,GACtBgK,EAAOe,QAAQC,QAAQrY,aAAemY,GACtClY,EAAKmB,MAAM,iBAAkB+W,GAC7B9N,EAAKgD,IAELpN,EAAKmB,MAAM,0BAA2B+W,GAI9C1a,QAAQC,OAAO,aACd+E,QAAQ,cACL,CAAC,OAAQ,SAAU,YAAa,aAAc,eAAgB,mBAE9D,SAAUkB,EAAQ2U,EAAUxU,EAAM4G,EAAM6N,EAAMnY,GAC1CH,EAAO0D,EACP0T,EAASiB,EACTza,EAAKiG,EACLyE,EAAKmC,EACL4M,EAAKiB,EAEL,IAAIrI,EAAO,CACPO,KAAMA,EACNpG,KAAMA,EACN/E,KAAMA,EACN4S,WAAYA,GAGhB,OADA9X,EAAIoY,iBAAiBtI,GACdA,KAvEnB;CCAC,WACG,aAEA,IAAIjQ,EAEJxC,QAAQC,OAAO,cACd+E,QAAQ,cACL,CAAC,OAAQ,QAAS,YAAa,eAE/B,SAAUkB,EAAQ8U,EAAO5a,EAAI6a,GAiCzB,OAhCAzY,EAAO0D,EAgCA,CACHwR,IA/BJ,SAAa/R,EAAKoC,EAAUmT,GACxB,IAAIC,EAAUF,EAAIG,MAAMzV,GAExBqV,EAAMtD,IAAIyD,GAASE,KAAK,SAAUC,GAC9BvT,EAASuT,EAASnM,OACnB,SAAUmM,GACT,IAAIC,EAAO,iCAAmCJ,EAC9C3Y,EAAKoD,KAAK2V,EAAMD,EAASE,OAAQF,EAASnM,MACtC+L,GACAA,EAAQK,MAuBhBE,KAlBJ,SAAc9V,EAAKwJ,EAAMuM,GACrB,IAAIP,EAAUF,EAAIG,MAAMzV,GACxBqV,EAAMS,KAAKN,EAAShM,GAAMkM,KAAK,SAAUC,GACjCI,GAAatb,EAAGsB,IAAIga,EAAUC,UAC9BD,EAAUC,QAAQL,EAASnM,OAEhC,SAAUmM,GACT,IAAI1L,EAAM,oCAAsCuL,EAChD3Y,EAAKoD,KAAKgK,EAAK0L,EAASE,OAAQF,EAASnM,MAErCuM,GAAatb,EAAGsB,IAAIga,EAAUE,QAC9BF,EAAUE,MAAMhM,UArCxC;CCAC,WACG,aAEA,IAAIiM,EAAY,YAIhB7b,QAAQC,OAAO,cACV+E,QAAQ,eAAgB,CAAC,YAAa,SAAU8W,GAQ7C,SAASC,EAAQC,EAAUC,EAAMC,GAE7B,IARiBF,EACbxQ,EAOA2Q,EAAQL,EAAK9V,SAASmW,MAAM,iBAAmBN,GAC/CO,EAAYD,EAAQ,IAAMA,EAAM,GAAK,GAEzC,OAXiBH,EAWEA,GATC,WADhBxQ,EAAIsQ,EAAKE,aACwB,QAANxQ,EACfwQ,EAAW,IAAMA,GAQF,OAC1BE,GAAQJ,EAAKI,QAAU,KACvBD,GAAQH,EAAKG,QAAUG,EAmBhC,MAAO,CACHhB,MATJ,SAAe1W,GACX,OATgB2X,EAtBbR,eAuBIE,EAAQ,QAAUM,EAQK3X,EATlC,IAAoB2X,GAkBhBC,MANJ,SAAe5X,EAAM6X,EAAQL,GACzB,OATcG,EAzBXR,oBA0BIE,EAAQ,KAQWQ,EAAQL,GARGG,EAQK3X,EAT9C,IAAkB2X,OA9B9B;CCAC,WACG,aAEA,IAAI7Z,EAAMsZ,EAAM1b,EAAIyZ,EAAIoB,EAAKuB,EAAOC,EAAIza,EAEpC0a,EAKAR,EACAvW,EALAgX,EAAK,KACLC,GAAO,EACPC,EAAW,GACXC,EAAgB,GAGhBC,EAAe,GACfC,GAAgB,EAEhBC,EAAiB,EACjBC,EAAgB,GAChBC,EAAiB,EACjBC,EAAe,KAEfC,EAAkB,CAElBC,UAAW,SAAUnO,GACjB3M,EAAKmB,MAAM,iBAAkBwL,GAC7BiO,EAAejO,EAAKoO,MACpBR,EAAe5N,EAAK4N,cACPlH,QAAQ,SAAUC,EAAGlE,GAC1BkE,EAAE0H,aACFR,EAAepL,EACfpP,EAAKib,KAAK,6BAA+B3H,EAAE4H,OAG1CvO,EAAKwO,OACP9H,QAAQ,SAAUC,EAAGlE,GACxB,IAAIgM,EAAQ,GACZA,EAAM,IAAM9H,EAAEzL,IAAMyL,EAAE+H,QACtBD,EAAM9H,EAAEzL,IAAMyL,EAAEpR,KAChBmV,EAAGiE,eAAeF,MAI1BhC,MAAO,SAAUzM,GACb,IAAI4O,EAAI5O,EAAK6O,SAAW,oBACxBxb,EAAKoZ,MAAMmC,EAAG5O,GAEdsN,GAAMA,EAAG7P,KAAK,CACV,QACA,0BACAmR,MAOZ,SAASE,IA6ET,IAAyB/B,EAAMvW,EA5E3BnD,EAAKib,KAAK,qBAAsB9X,GAChC8W,GAAMA,EAAG5U,OAELzH,EAAGgU,QAAQ,SACX5R,EAAKmB,MAAM,WAAamZ,EAAc3S,OAAS,wBAEnD2S,EAAcjH,QAAQ,SAAU3H,GAC5BgQ,EAAMhQ,KAEV4O,EAAgB,GAGhBF,IADAK,EAAiB,GAiEIf,EA/DLA,EA+DWvW,EA/DLA,EAgEtB3F,QAAQ6V,QAAQqH,EAAe,SAAUiB,GACrCA,EAAKhS,GAAG+P,EAAMvW,KA9DtB,SAASyY,EAAcC,GACnB,IAAInQ,EAAInN,EAER,IACImN,EAAKoQ,KAAKC,MAAMF,EAASlP,MAC3B,MAAOqP,GAEL,OADAhc,EAAKoZ,MAAM,iCAAkCyC,EAASlP,KAAMqP,GACrD,KAMX,GAJIpe,EAAGgU,QAAQ,SACX5R,EAAKmB,MAAM,YAAauK,EAAGuQ,MAAOvQ,EAAGwQ,SAGrC3d,EAAI8b,EAAS3O,EAAGuQ,OAChB,IACI1d,EAAEmN,EAAGwQ,SACP,MAAOF,GAEL,OADAhc,EAAKoZ,MAAM,0BAA2B1N,EAAIsQ,GACnC,UAGXhc,EAAKoD,KAAK,mBAAoBsI,GAKtC,SAASyQ,IACL,IAAIC,EAEJpc,EAAKoD,KAAK,qBACV5D,GAAMA,EAAGiQ,OACT2K,GAAO,GAEHgC,EAaR,WACI,IACIlB,EAAI9R,EADJiT,EAAM9B,EAAa5S,OAGvB,KAAO8S,EAAiB4B,IAAQnB,GAC5BT,IAEArR,EAAOmR,EADPC,GAAgBA,EAAe,GAAK6B,GAEpCnB,EAAK9R,GAAQA,EAAK8R,GAGtB,OAAOA,EAxBKoB,IACRC,EAAgBrC,EAAakC,GAE7BnC,GAAMA,EAAG7P,KAAK,CACV,QACA,4CACA,6BA2BZ,SAASsR,EAAMhQ,GACP9N,EAAGgU,QAAQ,SACX5R,EAAKmB,MAAM,YAAauK,EAAGuQ,MAAOvQ,EAAGwQ,SAEzC/B,EAAGqC,KAAKV,KAAKW,UAAU/Q,IAG3B,SAASgR,EAAerC,EAAUsC,GAC9B,QAAKtC,IAAYzc,EAAGsZ,cAAcmD,MAC9Bra,EAAKoD,KAAK,OAASuZ,EAAS,0BACrB,GAMf,SAASC,IAELzC,EAAK,KACLC,GAAO,EAEPjX,EADAuW,EAHAQ,OAAc3W,EAKd+W,EAAgB,GAChBD,EAAW,GACXE,EAAe,GACfC,GAAgB,EAEhBC,EAAiB,EACjBC,EAAgB,GAChBC,EAAiB,EAGrB,SAAS4B,EAAgB5T,EAAMkU,GAC3B,IAAI9C,EAAUpR,GAAQA,EAAKoR,QAAW,KAgBtC,OAdAG,EAAcvR,EAEd+Q,EAAOmD,GAAUvD,EAAKI,OACtBvW,EAAMsV,EAAIqB,MAAM,OAAQC,EAAQ8C,GAEhC7c,EAAKmB,MAAM,oCAAsCgC,IACjDgX,EAAKH,EAAM8C,aAAa3Z,MAEpBgX,EAAG4C,OAAStB,EACZtB,EAAG6C,UAAYpB,EACfzB,EAAG8C,QAAUd,EAEbpQ,EAAU,iBAAkB,CAAEmR,MAAOC,YAElCha,EAGX,SAAS3B,EAAa4b,GAClB,IACIC,EAAO,GAEX,GAAIX,EAAeU,EAAY,gBAC3B,OAAO,KAEPhf,GAAG4W,IAAIoI,GAET/J,QAAQ,SAAUiK,EAAStM,GACzB,IAAIuM,EAAK3f,EAAGsB,IAAI8R,IAAQpT,EAAGsB,IAAI8R,EAAIsM,IAC9BC,EAKDlD,EAASiD,GACTD,EAAKtN,KAAKuN,GAEVjD,EAASiD,GAAWC,EAPpBvd,EAAKoD,KAAKka,EAAU,6BAUxBD,EAAK1V,QACL3H,EAAKoD,KAAK,8BAA+Bia,GAIjD,SAAStV,EAAeqV,GAGpB,GAAIV,EAAeU,EAAY,kBAC3B,OAAO,KAEPhf,GAAG4W,IAAIoI,GAET/J,QAAQ,SAAUiK,UACTjD,EAASiD,KAKxB,SAASE,EAAgBjY,GACrB,IAAIsC,EAAK8S,IACLhR,EAAK/L,EAAGsB,IAAIqG,GACZqR,EAAI,CAAE/O,GAAIA,EAAI8B,GAAIA,GAQtB,OANIA,EACA+Q,EAAc7S,GAAM+O,GAEpB5W,EAAKoZ,MAAM,kDACXxC,EAAEwC,MAAQ,uBAEPxC,EAGX,SAAS6G,EAAmB9B,GACxB,IAAI9T,EAAKjK,EAAGyF,IAAIsY,IAASA,EAAK9T,GAE9B,IAAKA,EAED,OADA7H,EAAKoD,KAAK,6CAA8CuY,GACjD,KAEPjB,EAAc7S,WAGP6S,EAAc7S,GAI7B,SAASkE,EAAU2R,EAAQxB,GACvB,IAAIxQ,EAAK,CACDuQ,MAAOyB,EACPxB,QAASA,GAAW,IAGxB9B,EACAsB,EAAMhQ,GAEN4O,EAAcvK,KAAKrE,GAI3B,SAASiS,EAAgBC,GACrB3D,EAAK2D,EAGT,SAASC,EAAmBC,GACxBte,EAAKse,EAITtgB,QAAQC,OAAO,cACd+E,QAAQ,mBACL,CAAC,OAAQ,YAAa,YAAa,eAAgB,eAAgB,QAEnE,SAAUkB,EAAQqa,EAAQla,EAAMyU,EAAM0F,EAAOC,GAUzC,OATAje,EAAO0D,EACP4V,EAAOyE,EACPngB,EAAKiG,EACLwT,EAAKiB,EACLG,EAAMuF,EACNhE,EAAQiE,EAERzc,EAAaqZ,GAEN,CACH+B,WAAYA,EACZL,gBAAiBA,EACjB/a,aAAcA,EACduG,eAAgBA,EAChByV,gBAAiBA,EACjBC,mBAAoBA,EACpB1R,UAAWA,EACXmS,YAAa,WAAc,OAAO9D,GAClCQ,aAAc,WAAc,OAAOA,GAAgB,YAEnDrC,iBAAkBoF,EAClBzN,oBAAqB2N,MAnTrC;CCAC,WACG,aAEArgB,QAAQC,OAAO,cACV+E,QAAQ,QAAS,CAAC,OAAQ,SAAUxC,GAYjC,MAAO,CACH8c,aAXJ,SAAsB3Z,GAClB,IAAIgX,EAAK,KACT,IACIA,EAAK,IAAIgE,UAAUhb,GACrB,MAAO6Y,GACLhc,EAAKoZ,MAAM,+BAAgC4C,GAE/C,OAAO7B,OAbvB;CCEC,WACG,aAEA,IAAIna,EAAMwY,EAAO5a,EAEbwgB,EAAQhgB,GAAG4W,MACXqJ,EAAmB,YAUvB,SAASC,IACLF,EAAQhgB,GAAG4W,MAIf,SAASuJ,EAAc1W,GACnB,IAAKjK,EAAGoM,IAAInC,GACR,OAAO,KAEX,IAjBYA,EAiBR1E,EAhBU,OADF0E,EAiBKA,GAhBV,GACIwW,EAAmBxW,EAAGiH,MAAM,GAAK,YAErCjH,EAAK,YAcR2W,EAAUJ,EAAMlJ,IAAIrN,GAwBxB,OAtBK2W,EAmBDA,EAAQC,KAAKC,WAAY,IAlBzBF,EAAUhG,EAAMtD,IAAI/R,IAEZsb,KAAO,CACX5W,GAAIA,EACJ1E,IAAKA,EACLub,WAAW,GAGfF,EAAQ3F,KAAK,SAAUC,GACnB0F,EAAQG,SAAW7F,EAASnM,MAC7B,SAAUmM,GACT9Y,EAAKoD,KAAK,yCAA2CD,EACjD2V,EAASE,OAAQF,EAASnM,QAGlCyR,EAAMQ,IAAI/W,EAAI2W,IAMXA,EAGX,IAAIK,EAAqB,CACrBC,UAAW,SACXC,WAAY3gB,GAAG4gB,IAAIC,WACnBC,YAAa,IACbC,aAAc,KAGlB,SAASC,EAAoBC,EAAU1W,GACnC,IAAII,EAAWvL,QAAQkI,OAAO,GAAImZ,EAAoBlW,GAClD2W,EAAaD,EAASE,QAAQxW,EAAS+V,WACvCU,EAAUC,SAASC,QAAQL,EAAUC,GACrCK,EAAO5W,EAASgW,WAChBa,EAAM7W,EAASmW,YACfW,EAAM9W,EAASoW,aACfjd,EAAO9D,GAAG4gB,IAAI9c,OAAO6c,WAAWY,GAIpC,OAFAG,EAAkBH,EAAME,EAAKD,EAAK1d,EAAMsd,EAAS7W,EAAKoX,aAE/C,CACHC,QAASR,EACTS,QAAS/d,EACT6G,SAAUA,GAIlB,SAAS+W,EAAkBH,EAAME,EAAKD,EAAK1d,EAAMsd,EAASO,GACtD,IAAIG,EAAMH,GAAe,EAEzBJ,EAAKQ,MAAM,GAAGvM,UAAU,CAAC,EAAG,IAE5B,IAAInI,EAAIvJ,EAAKke,OAAOZ,GAChBhL,EAAK/I,EAAE,GAAG,GACVgJ,EAAKhJ,EAAE,GAAG,GACViJ,EAAKjJ,EAAE,GAAG,GACVkJ,EAAKlJ,EAAE,GAAG,GACV4U,EAAK3L,EAAKF,EACVH,EAAKM,EAAKF,EACV7U,GAAK4U,EAAKE,GAAM,EAChB3H,GAAK0H,EAAKE,GAAM,EAEhB2L,EAAKT,EAAMU,KAAKC,IAAIH,EAAKT,EAAKvL,EAAKuL,GAAQM,EAC3CO,EAAI,CAACb,EAAM,EAAIU,EAAI1gB,EAAGggB,EAAM,EAAIU,EAAIvT,GAExC4S,EAAKQ,MAAMG,GAAG1M,UAAU6M,GAG5BjjB,QAAQC,OAAO,WACV+E,QAAQ,iBAAkB,CAAC,OAAQ,QAAS,YAC7C,SAAUkB,EAAQgd,EAAS7c,GAMvB,OALA7D,EAAO0D,EACP8U,EAAQkI,EACR9iB,EAAKiG,EAGE,CACHya,WAAYA,EACZC,cAAeA,EACfa,oBAAqBA,EACrBU,kBAAmBA,MA/GnC;CCFC,WACG,aAEA,IAAI9f,EAAMpC,EAAIiU,EAAK8O,EAGf3P,EADAmK,EAAS/c,GAAG4W,MAGZ4L,EAAQ,gBACRC,EAAK,qBACLC,EAAM,uBAGV,SAAS1d,EAAKgK,GACVpN,EAAKoD,KAAKwd,EAAQxT,GAGtB,SAAS2T,EAASna,EAAKC,EAAO4F,EAAMuU,EAAW3D,IACtC2D,GAAa7F,EAAOjG,IAAItO,GACzByW,EAAKtN,KAAKnJ,GAEVuU,EAAOyD,IAAIhY,EAAK,CAAEiB,GAAIjB,EAAKqa,GAAIxU,EAAM6G,EAAGzM,IAIhD,SAASqa,EAAW7D,EAAM8D,GACtB,IAAIC,EAAqB,GAAf/D,EAAK1V,OAQf,OALKyZ,GACD/D,EAAKhK,QAAQ,SAAUxL,GACnBzE,EAAK+d,EAJH,kBAIuBtZ,EAAK,OAG/BuZ,EAgBX,SAASC,IACLlG,EAAS/c,GAAG4W,MAGhB,SAASxE,IACLmQ,EAAGW,mBAAmBtQ,GAG1B,SAASsK,EAAe3O,EAAMqU,GAC1B,IAtBkBO,EAASJ,EACvBC,EAqBA/D,EAAO,GACPmE,EAAS,GAcb,OAZAhkB,QAAQ6V,QAAQ1G,EAAM,SAAU9F,EAAOD,GACnC,IAAI6a,EAAM,IAAM7a,EACZqa,EAAKtU,EAAK8U,GAEd,GAAe,MAAX7a,EAAI,GAAY,CAChB,IAAKqa,EAED,YADAO,EAAOzR,KAAK0R,GAGhBV,EAASna,EAAKC,EAAOoa,EAAID,EAAW3D,MAGrC6D,EAAW7D,EAAMwD,KArCGM,EAqCyBN,GApChDO,EAAwB,IADVG,EAqC0BC,GApC1B7Z,SAId4Z,EAAQlO,QAAQ,SAAUoO,GACtBre,EAAK+d,EAJH,8BAIuBM,EAAM,OAGhCL,GA+BX,SAASM,EAAiB/U,EAAMqU,GAC5B,IAAI3D,EAAO,GACP4D,EAAKtU,EAAKgV,SAEd,OAAKV,GAKLzjB,QAAQ6V,QAAQ1G,EAAM,SAAU9F,EAAOD,GACpB,MAAXA,EAAI,IACJma,EAASna,EAAKC,EAAOoa,EAAID,EAAW3D,KAGrC6D,EAAW7D,EAAMyD,KATpB1d,EAAK0d,EAAM,iCACJ,GAWf,SAASc,IACL,OAAOzG,EAAO3T,OAGlB,SAASqa,EAAMha,GACX,OAAOsT,EAAOjG,IAAIrN,GAGtB,SAASia,EAAaja,GAClB,OAAOsT,EAAO4G,IAAIla,GAGtB,SAASma,EAASC,EAAMC,EAAUC,GAC9B,IAAIC,EAAOxkB,EAAGuX,IAAI+M,IAAaN,IACbO,GAGdF,EAAKI,KAAK,MAGdD,EAAK/O,QAAQ,SAAUxL,GACnB,IAAIya,EAAIT,EAAMha,GACd,GAAIya,EAAG,CACH,GAAIH,GAC2C,EAAvCF,EAAK5jB,OAAO,UAAYikB,EAAEza,IAAI0a,OAC9B,OAGRN,EAAKjhB,OAAO,UACPkG,KAAK,CAAEW,GAAIya,EAAEza,GAAIqF,QAASoV,EAAErB,KAC5BjgB,OAAO,QAAQkG,KAAK,IAAKob,EAAEhP,MAK5C,SAASsE,EAASzZ,EAAMqkB,EAASD,EAAME,EAASC,GAC5C,IAAIC,EAAKJ,GAAQ,GACbK,IAAQH,EAERI,EAAM,CACF5jB,MAAO0jB,EACP3jB,OAAQ2jB,EACRtV,MAAS,QACTyV,aAAc,IAAMN,GAM5B,OAXU5kB,EAAGuX,IAAIuN,KASbG,EAAIlP,UAAY9B,EAAI+B,UAAU8O,IAE3BvkB,EAAK6C,OAAO,OAAOkG,KAAK2b,GAAKjd,QAAQ,UAAWgd,GAI3DplB,QAAQC,OAAO,WACd+E,QAAQ,eACL,CAAC,OAAQ,YAAa,iBAAkB,mBAExC,SAAUkB,EAAQG,EAAMgT,EAAOkM,GAiB3B,OAhBA/iB,EAAO0D,EACP9F,EAAKiG,EACLgO,EAAMgF,EACN8J,EAAKoC,EAEL/R,EAAM,CACFqQ,MAAOA,EACP7Q,KAAMA,EACN8K,eAAgBA,EAChBoG,iBAAkBA,EAClBE,IAAKA,EACLC,MAAOA,EACPC,aAAcA,EACdE,SAAUA,EACVpK,SAAUA,MAKrBoL,IAAI,CAAC,OAAQ,SAAUhjB,GACpBA,EAAKmB,MAAM,wBACXkgB,OA7KR;CCAC,WACG,aAGA,IAAI4B,EAAQ,CACJC,MAAO,kBACPC,KAAM,2sBAaNC,MAAO,cACPC,KAAM,0+BA4BVC,EAAa,mLAQbC,EAAU,4FAGVC,EAAU,8CAIVC,EAAW,yJAUXC,EAAQ,m7BA2BRC,EAAe,CACXhC,SAAU,cAEV3G,WAAY,wNAKZ4I,QAAS,4EAGTC,MAAO,ydAUPza,KAAM,0KAON0a,OAAQP,EAAUE,EAElBM,OAAQC,mMAERC,MAAOT,EAAUC,EAEjBS,IAAKX,EAAUG,EAEfS,UAAWX,EAAUE,EAErBU,aAAcb,EA/CN,wdAiDRc,UAAW,o3BAmBXC,WAAY,sRAMZC,WAAY,gIAMZC,MAAO,2sBAaPC,MAAO,2tBAcPC,KAAM,oVAONC,KAAM,shBAUNC,QACD,kHAGCC,QAAS,8vBAgBTC,IAAK,4pBAaLC,MAAO,oEAGPC,QAAS,iZASTC,SAAU,mFAGVC,OAAQ,wFAIRC,UAAW7B,EACX,y0BAiBA8B,UAAW9B,EACX,6bASA+B,WAAY/B,EACZ,4lCAsBAgC,WAAYhC,EACZ,+JAIAiC,cAAejC,EACf,wKAUAkC,QAAS,8XAQTC,QAAS,0dASTC,MAAO,8oBAYP1Q,IAAK,24DAiCL2Q,YAAa,ysBAabC,QAAS,qwBAcTC,QAAS,qdASTC,UAAW,+wBAcXC,eAAgB,2PAMhBC,WAAY,6NAKZC,WAAY,0NAKZC,cAAe,8KAKfC,WAAY,ucASZC,MAAO,w4BAgBPC,SAAU,2kBAWVC,OAAQ,kFAIZC,EAAe,CACX5E,SAAU,YAEV6E,UAAW,4DAEXC,MAAO,4FAGPC,WAAY,uHAGZC,aAAc,0HAIdC,KAAM,mCAENC,MAAO,eAEPC,KAAM,2BAENrX,KAAM,oBAGVsX,EAAa,CACTC,OAAQ,cACRC,MAAO,sZAeXC,EAAY,4SAOZC,EAAkB,0gCAsClBC,EAAa,svBAcbC,EAAc,CACV1F,SAAU,cAEV2F,QAAS,4UAQTC,MAAO,4iBAWPC,YAAa,4gCAoBbC,YAAa,4uCAwBbC,QAAS,4mCAsBTC,SAAUR,EAEVS,QAAST,EAAkBD,EAE3BW,SAAU,0rCAuBVC,aAAc,0WAQdC,SAAU,gyCAwBVC,OAAQ,6aASRC,UAAW,skBAYXC,UAAW,80BAgBXC,UAAW,sfAUXC,UAAW,+dAUXC,cAAe,inDA6BfC,OAAQ,6QAMRC,OAAQ,6QAMRC,QAAS,+sBAcTC,aAAcC,+0BAEdC,QAAS,oKAITC,YAAa,wsBAebC,WAAY,saASZC,UAAW,kbASXC,aAAc,8qBAadC,UAAW,66CA4BXC,QAAS,8kBAWTC,aAAc,6UAOdC,aAAc,s0BAkBdC,MAAOhC,EAEPiC,YAAajC,EAAaF,EAE1BoC,cAAe,kgDAgCfC,YAAa,goBAcbC,iBAAkB,mZAUlBC,gBAAiB,oxBAiBjBC,WAAY,mgEAqCZC,WAAY,oyBAgBZC,MAAO,+oBAaPC,MAAO,iaASPC,MAAO,6sBAcPC,MAAO,weAWPC,OAAQ,2ZASRC,kBAAmB,yrCAuBnBC,SAAU,inBAaVC,cAAe,4lBAafC,OAAQ,2kBAaRC,eAAgB,mbAUhBC,gBAAiB,2kBAajBC,SAAU,onBAcdC,EAAc,CACVC,MAAO,cACPC,KAAM,udAad,SAASpJ,EAAmBqJ,GACxBA,EAAMrP,eAAe2H,GACrB0H,EAAMjJ,iBAAiBiC,GACvBgH,EAAMjJ,iBAAiB6E,GACvBoE,EAAMrP,eAAeyL,GACrB4D,EAAMjJ,iBAAiB2F,GACvBsD,EAAMrP,eAAekP,GAIzBhtB,QAAQC,OAAO,WACd+E,QAAQ,mBACL,CAAC,WACG,MAAO,CACH8e,mBAAoBA,MAhxCpC;CCAC,WACG,aAEA,IAAIthB,EAAMqX,EAAIxF,EAEV+Y,EAAW,GACXC,EAAaD,EAAW,GACxB1d,EAAU,OAAS0d,EAAW,IAAMA,EAEpCE,EAAe,CACfC,OAAQ,YACRC,SAAU,QAEVpE,KAAM,OACNC,MAAO,QACPC,KAAM,OACNrX,KAAM,OAENyV,OAAQ,SACRD,SAAU,WACVF,MAAO,QACPC,QAAS,UACTiG,MAAO,SAEPtG,KAAM,OAENC,QAAS,UACTf,MAAO,QACPgB,QAAS,UAET/R,QAAS,aACTE,UAAW,eAEXkY,YAAa,UAEb9hB,KAAM,OACN+hB,eAAgB,SAChBC,cAAe,QACfC,YAAa,MAEbC,iBAAkB,UAElBC,MAAO,aAEPC,YAAa,SACbrG,UAAW,YACXC,UAAW,YACXC,WAAY,aACZC,WAAY,aACZC,cAAe,gBAEfkG,oBAAqB,aACrBC,gBAAiB,SACjBC,oBAAqB,aAErBC,SAAU,OACVC,aAAc,MACdC,YAAa,OACbC,eAAgB,aAEhBC,SAAU,OACVC,UAAW,UACXC,SAAU,SACVC,UAAW,QACXC,UAAW,aACXC,YAAa,iBACbC,YAAa,QACbC,SAAU,QAGd,SAASC,IACL,IAAI3jB,EAAOzK,GAAGC,OAAO,QACjB8N,EAAMtD,EAAKxK,OAAO,mBAMtB,OAJI8N,EAAIvE,UACJuE,EAAMtD,EAAK7H,OAAO,OAAOkG,KAAK,KAAM,gBAChClG,OAAO,QAERmL,EAAI9N,OAAO,QAGtB,SAASouB,EAASniB,EAAKkY,EAASD,EAAMmK,EAAcC,GAChD,IAGSrK,EAHL1C,EAAM2C,GAAQ,GACdqK,EAASD,GAAY,eACrBE,EAAMrK,GAAW,UAGjBkK,GACArV,EAAG2K,SAASwK,IAAqB,CAACK,IAAM,IAU5CvK,EAPMhY,EAAItJ,OAAO,OAAOkG,KAAK,CACzBmG,MAASuf,EACT3tB,MAAO2gB,EACP5gB,OAAQ4gB,EACR1S,QAASA,IAGLlM,OAAO,KAAKkG,KAAK,CACrBmG,MAAS,UAGXrM,OAAO,QAAQkG,KAAK,CAClBjI,MAAO2rB,EACP5rB,OAAQ4rB,EACRpe,GAAIqe,IAGRvI,EAAEthB,OAAO,OAAOkG,KAAK,CACjBjI,MAAO2rB,EACP5rB,OAAQ4rB,EACRvd,MAAS,QACTyV,aAAc,IAAM+J,IAI5B,SAASC,EAAgBxiB,EAAKyiB,EAASxK,EAAMmK,EAAcC,GACvDF,EAASniB,EAAKwgB,EAAaiC,GAAUxK,EAAMmK,EAAcC,GACzDriB,EAAIjM,OAAO,SAASuH,QAAQmnB,GAAS,GAGzC,SAAS/mB,EAAiBsE,EAAKyiB,EAASxK,GACpCuK,EAAgBxiB,EAAKyiB,EAASxK,GAAM,GAGxC,SAASyK,EAAc7uB,EAAMqkB,EAASyK,GAClC,IAAIJ,EAAMxV,EAAGyK,aAAaU,GAAWA,EAAU,QAC/C,OAAOrkB,EAAK6C,OAAO,OAAOkG,KAAK,CAC3B4b,aAAc,IAAM+J,EACpB5tB,MAAOguB,EACPjuB,OAAQiuB,IAIhB,SAASC,EAAY/uB,EAAMgvB,EAAQ3K,GAC/B,IAAI5C,EAAe,IAATuN,EACNC,GAASxN,EAAM,EACf0C,EAAInkB,EAAK6C,OAAO,KACXkG,KAAK,QAAS,oBAUvB,OARAob,EAAEthB,OAAO,UAAUkG,KAAK,IAAKimB,GAE7B7K,EAAEthB,OAAO,OAAOkG,KAAK,CACjB4b,aAAc,IAAMN,EACpBvjB,MAAO2gB,EACP5gB,OAAQ4gB,EACRjM,UAAW9B,EAAI+B,UAAUwZ,EAAOA,KAE7B9K,EAGX,SAAS+K,IACL,SAASC,EAAGhjB,EAAKuiB,GACbviB,EAAIvL,MAAM,UAAW,gBACrBiH,EAAiBsE,EAAKuiB,EAAK,IAC3BviB,EAAI1E,QAAQ,gBAAgB,GAGhC,MAAO,CACH2nB,IAAK,SAAUjjB,GAAOgjB,EAAGhjB,EAAK,YAC9BkjB,KAAM,SAAUljB,GAAOgjB,EAAGhjB,EAAK,cAC/BmjB,KAAM,SAAUnjB,GAAOA,EAAImD,WAInC,SAASigB,EAAoBC,EAAQnL,GAC7BsI,EAAa6C,GACb3tB,EAAKoD,KAAK,eAAgBuqB,EAAQ,8BAElC7C,EAAa6C,GAAUnL,EACvBnL,EAAG2K,SAASwK,IAAqB,CAAChK,IAAU,IAKpDhlB,QAAQC,OAAO,WACVC,UAAU,OAAQ,CAAC,cAAe,SAAUsG,GACzC,MAAO,CACH4pB,SAAU,IACV3vB,KAAM,SAAUJ,EAAOK,EAAS2vB,GAC5BA,EAAMC,SAAS,SAAU,WACrB,IAAIxjB,EAAMlM,GAAGC,OAAOH,EAAQ,IAC5BoM,EAAI6C,UAAU,KAAKM,SACnBzJ,EAAGgC,iBAAiBsE,EAAKujB,EAAMF,OAAQE,EAAME,iBAM5DvrB,QAAQ,cAAe,CAAC,OAAQ,eAC7B,iBAEJ,SAAUkB,EAAQ4U,EAAMzB,GAKpB,OAJA7W,EAAO0D,EACP2T,EAAKiB,EACLzG,EAAMgF,EAEC,CACH4V,SAAUA,EACVK,gBAAiBA,EACjB9mB,iBAAkBA,EAClBgnB,cAAeA,EACfE,YAAaA,EACbG,UAAWA,EACXK,oBAAqBA,MA5MrC;CCEC,WACG,aAEA,IAAI1tB,EAAMguB,EAAIC,EAGd,SAASC,EAAYC,EAAUC,EAASvmB,EAAIc,GACxC,IAAI6V,EAAUyP,EAAI1P,cAAc6P,GAC5BC,EAAqBL,EAAGM,QAE5B,OAAK9P,GAKLA,EAAQ3F,KAAK,WAES2F,EAAQG,SAASY,QAEfgP,eAAe1mB,KAC3Bc,EAAKmW,UAAYjX,GAGzB,IAAI2mB,EAAMP,EAAI7O,oBAAoBZ,EAAQG,SAAUhW,GAEpD0lB,EAAmBI,QAAQD,EAAIzlB,SAASgW,YAExCoP,EAAShhB,UAAU,QACdR,KAAK6hB,EAAIxO,QAAQ0O,UACjB5jB,QACA9J,OAAO,QACPkG,KAAK,IAAKsnB,EAAIvO,SAEnB0O,EAAQhmB,EAAKimB,WAEVP,EAAmB7P,UAxBtBxe,EAAKoD,KAAK,uBAAyBgrB,IAC5B,GA4Bf,SAASS,EAAkBV,EAAUxlB,GACjC,IAAI6V,EAAUyP,EAAI1P,cAAc,cAC5B8P,EAAqBL,EAAGM,QAE5B,OAAK9P,GAKLA,EAAQ3F,KAAK,WACT,IAEI8G,EAAOvhB,GAAG4gB,IAAIC,WAAWrL,UAAU,CAAC3U,IAASD,MAC7C8vB,EAAU1wB,GAAG4gB,IAAI9c,OAAO6c,WAAWY,GACnChT,EAAO6R,EAAQG,SAGfoQ,EAAiB,CACbxa,KAAM,oBACNma,SAJOjP,SAASC,QAAQ/S,EAAMA,EAAK4S,QAAQyP,WAAWN,SACvCO,OAAOtmB,EAAKumB,gBAK/BhtB,EAAO9D,GAAG4gB,IAAI9c,OAAO6c,WAAWY,GAEpCsO,EAAInO,kBAAkBH,EAAM,IAAM,IAAMzd,EAAM6sB,EAAgBpmB,EAAKoX,aAEnEsO,EAAmBI,QAAQ9O,GAE3BwO,EAAShhB,UAAU,gBACdR,KAAK,CAACoiB,IACNjkB,QACA9J,OAAO,QAAQ4E,QAAQ,WAAW,GAClCsB,KAAK,IAAK4nB,GAEfH,EAAQhmB,EAAKimB,WAEVP,EAAmB7P,UA9BtBxe,EAAKoD,KAAK,2CACH,GAgCf,SAASurB,EAAQQ,GACb,IACIC,EAAOC,EAAQC,EAAMC,EADrBvmB,EAAImmB,GAAMA,EAAGK,QAEbrjB,EAAM/N,GAAGC,OAAO,YAAYA,OAAO,OACnC8wB,GACAE,EAASrmB,EAAEymB,QACXH,EAAOH,EAAGO,KAAO1mB,EAAE2mB,IAAM3mB,EAAE4mB,KAC3BL,EAAKJ,EAAGO,KAAO1mB,EAAE4mB,KAAO5mB,EAAE2mB,IAE1BP,EAAQhxB,GAAGC,OAAO,aAAa8O,UAAU,QACzChB,EAAIpN,MAAM,mBAAoBwwB,GAC9BH,EAAMloB,KAAK,CACPmoB,OAAQA,EACRC,KAAMA,KAGVnjB,EAAIpN,MAAM,mBAAoB,MAItCvB,QAAQC,OAAO,WACV+E,QAAQ,aAAc,CAAC,OAAQ,KAAM,iBACtC,SAAUkB,EAAQmsB,EAAMC,GAKpB,OAJA9vB,EAAO0D,EACPsqB,EAAK6B,EACL5B,EAAM6B,EAEC,CACHjB,kBAAmBA,EACnBX,YAAaA,EACbS,QAASA,MA5GzB;CCFC,WACG,aAEA,IAAI3uB,EAAMpC,EAAImyB,EA6BVC,EACAC,EACAjf,EA7BAkf,EAAc,CACdC,OAAQ,CACJC,QAAS,GAETC,QAAS,CACLf,KAAM,QACND,OAAQ,QAEZiB,QAAS,CACLhB,KAAM,OACND,OAAQ,UAGhBkB,OAAQ,CACJH,QAAS,CACLI,KAAM,IAEVC,UAAW,CACPC,OAAQ,WAEZC,SAAU,CACND,OAAQ,SACRE,UAAW,YAWvB,SAASC,EAAchpB,EAAIpJ,EAAGF,EAAGoK,GAC7B,IACIynB,EADAxZ,EAAIpZ,QAAQkI,OAAO,GAAIwqB,EAAYC,OAAOC,QAASznB,GAEnDymB,EAAQ,GACR0B,EAAQ,GA6CZ,OAhBAV,EAAU,CACN7b,KAAM,SACN5H,KAAM,CACF9E,GAAIA,EACJpJ,EAAGA,EACHF,EAAGA,EACHoK,KAAMiO,GAEVwY,MAAOA,EACP0B,MAAOA,EAEPT,QArCJ,SAAiBzwB,EAAGmN,EAAGtO,EAAGF,EAAGoK,GACzB,IAAIiO,EAAIpZ,QAAQkI,OAAO,GAAIwqB,EAAYC,OAAOE,QAAS1nB,GAKvD,OAHAmoB,EAAM/gB,KAAK,CACPnQ,EAAGA,EAAGmN,EAAGA,EAAGtO,EAAGA,EAAGF,EAAGA,EAAGqY,EAAGA,IAExBwZ,GAgCPE,QA7BJ,SAAiBhd,EAAG3K,GAChB,IAAIiO,EAAIpZ,QAAQkI,OAAO,GAAIwqB,EAAYC,OAAOG,QAAS3nB,GASvD,OAPI/K,EAAGoM,IAAIsJ,GACP8b,EAAMrf,KAAK,CAAEuD,EAAGA,EAAGsD,EAAGA,IACfhZ,EAAGuX,IAAI7B,GACd8b,EAAMrf,KAAK,CAAEuD,EAAGA,EAAEyd,KAAK,IAAKna,EAAGA,IAE/B5W,EAAKoD,KAAK,sCAAuCkQ,GAE9C8c,GAoBPY,SAjBJ,WACIhB,EAAQpR,IAAI/W,EAAIuoB,KAwBxB,SAASa,EAAcppB,EAAIpJ,EAAGF,EAAGoK,GAC7B,IACIynB,EADAxZ,EAAIpZ,QAAQkI,OAAO,GAAIwqB,EAAYK,OAAOH,QAASznB,GAEnDuoB,EAAO,GACPC,EAAO,GA+CX,OAhBAf,EAAU,CACN7b,KAAM,SACN5H,KAAM,CACF9E,GAAIA,EACJpJ,EAAGA,EACHF,EAAGA,EACHoK,KAAMiO,GAEVoZ,QAASkB,EACTE,OAAQD,EAERV,UAvCJ,SAAmB5oB,EAAIjI,EAAGmN,EAAGtO,EAAGkK,GAC5B,IAAIiO,EAAIpZ,QAAQkI,OAAO,GAAIwqB,EAAYK,OAAOE,UAAW9nB,GACrD2X,EAAI0P,EAAQ9a,IAAIrN,GAEpB,OAAKyY,EAKL4Q,EAAKnhB,KAAK,CACNogB,OAAQ7P,EAAG1gB,EAAGA,EAAGmN,EAAGA,EAAGtO,EAAGA,EAAGiyB,OAAQ9Z,EAAE8Z,SALvC1wB,EAAKoD,KAAK,kBAAmByE,GAO1BuoB,GA4BPO,SAzBJ,SAAkB1vB,EAAMrB,EAAGmN,EAAGpE,GAC1B,IAAIiO,EAAIpZ,QAAQkI,OAAO,GAAIwqB,EAAYK,OAAOI,SAAUhoB,GAKxD,OAHAwoB,EAAKphB,KAAK,CACN9O,KAAMA,EAAMrB,EAAGA,EAAGmN,EAAGA,EAAG2jB,OAAQ9Z,EAAE8Z,OAAQ3xB,MAAO6X,EAAEga,YAEhDR,GAoBPY,SAjBJ,WACIf,EAAQrR,IAAI/W,EAAIuoB,KAuBxB,SAAS/O,IACL2O,EAAU5xB,GAAG4W,MACbib,EAAU7xB,GAAG4W,MAGjB,SAASxE,IACLuf,EAAIsB,oBAAoBrgB,GAG5B,SAASsgB,EAAazpB,EAAIpJ,EAAGF,GAEzB,OADAyB,EAAKmB,MAAM,gBAAiB0G,EAAIpJ,EAAG,IAAKF,GACjCsyB,EAAchpB,EAAIpJ,EAAGF,GAGhC,SAASgzB,EAAa1pB,EAAIpJ,EAAGF,EAAGoK,GAE5B,OADA3I,EAAKmB,MAAM,gBAAiB0G,EAAIpJ,EAAG,IAAKF,EAAG,SAAUoK,EAAM,KACpDsoB,EAAcppB,EAAIpJ,EAAGF,EAAGoK,GAGnC,SAAS6oB,EAAeC,GACpBzxB,EAAKmB,MAAM,kBAAmBswB,GAGlC,SAASC,EAAeD,GACpBzxB,EAAKmB,MAAM,kBAAmBswB,GAGlC,SAAStB,EAAOtoB,GACZ,OAAOmoB,EAAQ9a,IAAIrN,GAGvB,SAAS0oB,EAAO1oB,GACZ,OAAOooB,EAAQ/a,IAAIrN,GAGvB,SAAS8pB,IACL,MAAO,CACH3B,QAASA,EAAQzN,OACjB0N,QAASA,EAAQ1N,QAIzB,SAASqP,IACL5xB,EAAKmB,MAAM,qBACXnB,EAAKmB,MAAM,WAAY6uB,GACvBhwB,EAAKmB,MAAM,WAAY8uB,GAI3BzyB,QAAQC,OAAO,WACd+E,QAAQ,gBACL,CAAC,OAAQ,YAAa,oBAEtB,SAAUkB,EAAQG,EAAMguB,GAiBpB,OAhBA7xB,EAAO0D,EACP9F,EAAKiG,EACLksB,EAAM8B,EAEN7gB,EAAM,CACFqQ,MAAOA,EACP7Q,KAAMA,EACN8gB,aAAcA,EACdC,aAAcA,EACdC,eAAgBA,EAChBE,eAAgBA,EAChBvB,OAAQA,EACRI,OAAQA,EACRoB,MAAOA,EACPC,KAAMA,MAKjB5O,IAAI,CAAC,OAAQ,SAAUhjB,GACpBA,EAAKmB,MAAM,qCACXkgB,OA9NR;CCAC,WACG,aAGA,IAAI4F,EAAQ,CACRxa,KAAM,cACN6G,EAAG,CACC,2CACA,4CACA,0CACA,2CACA,yCACA,yCACA,0CAEJvU,MAAO,CACHuwB,KAAM,OACNwC,oBAAqB,KAM7B,SAAST,EAAoBU,GACzBA,EAAMP,eAAevK,GAGrB8K,EAAMT,aAAa,OAAQ,GAAI,IAC1BjB,QAAQ,EAAG,EAAG,GAAI,GAAI,CAAEf,KAAM,UAC9BgB,QAAQ,CACL,kBACA,kBACA,mBACD,CAAEjB,OAAQ,UACZ2B,WAELe,EAAMR,aAAa,iBAAkB,IAAK,IACrCd,UAAU,OAAQ,GAAI,GAAI,IAC1BA,UAAU,OAAQ,GAAI,GAAI,IAC1BA,UAAU,OAAQ,GAAI,GAAI,IAC1BA,UAAU,OAAQ,IAAK,GAAI,IAC3BE,SAAS,kBAAmB,IAAK,GAAI,CAAED,OAAQ,UAC/CM,WAELe,EAAMR,aAAa,oBAAqB,GAAI,IACvCd,UAAU,OAAQ,GAAI,GAAI,IAC1BA,UAAU,OAAQ,GAAI,GAAI,IAC1BE,SAAS,oBAAqB,IAAK,GAAI,CAAED,OAAQ,UACjDM,WAELe,EAAMR,aAAa,QAAS,GAAI,IAC3BP,WAELe,EAAMH,OAIVp0B,QAAQC,OAAO,WACV+E,QAAQ,oBAAqB,CAC1B,WACI,MAAO,CACH6uB,oBAAqBA,MA7DzC;CCEC,WACG,aAEA,IAAIrxB,EAAMpC,EAEV,SAASo0B,EAAmBC,EAAOC,EAAUC,EACjBC,EAAaC,EAAcC,GACnD,IAAIC,EAAmBn0B,GAAG+hB,MAAMqS,SAC3BC,OAAO,CAAC,EAAG,KACXC,MAAM,CAAC,EAAG,KACVC,OAAM,GAEPC,EAAOh1B,EAAGsB,IAAIgzB,GACdW,EAAOj1B,EAAGsB,IAAIizB,GACdW,EAAOl1B,EAAGsB,IAAIkzB,GACdW,EAAOn1B,EAAGsB,IAAImzB,GACdW,EAAM,GAEV,SAASC,EAAItiB,GACT,MAAO,yCAA2CA,EAC9C,qBAoBR,GAjBKshB,GACDe,EAAIjjB,KAAK,6DAGR6iB,GACDI,EAAIjjB,KAAKkjB,EAAI,aAEZJ,GACDG,EAAIjjB,KAAKkjB,EAAI,cAEZH,GACDE,EAAIjjB,KAAKkjB,EAAI,gBAEZF,GACDC,EAAIjjB,KAAKkjB,EAAI,iBAGbD,EAAIrrB,OAEJ,OADA3H,EAAKoZ,MAAM4Z,EAAIjC,KAAK,OACb,KAGX,SAASmC,EAAQ5f,GACb,IAAI6M,EAAQmS,EAAKA,EAAGnS,QAAU,EAC1BgT,EAAYZ,EAAiBN,EAAMmB,SAAWjT,EAC9CE,EAAK/M,EAAE+f,KAAO/f,EAAEggB,GAChBjf,EAAKf,EAAEigB,KAAOjgB,EAAEkgB,GAKpB,OAHIjT,KAAKkT,IAAIpT,IAAO8S,GAAa5S,KAAKkT,IAAIpf,IAAO8e,KAC7C7f,EAAE4f,SAAU,GAET5f,EAAE4f,QA2Cb,OAxCO90B,GAAGs1B,SAASC,OACdC,OAAO,SAAUtgB,GAAK,OAAOA,IAC7BrN,GAAG,YAAa,SAAUqN,IACnB+e,KAAkBD,OAClB9e,EAAE+f,KAAO/f,EAAE1T,EACX0T,EAAEigB,KAAOjgB,EAAEvG,EACXuG,EAAE4f,SAAU,EACZ5f,EAAEugB,OAAS,EACXvgB,EAAEwgB,aAAc,KAGvB7tB,GAAG,OAAQ,SAAUqN,GACd8e,MACA9e,EAAEggB,GAAKl1B,GAAG6d,MAAMrc,EAChB0T,EAAEkgB,GAAKp1B,GAAG6d,MAAMlP,EACZmmB,EAAQ5f,KACH2e,EAAMmB,SACPnB,EAAMmB,MAAM,UAK3BntB,GAAG,UAAW,SAAUqN,GACrBlV,GAAG6d,MAAM8X,YAAYC,kBAEjB1gB,EAAEwgB,cACFxgB,EAAEwgB,aAAc,EACXZ,EAAQ5f,IACL+e,KACAH,EAASnjB,KAAKpN,KAAM2R,GAG5BA,EAAEugB,QAAS,EAEPzB,KACAD,EAAUpjB,KAAKpN,KAAM2R,MASzC,SAAS2gB,EAAShS,EAAM7N,EAAGkO,EAAG7W,EAAG5D,GAC7B,IAAIqsB,EAAOjS,EAAKjhB,OAAO,UAClBkG,KAAK,IAAK,QACVA,KAAK,IAAK,QACVA,KAAK,QAAS,QACdA,KAAK,SAAU,QACfA,KAAK,KAAMW,GAEhBqsB,EAAKlzB,OAAO,iBACPkG,KAAK,OAAQ,UACbA,KAAK,SACF,YAAckN,EAAI,aACJkO,EAAI,aACJ7W,EAAI,gBAG1ByoB,EAAKlzB,OAAO,kBACPkG,KAAK,eAAgB,GACrBA,KAAK,SAAU,eAEpBgtB,EAAKlzB,OAAO,WAAWmM,UAAU,eAC5BR,KAAK,CAAC,cAAe,kBACrB7B,QAAQ9J,OAAO,eACfkG,KAAK,KAAMitB,QAGpB,SAASC,EAAanS,GAClBgS,EAAShS,EAAM,EAAK,EAAK,GAAK,aAC9BgS,EAAShS,EAAM,EAAK,EAAK,GAAK,eAKlC,IAOIoS,EAAQ,CACRC,MAAO,CACHC,KAAMn2B,GAAG+hB,MAAMqU,UAAU9B,MATjB,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,YAU3E+B,KAAMr2B,GAAG+hB,MAAMqU,UAAU9B,MATjB,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,aAW/EgC,KAAM,CACFH,KAAMn2B,GAAG+hB,MAAMqU,UAAU9B,MAVlB,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,YAW1E+B,KAAMr2B,GAAG+hB,MAAMqU,UAAU9B,MAVlB,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,cAclF,SAASiC,IACL,IAAIC,EAAO,iBAEX,SAASC,EAAShtB,EAAIitB,EAAOvlB,GACzB,IAAIwlB,EAAKV,EAAOC,MAAMC,KAAK1sB,GACvBmtB,EAAKX,EAAOC,MAAMG,KAAK5sB,GACvBotB,EAAKZ,EAAOK,KAAKH,KAAK1sB,GACtBqtB,EAAKb,EAAOK,KAAKD,KAAK5sB,GAC1B,MAAc,SAAV0H,EACOulB,EAAQI,EAAKD,EAEbH,EAAQE,EAAKD,EAmD5B,MAAO,CACHI,SAhDJ,SAAkBhpB,GACd,IAEI2H,EAAGghB,EAAOvlB,EAAOoB,EAFjB2R,EAAInW,EAAI9N,OAAO,KAAOu2B,GACtBQ,EAAMh3B,GAAGs0B,MAAM,GAGnB,GAAKpQ,EAAE1a,QAQH,IAJA0a,EAAInW,EAAInL,OAAO,KACVkG,KAAK,KAAM0tB,GACX1tB,KAAK,YAAa,4BAElB4M,EAAE,EAAGA,EAAE,EAAGA,IAEXnD,GADAmkB,EAAQhhB,EAAE,GACK,SAAW,UAC1BvE,EAAQuE,EAAI,EAAI,QAAU,OAC1BshB,EAAI/hB,QAAQ,SAAUxL,EAAIuH,GACtB,IAAIxP,EAAQ,GAAJwP,EACJrC,EAAQ,GAAJ+G,EACJuhB,EAAIR,EAAShtB,EAAIitB,EAAOvlB,GAC5B+S,EAAEthB,OAAO,UAAUkG,KAAK,CACpBouB,GAAI11B,EACJ21B,GAAIxoB,EACJqH,EAAG,EACHkb,KAAM+F,MAGd/S,EAAEthB,OAAO,QAAQkG,KAAK,CAClBtH,EAAG,IACHmN,EAAO,GAAJ+G,EAAS,EACZ7U,MAAO,GACPD,OAAQ,GACRwN,GAAI,EACJ8iB,KAAM,SAEVhN,EAAEthB,OAAO,QAAQC,KAAKsO,EAAQoB,GACzBzJ,KAAK,CACFtH,EAAG,IACHmN,EAAO,GAAJ+G,EAAS,EACZwb,KAAM,UAETvwB,MAAM,YAAa,YApC5BujB,EAAE7U,UA2CNonB,SAAUA,GAIlB,SAASjhB,EAAUhU,EAAGmN,GAClB,OAAInP,EAAGuX,IAAIvV,IAAmB,IAAbA,EAAE+H,SAAiBoF,EACzB,aAAenN,EAAE,GAAK,IAAMA,EAAE,GAAK,IAEvC,aAAeA,EAAI,IAAMmN,EAAI,IAGxC,SAASoT,EAAMvgB,EAAGmN,GACd,MAAO,SAAWnN,EAAI,IAAMmN,EAAI,IAGpC,SAASyoB,EAAM51B,GACX,MAAO,SAAWA,EAAI,IAG1B,SAAS61B,EAAOC,GACZ,MAAO,UAAYA,EAAM,IAG7B,SAASC,EAAQrV,GACb,OAAOA,EAAEne,QAAQ,MAAO,IAG5B,SAASyzB,EAAOtV,GACZ,OAAOA,EAAEne,QAAQ,cAAe,KAWpC,SAAS0zB,EAAQ1wB,EAAIvF,GACjB,QAAU2D,IAAN3D,EACA,MAL8B,YAKbuF,EALXpG,MAAM,cALpB,IAAyB0M,EAAAA,EAYD7L,EAAJuF,EAXbpG,MAAM,aAAe0M,EAAI,UAAY,UAe5CjO,QAAQC,OAAO,WACd+E,QAAQ,iBAAkB,CAAC,OAAQ,YAChC,SAAUkB,EAAQG,GAId,OAHA7D,EAAO0D,EACP9F,EAAKiG,EAEE,CACHmuB,mBAAoBA,EACpBoC,aAAcA,EACdO,KAAMA,EACN/gB,UAAWA,EACXuM,MAAOA,EACPqV,MAAOA,EACPC,OAAQA,EACRE,QAASA,EACTC,OAAQA,EACRC,QAASA,MAvRzB;CCFC,WACG,aAEA,IAOI71B,EAPAyI,EAAkB,CAClBqtB,QAAS,IACTC,QAAS,GACTC,YAAa,SAAUtqB,GAAM,OAAO,GACpCuqB,aAAc,cAKlBz4B,QAAQC,OAAO,WACV+E,QAAQ,cAAe,CAAC,OAEzB,SAAUkB,GA4EN,OA3EA1D,EAAO0D,EA2EA,CACHwyB,aA1EJ,SAAsBvtB,GAClB,IASIwtB,EATAC,EAAK,+BACLC,EAAM,mCACNttB,EAAWvL,QAAQkI,OAAO,GAAI+C,EAAiBE,GAC/C2tB,EAAOl4B,GAAGs1B,SAAS4C,OACd1iB,UAAU,CAAC,EAAG,IACduM,MAAM,GACNoW,YAAY,CAACxtB,EAAS+sB,QAAS/sB,EAASgtB,UACxC9vB,GAAG,OAkBZ,WACI,IAAIyF,EAAKtN,GAAG6d,MAAM8X,YACdhrB,EAASitB,YAAYtqB,IACrB8qB,EAAgBp4B,GAAG6d,MAAMrI,UAAWxV,GAAG6d,MAAMkE,SApBjDsW,GAAO,EAaX,GATK1tB,EAASoD,MACVnM,EAAKoZ,MAAMgd,EAAK,qBAAuBC,GACvCI,GAAO,GAEN1tB,EAAS2tB,YACV12B,EAAKoZ,MAAMgd,EAAK,yBAA2BC,GAC3CI,GAAO,GAGPA,EACA,OAAO,KAUX,SAASD,EAAgB5iB,EAAWuM,EAAO5S,GAEvCxE,EAAS2tB,UAAUnpB,aACdC,SAASD,GAAc,GACvBrG,KAAK,YACF,aAAe0M,EAAY,UAAYuM,EAAQ,KAEvDpX,EAASktB,aAAariB,EAAWuM,GA8BrC,OA3BAgW,EAAS,CACLQ,QAAS,SAAU/iB,EAAWuM,EAAO5S,GAEjC+oB,EAAK1iB,UAAUA,GAAWuM,MAAMA,GAChCqW,EAAgB5iB,EAAWuM,EAAO5S,IAGtCrE,MAAO,WACHitB,EAAOQ,QAAQ,CAAC,EAAG,GAAI,IAG3B/iB,UAAW,WACP,OAAO0iB,EAAK1iB,aAGhBuM,MAAO,WACH,OAAOmW,EAAKnW,SAGhBoW,YAAa,WACT,OAAOD,EAAKC,gBAIpBxtB,EAASoD,KAAOpD,EAASoD,IAAI4C,KAAKunB,GAElCvtB,EAASoD,IAAIlG,GAAG,gBAAiB,MAC1BkwB,OAxFvB;CCAC,WACG,aAEA,IAAIn2B,EAAMpC,EAAI+P,EAEVipB,EAAMzC,OAAO0C,aAEbC,EAAQ,CACR,YACA,YACA,WACA,SACA,SACA,QACA,MACA,cACA,OACA,QACA,aACA,OACA,SACA,cACA,OAqBJ,SAASC,EAAOpqB,GACZ,IAAIqI,EAAM,GAMV,OAJArI,EAAK0G,QAAQ,SAAUzT,GACnB,IAAIwU,EAlBZ,SAA0BxU,GACtB,IAKIwP,EALAmM,EAAI3b,EAAEo3B,MAAM,KACZz4B,EAAIqS,OAAO2K,EAAE,IACbjI,EAAIiI,EAAE,GACNzF,EAAIxC,EAAE3L,OACNlJ,EAAI,GAGR,IAAK2Q,EAAI,EAAGA,EAAE0G,EAAG1G,GAAG,EACd3Q,EAAEsR,KAAK6mB,EAAIhmB,OAAO0C,EAAExE,MAAMM,EAAGA,EAAE,MAErC,OAAOxR,EAAGq5B,OAAO14B,EAAGE,EAAEsyB,KAAK,KAOfmG,CAAiBt3B,GACzBoV,EAAIZ,EAAE4H,GAAK5H,EAAEwC,EAAEugB,cAAgB,SAE5BniB,EAGX,SAASoiB,EAAMC,GACX,IAAIhC,EAAIz3B,EAAGsB,IAAIm4B,GACX/W,EAAI1iB,EAAGoM,IAAIqtB,GAEfr3B,EAAKmB,MAAM,iBAAkBk2B,GAEnB,aAAN/W,IACAA,EAlCGwW,EAAMvW,KAAK+W,MAAM/W,KAAKgX,SAAWT,EAAMnvB,SAAW,OAmCrD3H,EAAKmB,MAAM,eAAgBmf,IAG3BA,GAAK1iB,EAAG45B,SAASlX,EAAG,SACpB3S,EAAME,UAAU7M,OAAO,OAAOkG,KAAK,MAAO,OAAOoZ,GAGrD+U,GAAKA,IAGT73B,QAAQC,OAAO,YACd+E,QAAQ,YAAa,CAAC,OAAQ,YAAa,eACxC,SAAUkB,EAAQG,EAAM4zB,GAKpB,OAJAz3B,EAAO0D,EACP9F,EAAKiG,EACL8J,EAAQ8pB,EAED,CACHV,OAAQA,EACRK,MAAOA,MAhFvB;CCAC,WACG,aAEA,IAAIz5B,EAASqC,EAET03B,EAAa,GAEbd,EAAMzC,OAAO0C,aACbc,EAAMxD,OAAOtpB,UAAU+sB,WAU3B,SAAS14B,EAAIm2B,GACT,MAAoB,mBAANA,EAAmBA,EAAI,KAGzC,SAASlgB,EAAI3J,GACT,OAAOqD,MAAMgpB,QAAQrsB,GAAKA,EAAI,KAGlC,SAASxB,EAAIsW,GACT,MAAoB,iBAANA,EAAiBA,EAAI,KAGvC,SAASjd,EAAIuT,GACT,OAAQA,GAAkB,iBAANA,GAAkBA,EAAEkhB,cAAgBC,OAAUnhB,EAAI,KAG1E,SAASohB,EAASxsB,EAAG5L,GACjB,OAAOuV,EAAI3J,KAAsB,EAAhBA,EAAE9D,QAAQ9H,GAG/B,SAASq4B,EAAajnB,EAAKknB,GACvB,IAAIC,EAAW,GACXC,GAAa,EAEjB,IAAKjjB,EAAI+iB,GACL,OAAO,EAEX,IACI9oB,EAAGtK,EADHgR,EAAIoiB,EAAQvwB,OAEhB,IAAKyH,EAAE,EAAGA,EAAE0G,EAAG1G,IAAK,CAEhB,IAAKlQ,EAAI8R,EADTlM,EAAOozB,EAAQ9oB,KAEX,OAAO,EAEX+oB,EAASrzB,IAAQ,EAQrB,OALAtH,QAAQ6V,QAAQrC,EAAK,SAAUnK,EAAOD,GAC7BuxB,EAASvxB,KACVwxB,GAAa,MAGbA,EAGZ,SAASC,EAAsBrnB,EAAKknB,GAChC,IAAK/iB,EAAI+iB,GACL,OAAO,EAEX,IACI9oB,EADA0G,EAAIoiB,EAAQvwB,OAEhB,IAAKyH,EAAE,EAAGA,EAAE0G,EAAG1G,IAEX,IAAKlQ,EAAI8R,EADFknB,EAAQ9oB,KAEX,OAAO,EAGf,OAAO,EAGX,SAAStQ,EAAWH,EAAMC,GACtB,IAAI05B,EAAK35B,GAAQ,EACb45B,EAAK35B,GAAQ,EACjB,MAAO,CACHI,OAAQrB,EAAQa,YAAc85B,EAC9Br5B,MAAOtB,EAAQe,WAAa65B,GAIpC,SAAS71B,IACL,IAAI81B,EAAK76B,EAAQ86B,UAAUC,UAE3B,MADW,+DACCC,KAAKH,GAGrB,SAASI,IACL,IAAIC,EAAal7B,EAAQm7B,OACrBC,EAAap7B,EAAQ86B,UAAUO,OAC/BC,GAAwD,EAA9Ct7B,EAAQ86B,UAAUC,UAAUhxB,QAAQ,OAClD,OAAQmxB,MAAAA,GAEO,gBAAfE,GACW,GAAXE,EAGJ,SAASC,IACL,OAA2D,IAAnDv7B,EAAQ86B,UAAUC,UAAUhxB,QAAQ,YACO,IAAnD/J,EAAQ86B,UAAUC,UAAUhxB,QAAQ,UAGxC,SAASyxB,IACL,MAAiC,oBAAnBC,eAGlB,SAASC,EAAKzyB,EAAK0yB,EAAOC,GACtB,IACInrB,EAAK0H,EADL0jB,EAAOD,GAAO,KAElB,IAAKnrB,EAAM,EAAG0H,EAAIwjB,EAAM3xB,OAAQyG,EAAM0H,EAAG1H,IAErC,GADIkrB,EAAMlrB,GACJorB,KAAU5yB,EACZ,OAAOwH,EAGf,OAAQ,EAGZ,SAASqrB,EAAQC,EAAMJ,GACnB,IAAIlqB,EACJ,GAAI+F,EAAImkB,GACJ,IAAKlqB,EAAE,EAAGA,EAAEkqB,EAAM3xB,OAAQyH,IACtB,GAAIkqB,EAAMlqB,KAAOsqB,EACb,OAAOtqB,EAInB,OAAQ,EAGZ,SAASuqB,EAAgBD,EAAMJ,GAC3B,IAAIM,GAAQ,EACRxqB,EAAIqqB,EAAQC,EAAMJ,GAKtB,OAJS,GAALlqB,IACAkqB,EAAMO,OAAOzqB,EAAG,GAChBwqB,GAAQ,GAELA,EAGX,SAAS1iB,EAAc4iB,GACnB,IAAIlzB,EACJ,IAAKA,KAAOkzB,EACR,OAAO,EAEX,OAAO,EAGX,SAASC,EAAaC,EAAMC,GACxB,IAAIrzB,EACJ,IAAKA,KAAOozB,EACR,GAAIA,EAAKzL,eAAe3nB,IACdozB,EAAKpzB,KAASqzB,EAAKrzB,GACrB,OAAO,EAInB,OAAO,EAGX,SAASszB,EAAYC,EAAKL,GACtB,IAAI1qB,EACAgrB,EAAMD,EAAIxyB,OACd,IAAKyH,EAAI,EAAGA,EAAIgrB,EAAKhrB,IACjB,GAAI2qB,EAAaI,EAAI/qB,GAAI0qB,GACrB,OAAO,EAGf,OAAO,EAGX,SAASxkB,EAAIgL,GACT,OAAOA,EAAIA,EAAE,GAAG+Z,cAAgB/Z,EAAExR,MAAM,GAAGqoB,cAAgB7W,EAG/D,SAAS2W,EAAO14B,EAAGE,GACf,IAKIqX,EAAG1G,EAAM4M,EADTpF,EAAI,GAGR,IAAKxH,EAAI,EAAG0G,EAAIrX,EAAEkJ,OAAQyH,EAAE0G,EAAG1G,IAG3B4M,EATI,IAQJA,EANIpc,IAKA+3B,EAAI5oB,KAAKtQ,EAAG2Q,GACJ7Q,GACAyd,EARRpc,GAQgBoc,EACpBpF,EAAE7G,KAAKiM,GAEX,MAAO,CACHpF,EAAGnY,EACH6U,EAAGsD,EAAEma,KAAK,IACV/U,EAAG4a,EAAI1nB,MAAM0H,EAAGA,IAIxB,SAASlG,EAAK4pB,GACV,OAAO1pB,OAAO0pB,EAAIn4B,QAAQ,MAAO,KAGrC,SAAS8C,EAAU9G,EAAMo8B,GACrB,OAAO3pB,OAAOzS,EAAKY,MAAMw7B,GAAMp4B,QAAQ,MAAO,KAGlD,SAASq1B,EAASgD,EAAK3gB,GACnB,OAA4D,IAArD2gB,EAAI9yB,QAAQmS,EAAQ2gB,EAAI7yB,OAASkS,EAAOlS,QAGnD,SAASiK,EAAQ2nB,GACb,OAAO7B,EAAW6B,GAGtB,SAASp4B,EAAMo4B,GACX,IAAI3qB,EACAgD,EAAQ2nB,MACR3qB,EAAOC,MAAMhE,UAAUiE,MAAMC,KAAKC,UAAW,IACxCC,QAAQ,IAAIsqB,EAAI,KACrBv5B,EAAKmB,MAAM+N,MAAMvN,KAAMiN,IAI/B,SAAS6rB,EAAQC,EAAIC,EAAMC,EAAMjuB,GAC7B,IAGI4G,EAAI,CAAEvK,EAHF2xB,EAGQra,EAFRsa,EAAKP,cACHrD,MAAM,KAEZvW,EAAI,GACJ7gB,EAAI,EACJi7B,EAAY,MAAPH,EAGT,SAAannB,GACT,IAAIunB,EAAIvnB,EAAE+M,EAAEya,QACRC,EAAKznB,EAAEvK,EAAE8xB,GAERE,IACDznB,EAAEvK,EAAE8xB,GAAK,GACTE,EAAKznB,EAAEvK,EAAE8xB,GACTl7B,EAAI,GAER,MAAO,CAAEoJ,EAAGgyB,EAAI1a,EAAG/M,EAAE+M,IAGzB,SAAe/M,GACX,IAAIunB,EAAIvnB,EAAE+M,EAAEya,QACRjnB,EAAIikB,OAAOvwB,KAAK+L,EAAEvK,GAAGrB,OACrBqzB,EAAKznB,EAAEvK,EAAE8xB,GAGb,OADAra,EAAE1Q,KAAK,CAAE+qB,EAAGA,EAAGhnB,EAAGA,EAAG9K,EAAGuK,EAAEvK,IACrBgyB,EAIE,CAAEhyB,EAAGgyB,EAAI1a,EAAG/M,EAAE+M,IAHjBG,EAAI,GACG,CAAEH,EAAG,MAtBhB2a,EAAY,MAAPP,EA2BT,WAEI,OADAnnB,EAAEvK,EAAEkyB,MAAQvuB,EACL/M,EAAI,QAAU,WAGzB,WACI,GAAI6gB,EAAE9Y,OAAQ,CAEV,IADA8Y,EAAIA,EAAE0a,UACC1a,EAAE9Y,eACL4L,EAAIkN,EAAEsa,SACG/xB,EAAEuK,EAAEunB,GACH,EAANvnB,EAAEO,IACF2M,EAAI,IAGZ,MAAO,UAEX,MAAO,UAGX,KAAOlN,EAAE+M,EAAE3Y,QACP4L,EAAIsnB,EAAGtnB,GAEX,OAAO0nB,IAGX,SAASG,EAAUT,EAAMC,EAAMjuB,GAC3B,OAAO8tB,EAAQ,IAAKE,EAAMC,EAAMjuB,GAGpC,SAAS0uB,EAAeV,EAAMC,GAC1B,OAAOH,EAAQ,IAAKE,EAAMC,GAG9B,SAASU,EAAWX,EAAMC,GAKtB,IAJA,IAAIta,EAAIsa,EAAKP,cAAcrD,MAAM,IAC7BhuB,EAAI2xB,EAGDra,EAAE3Y,QAGL,KADAqB,EAAIA,EADAsX,EAAEya,UAGF,OAGR,OAAI/xB,EAAEkyB,MACKlyB,EAAEkyB,OAEL,EAIZ,IAAIK,EAAS,GAAGhN,eAEhB,SAASiN,IAGL,IAFA,IAAIC,EAAU,GAELrsB,EAAI,EAAGA,EAAIJ,UAAUrH,OAAQyH,IAAK,CACvC,IAAIssB,EAAM1sB,UAAUI,GACpB,GAAKssB,EAAL,CAEA,IAAIC,SAAiBD,EAErB,GAAgB,UAAZC,GAAoC,UAAZA,EACxBF,EAAQ1rB,KAAK2rB,QACV,GAAI7sB,MAAMgpB,QAAQ6D,GACrBD,EAAQ1rB,KAAKyrB,EAAWtsB,MAAM,KAAMwsB,SACjC,GAAgB,UAAZC,EACP,IAAK,IAAI/0B,KAAO80B,EACRH,EAAOxsB,KAAK2sB,EAAK90B,IAAQ80B,EAAI90B,IAC7B60B,EAAQ1rB,KAAKnJ,IAM7B,OAAO60B,EAAQ1K,KAAK,KAGxB,SAASrrB,EAAOk2B,EAAYC,GAExB,IACIC,EADAt1B,EAAS7E,KAcb,OAXAm6B,EAAQ,WACR,OAAOt1B,EAAO0I,MAAMvN,KAAMqN,YAG1BxR,QAAQkI,OAAOo2B,EAAOt1B,EAAQq1B,KAE9BC,EAAMjxB,UAAYrN,QAAQkI,OAAO,GAAIc,EAAOqE,UAAW+wB,IACvC9D,YAAcgE,GAExBC,UAAYv1B,EAAOqE,UAElBixB,EAIX,IAAIE,EAAU,kCACVC,EAAY,CAAC,IAAK,IAAK,IAAK,KAAM,SAAU,MAC5CC,EAAW,CAAC,SAAU,QAAS,UAsBnC,SAASC,EAAS9Z,GAGd,IAAI+Z,EAnBR,SAAiB/Z,GACbA,EAAO8R,OAAO9R,IAAS,GAKvB,IAHA,IACI1I,EADAyiB,EAAU,GAG0B,QAAhCziB,EAAQqiB,EAAQK,KAAKha,KACzB+Z,EAAQrsB,KAAK,CACTusB,KAAM3iB,EAAM,GACZ7U,KAAM6U,EAAM,KAIpB,OAAOyiB,EAMOG,CAFdla,EAAO8R,OAAO9R,IAAS,IAmBvB,OAfA6Z,EAAS7oB,QAAQ,SAAUkmB,GACvB,IAAIiD,EAAK,IAAIC,OAAO,IAAMlD,EAAM,0CAA6CA,EAAM,IAAK,OACxFlX,EAAOA,EAAKlgB,QAAQq6B,EAAI,MAG5BJ,EAAQ/oB,QAAQ,SAAUkmB,GA9B9B,IAAoBA,GA+ByB,IAAjC0C,EAAUv0B,QAAQ6xB,EAAIz0B,QACtBud,EAAOA,EAAKlgB,QAAQo3B,EAAI+C,KAAM,IAhCtB/C,EAiCOA,GAhCiB,IAAhC2C,EAASx0B,QAAQ6xB,EAAIz0B,QAA2C,IAA3By0B,EAAI+C,KAAK50B,QAAQ,MAiClD1H,EAAKoD,KAAK,4BAA8Bm2B,EAAI+C,KAAO,iBAMxDja,EAIX7kB,QAAQC,OAAO,YACV+E,QAAQ,YACT,CAAC,UAAW,YAAa,OAAQ,SAAUoB,EAAW0V,EAAM5V,GAlZhE,IAA0Bg5B,EAwZlB,OALA/+B,EAAUiG,EACV5D,EAAO0D,IApZWg5B,EAsZDpjB,EAAKhW,SAASnC,OArZfu7B,EAAO1F,MAAM,KAAO,IACnC3jB,QAAQ,SAAUzM,GACnB8wB,EAAW9wB,IAAO,IAEtB5G,EAAKmB,MAAM,eAAgBu7B,GAmZhB,CACHx9B,IAAKA,EACLiW,IAAKA,EACLnL,IAAKA,EACL3G,IAAKA,EACL20B,SAAUA,EACVC,aAAcA,EACdI,sBAAuBA,EACvBv5B,WAAYA,EACZ4D,SAAUA,EACVk2B,SAAUA,EACVM,SAAUA,EACVC,UAAWA,EACXvnB,QAASA,EACTzQ,MAAOA,EACPk4B,KAAMA,EACNI,QAASA,EACTE,gBAAiBA,EACjBziB,cAAeA,EACf6iB,aAAcA,EACdG,YAAaA,EACb5kB,IAAKA,EACL2hB,OAAQA,EACRvmB,KAAMA,EACNzL,UAAWA,EACXuyB,SAAUA,EACV4D,UAAWA,EACXC,eAAgBA,EAChBC,WAAYA,EACZE,WAAYA,EACZ91B,OAAQA,EACRy2B,SAAUA,MAjc1B;CCAC,WACG,aAEA,IAAIn8B,EAAMpC,EAAIqQ,EAAI7N,EAAIu8B,EAAIC,EAAKp9B,EAe3Bq9B,EAbA5wB,GAAU,EACV6wB,GAAgB,EAChBC,EAAa,CACT7mB,WAAY,GACZ8mB,WAAY,GACZ7yB,WAAY,GACZmM,SAAU,GACV2mB,OAAQ,KACRzmB,aAAc,IAElB0mB,EAAM,GACNC,GAAW,EACXC,EAAU,GA0Dd,IAAIC,EAAwB,CACxBvyB,MAAO,EACPE,IAAK,GAQT,SAASsyB,IACL,IAAIrhB,EAAQ7d,GAAG6d,MACXshB,EAAUthB,EAAMshB,QAChB32B,EA/CR,SAAiB42B,GACb,OAAQA,GACJ,KAAK,EAAG,MAAO,SACf,KAAK,EAAG,MAAO,MACf,KAAK,GAAI,MAAO,QAChB,KAAK,GAAI,MAAO,QAChB,KAAK,GAAI,MAAO,MAChB,KAAK,GAAI,MAAO,QAChB,KAAK,GAAI,MAAO,YAChB,KAAK,GAAI,MAAO,UAChB,KAAK,GAAI,MAAO,aAChB,KAAK,GAAI,MAAO,YAChB,KAAK,IAAK,MAAO,YACjB,KAAK,IAAK,MAAO,SACjB,KAAK,IAAK,MAAO,QACjB,KAAK,IAAK,MAAO,OACjB,KAAK,IAAK,MAAO,MACjB,KAAK,IAAK,MAAO,QACjB,KAAK,IAAK,MAAO,YACjB,KAAK,IAAK,MAAO,cACjB,KAAK,IAAK,MAAO,YACjB,KAAK,IAAK,MAAO,eACjB,KAAK,IAAK,MAAO,QACjB,QACI,OAAa,IAARA,GAAcA,GAAQ,IACd,IAARA,GAAcA,GAAQ,GAChBrJ,OAAO0C,aAAa2G,GACZ,KAARA,GAAeA,GAAQ,IACvB,KAAOA,EAAO,KAElB,MAiBLC,CAAQF,GACdG,GAAiBL,EAAsBz2B,GACvC+2B,EAAY,GAMhB,GAJA1hB,EAAM2hB,SAAWD,EAAU5tB,KAAK,OAChCkM,EAAM4hB,QAAUF,EAAU5tB,KAAK,OAC/BkM,EAAM6hB,UAAYH,EAAU5tB,KAAK,SAE5BnJ,IAIL+2B,EAAU5tB,KAAKnJ,GACfA,EAAM+2B,EAAU5M,KAAK,MAEjB2M,GArBS,WADTjd,EAAIriB,GAAG6d,MAAM8hB,OAAOC,QAAQ7G,gBACF,aAAN1W,GAqBxB,CAvBJ,IACQA,EA0BAwd,EAAKlB,EACLmB,EAAKD,EAAG/nB,WAAWtP,GACnBu3B,EAAMvgC,EAAGsB,IAAIg/B,IAAQtgC,EAAGuX,IAAI+oB,IAAOtgC,EAAGsB,IAAIg/B,EAAG,IAC7CE,EAAKH,EAAG9zB,WAAWvD,GACnBy3B,EAAMzgC,EAAGsB,IAAIk/B,GACbE,EAAKL,EAAG3nB,SAAS1P,GACjB23B,EAAK3gC,EAAGsB,IAAI++B,EAAG3nB,SAASkoB,cACxBC,EAAM7gC,EAAGsB,IAAIo/B,IAAQ1gC,EAAGuX,IAAImpB,IAAO1gC,EAAGsB,IAAIo/B,EAAG,KAAQ1gC,EAAGsB,IAAI++B,EAAGhB,QAC/D/f,EAAQ,QAIZ,GAFAjB,EAAM+X,kBAEF/nB,EAAS,CACT,GApGR,SAAkBrF,GACd,IAAKu2B,GAAoB,gBAARv2B,EAEb,OADAu2B,GAAW,EAGf,GAAIA,EAAU,CAGV,GAFAC,GAAWx2B,GAEK,KADhBi2B,EAASj/B,EAAG09B,WAAW4B,EAAKE,IAExB,OAAO,EAIX,GAFAD,GAAW,EACXC,EAAU,IACLP,EACD,OAGJ,OADAF,EAAGvF,MAAMyF,IACF,GAmFH6B,CAAS93B,GAAM,OAEnB,GAAIu3B,GAAOA,EAAIjhB,EAAOtW,EAAK22B,EAASthB,GAChC,OAEJ,GAAIoiB,EAEA,YADAA,EAAInhB,EAAOtW,EAAK22B,EAASthB,GAGzBwiB,GACAA,EAAIvhB,EAAOtW,EAAK22B,EAASthB,GAEzBsiB,GACAA,EAAG33B,KAKf,SAAS+3B,IACL,OAAOn/B,EAAGK,OAAO,qBAErB,SAAS++B,IACL,OAAOD,GAAAA,CAAS,wBAGpB,SAASE,IACL,OAAOF,GAAAA,CAAS,eAGpB,SAASG,IACL,OAAOH,GAAAA,CAAS,aAqBpB,SAASI,EAAUC,EAAMp4B,EAAK42B,EAAM9xB,GAChC,QAAKoxB,IAGLF,EAAI5lB,cAAc+lB,IACX,GAGX,SAASkC,EAAUD,EAAMp4B,EAAK42B,EAAM9xB,GAChC,OAAOtL,EAAG4C,eAAiB45B,EAAI9lB,gBAGnC,SAASooB,EAAYF,EAAMp4B,EAAK42B,EAAM9xB,GAClC,QAAKoxB,IAGL7uB,EAAGixB,eACI,GAGX,SAASC,EAAiBnqB,EAAK2H,EAAQlP,GACnC,IAAI2xB,EAAS,GACTvnB,EAAO,GAkBX,OAhBAzZ,GAAG4W,IAAIA,GAAKxN,OAAO6L,QAAQ,SAAUzM,GAC7Bm2B,EAAWC,WAAWp2B,KACtBw4B,EAAOrvB,KAAKnJ,GACZiR,EAAK9H,KAAK4M,EAAQ,UAAY/V,EAAM,oBAIxCiR,EAAKlQ,QACL3H,EAAKoD,KAAKyU,EAAKkZ,KAAK,OAGpBtjB,GACA2xB,EAAO/rB,QAAQ,SAAUS,UACdkB,EAAIlB,KAGZsrB,EAGX,SAASC,EAAUlwB,EAAOvP,GACtBI,EAAKoD,KAAK+L,EAAO,4BAA6BvP,GAgClD,SAASsL,IACL6xB,EAAWzmB,SAAW,GACtBymB,EAAWE,OAAS,KACpBF,EAAWvmB,aAAe,GAmB9B,SAAS8oB,EAAe1oB,GACpB,IAAI2oB,EAAO,GACP3hC,EAAGyF,IAAIuT,KACPpZ,QAAQ6V,QAAQuD,EAAG,SAAUjL,EAAK/E,GAC1Bm2B,EAAW7mB,WAAWtP,IACtB24B,EAAKxvB,KAAKnJ,KAGd24B,EAAK53B,SACL3H,EAAKoD,KAAK,mCAAoCm8B,EAAKxO,KAAK,MACxDwO,EAAKlsB,QAAQ,SAAUzM,UACZgQ,EAAEhQ,OAMzBpJ,QAAQC,OAAO,YACd+E,QAAQ,aACL,CAAC,OAAQ,YAAa,eAAgB,aAClC,YAAa,cAEjB,SAAUkB,EAAQG,EAAM8L,EAAM6vB,EAAMC,EAAMn/B,GAQtC,OAPAN,EAAO0D,EACP9F,EAAKiG,EACLoK,EAAK0B,EACLvP,EAAKo/B,EACL7C,EAAK8C,EACLjgC,EAAKc,EAEE,CACHo/B,QAAS,SAAUC,GACf/C,EAAM+C,GAEVC,UAAW,SAAUzhC,GACjBA,EAAK8H,GAAG,UAAWq3B,GAtJ/B9/B,QAAQkI,OAAOq3B,EAAY,CACvB7mB,WAAY,CACRvD,UAAW,CAACosB,EAAWH,GACvBlsB,MAAO,CAACqsB,EAAWH,GACnB5zB,IAAK,CAACi0B,EAAWJ,GACjBgB,EAAG,CAACX,EAAaJ,IAErB1oB,aAAc,CAAC,YAAa,QAAS,MAAO,KAE5C4mB,WAAY,CACRtqB,MAAO,EACPC,UAAW,EACXktB,EAAG,MA6IHv5B,YAAa,SAAU1G,GACnB,QAAU2D,IAAN3D,EACA,MAtET,CACHsW,WANQ9X,GAAG4W,IAAI+nB,EAAW7mB,YAAY1O,OAOtCw1B,WANS5+B,GAAG4W,IAAI+nB,EAAWC,YAAYx1B,OAOvC8O,SANQlY,GAAG4W,IAAI+nB,EAAWzmB,UAAU9O,OAOpCs4B,eANQliC,EAAGsB,IAAI69B,EAAWE,SAnBlC,IAAwB8C,EAChB5wB,EACA6wB,EACAC,EAHgBF,EA6FWngC,EA5F3BuP,EAAQ,mBACR6wB,EAAQpiC,EAAGsB,IAAI6gC,GACfE,EAAOriC,EAAGyF,IAAI08B,GAEdC,EACAjD,EAAWE,OAAS+C,EACbC,GACPd,EAAiBc,EAAM9wB,GAAO,GAC9B4tB,EAAWzmB,SAAW2pB,GAEtBZ,EAAUlwB,EAAO4wB,IAqFb70B,WAAYA,EACZf,WAAY,SAAUvK,GA9DlC,IAAwBoV,EAChB7F,EACA8wB,OA6DkB18B,IAAN3D,EAlDhBm9B,EAAW5yB,WAAa,IAbJ6K,EAkEWpV,EAjE3BuP,EAAQ,oBACR8wB,EAAOriC,EAAGyF,IAAI2R,KAGdmqB,EAAiBnqB,EAAK7F,GAAO,GAC7B4tB,EAAW5yB,WAAa81B,GAExBZ,EAAUlwB,EAAO6F,KA6DbkrB,OAAQ,SAAUtF,EAAMjuB,GACpB/O,EAAGw9B,UAAU8B,EAAKtC,EAAMjuB,IAE5BwzB,OAAQ,SAAUvF,GACdh9B,EAAGy9B,eAAe6B,EAAKtC,IAE3BwF,aAAc,SAAU9d,GACpB,QAAU/e,IAAN+e,EACA,OAAOya,EAAWvmB,aAElBumB,EAAWvmB,aAAe5Y,EAAGuX,IAAImN,IAAM,IAG/CtK,WAAY,SAAUvM,GAClBQ,EAAUR,GAEdH,iBAAkB,SAAUG,GACxBqxB,EAAgBrxB,GAEpB6zB,eAAgBA,MArVhC;CCAC,WACG,aAEA,IAAIt/B,EAAMG,EAENka,EAAW,CACPgmB,SAIR,SAAkB1zB,GAMd,IAAK,IAAI3D,KALTs3B,EAAY3zB,EAAK7M,KAEjBE,EAAKib,KAAK,4BAA8BtO,EAAK4zB,OAAS,KACtDvgC,EAAKib,KAAK,sCAEIqlB,EACNA,EAAU/R,eAAevlB,IACzBhJ,EAAKib,KAAK,mBAAoBjS,GAItChJ,EAAKmB,MAAM,2CAA4CwL,KAdvD2zB,EAAY,GAiBhB,SAAS9vB,IACLrQ,EAAIqB,aAAa6Y,GAGrB,SAASxa,EAAO2gC,GACZ,IAAI3gC,EAASygC,EAAUE,GAOvB,OALK3gC,IACDG,EAAKoD,KAAK,6BAA8Bo9B,GACxC3gC,EAAS,IAGN,SAAU+G,GACb,OAAO/G,EAAO+G,IAAQ,IAAMA,EAAM,KAI1CpJ,QAAQC,OAAO,YACV+E,QAAQ,cAAe,CAAC,OAAQ,mBAEjC,SAAUkB,EAAQwE,GAId,OAHAlI,EAAO0D,EACPvD,EAAM+H,EAEC,CACHsI,KAAMA,EACN3Q,OAAQA,MAnDxB;CCAC,WACG,aAEA,IAAIjC,EAAIuC,EAEJie,EAAQ,GACRqiB,EAAY,GAEhB,SAASC,EAAS57B,EAAM67B,EAAUC,GAC9B,IAAI9G,EAAMt8B,QAAQkI,OAAO,GAAIi7B,GAAY,GAAIviB,EAAMtZ,IAAS,IAS5D,OAPIlH,EAAGyF,IAAIu9B,IACPpjC,QAAQ6V,QAAQymB,EAAK,SAAU/lB,EAAGD,GAC1B8sB,EAAQrS,eAAeza,KACvBgmB,EAAIhmB,GAAK8sB,EAAQ9sB,MAItBgmB,EAIX,SAAS+G,EAAU/G,EAAKtyB,EAAMs5B,GAC1B,IAAKhH,EAAK,OAAO,KAEjB,IAAIiH,EAAO,GAkBX,OAjBID,GACAt5B,EAAK6L,QAAQ,SAAUS,GACnBitB,EAAKjtB,GAAK,KAIbtM,GAAQs5B,EACTtjC,QAAQ6V,QAAQymB,EAAK,SAAU/lB,EAAGD,GACzBgtB,GAAQC,EAAKjtB,KACdgmB,EAAIhmB,GAAKlD,OAAOkpB,EAAIhmB,OAI5BtM,EAAK6L,QAAQ,SAAUS,GACnBgmB,EAAIhmB,GAAKlD,OAAOkpB,EAAIhmB,MAGrBgmB,EAGX,SAASkH,EAASl8B,EAAMg1B,GACpB1b,EAAMtZ,GAAQg1B,EACd35B,EAAI4L,UAAU,gBAAiB,CAAEnF,IAAK9B,EAAM+B,MAAOizB,IAGvD,SAASmH,EAAWn8B,EAAMg1B,GACtB,IAAIoH,EAAS9iB,EAAMtZ,IAAS,GAC5Bk8B,EAASl8B,EAAMtH,QAAQkI,OAAOw7B,EAAQpH,IAG1C,SAASqH,EAAYx0B,GACjByR,EAAQzR,EACR8zB,EAAUptB,QAAQ,SAAUsI,GAAQA,MAGxC,SAASylB,EAAYC,GACjBZ,EAAU1wB,KAAKsxB,GAGnB,SAASC,EAAeD,GACpBZ,EAAYA,EAAUxR,OAAO,SAAU6K,GAAO,OAAOA,IAAQuH,IAGjE7jC,QAAQC,OAAO,YACd+E,QAAQ,eAAgB,CAAC,YAAa,mBACnC,SAAUqB,EAAMqE,GACZtK,EAAKiG,EACL1D,EAAM+H,EAEN,IACIkW,EAAQ5gB,QAAQ+jC,UAAUC,WAAaA,UAAY,GAEvD,MAAOxlB,GACHoC,EAAQ,GAOZ,OAJAje,EAAIqB,aAAa,CACb2/B,YAAaA,IAGV,CACHT,SAAUA,EACVG,UAAWA,EACXG,SAAUA,EACVC,WAAYA,EACZG,YAAaA,EACbE,eAAgBA,MA5FhC;CCAC,WACG,aAIA,SAASG,EAAOnhB,GACZ,OAAOC,KAAK+W,MAAO/W,KAAKgX,SAAWjX,EAAKA,EAAI,GAGhD,SAASohB,EAAQpuB,GACb,OAAOA,EAAI,EAAImuB,EAPH,MAOUnuB,GAG1B9V,QAAQC,OAAO,YACV+E,QAAQ,gBAAiB,CAAC,OAAQ,YAEnC,WACI,MAAO,CACHi/B,OAAQA,EACRC,QAASA,MAnBzB;CCAC,WACG,aAEA,IAAI1hC,EAAM8D,EAMN69B,EAJAC,EAAS,CAAC,QAAS,QACnBC,EAAWD,EAAO7Q,KAAK,KAEvB0P,EAAY,GAGZqB,EAAe,CACfC,MAAO,CACHzS,KAAM,CACFgF,MAAO,UACPI,KAAM,WAEVrF,OAAQ,CACJiF,MAAO,UACPI,KAAM,YAGdsN,MAAO,CACH1S,KAAM,CACFgF,MAAO,UACPI,KAAM,WAEVrF,OAAQ,CACJiF,MAAO,UACPI,KAAM,YAGduN,MAAO,CACH3S,KAAM,CACFgF,MAAO,UACPI,KAAM,WAEVrF,OAAQ,CACJiF,MAAO,UACPI,KAAM,aAKlB,SAASlkB,IACLmxB,EAAQ79B,EAAG48B,SAAS,QAAS,CAAEtyB,IAAK,IAAKA,IACzC8zB,IAGJ,SAASC,IACL,OAAOP,EAAOD,GAYlB,SAASzC,IACL,IAAI9vB,EAAIuyB,EAAQ,EAIhB,OAHAA,EAASvyB,IAAIwyB,EAAOj6B,OAAU,EAAIyH,EAClCtL,EAAGk9B,SAAS,QAAS,CAAE5yB,IAAKuzB,IAC5BS,EAAW,UACJD,IAGX,SAASC,EAAWC,GAapB,IAAoB5jC,EACZgiB,EACAlF,EAdJomB,EAAQ79B,EAAG48B,SAAS,QAAS,CAAEtyB,IAAKuzB,IAASvzB,IAC7CpO,EAAKib,KAAK,kBAAmB0mB,GAC7BO,IAUgBzjC,EATL4jC,GAAO,MAUd5hB,EAAI0hB,IACJ5mB,EAAI,iBAAmB9c,EAAI,MAAQgiB,EACvCzgB,EAAKmB,MAAMoa,GAEXklB,EAAUptB,QAAQ,SAAUsI,GACxBA,EAAK,CAAEM,MAAO,cAAepV,MAAO4Z,MAZ5C,SAASyhB,IACL,IAAIr5B,EAAOzK,GAAGC,OAAO,QACrBwK,EAAKjD,QAAQi8B,GAAU,GACvBh5B,EAAKjD,QAAQu8B,KAAY,GAa7B,SAASf,EAAYzlB,GACjB8kB,EAAU1wB,KAAK4L,GAGnB,SAAS2lB,EAAe3lB,GACpB8kB,EAAYA,EAAUxR,OAAO,SAAU6K,GAAO,OAAOA,IAAQne,IAGjE,SAAS2mB,EAAYC,EAAO5xB,GACxB,IAAI4C,EAAIgvB,GAAS,OACb9jC,EAAIkS,GAAQ,SACZ8P,EAAI0hB,IAER,MAAa,SAAN5uB,EAAeA,EAAIuuB,EAAavuB,GAAG9U,GAAGgiB,GAGjDjjB,QAAQC,OAAO,YACV+E,QAAQ,eAAgB,CAAC,OAAQ,eAClC,SAAUkB,EAAQsE,GAMd,OALAhI,EAAO0D,GACPI,EAAKkE,GAEFo5B,YAAYgB,GAER,CACH5xB,KAAMA,EACNjB,MAAO,SAAU3P,GACb,QAAU2D,IAAN3D,EACA,OAAOuiC,IApE3B,IAAkB1hB,EACVrS,EADUqS,EAsEW7gB,GApEd,GADPwO,EAAMwzB,EAAOl6B,QAAQ+Y,KACTrS,IAAQuzB,IACpBA,EAAQvzB,EACRtK,EAAGk9B,SAAS,QAAS,CAAE5yB,IAAKuzB,IAC5BS,MAoEIlD,YAAaA,EACbkC,YAAaA,EACbE,eAAgBA,EAChBgB,YAAaA,MAjI7B;CCAC,WACG,aAEA,IAAItiC,EAAMpC,EAAIoG,EAAIw+B,EAEdC,EAAU,GACVC,EAAa,EAIjB,SAASC,EAAUr4B,EAAK8C,GAIpB,OAHK9C,GACDtK,EAAKoD,KAAK,kBAAoBgK,EAAM,OAE/B9C,EAGb,SAASvJ,EAAUuJ,EAAKtD,EAAKa,GACzB,OAAOyC,EAAItJ,OAAO,OACb4E,QAAQoB,GAAK,GACbE,KAAK,KAAMW,GAGpB,SAAS4I,KAET,SAASmyB,IACL,OAAOH,EAAU,EAAIC,EAIzB,SAASG,EAAOv4B,EAAKzC,EAAIglB,EAAKljB,EAAIm5B,GAC9B,IAAKH,EAAUr4B,EAAK,UAAW,OAAO,KAEtC,IAAIy4B,EAAShiC,EAAUuJ,EAAK,SAAUzC,GAClCm7B,EAAQplC,EAAGsB,IAAIyK,IAAO8G,EAO1B,OALAzM,EAAGyoB,SAASsW,EAAQlW,EAAK4V,GAAS,GAC9BK,GAAWN,EAAIS,WAAWF,EAAQD,GAEtCC,EAAO98B,GAAG,QAAS+8B,GAEZ,CACHn7B,GAAIA,EACJ5I,MAAO2jC,GAMf,SAASzxB,EAAO7G,EAAKzC,EAAIglB,EAAKqW,EAAWv5B,EAAIm5B,GACzC,IAAKH,EAAUr4B,EAAK,iBAAkB,OAAO,KAE7C,IAAI64B,IAAQD,EACRE,EAASriC,EAAUuJ,EAAK,eAAgBzC,GACxCm7B,EAAQplC,EAAGsB,IAAIyK,IAAO8G,EAM1B,SAAS4yB,EAAQ53B,EAAG63B,GAChBH,OAAa5/B,IAANkI,GAAoB03B,IAAQ13B,EACnC23B,EAAOx9B,QAAQ,WAAYu9B,GAC3BG,GAAQN,EAAMG,GASlB,OAhBAn/B,EAAGyoB,SAAS2W,EAAQvW,EAAK4V,GAAS,GAClCW,EAAOx9B,QAAQ,WAAYu9B,GACvBL,GAAWN,EAAIS,WAAWG,EAAQN,GAYtCM,EAAOn9B,GAAG,QAASo9B,GAEZ,CACHx7B,GAAIA,EACJ5I,MAAO2jC,EACPW,SAAU,WAAc,OAAOJ,GAC/BhyB,OAAQkyB,EACRG,WAXJ,WACIH,OAAQ9/B,GAAW,KAiB3B,SAASkgC,EAASn5B,EAAKzC,EAAI67B,GACvB,IAAKf,EAAUr4B,EAAK,oBAAqB,OAAO,KAEhD,IAAK1M,EAAGuX,IAAIuuB,KAAUA,EAAK/7B,OAEvB,OADA3H,EAAKoD,KAAK,oCACH,KAGX,IAAIugC,EAAO5iC,EAAUuJ,EAAK,WAAYzC,GAClC+7B,EAAO,GACPC,EAAW,GACXC,EAAU,EAMd,SAASC,IACL,IAAIl8B,EAAKzJ,GAAGC,OAAOsD,MAAMuF,KAAK,MAC1BqU,EAAI,aAAa8gB,KAAKx0B,GACtBuG,EAAMwC,OAAO2K,EAAE,IAEfnN,IAAQ01B,IACRF,EAAKE,GAAS3+B,GAAGS,QAAQ,YAAY,GAErCg+B,EADAE,EAAU11B,GACIjJ,GAAGS,QAAQ,YAAY,GACrCo+B,KAoCR,SAASA,IACL,IAAIC,EAAOL,EAAKE,GAChBG,EAAKt6B,GAAGs6B,EAAKC,MAAOD,EAAKr9B,KAmB7B,SAASu9B,EAAcvkC,GACnB,QAAU2D,IAAN3D,EACA,OAAOkkC,EAEE,GAALlkC,GAAUA,EAAIgkC,EAAKj8B,OACfm8B,IAAYlkC,GACZgkC,EAAKE,GAAS3+B,GAAGS,QAAQ,YAAY,GAErCg+B,EADAE,EAAUlkC,GACIuF,GAAGS,QAAQ,YAAY,GACrCo+B,KAEAhkC,EAAKoD,KAAK,kCAAmCxD,GAGjDI,EAAKoD,KAAK,8BAA+BxD,GAKrD,OAvEA8jC,EAAKrwB,QAAQ,SAAU+wB,EAAKF,GAExB,GAAKtmC,EAAGyF,IAAI+gC,GAAZ,CAMA,IAAIC,EAAMx8B,EAAK,IAAMq8B,EACjBI,EAAqB,IAAVJ,EACXK,EAAQxjC,EAAU4iC,EAAM,cAAeU,GAE3CE,EAAM3+B,QAAQ,WAAY0+B,GAC1BC,EAAMt+B,GAAG,QAAS89B,GAClB//B,EAAGyoB,SAAS8X,EAAOH,EAAIvX,IAAK4V,GAAS,GACjC2B,EAAItB,SAAWN,EAAIS,WAAWsB,EAAOH,EAAItB,SAC7CtlC,QAAQkI,OAAO0+B,EAAK,CAChBj/B,GAAIo/B,EACJ18B,GAAIw8B,EACJ16B,GAAI/L,EAAGsB,IAAIklC,EAAIz6B,KAAO8G,EACtByzB,MAAOA,IAGPE,EAAIx9B,MACJi9B,EAASO,EAAIx9B,KAAOs9B,GAGxBN,EAAK7zB,KAAKq0B,QAxBNpkC,EAAKoD,KAAK,oCAAsC8gC,EACpC,oBAmEb,CACHjlC,MA1FJ,WACI,OAASwjC,EAAUC,GAAckB,EAAKj8B,OAAU+6B,GA0FhDa,SArCJ,SAAkB3jC,GACd,IACIwO,EADA61B,EAAOL,EAAKE,GAGhB,QAAUvgC,IAAN3D,EACA,OAAOqkC,EAAKr9B,KAAOq9B,EAAKC,WAGZ3gC,KADZ6K,EAAMy1B,EAASjkC,IAEXI,EAAKoD,KAAK,4BAA6BxD,GAEvCukC,EAAc/1B,IA2BtB+1B,cAAeA,EACf5hB,KAAM,WAAc,OAAOqhB,EAAKj8B,SAKxCnK,QAAQC,OAAO,cACd+E,QAAQ,gBACL,CAAC,OAAQ,YAAa,cAAe,iBAErC,SAAUkB,EAAQG,EAAMsE,EAAMq8B,GAM1B,OALAxkC,EAAO0D,EACP9F,EAAKiG,EACLG,EAAKmE,EACLq6B,EAAMgC,EAEC,CACH3B,OAAQA,EACR1xB,OAAQA,EACRsyB,SAAUA,MAhN1B;CCAC,WACG,aAEA,IAAIzjC,EAAMykC,EAAW7mC,EAAIuC,EAAKX,EAI9B,SAASklC,EAAW9tB,GAChB,IAMI+tB,EANAtqB,EAAW,GACXuqB,EAAOhuB,EAAE2iB,IAAM,IACfsL,EAAMjuB,EAAE2iB,IAAM,cACduL,EAAOluB,EAAE2iB,IAAM,eACfwL,EAASnnC,EAAGsB,IAAI0X,EAAEouB,QAClBC,EAAe,GA+BnB,SAASC,EAAUhiC,GACf,IAAI8F,EAAIxL,QAAQkI,OAAO,GAAIxC,EAAQ0T,EAAEiN,OACjC1jB,EAAI+d,gBACJ/d,EAAI4L,UAAU84B,EAAK77B,GACnBxJ,EAAGgQ,SAKX,SAAS21B,IACA3lC,EAAGkQ,YACA9R,EAAGgU,QAAQ,WACX5R,EAAKmB,MAAM,cAAgByjC,EAAO,SAEtCM,EAAUtuB,EAAE/Y,MAAMunC,YAI1B,SAASC,IACLV,EAAiBF,EAAUU,EA1Db,KA6DlB,SAASG,IACDX,IACAF,EAAUx5B,OAAO05B,GACjBA,EAAiB,MArDzB/tB,EAAE/Y,MAAM0nC,UAAY,GACpB3uB,EAAE/Y,MAAM2nC,YAAc,GACtB5uB,EAAE/Y,MAAMunC,UAAYxuB,EAAEwuB,WAAa,GACnCxuB,EAAE/Y,MAAM4nC,aAAc,EACtB7uB,EAAE/Y,MAAM6nC,eAAiB9uB,EAAE+uB,0BAA4B,sBAqBvDtrB,EAASyqB,GAnBT,SAAgBn4B,GACZnN,EAAGiQ,OACHmH,EAAE/Y,MAAM0nC,UAAY54B,EAAKi4B,GACzBhuB,EAAE/Y,MAAM+nC,OAASj5B,EAAKi5B,OACtBb,GAAUA,IAELvnC,QAAQiV,OAAOmE,EAAE/Y,MAAM0nC,UAAWN,KACnCruB,EAAE/Y,MAAM2nC,YAAc,GAClBP,EAAat9B,QACbnK,QAAQ6V,QAAQuD,EAAE/Y,MAAM0nC,UAAW,SAAU7L,GACpC97B,EAAGs8B,YAAY+K,EAAcvL,IAC9B9iB,EAAE/Y,MAAM2nC,YAAYz1B,KAAK2pB,KAIrCl8B,QAAQqoC,KAAKjvB,EAAE/Y,MAAM0nC,UAAWN,IAEpCruB,EAAE/Y,MAAMuB,UAGZe,EAAIqB,aAAa6Y,GASjBzD,EAAE/Y,MAAMioC,gBAAkBZ,EA0B1BtuB,EAAE/Y,MAAMkoC,cAJR,WACInvB,EAAE/Y,MAAM4nC,aAAe7uB,EAAE/Y,MAAM4nC,YAC/B7uB,EAAE/Y,MAAM4nC,YAAcJ,IAAiBC,KAI3C1uB,EAAE/Y,MAAMmoC,IAAI,WAAY,WACpB7lC,EAAI4H,eAAesS,GACnBirB,IACA9lC,EAAGiQ,SAGPy1B,EAAUtuB,EAAE/Y,MAAMunC,WAClBC,IAGJ7nC,QAAQC,OAAO,cACV+E,QAAQ,sBACT,CAAC,OAAQ,YAAa,YAAa,mBAC/B,iBAEA,SAAUkB,EAAQuiC,EAAapiC,EAAMqE,EAAO5H,GAOxC,OANAN,EAAO0D,EACP+gC,EAAYwB,EACZroC,EAAKiG,EACL1D,EAAM+H,EACN1I,EAAKc,EAEE,CACHokC,WAAYA,MAtGhC;CCCC,WACG,aAuBA,SAASwB,EAAU/gC,EAAIwH,GACnB,IAAIw5B,GAAU,EAWd,OATAx5B,EAAKy5B,UAAU/yB,QAAQ,SAAUrK,GAfjC,SAASjC,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAVhD,IAAiB9B,EAAIkhC,EAAOx/B,EACpBC,EA0BIq/B,EAFM,MAANn9B,GACO7D,EARZnE,OAAO,MAAMA,OAAO,MAAMkG,KAAK,UAAW,GAAGlG,OAAO,OASrC,IA3BLmE,EA6BGA,EA7BCkhC,EA6BG15B,EAAK25B,WAAWt9B,GA7BZnC,EA6BgB8F,EAAK45B,WAAWv9B,GA5BpDlC,EAAK3B,EAAGnE,OAAO,MAYnB+F,EAAQ,SAVa,iBAAVs/B,EACDA,EAAMlkC,QAAQ,KAAM,KAEpBkkC,GAOa,MACvBt/B,EAAQ,QAASF,IAgBC,KAGXs/B,EAGX3oC,QAAQC,OAAO,cACd+E,QAAQ,cAAe,CACpB,WACI,MAAO,CACH0jC,UAAWA,MA3C3B;CCDC,WACG,aAEA,IAAIlmC,EAAMrC,EAASC,EAAImG,EAAMC,EASzBgN,EANAw1B,EAAM,GAENC,EAAW,YAGXC,EAAa,GAIjB,SAASC,EAAOxoC,EAAMc,GAClBd,EAAKY,MAAM,QAASE,GAqBxB,SAAS2nC,EAAYzoC,EAAMc,GACvB,IAAI4nC,EAAM1oC,EAAKE,OAAO,kBAAkB8O,UAAU,MAClDw5B,EAAOxoC,EAAMc,EAAQ,MAErB4nC,EAAIp/B,KAAK,SAAU6L,EAAGlE,GAClB,IAAI03B,EAAK1oC,GAAGC,OAAOsD,MACfuiC,EAAQ90B,EAAE23B,WACVL,EAAWnY,eAAe2V,IAC1ByC,EAAOG,EAAIJ,EAAWxC,MAYlC,SAAS8C,EAAYC,EAAWC,EAAYjoC,EAAOD,GAPnD,IAAmBmoC,EAAOt+B,EAClBtK,EAOA0oC,GACAL,EAAYM,EAAWC,MAAOloC,GAC9B2nC,EAAYM,EAAWvgC,MAAO1H,KAE9B2nC,EAAYM,EAAWC,MAAOloC,GAC9B0nC,EAAOO,EAAWvgC,MAAO1H,EAAQ,OAbtBkoC,EAeLD,EAAWC,MAfCt+B,EAeMq+B,EAAWE,MAAM/oC,OAAO,eAdhDE,EAcgES,GAdlD+E,EAAKtB,aACnB7E,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC3CT,EAAGqH,UAAUkiC,EAAO,UAAYX,GACpC39B,EAAK9J,MAAM,SAAUR,EAAI,MAc7B,IAAI8oC,EAAY,CACZ/mB,EAAG,CACCgnB,MAAO,KACPC,OAAQ,KACRC,QAAS,MAGbt+B,MAAO,WACH,IAAIoX,EAAI+mB,EAAU/mB,EAClBA,EAAEgnB,OAASt2B,EAAIyc,KAAKnN,EAAEgnB,MAAMG,MAC5BnnB,EAAEinB,QAAUv2B,EAAIyc,KAAKnN,EAAEinB,OAAOE,MAC9BJ,EAAU/mB,EAAI,CAAEgnB,MAAO,KAAMC,OAAQ,KAAMC,QAAS,OAGxDE,MAAO,SAAU7/B,EAAI4/B,GACjB,IAEIn0B,EAFAgN,EAAI+mB,EAAU/mB,EACdqnB,EAAKrnB,EAAEgnB,MAGNhnB,EAAEknB,QAIC3/B,IAAOyY,EAAEknB,SACTl0B,EAAe,QAAXq0B,EAAGp5B,IAAgB,OAAS,MAChCo5B,EAAGp5B,IAAM+E,EACTq0B,EAAGF,KAAOA,IAGVnnB,EAAEinB,OAASjnB,EAAEgnB,MACbhnB,EAAEgnB,MAAQ,CAAEz/B,GAAIA,EAAI0G,IAAK,MAAOk5B,KAAMA,GACtCnnB,EAAEknB,QAAU3/B,IAXhByY,EAAEgnB,MAAQ,CAAEz/B,GAAIA,EAAI0G,IAAK,MAAOk5B,KAAMA,GACtCnnB,EAAEknB,QAAU3/B,IAepB+/B,OAAQ,WACJ,IAAItnB,EAAI+mB,EAAU/mB,EACdqnB,EAAKrnB,EAAEgnB,MACPO,EAAKvnB,EAAEinB,OACXv2B,EAAI22B,EAAGp5B,KAAKo5B,EAAGF,MACfI,GAAM72B,EAAIyc,KAAKoa,EAAGJ,QA6B1BjqC,QAAQC,OAAO,cACdC,UAAU,kBAAmB,CAAC,OAAQ,UAAW,YAAa,cAE3D,SAAUgG,EAAQE,EAAWC,EAAMoE,GACnC,OAAO,SAAUpK,EAAOK,GACpB8B,EAAO0D,EACP/F,EAAUiG,EACVhG,EAAKiG,EACLE,EAAOkE,EAEP,IAMIpJ,EANAuoC,EAAQhpC,GAAGC,OAAOH,EAAQ,IAC1BgpC,EAAa,CACTE,MAAOA,EACPD,MAAOC,EAAM/oC,OAAO,iBAAiBA,OAAO,SAC5CsI,MAAOygC,EAAM/oC,OAAO,eAAeA,OAAO,UAInC+oC,EAxIC/oC,OAAO,iBAAiB8O,UAAU,MAE9C1F,KAAK,SAAU6L,EAAGlE,GACtB,IAAI7Q,EAAIH,GAAGC,OAAOsD,MACduiC,EAAQ90B,EAAE23B,WACVxoC,EAAEqH,QAhBE,gBAiBJ8gC,EAAWxC,GAAS4D,QAEpBvpC,EAAE2I,KAAKu/B,KACPC,EAAWxC,GAAS3lC,EAAE2I,KAAKu/B,MAG/B7oC,EAAGgU,QAAQ,WACX5R,EAAKmB,MAAM,+BAAgCulC,GA6H3C7oC,EAAMS,iBAAiB,WACnB,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACCG,EAAMjB,EAAGkB,WAAW,EAAG,IACvBkoC,EACInpC,EAAMkqC,UAAUpgC,OAChBu/B,EACAroC,EAAII,MAAOJ,EAAIG,UAIvBnB,EAAMS,iBAAiB,YAAa,WAChC0oC,EACInpC,EAAMkqC,UAAUpgC,OAChBu/B,EACAroC,EAAII,MAAOJ,EAAIG,UAIvBnB,EAAMmoC,IAAI,WAAY,WAClBU,EAAa,SAKxBhpC,UAAU,qBAAsB,CAAC,OAAQ,cACtC,SAAUgG,EAAQyE,GAClB,OAAO,SAAUtK,EAAOK,GACpB8B,EAAO0D,EACPM,EAAKmE,EACL,IAAIS,EAASxK,GAAGC,OAAOH,EAAQ,IAE/B8S,EAAMhN,EAAGqpB,YAETzkB,EAAOuE,UAAU,MAAMlH,GAAG,QAAS,WAC/B,IAvEJqa,EACAqnB,EACAE,EACAG,EACAC,EAfqBC,EACrBT,EACA5/B,EAgFQsgC,EAAM/pC,GAAGC,OAAOsD,MAES,KAAzBwmC,EAAIjhC,KAAK,cAnFjBugC,GADqBS,EAqFOC,GApFd9pC,OAAO,OACrBwJ,EAAKqgC,EAAOhhC,KAAK,SAErB8J,EAAIyc,KAAKga,GACTA,EAAOS,EAAOlnC,OAAO,OACrBqmC,EAAUK,MAAM7/B,EAAI4/B,GACpBJ,EAAUO,SA+EE/pC,EAAMuqC,YA3Ed9nB,EAAI+mB,EAAU/mB,EACdqnB,EAAKrnB,EAAEgnB,MACPO,EAAKvnB,EAAEinB,OACPS,EAAMH,GAAMA,EAAGhgC,GACfogC,EAAOJ,GAAMA,EAAGt5B,IACb,CACH85B,SAAUV,EAAG9/B,GACbygC,SAAUX,EAAGp5B,IACbg6B,UAAWP,EACXQ,UAAWP,IAmEHpqC,EAAM4qC,aAAa5qC,EAAMuqC,eAIjCvqC,EAAMmoC,IAAI,WAAY,WAClBqB,EAAUn+B,cAKrBxL,UAAU,mBACP,CAAC,OAAQ,SAAU,WAAY,YAC/B,SAAUsC,EAAM0oC,EAAQ18B,EAAUpO,GAElC,OAAO,SAAUC,EAAOK,EAAS2vB,GAC7B,IAEI8a,EAAKnqB,EAFLoqB,EAAS/a,EAAM+a,OACfxB,EAAQhpC,GAAGC,OAAOH,EAAQ,IAG9B,SAAS2qC,IACL,IAAIC,EAAc,GAClB,SAASC,EAAUt9B,GACXq9B,EAAYnhC,QACZnK,QAAQ6V,QAAQy1B,EAAa,SAAUhiC,GACnCA,EAAGlB,QAAQ,cAAe6F,KAItCO,EAAS,WACDnO,EAAMkqC,UAAUpgC,SAChBghC,EAAMvB,EAAMj6B,UAAU,OAGtBw7B,IAAQA,EAAI/gC,UACZ+gC,EAAIlhC,KAAK,WACL,IAAIX,EAAK1I,GAAGC,OAAOsD,OAGA,EAFf/D,EAAGy7B,KAAKvyB,EAAGI,KAAK,UACZrJ,EAAM2nC,YACNoD,IACJE,EAAY/4B,KAAKjJ,KAGzBiiC,GAAU,GACVvqB,EAAUxS,EAAS,WACf+8B,GAAU,IA9OlB,MAgPIJ,OAAMplC,KAKlB1F,EAAMmoC,IAAI,mBAAoB6C,GAC9BhrC,EAAMS,iBAAiB,cAAeuqC,GAEtChrC,EAAMmoC,IAAI,WAAY,WACdxnB,GACAxS,EAASf,OAAOuT,SAjQpC;CCAC,WACG,aAEA,IAAIxe,EAAMykC,EAAW7mC,EAAIuC,EAAKX,EAM9B,SAASwpC,EAAWpyB,GAChB,IAQI+tB,EARAtqB,EAAW,GACXuqB,EAAOhuB,EAAE2iB,IAAM,IACfsL,EAAMjuB,EAAE2iB,IAAM,cACduL,EAAOluB,EAAE2iB,IAAM,eACf0P,EAAQrrC,EAAGsB,IAAI0X,EAAEsyB,OACjBnE,EAASnnC,EAAGsB,IAAI0X,EAAEouB,QAClBmE,EAAQvyB,EAAEuyB,OAAS,KACnBC,EAAe,GAgCnB,SAASC,IACL,IAAIjB,EAAaxxB,EAAE/Y,MAAMuqC,WAErBkB,EADK1rC,EAAGyF,IAAIuT,EAAE/Y,MAAMyrC,gBACE,GACtBtgC,EAAIxL,QAAQkI,OAAO,GAAI0iC,EAAYkB,EAAe1yB,EAAEiN,OAEpD1jB,EAAI+d,gBACAtgB,EAAGgU,QAAQ,UACX5R,EAAKmB,MAAM,sBAAuB0jC,EAAK77B,GAE3C7I,EAAI4L,UAAU84B,EAAK77B,GACnBxJ,EAAGgQ,SAaX,SAAS21B,IACA3lC,EAAGkQ,YACA9R,EAAGgU,QAAQ,WACX5R,EAAKmB,MAAM,cAAgByjC,EAAO,SAEtCyE,KAIR,SAAShE,IACLV,EAAiBF,EAAUU,EA9Eb,KAiFlB,SAASG,IACDX,IACAF,EAAUx5B,OAAO05B,GACjBA,EAAiB,MAmBzB,OAxFA/tB,EAAE/Y,MAAMkqC,UAAY,GACpBnxB,EAAE/Y,MAAM2nC,YAAc,GACtB5uB,EAAE/Y,MAAMuqC,WAAaxxB,EAAEwxB,YAAc,GACrCxxB,EAAE/Y,MAAM4nC,aAAc,EACtB7uB,EAAE/Y,MAAM6nC,eAAiB9uB,EAAE+uB,0BAA4B,sBAsBvDtrB,EAASyqB,GAnBT,SAA6Bn4B,GACzBnN,EAAGiQ,OACHmH,EAAE/Y,MAAMkqC,UAAYp7B,EAAKi4B,GACzBhuB,EAAE/Y,MAAM+nC,OAASj5B,EAAKi5B,OACtBb,GAAUA,IAELvnC,QAAQiV,OAAOmE,EAAE/Y,MAAMkqC,UAAWqB,KACnCxyB,EAAE/Y,MAAM2nC,YAAc,GAClB4D,EAAazhC,QACbnK,QAAQ6V,QAAQuD,EAAE/Y,MAAMkqC,UAAW,SAAUrO,GACpC97B,EAAGs8B,YAAYkP,EAAc1P,IAC9B9iB,EAAE/Y,MAAM2nC,YAAYz1B,KAAK2pB,KAIrCl8B,QAAQqoC,KAAKjvB,EAAE/Y,MAAMkqC,UAAWqB,IAEpCxyB,EAAE/Y,MAAMuB,UAGZe,EAAIqB,aAAa6Y,GAgBjBzD,EAAE/Y,MAAM4qC,aAAeY,EAQvBzyB,EAAE/Y,MAAM0rC,eALR,SAAwBC,EAAQC,GAC5B,IAAIC,EAAQD,EAAON,GACnBvyB,EAAE/Y,MAAM6rC,MAAS9yB,EAAE/Y,MAAM6rC,QAAUA,EAAS,KAAOA,EACnDT,GAASA,EAAMO,EAAQC,IA4B3B7yB,EAAE/Y,MAAMkoC,cAJR,WACInvB,EAAE/Y,MAAM4nC,aAAe7uB,EAAE/Y,MAAM4nC,YAC/B7uB,EAAE/Y,MAAM4nC,YAAcJ,IAAiBC,KAI3C1uB,EAAE/Y,MAAMmoC,IAAI,WAAY,WACpB7lC,EAAI4H,eAAesS,GACnBirB,IACA9lC,EAAGiQ,SAGP45B,IACAhE,IAEO,CACHsE,YAAaN,GAIrB7rC,QAAQC,OAAO,cACV+E,QAAQ,sBACT,CAAC,OAAQ,YAAa,YAAa,mBAC/B,iBAEA,SAAUkB,EAAQuiC,EAAapiC,EAAMqE,EAAO5H,GAOxC,OANAN,EAAO0D,EACP+gC,EAAYwB,EACZroC,EAAKiG,EACL1D,EAAM+H,EACN1I,EAAKc,EAEE,CACH0oC,WAAYA,MA9HhC;CCAC,WACG,aAEA,IAAIhpC,EAAMpC,EAMV,SAASgsC,EAAejhC,GACN/K,EAAGsB,IAAIyJ,EAAKkhC,QACZjsC,EAAGsB,IAAIyJ,EAAKmhC,QACZlsC,EAAGsB,IAAIyJ,EAAKohC,QAE1B/pC,EAAKmB,MAAM,cAAewH,GAM9BnL,QAAQC,OAAO,cACd+E,QAAQ,qBACT,CAAC,OAAQ,YAET,SAAUkB,EAAQG,GAId,OAHA7D,EAAO0D,EACP9F,EAAKiG,EAEE,CACH+lC,eAAgBA,MA7B5B;CCEC,WACG,aAEA,IAAI5pC,EAAMpC,EAAIkG,EAAIkmC,EAAKhmC,EAEnBimC,EAAY,GAEZxhC,EAAkB,CACd/I,KAAM,OACNT,MAAO,GACPoR,OAAQ,EACRC,YAAa,GACb/L,IAAK,OACLC,OAAQ,OACR4H,MAAM,EACN89B,OAAO,GAGXC,EAAQ,GAoBZ,SAAS/mC,EAAKgK,EAAKvF,GAEf,OADA7H,EAAKoD,KAAK,kBAAoBgK,EAAM,MAAQvF,EAAK,KAC1C,KAIX,SAASuiC,EAAcviC,EAAIc,GACvB,IAAKd,EAAI,OAAOzE,EAAK,eACrB,GAAI+mC,EAAMtiC,GAAK,OAAOzE,EAAK,qBAAsByE,GAEjD,IAhBIwiC,EAgBAthC,EAAWvL,QAAQkI,OAAO,GAAI+C,EAAiB7K,EAAGyF,IAAIsF,IACtDsE,EAAQ,GACRq9B,EAAO,WAAaziC,EACpB3D,EAAQJ,EAAGkB,YAAYslC,EAAMvhC,GAC7BshC,GApBAA,EAoBuBnmC,EApBNlD,OAAO,OACvB4E,QAAQ,cAAc,GAC3B5B,EAAGyoB,SAAS4d,EAAU,aAAcJ,GAAW,GACxCI,GAkBHE,EAAarmC,EAAMlD,OAAO,OAAO4E,QAAQ,YAAY,GACrD4kC,EAAe,GACfC,EAAUR,EAAY,EACtBS,EAAWxmC,EAAMjF,QAgBrB,SAAS0rC,EAAM9iC,EAAI8U,GACf,QAAI1P,EAAMpF,KACN7H,EAAKoD,KAAKuZ,EAAS,kBAAmB9U,IAC/B,GAKf,SAAS+iC,EAAYC,GACbjtC,EAAGqH,UAAUslC,EAAY,SAAW,IAAOG,IAE3CA,EADAD,GAAWI,GAGf3mC,EAAMjF,MAAMwrC,GAIhB,SAAS/gC,EAAU7B,EAAIglB,EAAKljB,EAAIm5B,GAC5B,GAAI6H,EAAM9iC,EAAI,aAAc,OAAO,KAEnC,IAAIijC,EAAMR,EAAO,IAAMziC,EACnBu8B,EAAM4F,EAAInH,OAAO0H,EAAYO,EAAKje,EAAKljB,EAAIm5B,GAI/C,OADA8H,GADA39B,EAAMpF,GAAMu8B,GACInlC,SACTmlC,EA+CX,SAAS2G,IACLR,EAAWp9B,UAAU,KAAKM,SAC1B+8B,EAAan3B,QAAQ,SAAUy3B,UACpB79B,EAAM69B,KAEjBN,EAAe,GAGnB,SAASQ,EAAW/pC,GAChB8pC,IACAR,EAAWvpC,OAAO,OAAO4E,QAAQ,iBAAiB,GAC7C3E,KAAKA,GAGd,SAASgqC,EAAapjC,EAAIglB,EAAKljB,EAAIm5B,GACvBp5B,EAAU7B,EAAIglB,EAAKljB,EAAIm5B,IAE3B0H,EAAaz6B,KAAKlI,GAI1B,SAASqjC,EAAWzP,EAAShqB,GACzB84B,EAAW3kC,QAAQ61B,EAAShqB,GAGhC,SAASrH,EAAKT,GACM0gC,EAnJfhsC,OAAO,KACP6I,KAAK,YAAa,+BAmJnBhD,EAAMkG,KAAKT,GAGf,SAAStE,EAAKsE,GACO0gC,EApJhBhsC,OAAO,KACP6I,KAAK,YAAa,8BAoJnBhD,EAAMmB,KAAKsE,GAGf,SAASwH,EAAOxH,GACRzF,EAAMsN,YACNnM,EAAKsE,GAELS,EAAKT,GAQb,OArIA0gC,EAASpkC,GAAG,QAASkL,GAErBg5B,EAAMtiC,GAAM,CACRkB,SAAUA,EACVkE,MAAOA,EACP/I,MAAOA,EACPinC,QAASb,GAGbpmC,EAAM0B,QAAQ,WAAW,GACpB7G,MAAM,MAAOgK,EAASxE,KACtBxF,MAAM,SAAUgK,EAASvE,QA0HvB,CACHkF,UAAWA,EACX0hC,UA7FJ,SAAmBvjC,EAAIglB,EAAKqW,EAAWv5B,EAAIm5B,GACvC,GAAI6H,EAAM9iC,EAAI,aAAc,OAAO,KAEnC,IAAIwjC,EAAMf,EAAO,IAAMziC,EACnByjC,EAAMtB,EAAI74B,OAAOo5B,EAAYc,EAAKxe,EAAKqW,EAAWv5B,EAAIm5B,GAI1D,OADA8H,GADA39B,EAAMpF,GAAMyjC,GACIrsC,SACTqsC,GAsFPC,YAnFJ,SAAqB1jC,EAAI67B,GACrB,GAAIiH,EAAM9iC,EAAI,eAAgB,OAAO,KAErC,IAAIw8B,EAAMiG,EAAO,IAAMziC,EACnB2jC,EAAMxB,EAAIvG,SAAS8G,EAAYlG,EAAKX,GAIxC,OADAkH,GADA39B,EAAMpF,GAAM2jC,GACIvsC,SACTusC,GA4EPC,aAzEJ,WACIlB,EAAWvpC,OAAO,OACb4E,QAAQ,aAAa,GAC1B6kC,GAvHO,GA8LPh1B,OApEJ,WACI,OAAI80B,EAAWlsC,OAAO,OAAOuJ,QAClB,MAEP1D,EAAMlD,OAAO,MACbupC,EAAarmC,EAAMlD,OAAO,OAAO4E,QAAQ,YAAY,GAE9C,CACHyb,MAAO0pB,EACPW,QAASV,EACTthC,UAAWuhC,EACXrlC,QAASslC,KA2DjB9gC,KAAMA,EACN/E,KAAMA,EACN8L,OAAQA,EACRK,UAdJ,WACI,OAAOtN,EAAMsN,cAiBrB,SAASm6B,EAAe9jC,GACpB,IAAI+jC,EAAKzB,EAAMtiC,UACRsiC,EAAMtiC,GAET+jC,GACA9nC,EAAG0F,aAAaoiC,EAAGT,SAK3B3tC,QAAQC,OAAO,cACd+E,QAAQ,iBACL,CAAC,OAAQ,YAAa,eAAgB,gBAAiB,cAEvD,SAAUkB,EAAQG,EAAMmE,EAAM6jC,EAAO1jC,GAWjC,OAVAnI,EAAO0D,EACP9F,EAAKiG,EACLC,EAAKkE,EACLgiC,EAAM6B,EACN7nC,EAAKmE,EAME,CACHqI,KALJ,WACI25B,EAAQ,IAKRC,cAAeA,EACfuB,eAAgBA,MAzOhC;CCDC,WACG,aAEA,IAAIG,EAAYluC,EAMZklC,EAASiJ,EAJTC,EAAc,GACdC,EAAa,IACbC,EAAY,IAKhB,SAAS17B,KACLsyB,EAAU1kC,GAAGC,OAAO,aACZ4C,KAAK,IA4BjB,SAASgiC,EAAW9kC,EAAM2kC,GACtB3kC,EAAK8H,GAAG,YAAa,WAAckmC,EAAYxqC,KAAMmhC,KACrD3kC,EAAK8H,GAAG,WAAY,WAAcmmC,EAAczqC,QAChDmqC,EAAW9F,IAAI,oBAAqB,WAChCoG,EAAcjuC,EAAKiL,UAI3B,SAAS+iC,EAAYhnC,EAAIiI,GACrB,GAAKjI,GAAOiI,IAAOxP,EAAG8E,WAAtB,CAIA,IAtCc2pC,EAAQC,EAClBC,EACAC,EACAztC,EAmCAZ,EAAOC,GAAGC,OAAO8G,GACjBknC,EAASjuC,GAAG6d,MAAMwwB,MAClBH,EAASluC,GAAG6d,MAAMywB,MAClB3tC,GAzCUstC,EAyCOA,EAzCCC,EAyCOA,EAxCzBC,EAAW3uC,EAAGkB,aAAaG,MAC3ButC,EAAY5uC,EAAGkB,aAAaE,OAC5BD,EAAQ,CACJ4tC,QAAS,eACTrlC,KAAM,OACNC,MAAO,QAGX8kC,GAAWE,EAAW,EACtBxtC,EAAMuI,KAAO+kC,EAAS,KAEtBttC,EAAMwI,MAASglC,EAAWF,EAAU,KAIpCttC,EAAMwF,IADN+nC,GAAWE,EAAY,EACVF,GAAUN,EAAc,IAAO,KAE/BM,EAASN,EAAe,KAGlCjtC,GAqBH6tC,EAAQhvC,EAAGsB,IAAIkO,GAAOA,IAAQA,EAElC2+B,EAAa5tC,EAAK+I,KAAK,MAEvB47B,EAAQv1B,aACHG,MAAMu+B,GACNxkC,KAAK,QAAS,WACXrJ,GAAGC,OAAOsD,MAAM5C,MAAM,UAAW,UAEpC0I,KAAK,MAAO,WACTrJ,GAAGC,OAAOsD,MAAM5C,MAAMA,GACjBkC,KAAK2rC,MAItB,SAASR,EAAcjnC,GACdA,GAGM/G,GAAGC,OAAO8G,GAEZ+B,KAAK,QAAU6kC,GACpBjJ,EAAQv1B,aACHG,MAAMw+B,GACNntC,MAAM,CACH4tC,QAAS,SAEZ1rC,KAAK,IAIlBzD,QAAQC,OAAO,cAEVC,UAAU,UAAW,CAAC,aAAc,YACjC,SAAUmvC,EAAchpC,GAMpB,OALAioC,EAAae,EACbjvC,EAAKiG,EAEL2M,IAEO,CACHod,SAAU,IACV3vB,KAAM,SAAUJ,EAAOM,EAAM0vB,GACzBoV,EAAW7kC,GAAGC,OAAOF,EAAK,IAAKN,EAAMgwB,EAAM+e,aAK1DpqC,QAAQ,iBAAkB,CAAC,aAAc,YACtC,SAAUqqC,EAAchpC,GAMpB,OALAioC,EAAae,EACbjvC,EAAKiG,EAEL2M,IAEO,CACHyyB,WAAYA,EACZkJ,YAAaA,EACbC,cAAeA,MArHnC;CCAC,WACG,aAEA,IAAIpsC,EAAMC,EAAQE,EAAKvC,EAAI0K,EAAIxE,EAAIE,EAE/B8oC,EACA3oC,EACAe,EACAX,EACAwoC,EACAvoC,EA2BAwoC,EACAC,EACAC,EACAptC,EA7BAsE,GAAQ,EACR+oC,EAAsB,GAMtB/7B,EAAa,IACbg8B,EAAQ,4BACRC,EAAa,oBAIbC,EAAe,mBACfC,EAAgB,QAGhB9tC,EAAa,CACTC,KAAM,QACNT,MAAO,KAEXuuC,EAAgB,CACZC,2BAA2B,GAE/BrH,EAAY,CAAC,KAAM,QAAS,WAAY,UAAW,SAAU,QAiCjE,SAASsH,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GAUf,SAASsoC,IACL,IAAIrpC,EAAWyB,EAAUuE,EANRA,EAmBjB,SAASsjC,EAAK5mC,EAAK6mC,GACf,IAAIv6B,EAAIhJ,EAAItJ,OAAO,OAAO4E,QAAQoB,GAAK,GACnC6mC,GACAv6B,EAAEtS,OAAO,SAAS4E,QAAQioC,GAAM,GAkBxC,SAASC,EAAOC,EAAK/mC,GACjBxC,EAAOxD,OAAO,MAAMC,KAAK8sC,GACzBvpC,EAAOxD,OAAO,OAAO4E,QAAQoB,GAAK,GAAMhG,OAAO,SAlCnD8rC,EAAallC,QACbklC,EAAa7tC,MAAMmS,GAEnB9M,EAAYwoC,EAAa9rC,OAAO,OAAO4E,QAAQ,aAAa,GAG5DG,GADAxB,EAAMD,EAAUtD,OAAO,OAAO4E,QAAQ,OAAO,IAC9B5E,OAAO,OAAO4E,QAAQ,aAAa,GAdjC0E,EAeLvE,EAdZ/B,EAAGgC,iBAAiBsE,EAAK,QAAS,IAClCA,EAAIrE,GAAG,QAASynC,GAehBpjC,EAAM/F,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAS/CgoC,EAAK,aACLA,EAAK,iBACLA,EAAK,QAAS,aACdA,EAAK,WAELtpC,EAAUtD,OAAO,OAEjB+rC,EAASzoC,EAAUtD,OAAO,OAAO4E,QAAQ,UAAU,IAC5C5E,OAAO,OAAO4E,QAAQ,cAAc,GAE3CtB,EAAUtD,OAAO,MAEjBwD,EAASF,EAAUtD,OAAO,OAAO4E,QAAQ,UAAU,GAOnDkoC,EAAOhuC,EAAK,eAAgB,YAC5BguC,EAAOhuC,EAAK,oBAAqB,iBACjCguC,EAAOhuC,EAAK,kBAAmB,eAuBnC,SAASkuC,EAAYvoB,GACjB,IALatnB,EAAM0I,EALPonC,EAURC,EAAY3pC,EAAIlG,OAAO,cAAc2C,OAAO,SAC5CmC,EAAMsiB,EAAQtiB,IAElBoB,EAAIlG,OAAO,cAAc4C,KAAKwkB,EAAQhc,OARzBtL,EAULoG,EAAIlG,OAAO,aAVAwI,EAUc4e,EAAQ5d,GATzC1J,EAAK6C,OAAO,OAAOkG,KAAK,MAAOomC,EAAezmC,EAAQ0mC,GAWtDnH,EAAU/yB,QAAQ,SAAUknB,EAAMnrB,GAzBlC,SAASrI,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAJhD,IAAiBN,EAAOu9B,EAAOr9B,EACvBC,EADSH,EA6BDunC,EA7BQhK,EA6BG90B,EA7BIvI,EA6BD4e,EAAQ8U,GA5B9BzzB,EAAKH,EAAM3F,OAAO,MAMtB+F,EAAQ,QAASmmC,EAAchJ,GAAS,KACxCn9B,EAAQ,QAASF,KAwBb1D,GACAoB,EAAIlG,OAAO,YAAYgkB,MAtBf4rB,EAsB2B9qC,EApBhC,aADP8qC,EAAIrwC,EAAGu+B,SAAS8R,IACS,qBAAuBA,EAAI,SA4CxD,SAASE,EAAgB1oB,GApBzB,IAAwBA,EAIAA,EAEpB,SAAS2oB,EAASpnC,EAAKiG,GACnB,IACItG,EADQnC,EAAOnG,OAAO,IAAM2I,GAAK3I,OAAO,SAC1B2C,OAAO,SAEzBiM,EAAMoG,QAAQ,SAAUqmB,GACpB/yB,EAAM3F,OAAO,MAAMA,OAAO,MAAMC,KAAKy4B,KAU7CiU,IACAK,EAAYvoB,GAtBQA,EAuBLA,EAtBfsnB,EAAO1uC,OAAO,eAAe4C,KAAKwkB,EAAQ4oB,QAc1CD,EAAS,YAXW3oB,EAoBLA,GATciJ,UAC7B0f,EAAS,gBAAiB3oB,EAAQ6oB,eAClCF,EAAS,cAAe3oB,EAAQ8oB,aAQhCzB,EAAa9tC,OAAOkG,GAGxB,SAASspC,EAAc7hC,GACnB1M,EAAOmL,UAAYuB,EAAK8Y,QACxBxlB,EAAOypC,MAAQ/8B,EAAK8Y,QAAQ5d,GAC5B5H,EAAOwuC,aAAaC,UAAY/hC,EAAK8Y,QAAQ5d,GAC7C5H,EAAOb,SAGX5B,QAAQC,OAAO,QAAS,IACvBsC,WAAW,YACR,CAAC,OAAQ,SAAU,QAAS,WAC3B,mBAAoB,YAAa,aAAc,eAC/C,cAAe,eAAgB,gBAAiB,sBAChD,cAEL,SAAU2D,EAAQirC,EAAUn2B,EAAOxM,EAAU9D,EAAOrE,EAAM4G,EAAMzC,EAAMG,EAC5DsQ,EAAKpY,EAAIuuC,EAAKtuC,GACpBN,EAAO0D,EACPzD,EAAS0uC,EACTxuC,EAAM+H,EACNtK,EAAKiG,EACLyE,EAAKmC,EACL3G,EAAKkE,EACLhE,EAAKmE,EA3KLrI,EA4KKQ,EA5KKT,OAAO,iBAEjBmtC,EAAiBltC,EAAK,uBACtBmtC,EAAcntC,EAAK,qBAEnBotC,EAAgB,CACZptC,EAAK,UAAWA,EAAK,SAAUA,EAAK,YAAaA,EAAK,WACtDA,EAAK,UAAWA,EAAK,SAyKzBG,EAAOH,KAAOA,EAEdG,EAAOmL,UAAY,GACnBnL,EAAOwuC,aAAe,GACtBxuC,EAAO4uC,UAAY/uC,EAAK,iBACxBG,EAAO6uC,YAAchvC,EAAK,mBAC1BG,EAAO8uC,cAAgBjvC,EAAK,qBAC5BG,EAAO+uC,aAAelvC,EAAK,oBAC3BG,EAAOgvC,YAAcnvC,EAAK,mBAG1B,IAAIua,EAAW,GAiBf,SAAS60B,IACL,IAAIx5B,EAAKy5B,EACLlvC,EAAOwuC,aAAaC,WAEpBh5B,EAAgB,IADhBy5B,EAASvxC,EAAGy7B,KAAKp5B,EAAOypC,MAAOzpC,EAAO8nC,YAClB9nC,EAAO8nC,UAAUoH,GAAU,KAE/ClvC,EAAOwuC,aAAaW,UAAY15B,GA/O5B,cA+OmCA,EAAI25B,MAC3CpvC,EAAOwuC,aAAa1jB,OAASrV,GA/O5B,WA+OmCA,EAAI25B,QAExCpvC,EAAOwuC,aAAaW,WAAY,EAChCnvC,EAAOwuC,aAAa1jB,QAAS,GAwCrC,SAASukB,EAAc9uC,GACnB,IAd4BA,EAAQ+uC,EAChC9uC,EAaA8uC,EAAStvC,EAAOypC,MAChB8F,EAAOvvC,EAAOmoC,WAqBlB/nC,EAAGO,WArSI,aAqSiBnB,GACnBoB,SAASf,EAAK,uBACdgB,YAtCuBN,EAsCWA,EAtCH+uC,EAsCWA,GArC3C9uC,EAAUJ,EAAGU,aACTC,OAAO,KAAKC,KAAKnB,EAAKU,GAAU,IAAM+uC,GAC1C/B,EAAc+B,IACd9uC,EAAQO,OAAO,KAAKqhB,KAChBzkB,EAAGu+B,SAAS6Q,GACZ,OACApvC,EAAGu+B,SAAS8Q,IACdrnC,QAAQ,UAAU,GAEjBnF,IA6BFS,MAtBL,WACIlB,EAAKmB,MAAM,aAAcX,EAAQ,KAAM+uC,GACvCpvC,EAAI4L,UA/RC,uBA+RqB,CACtBvL,OAAQA,EACRsE,KAAMyqC,EACNE,QAASD,EAAKC,QACdC,QAASF,EAAKE,UAEH,cAAXlvC,EACAssC,EAAaznC,OAEblF,EAAI4L,UAAUshC,EAAY,CAAExlC,GAAI0nC,MAYnCjuC,UARL,WACItB,EAAKmB,MAAM,YAAaX,EAAQ,KAAM+uC,KAQrChuC,WA7FT8Y,EAAoB,mBAAIm0B,EACxBruC,EAAIqB,aAAa6Y,GA4BjBu0B,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,MACL2P,MA7BJ,SAAeM,EAAQ9zB,GACnBzV,EAAOwuC,aAAaC,YAAczuC,EAAOypC,MACzCwF,IACA7uC,EAAGgK,cAECpK,EAAOypC,MACPvpC,EAAI4L,UAAUshC,EAAY,CAAExlC,GAAI6N,EAAI7N,KAEpC5H,EAAOiR,aAsBX8zB,OAAQkK,EACR9G,WAAY,CACRC,SAAU,QACVC,SAAU,OACVC,UAAW,QACXC,UAAW,OAEf7C,yBAA0B7lC,EAAK,yBAGnCwI,EAAGhC,YAAY,CACX0E,IAAK,CAAC/K,EAAOspC,eAAgBzpC,EAAK,gBAClC6vC,YAAa,CAAC,SAElBrnC,EAAG83B,aAAa,CACZ,CAACtgC,EAAK,aAAcA,EAAK,sBACzB,CAACA,EAAK,eAAgBA,EAAK,0BA+C/BG,EAAO2vC,UAAY,SAAUpvC,GACrBP,EAAOwuC,aAAaC,WACpBY,EAAc9uC,IAItBP,EAAO4vC,YAAc,WACb5vC,EAAOwuC,aAAaC,YACpBoB,OAAO1uC,SAAWksC,EAAertC,EAAOypC,MAtT/B,cA0TjBzpC,EAAO+lC,IAAI,cAAe,WACtB,IACI7iC,EADA4sC,EAAW,IAAIC,SAGf/vC,EAAOgwC,UACPF,EAAS/uC,OAAO,OAAQf,EAAOgwC,SAC/B9sC,EApUQ,sBAoUcgqC,EAEtB30B,EAAMS,KAAKR,EAAIG,MAAMzV,GAAM4sC,EAAU,CACjCG,iBAAkB1yC,QAAQ2yC,SAC1BC,QAAS,CACLC,oBAAgB9sC,KAGvB+sC,QAAQ,WACLnD,EAAsB,GACtBltC,EAAOwoC,aAAaxoC,EAAOmoC,YAC3B79B,SAASgmC,eAAe,iBAAiBrnC,QACzC8C,EAAS,WAAc7L,EAAI4L,UAAUshC,IAAgB,UAKjEptC,EAAOuwC,WAAa,WAChBrD,EArVa,iBAsVbltC,EAAOX,MAAM,eACbW,EAAOgwC,QAAU,MAGrBhwC,EAAO+lC,IAAI,WAAY,WACnB19B,EAAG4C,aACH/K,EAAI4H,eAAesS,GACnBha,EAAGgK,gBAGP0tB,OAAO0Y,eAAexwC,EAAQ,cAAe,CACzCiV,IAAK,WACD,IAAIw7B,EAAM,GAEV,OADAA,EAAIzwC,EAAO0wC,SAAW,KAAO1wC,EAAO2wC,SAC7BF,KAKf1wC,EAAKuC,IAAI,iCAGZ7E,UAAU,cAAe,WACtB,MAAO,CACHkwB,SAAU,IACV3vB,KAAM,SAAUJ,EAAOM,GACnBA,EAAKgB,KAAK,QAAS,WACfoL,SAASgmC,eAAe,cACnBM,cAAc,IAAIC,WAAW,gBAMjDpzC,UAAU,YAAa,CAAC,SACrB,SAAUgrC,GACN,MAAO,CACH9a,SAAU,IACV3vB,KAAM,SAAUJ,EAAOM,EAAM0vB,GACzB,IACIkjB,EADQrI,EAAO7a,EAAMmjB,WACDC,OAExB9yC,EAAKgB,KAAK,SAAU,WAChBtB,EAAMuB,OAAO,WACT2xC,EAAYlzC,EAAOM,EAAK,GAAG+yC,MAAM,MAErCrzC,EAAMyB,MAAM,sBAM/B5B,UAAU,WAAY,CAAC,SAAU,YAAa,SAAUgrC,EAAQyI,GAC7D,MAAO,CACHvjB,SAAU,IACV3vB,KAAM,SAAUJ,EAAOK,EAAS2vB,GAQZ,SAAZujB,EAAsBp1B,GACtB5d,GAAGC,OAAO,UAAUuH,QAAQ,YAAY,GACxCoW,EAAEq1B,iBATN,IAAIC,EAAY5I,EAAO7a,EAAM0jB,YAiB7BJ,EAAUhyC,KAAK,WAfE,SAAU6c,GACvB5d,GAAGC,OAAO,UAAUuH,QAAQ,YAAY,GACxCoW,EAAEq1B,mBAeNnzC,EAAQiB,KAAK,YAAaiyC,GACrBjyC,KAAK,OAAQ,SAAU6c,GARb,IAAUw1B,EASjBxxC,EAAKib,KAAK,aAAce,GATPw1B,EAURx1B,EAAEy1B,aAAaP,MAAM,GATlCrzC,EAAMoyC,QAAUuB,EAChB3zC,EAAMuB,OAAOkyC,EAAUzzC,IASnBuzC,EAAUp1B,UAM7Bte,UAAU,0BACP,CAAC,aAAc,UAAW,WAAY,aACtC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAxbxD,GA0bG+F,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,KAzZZ7E,EAAehpC,EAAGkB,YAAYooC,EAAO,CACjCnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,KAEHnL,KAAKpG,MAAM,CACpBqG,SAAU,WACVb,IAAKJ,EAAU,OAEnBlE,EAAOiR,UAAY,WAAc47B,EAAaznC,QAC9CynC,EAAaznC,OAiZDrF,EAAKmB,MAAM,8BAGY,WAAvBtD,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAY,CACX0E,IAAK,CAAC0iC,EAAY5tC,EAAK,yBACvB6vC,YAAa,CAAC,SAGlBrnC,EAAG83B,aAAa,CACZ,CAACtgC,EAAK,aAAcA,EAAK,sBACzB,CAACA,EAAK,eAAgBA,EAAK,0BAG/BjC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACAppC,EAAG4C,aACHpH,EAAG0F,aAAa4jC,SA5fpC;CCAC,WACG,aAEA,IAAIptC,EAAMC,EAAQrC,EAAImG,EAAMD,EAAIE,EAAI7D,EAEhC2sC,EACA3oC,EACAe,EACAX,EACAwtC,EACAvtC,EACAwtC,EACA5tC,EAIA6tC,EAAU,GACVC,EAAa,GACbC,EAAc,GACd/E,EAAQ,wBAGRhH,EAAY,CACR,KAAM,MAEVgM,EAAa,CACT,KAAM,OAAQ,YAAa,MAC3B,KAAM,KAAM,WAAY,UAyBhC,SAAS1E,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GAUf,SAASgtC,IACL,OAAO3E,IAGX,SAASC,IACL,IAAIrpC,EAAWyB,EAVEuE,EAWjBwiC,EAAallC,QAEbtD,EAAYwoC,EAAa9rC,OAAO,OAAO4E,QAAQ,aAAa,GAG5DG,GADAxB,EAAMD,EAAUtD,OAAO,OAAO4E,QAAQ,OAAO,IAC9B5E,OAAO,OAAO4E,QAAQ,aAAa,GAhBjC0E,EAiBLvE,EAhBZ/B,EAAGgC,iBAAiBsE,EAAK,QAAS,IAClCA,EAAIrE,GAAG,QAASynC,GAgBhBsE,EAAUztC,EAAIvD,OAAO,OAAO4E,QAAQ,YAAY,GAChDrB,EAAIvD,OAAO,MACX+wC,EAAWxtC,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAC/C5E,OAAO,SACZuD,EAAIvD,OAAO,OAEXwD,EAASF,EAAUtD,OAAO,OAAO4E,QAAQ,UAAU,IAC5C5E,OAAO,MAAM4E,QAAQ,iBAAiB,GAAM3E,KAAK,WACxDuD,EAAOxD,OAAO,SAalB,SAASgtC,EAAYvoB,GACjB,IAtEI6sB,EAsEAhM,EArEG,EADHgM,EAAIryC,EAAOH,MAET,WACFwyC,EAAE,eAqENtuC,EAAGgC,iBAAiBgsC,EAAS,OAAQ,IACrCztC,EAAIlG,OAAO,MAAM4C,KAAKwkB,EAAQ5d,IAE9B,IAAIlB,EAAQorC,EAAS/wC,OAAO,SAE5BolC,EAAU/yB,QAAQ,SAAUknB,EAAMnrB,GAflC,SAASrI,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAJhD,IAAiBN,EAAO0/B,EAAOx/B,EACvBC,EADSH,EAmBDA,EAnBQ0/B,EAmBDC,EAAWl3B,GAnBHvI,EAmBO4e,EAAQ8U,GAlBtCzzB,EAAKH,EAAM3F,OAAO,MAKtB+F,EAAQ,QAASs/B,EAAQ,MACzBt/B,EAAQ,QAASF,KAwBrB,SAAS0rC,EAAeC,GACpB,IAGI/H,EAASgI,EAtFTH,EAmFAlL,EAAQ5iC,EAAOnG,OAAO,SACtBq0C,EAAUtL,EAAMpmC,OAAO,SAASA,OAAO,MACvC2F,EAAQygC,EAAMpmC,OAAO,SApFlB,EADHsxC,EAAIryC,EAAOH,MAET,OACFwyC,EAAE,QACFA,EAAE,cACFA,EAAE,UACFA,EAAE,cACFA,EAAE,cACFA,EAAE,YACFA,EAAE,kBA+Ecj/B,QAAQ,SAAU80B,GAClCuK,EAAQ1xC,OAAO,MAAMC,KAAKknC,KAE9BqK,EAAQn/B,QAAQ,SAAUs/B,GAjB9B,IAA6BA,EACrB7rC,EADqB6rC,EAkBDA,EAjBpB7rC,EAiBaH,EAjBF3F,OAAO,MAEtBoxC,EAAW/+B,QAAQ,SAAU80B,GACzBrhC,EAAG9F,OAAO,MAAMC,KAAK0xC,EAAOxK,QAiBhCsC,EAAU7sC,EAAGqH,UAAU0B,EAAO,SAAWurC,EACzCO,EAAWvtC,GACItH,EAAGqH,UAAU6nC,EAAa3nC,KACR9G,OAAO,QAAS,UACnCT,EAAGqH,UAAU6nC,EAAa3nC,KACP9G,OAAO,kBAAmB,UAC7C8zC,GAEd/K,EAAMroC,MAAM,CACRC,OAAQyzC,EAAW,KACnBxzC,MAAOwrC,EAAU,KACjBmI,SAAU,OACVjG,QAAS,UAGbG,EAAa7tC,MAAMwrC,EAAUwH,GAiBjC,SAAS9D,EAAgB1oB,GACrBkoB,IAEAK,EAAYvoB,GACZ8sB,EAAe9sB,EAAQ+sB,SACvB1F,EAAa9tC,OAAOkG,GAGxB,SAASspC,EAAc7hC,GACnB1M,EAAOmL,UAAYuB,EAAK8Y,QACxBxlB,EAAOb,SAIX5B,QAAQC,OAAO,YAAa,IACvBsC,WAAW,gBACZ,CAAC,OAAQ,SAAU,YAAa,cAChC,eAAgB,cAAe,mBAC/B,cAAe,sBAEnB,SAAU2D,EAAQirC,EAAU9qC,EAAMoE,EAAQD,EAAMG,EAAMD,EAAOpI,EAAM8uC,GAC3D,IAAIv0B,EAAW,GAEfra,EAAO0D,EAEP9F,EAAKiG,EACLE,EAAOkE,EACPnE,EAAKkE,EACLhE,EAAKmE,EACLhI,EAAM+H,GALNjI,EAAS0uC,GAOF7uC,KAAOA,EAAKD,OAAO,qBAC1BI,EAAOmL,UAAY,GAEnBwjC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPipC,MAOR,SAAeM,EAAQ9zB,GACfzV,EAAOypC,MACPvpC,EAAI4L,UA/LC,wBA+LqB,CAAElE,GAAI6N,EAAI7N,KAEpC5H,EAAOiR,YAEXlR,EAAKmB,MAAM,kBAAmBuU,IAZ1B6jB,IAAK,YAGblf,EAAoB,uBAAIm0B,EACxBruC,EAAIqB,aAAa6Y,GAWjBpa,EAAO+lC,IAAI,WAAY,WACnB7lC,EAAI4H,eAAesS,KAGvBra,EAAKuC,IAAI,qCAGZ7E,UAAU,sBACX,CAAC,aAAc,UAAW,WAAY,aACtC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EACA5xC,EAAOjC,EAAMiC,KAEjB,SAAS6xC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC3B0F,EAAKtB,aA3N9B,GA4ND2B,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,KAvFR7E,EAAehpC,EAAGkB,YAAYooC,EAAO,CACjCnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,KAEHnL,KAAKpG,MAAM,CACpBqG,SAAU,WACVb,IAAKJ,EAAU,OAEnBlE,EAAOiR,UAAY,WAAc47B,EAAaznC,QAC9CynC,EAAaznC,OAiFkB,WAAvBxH,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAY,CACX0E,IAAK,CAACqnC,EAAcvyC,EAAK,yBACzB6vC,YAAa,CAAC,SAElBrnC,EAAG83B,aAAa,CACZ,CAACtgC,EAAK,SAAUA,EAAK,kBACrB,CAACA,EAAK,eAAgBA,EAAK,0BAE/BjC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACA5tC,EAAG0F,aAAa4jC,SAxRhC;CCAC,WACG,aAEA,IAAIptC,EAAMC,EAAcrC,EAAImG,EAAMD,EAAI3D,EAAK6D,EAAI5D,EAAQyyC,EAEnD/F,EACA3oC,EACAe,EAEAd,EACAuuC,EAGAV,EAAU,GACVC,EAAa,GACbC,EAAc,GAEd/E,EAAQ,uBACRC,EAAa,uBACbyF,EAAc,wBACdC,EAAgB,0BAEhBC,EAAW,CACP,UAAW,KAAM,QAAS,OAAQ,cAAe,QAErDC,EAAmB,CACf,UAAW,KAAM,QAAS,OAAQ,eAAgB,QAGtD3sC,EAAc,CACd0E,IAAK,CAAC0iC,EAAY,2BAClBiC,YAAa,CAAC,QAGlB,SAASjC,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GAsCf,SAAS2oC,EAAY3mC,EAAQoe,GAf7B,IAA2BA,EAgBvBzhB,EAAGgC,iBAAiB6sC,EAAIx0C,OAAO,YAAaonB,EAAQytB,aAAc,IAClEL,EAAItuC,MAAMlG,OAAO,MAAM4C,KAAKwkB,EAAQ3gB,MACpC+tC,EAAI1rC,aAAaE,GAlBMoe,EAkBoBA,EAjBpC,CACH0tB,IAAOR,EAAO9qC,GACdurC,KAAQT,EAAOp+B,KACf8+B,YAAa5tB,EAAkB,SAC/B6tB,aAAc7tB,EAAmB,UACjC8tB,OAAUZ,EAAOa,IACjBC,cAAed,EAAOe,GACtBC,cAAehB,EAAOiB,GACtBC,SAAYpuB,EAAkB,SAC9BquB,WAAYnB,EAAOoB,OACnBC,SAAYvuB,EAAkB,YAkBtC,SAAS8sB,EAAenL,EAAO1hB,GAE3B,IAEI+kB,EAASgI,EAFTC,EAAUtL,EAAMpmC,OAAO,SAASA,OAAO,MACvC2F,EAAQygC,EAAMpmC,OAAO,SAGzBiyC,EAAiB5/B,QAAQ,SAAU80B,GAC/BuK,EAAQ1xC,OAAO,MAAMC,KAAKknC,KAG9BziB,EAAMrS,QAAQ,SAAUoG,GAlB5B,IAA2BA,EACnB3S,EADmB2S,EAmBDA,EAlBlB3S,EAkBWH,EAlBA3F,OAAO,MAEtBgyC,EAAS3/B,QAAQ,SAAU80B,GACvBrhC,EAAG9F,OAAO,MAAMC,KAAKwY,EAAK0uB,QAkB9BsC,EAAU7sC,EAAGqH,UAAU0B,EAAO,SAAWurC,EACzCO,EAAWvtC,GACItH,EAAGqH,UAAU6nC,EAAa3nC,KAAK9G,OAAO,QAAS,UAChDT,EAAGqH,UAAU6nC,EAAa3nC,KAAK9G,OAAO,gBAAiB,UACvD8zC,GAEd/K,EAAMroC,MAAM,CACRC,OAAQyzC,EAAW,KACnBxzC,MAAOwrC,EAAU,KACjBmI,SAAU,OACVjG,QAAS,UAGbG,EAAa7tC,MAAMwrC,EAAUwH,GAGjC,SAAS9D,EAAgB1oB,GACrB,IAAIwuB,EAAQvuB,GA9EhB,WAEImtB,EAAIjrC,QACJirC,EAAIltC,gBACJktC,EAAIhtC,eAAe6nC,GAEnB,IAAInpC,EAAMsuC,EAAItuC,MACVC,EAASquC,EAAIruC,SAEjBquC,EAAI3sC,WAAW,YAAY,GAC3B3B,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAEzCrB,EAAIvD,OAAO,MAEXwD,EAAOxD,OAAO,MAAM4E,QAAQ,eAAe,GAAM3E,KAAK,SACtDuD,EAAOxD,OAAO,SAiEd2sC,GAEAsG,EAASpB,EAAIruC,SAASnG,OAAO,SAC7BqnB,EAAQD,EAAQC,MAEhBsoB,EAAY6E,EAAIx0C,OAAO,gBAAiBonB,GACxC8sB,EAAe0B,EAAQvuB,GAEvBonB,EAAa9tC,OAAOkG,GAGxB,SAASspC,EAAc7hC,GACnB1M,EAAOmL,UAAYuB,EAAK8Y,QACxBktB,EAAShmC,EAAKgmC,OACd1yC,EAAOb,SAGX,SAAS80C,EAAWvnC,GACZA,EAAKvJ,OACLpD,EAAKoD,KAAKuJ,EAAKvJ,KAAMuJ,EAAK9E,aACtBxJ,OAAO,MAAM4C,KAAK0L,EAAK9E,KAmBnC,SAASgiC,EAAOv/B,GACZtK,EAAKmB,MAAM,eAGf,SAAS2oC,EAAOx/B,GACZtK,EAAKmB,MAAM,kBAGf3D,QAAQC,OAAO,WAAY,IAC1BsC,WAAW,eACR,CAAC,OAAQ,SAAU,YAAa,sBAC5B,qBAAsB,YACtB,cAAe,eAAgB,mBAAoB,cACnD,aAAc,aAAc,sBAEhC,SAAU2D,EAAQirC,EAAUhrC,EAClBirC,EAAK/H,EAAKhjC,EAAMoE,EAAQD,EAAME,EAAOC,EAAMq3B,EAAM/0B,EAAM0pC,GAC7D,IAAIjxC,EACAmX,EAAW,GAEfra,EAAO0D,EACPzD,EAAS0uC,EAET/wC,EAAKiG,EACLE,EAAOkE,EACPnE,EAAKkE,EACL7H,EAAM+H,EACNlE,EAAKmE,EACL/H,EAAKo/B,EAELqT,EAAMsB,EAENjxC,EAVOS,EAUOL,SAEdrD,EAAOmL,UAAY,GACnBnL,EAAOm0C,QAAU,qCACjBn0C,EAAOo0C,QAAU,qCACjBp0C,EAAOq0C,SAAW,sCAClBr0C,EAAOs0C,SAAW,sCAClBt0C,EAAOu0C,YAAc,yCAErBn6B,EAAuB,yBAAI65B,EAC3B/zC,EAAIqB,aAAa6Y,GAEbnX,EAAOqrB,eAAe,WACtBtuB,EAAOypC,MAAQxmC,EAAc,MAC7B/C,EAAI4L,UAAUshC,EAAY,CAAExlC,GAAI5H,EAAOypC,SAY3CkF,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,SACL2P,MAZJ,SAAeM,EAAQ9zB,GACfzV,EAAOypC,MACPvpC,EAAI4L,UAAUshC,EAAY,CAAExlC,GAAI6N,EAAI7N,KAEpC5H,EAAOiR,YAEXlR,EAAKmB,MAAM,kBAAmBuU,MAUlCmxB,EAAI+C,eAAe,CACfC,OAAQA,EACRC,OAAQA,IAIZ7pC,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOypC,OACPtpC,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOz0C,EAAOypC,SAIvCzpC,EAAO+lC,IAAI,WAAY,WACnB6M,EAAI/qC,UACJ3H,EAAI4H,eAAesS,KAGvBra,EAAKuC,IAAI,oCAGhB7E,UAAU,qBACX,CAAC,aAAc,UAAW,WAAY,aACtC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC3B0F,EAAKtB,aAnP9B,GAoPD2B,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,IAjHR7E,EAAe+F,EAAIxqC,OAAO+kC,EAAO,CAC7BnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,EACZzS,MAAOoC,EACPqG,YAAaA,EACbD,kBAAmB0sC,IAGvBF,EAAIvtC,YAAYwtC,EAAatE,GAE7BvuC,EAAOiR,UAAY,WAAc47B,EAAaznC,QA0Gf,WAAvBxH,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAYA,GAEfgC,EAAG83B,aAAa,CACZ,CAAC,QAAS,uCACV,CAAC,cAAe,sBAGpBviC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACAppC,EAAG4C,aACHpH,EAAG0F,aAAa4jC,SA7ShC;CCAC,WACG,aAEA,IAAIptC,EAAMC,EAAQC,EAAWtC,EAAIgxC,EAAKxuC,EAAI2D,EAAMD,EAAI3D,EAAK6D,EAErD8oC,EACA3oC,EACAe,EACAX,EACAwtC,EACA4C,EACAC,EACA5C,EACA5tC,EA+BAtE,EA1BAstC,EAAQ,qBAIRhH,EAAY,CACR,SACA,QAEA,QACA,UACA,WAEA,WACA,YACA,UACA,QAEA,UACA,cACA,cACA,aAsBR,SAASsH,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GAUf,SAASgtC,IACL,OAAO3E,IAGX,SAASC,IACL,IAAIrpC,EAAWyB,EAVEuE,EAWjBwiC,EAAallC,QACbtD,EAAYwoC,EAAa9rC,OAAO,OAAO4E,QAAQ,aAAa,GAG5DG,GADAxB,EAAMD,EAAUtD,OAAO,OAAO4E,QAAQ,OAAO,IAC9B5E,OAAO,OAAO4E,QAAQ,aAAa,GAfjC0E,EAgBLvE,EAfZ/B,EAAGgC,iBAAiBsE,EAAK,QAAS,IAClCA,EAAIrE,GAAG,QAASynC,GAehBsE,EAAUztC,EAAIvD,OAAO,OAAO4E,QAAQ,YAAY,GAChDrB,EAAIvD,OAAO,MACX+wC,EAAWxtC,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAC/C5E,OAAO,SACZuD,EAAIvD,OAAO,MAEXuD,EAAIvD,OAAO,MAAMC,KAAK,YACtB0zC,EAAcpwC,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAAM5E,OAAO,SACpEuD,EAAIvD,OAAO,MAEXuD,EAAIvD,OAAO,MAAMC,KAAK,aACtB2zC,EAAcrwC,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAAM5E,OAAO,SAGxE,SAAS0F,EAAQC,EAAO0/B,EAAOx/B,GAC3B,IAAIC,EAAKH,EAAM3F,OAAO,MAEtB,SAAS+F,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAE5CF,EAAQ,QAASs/B,EAAQ,MACzBt/B,EAAQ,QAASF,GA4DrB,SAASsnC,EAAgB1oB,GACrBkoB,IArDJ,SAAqBloB,GACjBzhB,EAAGgC,iBAAiBgsC,EAAS,YAAa,IAC1CztC,EAAIlG,OAAO,MAAM4C,KAAKwkB,EAAQovB,QAE9B,IAAIluC,EAAQorC,EAAS/wC,OAAO,SACxB8zC,EAAWH,EAAY3zC,OAAO,SAC9B+zC,EAAWH,EAAY5zC,OAAO,SAC9Bg0C,EAAWvvB,EAAQwvB,SACnBC,EAAQzvB,EAAQ0vB,UAChB7O,EAAa8O,eAEjB,SAASC,EAAU1uC,EAAO2uC,GACtB,IAAIC,EAAOD,EAAG37B,MAAM,iBACpBjT,EAAQC,EAAO4uC,EAAK,GAAIA,EAAK,IAGjC,SAASC,EAAavoC,EAAOssB,GACzBtsB,EAAMoG,QAAQ,SAAUqmB,GACpB2b,EAAUN,EAAUxb,EAAMG,KAIlC0M,EAAU/yB,QAAQ,SAAUknB,EAAMnrB,GAC9B1I,EAAQC,EAAO2/B,EAAWl3B,GAAIqW,EAAQ8U,MAG1Cya,EAAS3hC,QAAQ,SAAUiiC,GACvBD,EAAUP,EAAUQ,KAGxBJ,EAAMO,OAASD,EAAaN,EAAMO,MAAO,SACzCP,EAAM5mB,OAASknB,EAAaN,EAAM5mB,MAAO,SACzC4mB,EAAM3pB,OAAS8pB,EAAUN,EAAUG,EAAM3pB,OACzC2pB,EAAM9N,OAASiO,EAAUN,EAAUG,EAAM9N,OACzC8N,EAAMz2B,MAAQ42B,EAAUN,EAAUG,EAAMz2B,MACxC/X,EAAQquC,EAtCD,iBAsCmCG,EAAMQ,UAmBhD1H,CAAYvoB,GAEZqnB,EAAa9tC,OAAOkG,GACpB4nC,EAAa7tC,MA5JL,KA+JZ,SAASuvC,EAAc7hC,GACnB3M,EAAKmB,MAAM,6BAA8BwL,GACzC1M,EAAOmL,UAAYuB,EAAK8Y,QACxBxlB,EAAOb,SAGX5B,QAAQC,OAAO,SAAU,IACpBsC,WAAW,aACR,CAAC,OAAQ,SAAU,YACf,YAAa,sBAAuB,aACpC,cAAe,eAAgB,aAAc,cAC7C,mBAAmB,cAEnB,SAAU2D,EAAQirC,EAAUhrC,EAAaE,EAAM8xC,EAAOnW,EAC5Cv3B,EAAQD,EAAMyC,EAAMtC,EAAMD,EAAO5H,GACvC,IAAI4C,EACAmX,EAAW,GAEfra,EAAO0D,EACPzD,EAAS0uC,EACTzuC,EAAYyD,EACZ/F,EAAKiG,EACL+qC,EAAM+G,EACNv1C,EAAKo/B,EACLx7B,EAAKmE,EACLhI,EAAM+H,EACNnE,EAAOkE,EACPnE,EAAKkE,EA3JjBlI,EA4JiBQ,EA5JPT,OAAO,kBAEAC,EAAK,uBACRA,EAAK,qBAGfA,EAAK,UAAWA,EAAK,SAAUA,EAAK,SAAUA,EAAK,WACnDA,EAAK,YAAaA,EAAK,YAAYA,EAAK,aAAaA,EAAK,WAAWA,EAAK,SAC1EA,EAAK,WAAWA,EAAK,eAAeA,EAAK,eAAeA,EAAK,aAwJrDG,EAAOH,KAAOA,EAEdG,EAAO21C,UAAY91C,EAAK,sBACxBG,EAAOo0C,QAAUv0C,EAAK,oBACtBG,EAAOq0C,SAAWx0C,EAAK,qBACvBG,EAAOs0C,SAAWz0C,EAAK,qBACvBG,EAAOu0C,YAAc10C,EAAK,wBAC1BG,EAAO41C,SAAW/1C,EAAK,wBACvBG,EAAO61C,UAAYh2C,EAAK,2BAExBG,EAAO81C,OAAQ,GACf7yC,EAAShD,EAAUoD,UACRirB,eAAe,WACtBtuB,EAAOy0C,MAAQxxC,EAAc,OAGjC0rC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,OACL2P,MAaJ,SAAeM,EAAQ9zB,GACfzV,EAAOypC,MACPvpC,EAAI4L,UA9NX,qBA8NiC,CACtB8oC,OAAQn/B,EAAI7N,GACZmuC,MAAOtgC,EAAIsgC,QAGf/1C,EAAOiR,YAEXlR,EAAKmB,MAAM,kBAAmBuU,IArB9BmO,MAAO3gB,IAGXjD,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOy0C,OACPt0C,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOz0C,EAAOy0C,SAIvCr6B,EAAoB,oBAAIm0B,EACxBruC,EAAIqB,aAAa6Y,GAcjBpa,EAAO+lC,IAAI,WAAY,WACnB7lC,EAAI4H,eAAesS,KAGvBpa,EAAOg2C,YAAc,WACjBh2C,EAAO81C,OAAS91C,EAAO81C,OAG3Bhe,OAAO0Y,eAAexwC,EAAQ,cAAe,CACzCiV,IAAK,WACD,IAAIw7B,EAAM,GAEV,OADAA,EAAIzwC,EAAO0wC,SAAW,KAAO1wC,EAAO2wC,SAC7BF,KAIf1wC,EAAKuC,IAAI,kCAGpB7E,UAAU,mBACP,CAAC,aAAc,UAAW,WAAY,aACtC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACL,IAAIuE,EAAU93C,GAAGC,OAAO,mBAExB8F,EAAUvG,EAAGqH,UAAUixC,EAAS,UAC5BnyC,EAAKtB,aAzQhB,GA0QO2B,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,KApIhB7E,EAAehpC,EAAGkB,YAAYooC,EAAO,CACjCnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,KAEHnL,KAAKpG,MAAM,CACpBqG,SAAU,WACVb,IAAKJ,EAAU,OAEnBlE,EAAOiR,UAAY,WAAc47B,EAAaznC,QAC9CynC,EAAaznC,OA8H0B,WAAvBxH,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAY,CACX0E,IAAK,CAACqnC,EAAc,2BACpB1C,YAAa,CAAC,SAElBrnC,EAAG83B,aAAa,CACZ,CAAC,QAAS,6CACV,CAAC,cAAe,iCAEpBviC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAGrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACA5tC,EAAG0F,aAAa4jC,SArUxC;CCAC,WACG,aAEA,IAAIptC,EAAMC,EAAQC,EAAWtC,EAAIgxC,EAAKxuC,EAEtC5C,QAAQC,OAAO,UAAW,IACzBsC,WAAW,cACR,CAAC,OAAQ,SAAU,YAAa,OAC5B,YAAa,sBAAuB,aAExC,SAAU2D,EAAQirC,EAAUhrC,EAAawyC,EAAMtyC,EAAM8xC,EAAOnW,GACxD,IAAIt8B,EACJlD,EAAO0D,EAEPxD,EAAYyD,EACZ/F,EAAKiG,EACL+qC,EAAM+G,EACNv1C,EAAKo/B,GAJLv/B,EAAS0uC,GAKFiH,UAAY,oBACnB31C,EAAOm0C,QAAU,iCACjBn0C,EAAOo0C,QAAU,iCACjBp0C,EAAOs0C,SAAW,sCAClBt0C,EAAOu0C,YAAc,yCACrBv0C,EAAO41C,SAAW,uBAClB51C,EAAO61C,UAAY,0BACnB71C,EAAO81C,OAAQ,GACf7yC,EAAShD,EAAUoD,UACRirB,eAAe,WACtBtuB,EAAOy0C,MAAQxxC,EAAc,OAGjC0rC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,QACL1V,MAAO3gB,IAGXjD,EAAO6xC,OAAO,YAAa,WAClBl0C,EAAGsZ,cAAcjX,EAAO8nC,YACzB9nC,EAAO8nC,UAAU10B,QAAQ,SAAU+iC,GAC/BA,EAAMC,QAAUF,EAAKG,YAAYF,EAAMC,aAKnDp2C,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOy0C,OACPt0C,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOz0C,EAAOy0C,SAGvCz0C,EAAOg2C,YAAc,WACjBh2C,EAAO81C,OAAS91C,EAAO81C,OAG3Bhe,OAAO0Y,eAAexwC,EAAQ,cAAe,CACzCiV,IAAK,WACD,IAAIw7B,EAAM,GAEV,OADAA,EAAIzwC,EAAO0wC,SAAW,KAAO1wC,EAAO4jB,MAC7B6sB,KAKf1wC,EAAKuC,IAAI,mCA/DrB;CCAC,WACG,aAEA,IAAIvC,EAAMC,EAAcrC,EAAImG,EAAMD,EAAI3D,EAAK6D,EAAI5D,EAAQyyC,EAEnD/F,EACA3oC,EACAe,EAEAd,EAGAgpC,EAAQ,qBACRC,EAAa,qBACbyF,EAAc,sBACdC,EAAgB,wBAGhBzsC,EAAc,CACd0E,IAAK,CAAC0iC,EAAY,2BAClBiC,YAAa,CAAC,QAGlB,SAASjC,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GAqCf,SAAS8oC,EAAgB1oB,GANzB,IAAqBpe,EAAQoe,EAXFA,GAd3B,WAEIotB,EAAIjrC,QACJirC,EAAIltC,gBACJktC,EAAIhtC,eAAe6nC,GAEnB,IAAInpC,EAAMsuC,EAAItuC,MAEdsuC,EAAI3sC,WAAW,aAAa,GAC5B3B,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAEzCrB,EAAIvD,OAAO,MAqBX2sC,GAPiBtmC,EAQLwrC,EAAIx0C,OAAO,gBAREonB,EAQeA,EAPxCzhB,EAAGgC,iBAAiB6sC,EAAIx0C,OAAO,YAAaonB,EAAQytB,aAAc,IAClEL,EAAItuC,MAAMlG,OAAO,MAAM4C,KAAKwkB,EAAQ3gB,MACpC+tC,EAAI1rC,aAAaE,EAbV,CACHkvC,WAFmB9wB,EAcoBA,GAZpB5d,GACnB2uC,aAAc/wB,EAAQvK,GAAG,GACzBu7B,cAAehxB,EAAQixB,IACvBC,KAAQlxB,EAAQmxB,KAChBC,WAAcpxB,EAAQqxB,WACtBC,SAAYtxB,EAAQrkB,WAaxB0rC,EAAa9tC,OAAOkG,GACpB4nC,EAAa7tC,MAAM,KAGvB,SAASuvC,EAAc7hC,GACnB1M,EAAOmL,UAAYuB,EAAK8Y,QACxBxlB,EAAOb,SAGX,SAAS80C,EAAWvnC,GACZA,EAAKvJ,OACLpD,EAAKoD,KAAKuJ,EAAKvJ,KAAMuJ,EAAK9E,aACtBxJ,OAAO,MAAM4C,KAAK0L,EAAK9E,KAoBnCrK,QAAQC,OAAO,SAAU,IACxBsC,WAAW,aACR,CAAC,OAAQ,SACL,YACA,sBACA,YAAa,cAAe,eAAgB,mBAC5C,cAAe,aAAc,aAAc,sBAE/C,SAAU2D,EAAQirC,EAAUhrC,EAClBirC,EACA/qC,EAAMoE,EAAQD,EAAME,EACpBC,EAAMq3B,EAAM/0B,EAAM0pC,GAExB,IAAIjxC,EACAmX,EAAW,GAEfra,EAAO0D,EACPzD,EAAS0uC,EAET/wC,EAAKiG,EACLE,EAAOkE,EACPnE,EAAKkE,EACL7H,EAAM+H,EACNlE,EAAKmE,EACL/H,EAAKo/B,EAELqT,EAAMsB,EAENjxC,EAVOS,EAUOL,SAEdrD,EAAOmL,UAAY,GAEnBiP,EAAuB,uBAAI65B,EAC3B/zC,EAAIqB,aAAa6Y,GAEbnX,EAAOqrB,eAAe,YACtBtuB,EAAOypC,MAAQxmC,EAAe,OAC9B/C,EAAI4L,UAAUshC,EAAY,CAAExlC,GAAI5H,EAAOypC,SAY3CkF,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,OACL2P,MAZJ,SAAeM,EAAQ9zB,GACfzV,EAAOypC,MACPvpC,EAAI4L,UAAUshC,EAAY,CAAExlC,GAAI6N,EAAI7N,KAEpC5H,EAAOiR,YAEXlR,EAAKmB,MAAM,kBAAmBuU,MASlCzV,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOypC,OACPtpC,EAAG6C,MAAMf,EAAM,CAAE80C,OAAQ/2C,EAAOypC,SAIxCzpC,EAAO+lC,IAAI,WAAY,WACnB6M,EAAI/qC,UACJ3H,EAAI4H,eAAesS,KAGvBra,EAAKuC,IAAI,kCAGhB7E,UAAU,mBACX,CAAC,aAAc,UAAW,WAAY,aAAc,sBACpD,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC/C0F,EAAKtB,aArKV,GAsKD2B,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,IAlGR7E,EAAe+F,EAAIxqC,OAAO+kC,EAAO,CAC7BnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,EACZzS,MAAOoC,EACPqG,YAAaA,EACbD,kBAAmB0sC,IAGvBF,EAAIvtC,YAAYwtC,EAAatE,GAE7BvuC,EAAOiR,UAAY,WAAc47B,EAAaznC,QA2Ff,WAAvBxH,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAYA,GACfgC,EAAG83B,aAAa,CACZ,CAAC,QAAS,uCACV,CAAC,cAAe,sBAGpBviC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACAppC,EAAG4C,aACHpH,EAAG0F,aAAa4jC,SA7NhC;CCAC,WACG,aAEA,IAKI6J,EAEAj3C,EAAMC,EAAQG,EAAI82C,EAAK1U,EAAKniC,EAP5B82C,EAAW,uBACX13C,EAAa,CACTC,KAAM,SAwBd,SAASwpC,EAAMM,EAAQ9zB,GACnB1V,EAAKmB,MAAM,kBAAmBuU,GAC9B,IAAI6F,EAAI,iBAAiB8gB,KAAK3mB,EAAIsgC,OAC9BnuC,EAAK0T,EAAIA,EAAE,GAAK,KAChBzW,EAAOyW,EAAIA,EAAE,GAAK,KAEtBtb,EAAOm3C,WAAcn3C,EAAOypC,OAASnuB,EAAK,CAClCy6B,MAAOnuC,EACPwvC,QAASvyC,EACT8B,IAAK8O,EAAI9O,IACT0wC,WAAY5hC,EAAInB,MAChB,KAERtU,EAAOs3C,YAAc7hC,EAAI25B,MACzBmI,GAAa,GAGjB,SAASxS,IACD/kC,EAAOw3C,QACHx3C,EAAOulC,cACPvlC,EAAOs3C,YAAct3C,EAAOulC,YAAY6J,OAE5CpvC,EAAOw3C,OAAQ,GAMvB,SAASD,EAAa/rC,GAClBwrC,EAASl4C,MAAM,UAAW0M,EAAI,QAAU,QAG5C,SAASisC,IACL,IACIr9B,EACAs9B,EAgBoBt9B,EAlBpB/G,EAAIrT,EAAOm3C,WAIV9jC,IAgCM,KAFXqkC,GADAt9B,EAAW68B,EAAIU,yBAAyBtkC,EAAEgkC,aAC5B3vC,QAGVkwC,EAAiBx9B,EAAS,IAEd,EAALs9B,GArBat9B,EAsBLA,EArBf48B,EAASh2C,KAAK,MAEdoZ,EAAShH,QAAQ,SAAU1G,GACvB,IAAIrC,EAAM2sC,EAASj2C,OAAO,OAC1BsJ,EAAI1E,QAAQ,kBAAkB,GAC9B0E,EAAIrJ,KAAK0L,EAAKmrC,IACdxtC,EAAIrE,GAAG,QAAS,WAZxB,IAAiB0G,EAAAA,EAaGA,EAZhB6qC,GAAa,GACbK,EAAiBlrC,OAejB6qC,GAAa,IAabx3C,EAAKoD,KAAK,wCACA,kBAAmBkQ,EAAEgkC,aApCnC,SAASO,EAAiB58B,GACtB3H,EAAEykC,UAAY98B,EAAKpT,GACnBzH,EAAG6C,MAAM,OAAQqQ,IA2CzB9V,QAAQC,OAAO,WAAY,IACtBsC,WAAW,eACZ,CAAC,OAAQ,SAAU,sBAAuB,aACtC,qBAAsB,qBAAsB,gBAEhD,SAAU2D,EAAQirC,EAAUC,EAAKpP,EAAMwY,EAAOxT,EAAOyT,GA+CjD,SAASC,EAAc13C,GACnB,IAAIC,EAAUJ,EAAGU,YACbo3C,EAAoB,UAAX33C,EAEbP,EAAOm3C,WAAWgB,YAAcD,EAEhC13C,EAAQO,OAAO,KACPC,KAAK,4BAA6BT,EAClC,yBAeRH,EAAGO,WAAWu2C,EAAU13C,GACnBoB,SAAS,kBACTC,WAAWL,GACXS,MAhBL,WACI,IAAIoS,EAAIrT,EAAOm3C,WACfp3C,EAAKmB,MAAMmS,GACXA,IAAiB,aAAX9S,EAAwBgiC,EAAI6V,eAAe/kC,GACjCkvB,EAAI8V,aAAahlC,IACjCrT,EAAOw3C,OAAQ,IAYdn2C,UATL,WACIjB,EAAGgK,cACHrK,EAAKmB,MAAM,oCAQVI,WA1ETvB,EAAO0D,EAEPtD,EAAKo/B,EACL0X,EAAMc,EACNxV,EAAMgC,EACNnkC,EAAK43C,GAJLh4C,EAAS0uC,GA5GN4J,QAAU,wCACjBt4C,EAAOu4C,YAAc,2BACrBv4C,EAAO8uC,cAAgB,yBACvB9uC,EAAOw4C,SAAW,wBAClBx4C,EAAOy4C,YAAc,0BAErBz4C,EAAO41C,SAAW,uBAClB51C,EAAO61C,UAAY,0BAEnB71C,EAAO81C,OAAQ,EACf91C,EAAOs3C,YAAc,KACrBt3C,EAAOw3C,OAAQ,EAyGXR,EAAW74C,GAAGC,OAAO,iCAErB4B,EAAOy3C,WAAaA,EAEpBz3C,EAAO04C,cAAgB,WACnB,IAAIrlC,EAAIrT,EAAOm3C,WACf,OAAO9jC,GAAyD,EAApD4jC,EAAIU,yBAAyBtkC,EAAEgkC,YAAY3vC,QAG3DinC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,SACL2P,MAAOA,EACPlE,OAAQA,EACRmE,MAAO,QAKXlpC,EAAO24C,kBAAoB,WACvB,MAA8B,cAAvB34C,EAAOs3C,aAGlBt3C,EAAO44C,kBAAoB,WACvB,MAA8B,cAAvB54C,EAAOs3C,aAGlBt3C,EAAO64C,kBAAoB,WACvB,IAAIC,GAAc,EAMlB,OALA94C,EAAO8nC,UAAU10B,QAAQ,SAAU2lC,GACX,cAAhBA,EAAO3J,QACP0J,GAAc,KAGfA,GA0DX94C,EAAOg5C,iBAAmB,WACtBf,EAAc,aAGlBj4C,EAAOo4C,eAAiB,WACpBH,EAAc,aAGlBj4C,EAAOi5C,YAAc,WACjBhB,EAAc,UAGlBj4C,EAAOg2C,YAAc,WACjBh2C,EAAO81C,OAAS91C,EAAO81C,OAG3B91C,EAAO+lC,IAAI,WAAY,WACnB3lC,EAAGgK,cACHrK,EAAKmB,MAAM,qCAGflB,EAAOk5C,aAAe,WA7CtB,IACS14C,GAAAA,EAAUJ,EAAGU,aAETC,OAAO,KACXC,KAAK,6DAYTZ,EAAGO,WAAWu2C,EAAU13C,GACvBoB,SAAS,kBACTC,WAAWL,GACXS,MAbD,WACIshC,EAAI4W,gBACJn5C,EAAOw3C,OAAQ,IAYlBn2C,UATD,WACIjB,EAAGgK,cACHrK,EAAKmB,MAAM,qCAQdI,YA4BNvB,EAAKmB,MAAM,oCAvPvB;CCAC,WACG,aAEA3D,QAAQC,OAAO,SAAU,IACxBsC,WAAW,aACR,CAAC,OAAQ,SAAU,OAAQ,YAAa,sBAExC,SAAUC,EAAMC,EAAQk2C,EAAMv4C,EAAIgxC,GAC9BA,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,SAGTt5B,EAAO6xC,OAAO,YAAa,WAClBl0C,EAAGsZ,cAAcjX,EAAO8nC,YACzB9nC,EAAO8nC,UAAU10B,QAAQ,SAAUpV,GAC/BA,EAAKo7C,UAAYlD,EAAKG,YAAYr4C,EAAKo7C,eAKnDr5C,EAAKuC,IAAI,kCArBrB;CCDC,WACG,aAEA,IAAIvC,EAAMC,EAAQC,EAAe0uC,EAC7BhxC,EAAImG,EAAM5D,EAAKC,EAAIyyC,EAAK7uC,EAExB8oC,EACA3oC,EACAe,EACAd,EAMAgpC,EAAQ,sBAER0F,EAAc,uBAGdxsC,EAAc,CACd0E,IAAK,CAAC0iC,EAAY,2BAClBiC,YAAa,CAAC,QAGlB,SAASjC,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GA8Cf,SAAS2oC,EAAY3mC,EAAQoe,GAd7B,IAA2BA,EAevBzhB,EAAGgC,iBAAiB6sC,EAAIx0C,OAAO,YAAaonB,EAAQytB,aAAc,IAClEL,EAAItuC,MAAMlG,OAAO,MAAM4C,KAAKwkB,EAAQivB,MAAQ,UAAYjvB,EAAQ5d,IAChEgrC,EAAI1rC,aAAaE,GAjBMoe,EAiBoBA,EAhB3CzlB,EAAKmB,MAAMskB,GACJ,CACH6zB,GAAM7zB,EAAY,GAClB8zB,OAAU9zB,EAAe,MACzB+zB,SAAU/zB,EAAgB,OAC1Bg0B,MAASh0B,EAAe,MACxBi0B,MAASj0B,EAAiB,QAC1Bk0B,QAAWl0B,EAAiB,QAC5Bm0B,MAASn0B,EAAe,SAWhC,SAAS0oB,EAAgB1oB,IAjCzB,WACIotB,EAAIjrC,QACJirC,EAAIltC,gBACJktC,EAAIhtC,eAAe6nC,GAEnB,IAAInpC,EAAMsuC,EAAItuC,MAEdsuC,EAAI3sC,WAAW,aACf3B,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAEzCrB,EAAIvD,OAAO,MAwBX2sC,GACAK,EAAY6E,EAAIx0C,OAAO,gBAAiBonB,GACxCqnB,EAAa9tC,OAAOkG,GACpB4nC,EAAa7tC,MAxEC,KA4ElB,SAASuvC,EAAc7hC,GACnB1M,EAAOmL,UAAYuB,EAAK8Y,QAChB9Y,EAAK4e,MACbtrB,EAAOb,SAGX5B,QAAQC,OAAO,UAAW,IACzBsC,WAAW,cACR,CAAC,OAAQ,SAAU,YAAa,OAC5B,YAAa,sBAAuB,aAAc,eAClD,cAAe,mBAAoB,sBAAuB,cAC1D,eAEJ,SAAU2D,EAAQirC,EAAUhrC,EAAawyC,EAC/BtyC,EAAM8xC,EAAOnW,EAAMqa,EACnB5xC,EAAQC,EAAOisC,EAAOhsC,EAAMH,GAClC,IAAI9E,EACJlD,EAAO0D,EAEPxD,EAAYyD,EAEZirC,EAAM+G,EACNv1C,EAAKo/B,EACL5hC,EAHAA,EAAKiG,EAILE,EAAOkE,EACP9H,EAAM+H,EAEN2qC,EAAMsB,EACNnwC,EAAKmE,GAVLlI,EAAS0uC,GAYFiH,UAAY,oBACnB31C,EAAOm0C,QAAU,iCACjBn0C,EAAOo0C,QAAU,iCACjBp0C,EAAOq0C,SAAW,kCAClBr0C,EAAOu0C,YAAc,0CAErBtxC,EAAShD,EAAUoD,UACRirB,eAAe,WACtBtuB,EAAOy0C,MAAQxxC,EAAc,OAejC0rC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,QACL1V,MAAO3gB,EACPgmC,MAhBJ,SAAeM,EAAQ9zB,GACfzV,EAAOypC,MACPvpC,EAAI4L,UApHH,sBAoHyB,CACtBlE,GAAI6N,EAAI7N,GACR6sC,MAAOz0C,EAAOy0C,QAGlBz0C,EAAOiR,YAEXlR,EAAKmB,MAAM,kBAAmBuU,MAUlCzV,EAAO6xC,OAAO,YAAa,WAClBl0C,EAAGsZ,cAAcjX,EAAO8nC,YACzB9nC,EAAO8nC,UAAU10B,QAAQ,SAAUkY,GAC/BA,EAAMuuB,MAAQ3D,EAAKG,YAAY/qB,EAAMuuB,WAKjD75C,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOy0C,OACPt0C,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOz0C,EAAOy0C,SAIvC3c,OAAO0Y,eAAexwC,EAAQ,cAAe,CACzCiV,IAAK,WACD,IAAIw7B,EAAM,GAEV,OADAA,EAAIzwC,EAAO0wC,SAAW,KAAO1wC,EAAO4jB,MAC7B6sB,KAIfzwC,EAAO+lC,IAAI,WAAY,WACnB6M,EAAI/qC,YAGR9H,EAAKuC,IAAI,mCAEZ7E,UAAU,oBACP,CAAC,aAAc,UAAW,WAAY,aAClC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC/C0F,EAAKtB,aA7KtB,GA8KW2B,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,IA5JpB7E,EAAe+F,EAAIxqC,OAAO+kC,EAAO,CAC7BnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,EACZzS,MAAOoC,EACPqG,YAAaA,IAGjBusC,EAAIvtC,YAAYwtC,EAAatE,GAE7BvuC,EAAOiR,UAAY,WAAc47B,EAAaznC,QAsJH,WAAvBxH,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAYA,GAEfgC,EAAG83B,aAAa,CACZ,CAAC,QAAS,qCACV,CAAC,cAAe,oBAGpBviC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACAppC,EAAG4C,sBACA1B,aAAa4jC,SAvO5C;CCCC,WACG,aAEA5vC,QAAQC,OAAO,cAAe,IACzBsC,WAAW,kBACR,CAAC,OAAQ,SAAU,OAAQ,YAAa,sBAEpC,SAAUC,EAAMC,EAAQk2C,EAAMv4C,EAAIgxC,GAC9BA,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,cAGTv5B,EAAKuC,IAAI,uCAb7B;CCAC,WACG,aAEA,IAAIvC,EAAMC,EAAQqZ,EAAMmrB,EAAWz4B,EAAUpO,EAAIwC,EAAID,EAAKX,EAAIsE,EAAIC,EAAU8uC,EAaxEx4B,EACAsqB,EAIAxgC,EACAC,EACAc,EACA4nC,EAfAiN,EAAW,WAEXrF,EAAQ,QACRhwC,EAAS,GACT0oC,EAAQ,wBAMR4M,EAAS,IACTC,EAAa,IAMb3zC,EAAc,CACd0E,IAAK,CAAC0iC,EAAY,2BAClBiC,YAAa,CAAC,QAGlB,SAASuK,IACL,GAAIj6C,EAAOwlC,aAAetlC,EAAI+d,gBAAkB1e,EAAGkQ,UAAW,CAC1DlQ,EAAGgQ,QACH,IAAI2qC,EAAc,CACdzF,MAAOz0C,EAAOy0C,OAElBv0C,EAAI4L,UAhCU,kBAgCiBouC,IAIvC,SAASC,EAAeztC,GACpBnN,EAAGiQ,OACE9C,EAAK4hB,eAAewrB,IAIzB95C,EAAO85C,SAAWptC,EAAKotC,GACvB95C,EAAOo6C,cAAgB1tC,EAAkB,cACzC1M,EAAOb,UALHa,EAAO85C,SAAW,KAQ1B,SAASO,EAAiB3tC,GACtBnN,EAAGiQ,OACHxP,EAAO85C,SAAW,KAClB95C,EAAOo6C,cAAgB,KACvBp6C,EAAOb,SAGX,SAASm7C,IACLp6C,EAAI4H,eAAesS,GACnBoqB,EAAUx5B,OAAO05B,GACjBA,EAAiB,KACjBnlC,EAAGiQ,OAGP,SAAS+qC,EAAehR,EAAQ5gC,GAC5B,GAA0B,OAAtB3I,EAAOw6C,YACoB,WAA3Bx6C,EAAOw6C,WAAWlmC,MAClBtU,EAAOw6C,WAAW31C,OAAS8D,EAAO9D,KAFtC,CAQA7E,EAAOw6C,WAAa,CAChBlmC,KAAM,SACNzP,KAAM8D,EAAO9D,MAGjB,IAAI41C,EAAY,CACZ,CACIrU,MAAO,gBACPx/B,MAAO+B,EAAO2L,KAAKzP,MAEvB,CACIuhC,MAAO,gBACPx/B,MAAO+B,EAAO+xC,YAElB,CACItU,MAAO,UACPx/B,MAAO+B,EAAOs7B,QAIlB0W,EAAS,CACT,CACInxC,MAAO,SACP2mC,QAAS,CAAC,OAAQ,aAClBzjC,KAAM/D,EAAO2L,KAAKsmC,OAClBC,WAAY,qBAGpBC,EAAoBnyC,EAAO9D,KAAM41C,EAAWE,QAhCxClN,IAmCR,SAASsN,EAAexR,EAAQhpC,GAC5B,GAA0B,OAAtBP,EAAOw6C,YACoB,WAA3Bx6C,EAAOw6C,WAAWlmC,MAClBtU,EAAOw6C,WAAW31C,OAAStE,EAAOsE,KAFtC,CAQA7E,EAAOw6C,WAAa,CAChBlmC,KAAM,SACNzP,KAAMtE,EAAOsE,MAGjB,IACI81C,EAAS,CACT,CACInxC,MAAO,aACP2mC,QAAS,CAAC,OAAQ,aAClBzjC,KAAMnM,EAAO0C,OACb43C,WAAY,yBAIpBC,EAAoBv6C,EAAOsE,KAVX,GAU4B81C,QAnBxClN,IAsBR,SAASuN,EAAczR,EAAQpC,GAC3B,GAA0B,OAAtBnnC,EAAOw6C,YACoB,UAA3Bx6C,EAAOw6C,WAAWlmC,MAClBtU,EAAOw6C,WAAW31C,OAASsiC,EAAMtiC,KAFrC,CAQA7E,EAAOw6C,WAAa,CAChBlmC,KAAM,QACNzP,KAAMsiC,EAAMtiC,MAGhB,IAAI41C,EAAY,CACZ,CACIrU,MAAO,aACPx/B,MAAOugC,EAAM8T,SAEjB,CACI7U,MAAO,iBACPx/B,MAAOugC,EAAM+T,aAEjB,CACI9U,MAAO,kBACPx/B,MAAOugC,EAAMgU,eAYjBR,EAAS,CACT,CACInxC,MAAO,eACP2mC,QAAS,CAAC,OAAQ,YAAa,cAC/BzjC,KAZUy6B,EAAMiU,YAAYrmC,IAAI,SAASsmC,GAC7C,MAAO,CACHx2C,KAAMw2C,EAAGC,MACTC,SAAUF,EAAGE,SACbC,UAAWH,EAAGG,aASdX,WAAY,mBAEhB,CACIrxC,MAAO,UACP2mC,QAAS,CAAC,QACVzjC,KAAMy6B,EAAMsU,QACZZ,WAAY,eAIpBC,EAAoB3T,EAAMtiC,KAAM41C,EAAWE,QA/CvClN,IAkDR,SAASA,IACL,QAAIZ,EAAat7B,cAEbs7B,EAAaznC,OAEb2G,EAAS,WACL/L,EAAOw6C,WAAa,MACrB,IACI,GA0Cf,SAASkB,EAAqBC,EAAgBhB,GAC1CA,EAAOvnC,QAAQ,SAAS+zB,IAtC5B,SAA6BwU,EAAgBxU,GACzC,IAAIyU,EAAazU,EAAM39B,MACnBs+B,EAAYX,EAAMz6B,KAClBmvC,EAAe1U,EAAMgJ,QACrB0K,EAAa1T,EAAM0T,WAEvBc,EAAe56C,OAAO,MAAM4E,QAAQ,6BAA6B,GAAM3E,KAAK46C,GAE5E,IAAIE,EAAmBH,EAAe56C,OAAO,SAAS4E,QAAQ,sBAAsB,GAChFo2C,EAAWD,EAAiB/6C,OAAO,MAAM4E,QAAQ,6BAA6B,GAElFk2C,EAAazoC,QAAQ,SAAS9U,GAC1By9C,EAASh7C,OAAO,MAAMC,KAAK1C,KAGN,IAArBwpC,EAAUpgC,QACAo0C,EAAiB/6C,OAAO,MAAM4E,QAAQ,0BAA0B,GACtE5E,OAAO,MACN4E,QAAQ,kCAAkC,GAC1CsB,KAAK,UAAW40C,EAAan0C,QAC7B1G,KAAK65C,GAGd/S,EAAU10B,QAAQ,SAAS1G,GACvB,IAAI+I,EAAMqmC,EAAiB/6C,OAAO,MAAM4E,QAAQ,0BAA0B,GACtEhI,EAAGoM,IAAI2C,GACP+I,EAAI1U,OAAO,MAAM4E,QAAQ,0BAA0B,GAAM3E,KAAK0L,GAE9DorB,OAAOvwB,KAAKmF,GAAM0G,QAAQ,SAASS,GAC/B4B,EAAI1U,OAAO,MAAM4E,QAAQ,0BAA0B,GAAM3E,KAAK0L,EAAKmH,QAK/E8nC,EAAe56C,OAAO,MAKlBi7C,CAAoBL,EAAgBxU,KAI5C,SAAS2T,EAAoBmB,EAAUC,EAAcvB,GACjD/H,EAAIjrC,QACJirC,EAAIltC,gBACJktC,EAAIhtC,eAAe6nC,GAEnB,IAAInpC,EAAMsuC,EAAItuC,MACdA,EAAIvD,OAAO,MAAM4E,QAAQ,uBAAuB,GAAM3E,KAAKi7C,GAC3DC,EAAa9oC,QAAQ,SAAS+oC,GAC1B,IAAIC,EAAW93C,EAAIvD,OAAO,OAAO4E,QAAQ,YAAY,GACrDy2C,EAASr7C,OAAO,KAAK4E,QAAQ,SAAS,GAAM3E,KAAKm7C,EAAG/V,OACpDgW,EAASr7C,OAAO,KAAK4E,QAAQ,SAAS,GAAM3E,KAAKm7C,EAAGv1C,SAGxD,IAAIrC,EAASquC,EAAIruC,SACb83C,EAAep3C,EAAU+0C,EAAa,GAC1Cz1C,EAAOzF,MAAM,SAAUu9C,EAAe,MACtCX,EAAqBn3C,EAAQo2C,GAE7B9N,EAAa7tC,MAAM+6C,GACnBlN,EAAa1iC,OACbmyC,IAGJ,SAAS5K,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC/C0F,EAAKtB,aAAeiC,EAC1BN,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAAS,GAG7B,SAASu9C,IACL,GAAIzP,EAAat7B,YAAa,CAC1BmgC,IACA,IAAI2K,EAAep3C,EAAU+0C,EAAa,GAC1C77C,GAAGC,OAAO,WAAWU,MAAM,SAAUu9C,EAAe,MACpDxP,EAAa9tC,OAAOkG,IAI5B1H,QAAQC,OAAO,aAAc,IACxBsC,WAAW,iBACR,CAAC,OAAQ,SAAU,YAAa,YAAa,WAAY,YAAa,aAAc,mBAChF,iBAAkB,eAAgB,cAAe,cAAe,sBAChE,SAAU2D,EAAQirC,EAAU5wB,EAAQkoB,EAAal4B,EAAYlK,EACnD27B,EAAMt3B,EAAO5H,EAAM0H,EAAMC,EAAQE,EAAMgsC,GAC7Cn0C,EAAO0D,EAEP4V,EAAOyE,EACP0mB,EAAYwB,EACZj6B,EAAW+B,EACXnQ,EAAKiG,EACLzD,EAAKo/B,EACLr/B,EAAM+H,EACN1I,EAAKc,EACLwD,EAAKkE,EACLjE,EAAOkE,EAEP4qC,EAAMsB,GAXNl0C,EAAS0uC,GAaFiH,UAAY,oBACnB31C,EAAOm0C,QAAU,iCACjBn0C,EAAOo0C,QAAU,iCACjBp0C,EAAOq0C,SAAW,kCAClBr0C,EAAOs0C,SAAW,sCAClBt0C,EAAOu0C,YAAc,yCAErB,IAAItxC,EAASoW,EAAKhW,SACdJ,EAAOqrB,eAAemmB,KACtBz0C,EAAOy0C,MAAQxxC,EAAOwxC,IAE1Bz0C,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOy0C,OACPt0C,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOz0C,EAAOy0C,SAGvCr6B,EAAW,CACPmiC,iBAAkBpC,EAClBqC,eAAgBnC,EAChBoC,aAAcpC,GAElBn6C,EAAIqB,aAAa6Y,GACjBpa,EAAO+lC,IAAI,WAAYuU,GAEvBt6C,EAAOwlC,aAAc,EACrByU,IAEAj6C,EAAOw6C,WAAa,KACpBx6C,EAAOu6C,eAAiBA,EACxBv6C,EAAO+6C,eAAiBA,EACxB/6C,EAAOg7C,cAAgBA,EAEvBh7C,EAAO08C,kBAAmB,EAC1B18C,EAAO28C,iBAAkB,EACzB38C,EAAO48C,iBAAkB,EACzB58C,EAAO68C,gBAAiB,EAExB78C,EAAO88C,WAAa,SAASpwC,GACzB,OAAOA,EAAKqI,IAAI,SAAS1B,GACrB,OAAOA,EAAExO,QAIjB7E,EAAO+8C,eAAiB,SAAS3B,GAC7B,OAAOA,EAAYrmC,IAAI,SAASioC,GAC5B,OAAOA,EAAG1B,SAIlB5W,EAAiBF,EAAU,WACvByV,KAnVF,KAsVFl6C,EAAKuC,IAAI,sCAEpB7E,UAAU,aAAc,CAAC,UAAW,YACjC,SAASC,EAASC,GACd,OAAO,SAASC,EAAOK,GACnB,IAAIg/C,EAAiB9+C,GAAGC,OAAOH,EAAQ,IAEvCL,EAAMS,iBAAiB,WACnB,MAAO,CACHC,EAAGZ,EAAQa,cAEhB,WACC,IAAIK,EAAMjB,EAAGkB,WAAW,IAAK,GAC7Bo+C,EAAen+C,MAAM,SAAUF,EAAIG,OAAS,YAK3DtB,UAAU,0BAA2B,CAAC,aAAc,UAAW,WAAY,aACxE,SAASouC,EAAYnuC,EAASqO,EAAU1D,GAcpC,SAASspC,IACLD,IAbA7E,EAAe+F,EAAIxqC,OAAO+kC,EAAO,CAC7BnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,EACZzS,MAAOoC,EACPqG,YAAaA,EACbD,kBAAmB,OAEvBpG,EAAOiR,UAAY,WAAc47B,EAAaznC,QAC9CynC,EAAaznC,OAQjB,OAAO,SAASxH,GACZ,IAAI6zC,EACuB,WAAvB7zC,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAGJ/zC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,YACxB0hC,EAAa1iC,SAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACC69C,MAIR1+C,EAAMmoC,IAAI,WAAY,WAClB0L,IACAppC,EAAG4C,aACHpH,EAAG0F,aAAa4jC,SAtaxC;CCAC,WACG,aAEA,IAAIptC,EAAMC,EAAmB2uC,EAAKhxC,EAAImG,EAAM5D,EAAKC,EAAI+8C,EAAOtK,EAAK7uC,EAAIF,EAOjEgpC,EACA3oC,EACAe,EACAd,EARAg5C,EAAK,WACLC,EAAM,YAENC,GAAW,EACXC,GAAY,EAUZnQ,EAAQ,qBAER0F,EAAc,sBAGdxsC,EAAc,CACd0E,IAAK,CAAC0iC,EAAY,2BAClBiC,YAAa,CAAC,QAGlB,SAASjC,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACfoD,EAAaznC,QACN,GAKf,IAAIm4C,EAAwB,CACxBF,SAAU,EACVC,UAAW,GAGXE,EAAa,GAEjB,SAASC,EAAiB/sC,EAAMlF,GAC5BgyC,EAAW9sC,GAAQlF,EAAI,EAAI,EAC3B0xC,EAAMnc,SAAS,aAAcyc,GAGjC,SAASE,EAAclyC,GAMnBiyC,EAAiBN,EAJbE,OADM/5C,IAANkI,GACY6xC,EAED7xC,GAKnB,SAASmyC,EAAiBnyC,GAElB8xC,OADMh6C,IAANkI,GACa8xC,EAED9xC,EAEhBiyC,EAAiBL,EAAK5xC,GAyD1B,SAAS0iC,EAAgB1oB,GANzB,IAAqBpe,EAAQoe,EAXFA,GAb3B,WACIotB,EAAIjrC,QACJirC,EAAIltC,gBACJktC,EAAIhtC,eAAe6nC,GAEnB,IAAInpC,EAAMsuC,EAAItuC,MAEdsuC,EAAI3sC,WAAW,aACf3B,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAEzCrB,EAAIvD,OAAO,MAqBX2sC,GAPiBtmC,EAQLwrC,EAAIx0C,OAAO,gBAREonB,EAQeA,EAPxCzhB,EAAGgC,iBAAiB6sC,EAAIx0C,OAAO,YAAaonB,EAAQytB,aAAc,IAClEL,EAAItuC,MAAMlG,OAAO,MAAM4C,KAAKwkB,EAAQivB,MAAQ,SAAWjvB,EAAQ5d,IAC/DgrC,EAAI1rC,aAAaE,EAbV,CACHiyC,IAFmB7zB,EAcoBA,GAZrB,GAClB8zB,OAAU9zB,EAAe,MACzB2tB,KAAQ3tB,EAAc,KACtBo4B,MAASp4B,EAAe,MACxBq4B,QAAWr4B,EAAiB,UAchCqnB,EAAa9tC,OAAOkG,GACpB4nC,EAAa7tC,MA7GC,KAiHlB,SAASuvC,EAAc7hC,GACnB1M,EAAOmL,UAAYuB,EAAK8Y,QACjB9Y,EAAK8M,KACZxZ,EAAOb,SAGX5B,QAAQC,OAAO,SAAU,IACpBsC,WAAW,aAAc,CACtB,OAAQ,SAAU,YAClB,sBAAuB,YAAa,cAAe,mBACnD,aAAc,eAAgB,sBAAuB,cACrD,eAEA,SAAU2D,EAAQirC,EAAUhrC,EAClBgyC,EAAO9xC,EAAMoE,EAAQC,EACrBs3B,EAAMqa,EAAS1F,EAAOhsC,EAAMH,GAClC,IAAI9E,EACA66C,EAoDJ,SAASC,IACL,MAAO,CACHV,SAAUA,EACVC,UAAWA,GAtDnBv9C,EAAO0D,EACPzD,EAAS0uC,EAETC,EAAM+G,EACN/3C,EAAKiG,EACLE,EAAOkE,EACP9H,EAAM+H,EACN9H,EAAKo/B,EACL2d,EAAQtD,EACRhH,EAAMsB,EACNnwC,EAAKmE,EACLrE,EAAKkE,EAEL9E,EAXYS,EAWOL,SAEnBrD,EAAO21C,UAAY,oBACnB31C,EAAOm0C,QAAU,iCACjBn0C,EAAOq0C,SAAW,kCAClBr0C,EAAOs0C,SAAW,sCAClBt0C,EAAOu0C,YAAc,yCACrBv0C,EAAOg+C,eAAiB,+BACxBh+C,EAAOi+C,YAAc,kCAEjBh7C,EAAOqrB,eAAe,WACtBtuB,EAAOy0C,MAAQxxC,EAAc,OAGjCjD,EAAOqpC,cAAgB,CACnBgU,SAAUA,EACVC,UAAWA,GAefQ,EAAWnP,EAAI5F,WAAW,CACtBnrC,MAAOoC,EACPs5B,IAAK,OACL1V,MAAO3gB,EACPgmC,MAhBJ,SAAeM,EAAQ9zB,GACfzV,EAAOypC,MACPvpC,EAAI4L,UAlKP,qBAkK6B,CACtBlE,GAAI6N,EAAI7N,GACR6sC,MAAOz0C,EAAOy0C,QAGlBz0C,EAAOiR,YAEXlR,EAAKmB,MAAM,kBAAmBuU,MAiBlCzV,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOy0C,OACPt0C,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOz0C,EAAOy0C,SAIvCz0C,EAAOk+C,SAAW,WACdR,IACA19C,EAAOqpC,cAAgB0U,IACvBD,EAASpU,eAGb1pC,EAAOm+C,YAAc,WACjBR,IACA39C,EAAOqpC,cAAgB0U,IACvBD,EAASpU,eAGb1pC,EAAOo+C,QAAU,WACb,OAAOd,GAGXt9C,EAAOq+C,KAAO,WACV,OAAOhB,GA6BXr9C,EAAOs+C,aAAe,SAAUhkB,EAAM5uB,GAClC,GAAKA,EAAL,CAIA,IAAIrI,EA/BR,SAA8BugB,GAE1B,IAAI26B,EAAW36B,EAAMmT,MAAM,KACvBynB,EAAS,KAEb,GAAoB,MAAhBD,EAAS,GACTC,EAASh5C,EAAEi5C,QACR,GAAoB,OAAhBF,EAAS,GAChBC,EAASh5C,EAAEk5C,SACR,GAAoB,MAAhBH,EAAS,GAChBC,EAASh5C,EAAEm5C,OACR,CAAA,GAAoB,OAAhBJ,EAAS,GAGhB,MAAO,CACHA,SAAUC,EACVI,WAAYh7B,GAJhB46B,EAASh5C,EAAEq5C,IAQf,MAAO,CACHN,SAAUC,EACVI,WAAYL,EAAS,IASZO,CAAqBpzC,GAC9B6yC,EAAWl7C,EAAOk7C,SAClBK,EAAav7C,EAAOu7C,WAExB,GAAIL,EACA,OAAO,SAAU9oC,GAGb,GAAgB,OAFFzV,EAAO0wC,SAAW,KAEX,CACjB,IAAIqO,EAAWC,SAASvpC,EAAIzV,EAAO0wC,SAASxuC,QAAQ,KAAM,KAC1D,OAAOq8C,EAASQ,EAAUC,SAASJ,IAAenpC,EAAM,KAIxD,IAFA,IAAIlO,EAAO/B,EAAEy5C,OAAOxpC,GAEXtG,EAAI,EAAGkjC,EAAI9qC,EAAKG,OAAQyH,EAAIkjC,EAAGljC,IAAK,CACrC4vC,EAAWC,SAASvpC,EAAIlO,EAAK4H,IAAIjN,QAAQ,KAAM,KACnD,GAAIq8C,EAASQ,EAAUC,SAASJ,IAC5B,OAAOnpC,IAMvB,IAAIg7B,EAAM,GAEV,OADAA,EAAIzwC,EAAO0wC,SAAW,KAAO1wC,EAAO4jB,MAC7B6sB,IA3NvB+M,EAAaN,EAAMtc,UACfsc,EAAMzc,SAAS,aAAc8c,IAGjCx9C,EAAKmB,MAAM,sBAAuBs8C,GAClCG,EAAiBH,EAAWF,WAC5BI,EAAcF,EAAWH,UA2NjBr9C,EAAO+lC,IAAI,WAAY,WACnB6M,EAAI/qC,YAGR9H,EAAKuC,IAAI,kCAEpB7E,UAAU,mBACP,CAAC,aAAc,UAAW,WAAY,aAClC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAC/C0F,EAAKtB,aApSlB,GAqSO2B,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,IA3OhB7E,EAAe+F,EAAIxqC,OAAO+kC,EAAO,CAC7BnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,EACZzS,MAAOoC,EACPqG,YAAaA,IAGjBusC,EAAIvtC,YAAYwtC,EAAatE,GAE7BvuC,EAAOiR,UAAY,WAAc47B,EAAaznC,QAqOP,WAAvBxH,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAYA,GAEfgC,EAAG83B,aAAa,CACZ,CAAC,QAAS,qCACV,CAAC,cAAe,oBAGpBviC,EAAMi0C,OAAO,YAAa,WACjBl0C,EAAGsZ,cAAcrZ,EAAMuN,aACxB+iC,EAAgBtwC,EAAMuN,WACtB0hC,EAAa1iC,UAIrBsnC,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACMd,EAAGsZ,cAAcrZ,EAAMuN,aACxBumC,IACAxD,EAAgBtwC,EAAMuN,cAKlCvN,EAAMmoC,IAAI,WAAY,WAClB0L,IACAppC,EAAG4C,aACHpH,EAAG0F,aAAa4jC,SAlWxC;CCAC,WACG,aAEA,IAAIptC,EAAMC,EAAQC,EAAW0uC,EAAKxuC,EAElC5C,QAAQC,OAAO,cAAe,IAC7BsC,WAAW,kBACR,CAAC,OAAQ,SAAU,YAAa,sBAAuB,aAEvD,SAAU2D,EAAQirC,EAAUhrC,EAAagyC,EAAOnW,GAC5C,IAAIt8B,EACJlD,EAAO0D,EAEPxD,EAAYyD,EACZirC,EAAM+G,EACNv1C,EAAKo/B,GAHLv/B,EAAS0uC,GAIFwQ,WAAa,uBAEpBj8C,EAAShD,EAAUoD,SAEnBsrC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,YACL1V,MAAO3gB,IAGXjD,EAAOw0C,IAAM,SAAUvyC,GACfjC,EAAOy0C,OACPt0C,EAAG6C,MAAMf,IAIjBlC,EAAKuC,IAAI,uCAhCrB;CCAC,WACG,aAEA,IAAIvC,EAAMC,EAAQrC,EAAI0K,EAAIxE,EAAIE,EAE1B8oC,EACA1hC,EACA7G,EACAJ,EACAe,EACAd,GAAQ,EAERgpC,EAAQ,yBACRh8B,EAAa,IAEbg1B,EAAY,CAAC,cAAe,OAAQ,OAAQ,QAAS,WAAY,QACjE8G,EAAgB,CACZ,YAAa,WAAY,OAAQ,QAAS,UAC1C,eAkBR,SAASQ,IACL,QAAIZ,EAAat7B,cACbvR,EAAOypC,MAAQ,KACft+B,EAAY,KACZ0hC,EAAaznC,QACN,GAUf,SAASsoC,IACL,IAAIrpC,EAAWyB,EAAUuE,EANRA,EAmBjB,SAASsjC,EAAK5mC,EAAKT,GACf,IAAI+M,EAAIhJ,EAAItJ,OAAO,OAAO4E,QAAQoB,GAAK,GACnCT,GACA+M,EAAEtS,OAAO,SAdjB8rC,EAAallC,QACbklC,EAAa7tC,MAAMmS,GAEnB9M,EAAYwoC,EAAa9rC,OAAO,OAAO4E,QAAQ,aAAa,GAG5DG,GADAxB,EAAMD,EAAUtD,OAAO,OAAO4E,QAAQ,OAAO,IAC9B5E,OAAO,OAAO4E,QAAQ,aAAa,GAdjC0E,EAeLvE,EAdZ/B,EAAGgC,iBAAiBsE,EAAK,QAAS,IAClCA,EAAIrE,GAAG,QAASynC,GAehBpjC,EAAM/F,EAAIvD,OAAO,OAAO4E,QAAQ,eAAe,GAS/CgoC,EAAK,oBACLA,EAAK,oBACLA,EAAK,kBAAkB,GAc3B,SAASI,EAAYvoB,GACjB,IAAIyoB,EAAY3pC,EAAIlG,OAAO,yBAAyB2C,OAAO,SAE3DuD,EAAIlG,OAAO,qBAAqB4C,KAAKwkB,EAAQ25B,WAC7C76C,EAAIlG,OAAO,qBAAqB4C,KAAKwkB,EAAQ8U,MAE7C6L,EAAU/yB,QAAQ,SAAUknB,EAAMnrB,GAdlC,SAASrI,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAJhD,IAAiBN,EAAOu9B,EAAOr9B,EACvBC,EADSH,EAkBDunC,EAlBQhK,EAkBG90B,EAlBIvI,EAkBD4e,EAAQ8U,GAjB9BzzB,EAAKH,EAAM3F,OAAO,MAMtB+F,EAAQ,QAASmmC,EAAchJ,GAAS,KACxCn9B,EAAQ,QAASF,KAcrB,SAASsnC,IACLR,IACAK,EAAY5iC,GACZ0hC,EAAa9tC,OAAOkG,GAGxB1H,QAAQC,OAAO,aAAc,IACxBsC,WAAW,iBACR,CAAC,OAAQ,SACT,YAAa,aAAc,eAC3B,cAAe,sBAEnB,SAAU2D,EAAQirC,EAAU9qC,EAAM4G,EAAMzC,EAAMG,EAAMymC,GAChD5uC,EAAO0D,EAEP9F,EAAKiG,EACLyE,EAAKmC,EACL3G,EAAKkE,EACLhE,EAAKmE,GAJLlI,EAAS0uC,GAKFvjC,UAAY,GAanBwjC,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,UACL2P,MAdJ,SAAeM,EAAQ9zB,GACfzV,EAAOypC,OACPt+B,EAAYsK,EACZy4B,IACArB,EAAa1iC,SAEbgB,EAAY,KACZ0hC,EAAaznC,WAUrBiD,EAAGhC,YAAY,CACX0E,IAAK,CAAC/K,EAAOspC,eAAgB,qBAC7BoG,YAAa,CAAC,SAElBrnC,EAAG83B,aAAa,CACZ,CAAC,YAAa,uCACd,CAAC,cAAe,uBAGpBngC,EAAO+lC,IAAI,WAAY,WACnB19B,EAAG4C,eAGPlL,EAAKuC,IAAI,sCAGZ7E,UAAU,uBACP,CAAC,aAAc,UAAW,WAAY,aACtC,SAAUouC,EAAYnuC,EAASqO,EAAU1D,GACrC,OAAO,SAAUzK,GACb,IAAI6zC,EAEJ,SAASC,IACLxtC,EAAUvG,EAAGqH,UAAU7G,GAAGC,OAAO,mBAAoB,UAlJ5D,GAoJO+F,EAAQxG,EAAGkB,WAAWqF,GACtBe,EAAUd,EAAMpF,OAGpB,SAAS4yC,IACLD,KAjJhB7E,EAAehpC,EAAGkB,YAAYooC,EAAO,CACjCnuC,MAAOmF,EAAMnF,MACboR,OAAQ,EACRC,WAAY,KAGHnL,KAAKpG,MAAM,CACpBqG,SAAU,WACVb,IAAKJ,EAAU,OAGnB2oC,EAAaznC,OAwIGrF,EAAKmB,MAAM,8BAGY,WAAvBtD,EAAMwE,KAAKwvC,QACX7lC,EAAS4lC,GAETA,IAEJtpC,EAAGhC,YAAY,CACX0E,IAAK,CAAC0iC,EAAY,2BAClBiC,YAAa,CAAC,SAElBrnC,EAAG83B,aAAa,CACZ,CAAC,QAAS,yCACV,CAAC,cAAe,yBAGpBsR,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACK0M,IACAumC,IACAxD,OAKZtwC,EAAMmoC,IAAI,WAAY,WAClB56B,EAAY,KACZsmC,IACAppC,EAAG4C,aACHpH,EAAG0F,aAAa4jC,SA5MxC;CCAC,WACG,aAEA,IAOIntC,EAAQD,EAAMsZ,EAAMtN,EACpBpO,EAAI0K,EAAIgqB,EAAIjb,EAAIvJ,EAAI+D,EAAKlE,EAAOxN,EAAK2D,EAAIqK,GAAI04B,GAAKwY,GAAKC,GAAKC,GAAKC,GACjEC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKC,GAAMC,GAAMC,GAAM9I,GAE3C+I,GAAQ9zC,GAAK8V,GAAMyU,GAAWwpB,EAAMC,GAASC,GAAQC,GAErDlqB,GACAmqB,EACAC,GAAW,SAAU3gD,GAAK,MAAO,IAAMA,EAAI,KAG/C,SAAS4gD,GAAUC,GAgGnB,IAAmBC,EACXC,EA3DJL,EAAY,CACRM,EAAG,CAACC,GArCR,WAAqB,OAAON,GAAS,wBAsCjCO,EAAG,CAACC,GArCR,WAAqB,OAAOR,GAAS,sBAsCjCS,EAAG,CAACC,GArCR,WAAuB,OAAOV,GAAS,yBAuCnCW,EAAG,CAACC,GArCR,WAAqB,OAAOZ,GAAS,mBAsCjCa,EAAG,CAACC,GArCR,WAAoB,OAAOd,GAAS,sBAsChCe,EAAG,CAACC,GArCR,WAAuB,OAAOhB,GAAS,qBAuCnCiB,KAAM,CAACjC,GAAIkC,aArCf,WAAqB,OAAOlB,GAAS,oBAsCjCmB,EAAG,CAACC,GArCR,WAAoB,OAAOpB,GAAS,kBAsChCqB,EAAG,CAACC,EArCR,WAAoB,OAAOtB,GAAS,kBAsChCuB,EAAG,CAACC,GArCR,WAAoB,OAAOxB,GAAS,qBAuChCyB,EAAG,CAACzC,GAAI0C,kBArCZ,WAAoB,OAAO1B,GAAS,oBAsChC2B,EAAG,CAACrC,GAAIsC,cArCZ,WAAmB,OAAO5B,GAAS,sBAsC/B6B,EAAG,CAACtC,GAAKuC,YArCb,WAAsB,OAAO9B,GAAS,qBAsClC+B,EAAG,CAAC/C,GAAIgD,kBArCZ,WAAoB,OAAOhC,GAAS,uBAsChCiC,UAAW,CAACjD,GAAIkD,gBArCpB,WAAqB,OAAOlC,GAAS,wBAuCjCmC,EAAG,CAACnD,GAAIoD,MArCZ,WAAmB,OAAOpC,GAAS,qBAsC/BqC,EAAG,CAAC98B,EArCR,WAAmB,OAAOy6B,GAAS,qBAsC/BsC,IAAK,CAAC9C,GAAK+C,cArCf,WAAmB,OAAOvC,GAAS,sBAsC/BwC,EAAG,CAACC,EArCR,WAAsB,OAAOzC,GAAS,oBAwClC0C,GAAI,WAAclD,GAAKmD,MAAM,IAC7BC,GAAI,WAAcpD,GAAKmD,MAAM,IAC7BE,GAAI,WAAcrD,GAAKmD,MAAM,IAC7BG,GAAI,WAActD,GAAKmD,MAAM,IAC7BI,GAAI,WAAcvD,GAAKmD,MAAM,IAE7Bl4C,IAAKqnC,EAEL7T,aAAcuhB,GAAKwD,YAEnB5T,YAAa,CACT,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,OAAQ,IAAK,IAAK,KACjD,CAAC,IAAK,IAAK,IAAK,IAAK,UAAW,IAAK,IAAK,IAAK,IAAK,IAAK,OACzD,KAIJ/xC,EAAGyF,IAAIo9C,KAeIC,EAdDD,EAeVE,EAAML,EAAU3Q,YAAY,GAEhCrnC,EAAGg3B,eAAeohB,GAElBA,EAAM8C,UAAUnwC,QAAQ,SAAUS,GAC9B,IAAIR,EAAIotC,EAAM5sC,GACVnK,EAAK2J,GAAKA,EAAE3J,GACZmuC,EAAKxkC,GAAKA,EAAEwkC,GACZxkC,IAAMgtC,EAAUxsC,KAChBwsC,EAAUxsC,GAAK,CAACnK,EAAImuC,GACpB6I,EAAI5wC,KAAK+D,OAtBjBxL,EAAGhC,YAAYg6C,GAEfh4C,EAAG83B,aAAa,CACZ,CA9DJ,WAAqB,OAAOmgB,GAAS,UAMrC,WAAwB,OAAOA,GAAS,mBAyDpC,CA9DJ,WAAuB,OAAOA,GAAS,gBAMvC,WAA0B,OAAOA,GAAS,yBAyDtC,CA9DJ,WAAoB,OAAOA,GAAS,SAMpC,WAAuB,OAAOA,GAAS,kBAyDnC,CA9DJ,WAAsB,OAAOA,GAAS,eAMtC,WAAyB,OAAOA,GAAS,wBAyDrC,CA9DJ,WAAuB,OAAOA,GAAS,aAMvC,WAA0B,OAAOA,GAAS,wBA6E9C,SAASM,GAAgBjhD,GACrB89C,EAAiB,QAAS+B,GAAItuC,OAAOvR,IACrC2/C,GAAIkE,qBAGR,SAAS1C,GAAcnhD,GACnB89C,EAAiB,UAAW8B,GAAIuB,cAAcnhD,IAGlD,SAASqhD,GAAqBrhD,GAC1B89C,EAAiB,SAAU8B,GAAIyB,qBAAqBrhD,IAGxD,SAASuhD,GAAYvhD,GACjB89C,EAAiB,QAAS6B,GAAI4B,YAAYvhD,IAG9C,SAASyhD,GAAczhD,GACnB89C,EAAiB,SAAU6B,GAAI8B,cAAczhD,IAGjD,SAAS2hD,GAAY3hD,GACjB89C,EAAiB,SAAU6B,GAAIgC,YAAY3hD,IAG/C,SAAS8jD,EAAa9jD,EAAGgiD,EAAGroB,EAAK5oB,GAC7B,IAAI1K,EAAY,UAANrG,GAAkBiS,EAAIgkB,QAAQ+rB,KAAOhiD,EAC3C+jD,EAAYpD,GAALt6C,EAAc,OAAmB,QAC5C4L,EAAIgkB,QAAQ+rB,EAAG37C,GACfy3C,EAAiBnkB,EAAKtzB,GACtB0H,EAAMA,MAAMg2C,EAAO,IAAMhzC,GAG7B,SAASgxC,GAAU/hD,GACf8jD,EAAa9jD,EAAGsgD,EAAM,KAAMK,GAAS,sBAGzC,SAASsB,IACLnC,GAAImC,mBAGR,SAASE,GAAcniD,GACnB8jD,EAAa9jD,EAAGugD,GAAS,MAAOI,GAAS,oBAG7C,SAASz6B,IACLqQ,GAAOjtB,QACPyE,EAAMA,MAAM4yC,GAAS,sBAGzB,SAASyC,IACL7iD,EAAI4L,UAAU,mBACd4B,EAAMA,MAAM4yC,GAAS,kBAGzB,SAASlO,IACDoN,GAAImE,aACJnE,GAAIoE,iBAEG3M,GAAI4M,MAAMC,UAEVpE,GAAIqE,eAEJpE,GAAIqE,qBAEJxE,GAAIjuC,aACXiuC,GAAIp6C,OACJk6C,GAAIkE,sBAEGjE,GAAI0E,kBACX1E,GAAI2E,eAKZ,SAASC,EAASzzC,GACd3Q,EAAKoD,KAAK,yCAA2CuN,GAGzD,SAAS0zC,GAAez9C,GACpB,IAAI09C,EAEJ,OAAK19C,GAKL09C,EAAQhE,EAAU15C,IAMXhJ,EAAGuX,IAAImvC,IAAU,CAACA,EAAO,KAH5BF,EAAS,mBACF,OARPA,EAAS,OACF,MA6Bf,SAASpuB,GAAYtqB,GACjB,OAAO9N,EAAG8E,YAAegJ,EAAGkyB,SAAWlyB,EAAGmyB,OAG9C,SAAS5H,KACL,IAAIsuB,EAAKpuB,GAAOhW,QACZrZ,EAAKqvB,GAAOviB,YAEhB9P,EAAGk9B,SAAS,YAAa,CAAEwjB,GAAI19C,EAAG,GAAI29C,GAAI39C,EAAG,GAAIy9C,GAAIA,IAErDrE,EAAKnhD,MAAM,eAAiB,EAAMwlD,EAAM,MAExChF,GAAImF,aAAaH,GAmBrB,SAASI,GAAcriC,GACnB,IAAIzV,EAAMyV,EAAElZ,OAAO0D,UAEnBD,EAAIjN,GAAKiN,EAAI5N,MAAM,EACnB4N,EAAIE,GAAKF,EAAI7N,OAAO,EACpBsjB,EAAEpb,KAAK,YAAa2K,EAAI+B,UAAU/G,EAAIjN,EAAGiN,EAAIE,IAyBjD,SAAS63C,GAAWn5C,GAChBoG,EAAIgkB,QAAQwqB,GAAa50C,GAI7B,IAAIo5C,EAAiB,CACjBC,UAAW,SAAUvxC,GACjB,MAAkC,kBAA3BA,EAAEwxC,WAAWC,WAGxBC,WAAY,SAAU1xC,GAClB,MAA+B,YAAxBA,EAAEwxC,WAAWG,QACW,oBAA3B3xC,EAAEwxC,WAAWI,WACc,kBAA3B5xC,EAAEwxC,WAAWC,WAGrBI,MAAO,SAAU7xC,GACb,MAAgC,UAAzBA,EAAEwxC,WAAWM,SAGxBC,OAAQ,SAAU/xC,GACd,MAAkC,WAA3BA,EAAEwxC,WAAWC,WAGxBO,MAAO,SAAUhyC,GACb,MAAgC,UAAzBA,EAAEwxC,WAAWM,SAGxBG,GAAI,SAAUjyC,GACV,MAAgC,QAAzBA,EAAEwxC,WAAWU,SACS,QAAzBlyC,EAAEwxC,WAAWU,SAGrBC,QAAS,SAAUnyC,GACf,MAAgC,QAAzBA,EAAEwxC,WAAWU,SAGxBE,UAAW,SAAUpyC,GACjB,MAAgC,QAAzBA,EAAEwxC,WAAWU,UAIxBG,EAAS,EACTC,EAAY,EACZC,EAAe,CACfxxB,MAAO,CACH3E,IAAK,YACLC,KAAM,QACNH,QAAS,QAEbiF,KAAM,CACF/E,IAAK,UACLC,KAAM,UACNH,QAAS,YAIjB,SAASb,IACL,OAAOg3B,EAAS,CACZp2B,QAASs2B,EAAa33C,GAAGoB,SACzBmgB,KAAMm2B,GACN,GAGR,SAASE,GAAO/wC,GACZlR,EAAGk9B,SAAS,aAAchsB,GAC1BgxC,KACAC,IAAW,GAGf,SAASC,KACL,OAAOpiD,EAAG48B,SACN,aACA,CACIylB,MAAO,MACPC,SAAU,EACVC,YAAa,kBACbC,KAAM,OAEVhtC,EAAKhW,UAIb,SAAS0iD,KACL,IAKIxnC,EACA+nC,EANApJ,EAAQ+I,KACRM,EAAQrJ,EAAMgJ,MACdM,EAActJ,EAAMkJ,YACpBK,EAAWvJ,EAAMiJ,SACjBE,EAAOnJ,EAAMmJ,KAoCjB,OAhCAV,EAAkB,OAATU,EAAgB,EAAI,EAE7BtmD,EAAKmB,MAAM,oBAAqBqlD,EAAO,cAAeE,EAC3C,UAAWJ,IAEtBpG,EAAO9hD,GAAGC,OAAO,cACRuJ,QACLs4C,EAAOxpB,GAAU11B,OAAO,KAAKkG,KAAK,KAAM,YAExCg5C,EAAKz4C,KAAK,SAAU6L,EAAGlE,GACnBhR,GAAG+O,UAAUxL,KAAKglD,YAAYl5C,WAQlC+Q,EAJgB,eAAhBioC,GAEAF,EAAU1B,EAAe2B,IAAU3B,EAAeW,GAExC13C,EAAG+gB,kBAAkBqxB,EAAM,CACjChxB,cAAeq3B,EACfxmC,YAAa2mC,EACb93B,QAASA,OAIH9gB,EAAGogB,YAAYgyB,EAAMuG,EAAaD,EAAO,CAC/CzmC,YAAa2mC,EACb93B,QAASA,MAIjB9qB,EAAGk9B,SAAS,aAAcmc,GACnB3+B,EAGX,SAASooC,IACL5mD,EAAKmB,MAAM,0BACX2M,EAAG6gB,QAAQC,KAGf,SAASi4B,GAAU5gD,GACXA,EACAkI,GAAGizB,YAAYwlB,GAEfz4C,GAAGmzB,eAAeslB,GAI1B,SAASX,GAAWx6C,GAChBy0C,EAAK3yC,aACAC,SAAS,KACTtG,KAAK,UAAWuE,EAAI,EAAI,GAejC,IAAIgyC,GAAa,GAEjB,SAASC,EAAiB/sC,EAAMlF,GAC5BgyC,GAAW9sC,GAAQlF,EAAI,EAAI,EAC3B3H,EAAGk9B,SAAS,aAAcyc,IAG9B,SAASqJ,GAAiBzkB,IAqC1B,SAAS0kB,KACL/6C,EAAS,WACLhM,EAAKmB,MAAM,8BAEXw+C,GAAIqH,WAEA/mD,EAAOm3C,YACPF,GAAI4M,MAAMpM,WAAWz3C,EAAOm3C,aAGjC,KAIP55C,QAAQC,OAAO,SAzgBU,CACrB,YACA,WACA,UACA,eAsgBCsC,WAAW,aACR,CAAC,SAAU,OAAQ,YAAa,WAAY,WAC5C,YAAa,cAAe,aAAc,cAC1C,eAAgB,aAAc,iBAAkB,eAChD,mBAAoB,eAAgB,eACpC,oBAAqB,gBAAiB,mBACtC,mBAAoB,mBAAoB,kBACxC,oBAAqB,kBAAmB,qBACxC,qBAAsB,oBAAqB,qBAC3C,iBAAkB,oBAAqB,iBACvC,qBAAsB,cAElB,SAAU4uC,EAAUjrC,EAAQqa,EAAQhQ,EAAYk5C,EAC9CpjD,EAAME,EAAM0G,EAAMy8C,EAClB5uC,EAAM6uC,EAAMtwC,EAAO4gB,EACnBvvB,EAAOF,EAAMo/C,EACbC,EAAOC,EAAOC,EACdC,EAAOC,EAAOC,EACdC,EAAOC,EAAOpjB,EACdqjB,EAAOC,EAAQC,EACfC,EAAOC,EAAQC,EACflQ,EAAOl4C,GAEb,IAEIif,EACAa,EAxQJ0C,EAwKA66B,EACAgL,EA4FIjlD,EAAS6a,EAAOza,SAChB8kD,EAAallD,EAAO60C,UAGpBsQ,EAAS,CACLzD,WAAYA,GACZ7lC,WAAY,WAAc,OAAOA,GACjC2X,UAAW,WAAc,OAAOA,IAChCP,OAAQ,WAAc,OAAOA,IAC7B8vB,WAAYA,GACZc,cAAeA,IAGvB9mD,EAAS0uC,EACT3uC,EAAO0D,EACP4V,EAAOyE,EACP/R,EAAW+B,EACXnQ,EAAKiG,EACLyE,EAAKmC,EACL6nB,EAAK40B,EACL7vC,EAAKiB,EACLxK,EAAKq5C,EACLt1C,EAAMgF,EACNlJ,EAAQ8pB,EACRt3B,EAAM+H,EACNpE,EAAKkE,EACLmG,GAAKi5C,EACLvgB,GAAMwgB,EACNhI,GAAMiI,EACNhI,GAAMiI,EACNhI,GAAMiI,EACNhI,GAAMiI,EACNhI,GAAMiI,EAEN9H,GAAMgI,EACN/H,GAAMgI,EACN/H,GAAOgI,EACP/H,GAAOgI,EACP/H,GAAOiI,EACP/Q,GAAMc,EACN2H,GAAMgI,GAPNjI,GAAMsI,GASFx4C,MAAM,CACNmyC,UAAWA,GACXuE,WAAYA,GACZH,OAAQA,KAGR7iD,EAAO0D,KAAO1D,EAAO8yC,OAAS9yC,EAAOm0C,UACrCp3C,EAAOm3C,WAAa,CAChBxwC,IAAK1D,EAAO0D,IACZovC,MAAO9yC,EAAO8yC,MACdqB,QAASn0C,EAAOm0C,QAChBC,WAAYp0C,EAAOo0C,aAI3Br3C,EAAOqoD,aAAe,WA5U9B,IAAoBhoC,EAAAA,EA6UG1iB,EAAGkB,WAAWiF,EAAKtB,cA5UtC88C,GAAIgJ,OAAO,CAACjoC,EAAErhB,MAAOqhB,EAAEthB,UA+UnBiB,EAAO+lC,IAAI,WAAY,WACnBhmC,EAAKuC,IAAI,iCACT+8C,GAAI7vC,OACJiwC,GAAIjwC,OACJnH,EAAG4C,aACHs0C,GAAIgJ,gBACJ3hB,GAAIx8B,cACJo1C,GAAIgJ,cACJlJ,GAAImJ,eACJ3I,GAAKpU,iBACLkb,IAAU,KAGd5G,GAAS7hD,GAAGC,OAAO,aACnB8N,GAAM8zC,GAAO5hD,OAAO,QAChB6I,KAAKtJ,EAAGkB,WAAWiF,EAAKtB,eAC5Bmd,EAAM,CAACzT,GAAIjF,KAAK,SAAUiF,GAAIjF,KAAK,WAEnCpD,EAAGs9B,YAAY0lB,IAEftG,KA9YJT,GAAKvvC,KAAK,CACN6zC,eAAgBA,GAChB7D,UAAWA,KAEfT,GAAK3V,gBAKLnoB,GAAO9V,GAAInL,OAAO,QAClBqW,EAAG2K,SAASC,IACZpQ,EAAIuiB,aAAanS,IAqBjByU,GAAYvqB,GAAInL,OAAO,KAAKkG,KAAK,KAAM,kBACvCivB,GAAS7D,EAAG4D,aAAa,CACrB/pB,IAAKA,GACLuqB,UAAWA,GACXV,YAAaA,GACbC,aAAcA,KA0BlB3T,GALA+9B,GAAcl0C,GAAInL,OAAO,KAAKkG,KAAK,CAC/BW,GAAI,mBACJ8L,UAAW9B,EAAI+B,UAAU,IAAK,QAGlB5S,OAAO,KACvBqW,EAAGO,SAAS0K,EAAG,OAAQ,KAAKpb,KAAK,QAAS,cAC1Cob,EAAEthB,OAAO,QAAQC,KAAK,IAAIiG,KAAK,CAAEtH,EAAG,IAAKmN,EAAG,KAC5C43C,GAAcriC,GACdsiC,IAAW,GAgVPoB,KAAWntC,KACP,SAAU8G,GACN,IA9UR2C,EA8UYqmC,EAAI7kD,EAAG48B,SAAS,YAAa,CAAE8jB,GAAI,EAAGC,GAAI,EAAGF,GAAI,IACrDpuB,GAAOQ,QAAQ,CAACgyB,EAAEnE,GAAImE,EAAElE,IAAKkE,EAAEpE,IAC/BvkD,EAAKmB,MAAM,oBAAqBwnD,GAEhC5pC,EAAaY,EACb3f,EAAKmB,MAAM,kCAAmCwe,GAC9ChS,EAAMC,QAAO,GACb+zC,GAAUlE,GAAWluB,IACrB5hB,EAAMC,QAAO,GACbi5C,IAAU,GAEV5mD,EAAOH,KAAOA,EAAKD,OAAO,kBAC1B0gD,GAAWtgD,EAAOH,KAClBE,EAAKmB,MAAM,2BAA4Bo/C,KA3V/Cj+B,EAAIlkB,GAAGC,OAAO,wBAEhBA,OAAO,QAAQ4C,KAAKs/C,GAAS,6BAC/BoE,GAAcriC,GA4VFi9B,GAAIqJ,cAAcrI,IAClBd,GAAImJ,cAAcrI,IAClBb,GAAIkJ,cAAcrI,IAClBf,GAAIoJ,cAAcrI,IAClBR,GAAK6I,cAAcrI,IAEnBjB,GAAI9vC,QA/JhBiuC,GAAa35C,EAAG+8B,UACZ/8B,EAAG48B,SAAS,aAAcqf,GAAK8I,cAAe,CAAC,SAAS,GAE5D7oD,EAAKmB,MAAM,6BAA8Bs8C,GAAWj4B,SAEpD7X,EAAMC,QAAO,GACbmzC,GAActD,GAAWj4B,SACzB7X,EAAMC,QAAO,KA4JT0xC,GAAI99C,eAhNJ27C,EAAQr5C,EAAG48B,SAAS,eAAgB,CAAE1Q,QAAS,IAAM1W,EAAKhW,UAC1D6kD,EAAQhL,EAAMntB,QAElBmwB,GAAUzpB,GAAU11B,OAAO,KAAKkG,KAAK,KAAM,gBACvCihD,IACArkD,EAAGk9B,SAAS,eAAgBmc,GAC5B6C,GAAK8I,YAAY3I,GAASl+B,GAAMkmC,IA6MhC/H,GAAS1pB,GAAU11B,OAAO,KAAKkG,KAAK,KAAM,cAC1Cq4C,GAAIwJ,UAAU58C,GAAKi0C,GAAQiI,EAAQzoC,GACnC6/B,GAAIuJ,SAAS,CAAEC,eAAgB1J,GAAI0J,iBACnCzJ,GAAI0J,aAhMRzL,GAAa35C,EAAG+8B,UACZ/8B,EAAG48B,SAAS,aAAcqf,GAAK8I,cAAe,CAAC,SAAS,GAG5D7oD,EAAKmB,MAAM,qBAAsBs8C,IAEjC9vC,EAAMC,QAAO,GACbizC,GAAgBpD,GAAW0L,OAC3BpI,GAActD,GAAWj4B,SACzBy7B,GAAqBxD,GAAW2L,QAChCjI,GAAY1D,GAAW4L,OACvBhI,GAAc5D,GAAW6L,QACzB/H,GAAY9D,GAAW8L,QACvB5H,GAAUlE,GAAWluB,IACrBwyB,GAActE,GAAW+L,KACzBzJ,GAAK0J,WAAWhM,GAAWiM,SAC3BrK,GAAIsK,eAAelM,GAAWmM,OAC9BvK,GAAIwK,gBAAgBpM,GAAWqM,OAC/Bn8C,EAAMC,QAAO,GAkLTmyC,GAAKgK,cAAc3B,GAAc3K,GAAWuM,MAE5ChqD,EAAKmB,MAAM,yBAA0B+1C,GAAI90B,QACzCpiB,EAAKuC,IAAI,kCApqBrB;CCAC,WACG,aAEA,IAAIsP,EAAK7N,EAAIiK,EAAInK,EAAIi8C,EAMjB5pB,EAAQnlB,EAJRuvC,EAAW,SAAU3gD,GACrB,MAAO,QAAUA,EAAI,KAKrBqqD,EAAa,GAEbC,EAAW,EAEXC,EAAc,CACVh9B,OAAQ,GACRi9B,KAAM,EACNC,OAAQ,IAEZC,EAAcL,EAAa,EAC3BM,EAAc,CAAElqC,IAAKiqC,EAAaj2C,IAAKi2C,GACvCE,EAAe,CAAEnqC,IARJ,GAQqBhM,IARrB,IAUb2E,EAAS,CACL5J,EAAG,YACH3Q,EAAG,YACHud,EAAG,cAGPyuC,EAAsB,CACtBC,QAAS,OAET5mC,OAAU,WACVG,MAAO,UACPC,IAAK,QACLC,UAAW,cACXC,aAAc,gBACdC,UAAW,eAGXsmC,EAAoB,CACpB5mC,OAAQ,WACRO,WAAY,eACZC,WAAY,gBAehB,IAAIqmC,EAAmB,EACnBC,EAAiB,EAEjBC,EAAY,CACZx2B,MAAO,CACHy2B,OAAQ,UACRC,QAAS,WAEbt2B,KAAM,CACFq2B,OAAQ,UACRC,QAAS,YAYjB,SAASC,EAAe33C,GARxB,IAAuBA,EACfsD,EACA/O,EACAqjD,EAMJ53C,EAAEnO,GAAGgI,UAAU,QAAQ8hB,OAAO,SAAU3b,EAAGlE,GAAK,OAAa,IAANA,IAClDrQ,MAAM,QATP6X,GADetD,EAUcA,GATvBy3C,OACNljD,EAAKyL,EAAE63C,OACPD,EAAOt0C,EAAI,SAAW,UACnBA,EAAI/E,EAAI8iB,OAAOE,SAAShtB,EAAI,EAAGoG,EAAGsB,SAC9Bu7C,EAAU78C,EAAGsB,SAAS27C,KAQrC,SAASE,IAEL,OADAzB,EAAeiB,EAAiB,GACxBA,GACJ,KAAK,EAAG,OAAOrK,EAAS,yBACxB,KAAK,EAAG,OAAOA,EAAS,kCACxB,KAAK,EAAG,OAAOA,EAAS,6BAIhC,SAASoJ,EAAe0B,GACpBT,EAAmBS,EAAO,EAC1B,IAAIriD,EAAIlF,EAAG48B,SAAS,aAAcqf,EAAK8I,cACvC7/C,EAAE4gD,MAAQgB,EACV9mD,EAAGk9B,SAAS,aAAch4B,GAG9B,SAASsiD,IAEL,OADAzB,EAAgBgB,EAAe,GACvBA,GACJ,KAAK,EAAG,OAAOtK,EAAS,gCACxB,KAAK,EAAG,OAAOA,EAAS,0BACxB,KAAK,EAAG,OAAOA,EAAS,2BACxB,KAAK,EAAG,OAAOA,EAAS,wBAIhC,SAASsJ,EAAgBwB,GACrBR,EAAiBQ,EAAO,EACxB,IAAIriD,EAAIlF,EAAG48B,SAAS,aAAcqf,EAAK8I,cACvC7/C,EAAE8gD,MAAQe,EACV/mD,EAAGk9B,SAAS,aAAch4B,GAG9B,SAASuiD,EAAUj4C,GACf,IAAIlF,EAAOy8C,EAAiBv3C,EAAE8d,OAAOzpB,OAAUkjD,EAAiB,EAChE,OAAOv3C,EAAE8d,OAAOhjB,GAGpB,SAASo9C,EAAYl4C,GACjB,IAAIlF,EAAOw8C,EAAmBt3C,EAAE8d,OAAOzpB,OAAUijD,EAAmB,EACpE,OAAOt3C,EAAE8d,OAAOhjB,GAGpB,SAASq9C,EAAUplB,GACf,OAAQA,GAASA,EAAMv6B,QAAW,GAGtC,SAAS4/C,EAAkB51C,GAGvB,OAFWA,EAAEzX,OAAO,QACL+K,OAAO0D,UACX7N,MAAmB,EAAXirD,EAGvB,SAASyB,EAAQ/rC,EAAKgsC,GAClB,MAAO,CACHhsD,GAAIggB,EAAI,EACR7S,GAAI6S,EAAI,EACR3gB,MAAO2gB,EAAMgsC,EACb5sD,OAAQ4gB,GAIhB,SAASisC,EAAsBv4C,GAC3B,IAGIs4C,EAHAxiD,EAAOkK,EAAEnO,GACT2mD,EAAMx4C,EAAEy4C,MACR1lB,EAAQolB,EAAUD,EAAYl4C,IAGlClK,EAAK/K,OAAO,QAAQ4C,KAAKolC,GACzBulB,EAAavlB,EAAQqlB,EAAkBtiD,GAAQ,EAE/CA,EAAK/K,OAAO,QACPkP,aACArG,KAAKykD,EAAQ1B,EAAY2B,IAE1BE,GACAE,EAAY5iD,EAAM0iD,EAAKvB,GAe/B,SAASyB,EAAY5iD,EAAM0iD,EAAKG,GAC5B,IAAIC,EACAC,EAAMhC,EAAYh9B,OAClBi/B,EAAOjC,EAAYE,OAEvBjhD,EAAK/K,OAAO,WAAWoP,UAEvBy+C,EAAO9iD,EAAKpI,OAAO,KACd4E,QAAQ,SAAS,GACjBA,QAlIEoT,EAkIkB8yC,EAlIL9yC,SAAWA,EAAO5J,GAkIP,GAC1BlI,KAAK,YAAa2K,EAAI+B,UAAUq4C,EAAK5rC,GAAI4rC,EAAK53C,MAE9CrT,OAAO,UACPkG,KAAK,IAAKilD,GAEXL,EAAI7kD,IACJilD,EAAKlrD,OAAO,QACPkG,KAAK,KAAMijD,EAAYC,MACvBljD,KAAK,cAAe,UACpBjG,KAAK6qD,EAAI7kD,KACP6kD,EAAIj/B,KACXq/B,EAAKlrD,OAAO,OACPkG,KAAK,CACFjI,MAAc,EAAPmtD,EACPptD,OAAe,EAAPotD,EACRz4C,UAAW9B,EAAI+B,WAAWw4C,GAAOA,GACjCtpC,aAAc,IAAMgpC,EAAIj/B,MAKxC,SAASw/B,EAAgB/4C,GACrB,IAAI+yB,EAAQolB,EAAUF,EAAUj4C,IAChCA,EAAEnO,GAAG9G,OAAO,QAAQ4C,KAAKolC,GAG7B,SAASod,EAAmBnwC,GACpBA,EACA23C,EAAe33C,GAEftC,EAAI5H,OAAO6lB,OAAO,WAAWxnB,KAAK,SAAU6L,GACxC23C,EAAe33C,KAO3B,SAASg5C,EAAeh5C,GACTA,EAAEnO,GACRS,QAAQ,SAAU0N,EAAEy3C,QACzBc,EAAsBv4C,GACtBtC,EAAIu7C,QAAQj5C,GAAG,GAGnB,SAASk5C,EAAal5C,GAlEtB,IAA6BA,EACrBlK,EACA0iD,EADA1iD,GADqBkK,EAmELA,GAlEPnO,GACT2mD,EAAMx4C,EAAEy4C,MAEZM,EAAgB/4C,GAEZw4C,GACAE,EAAY5iD,EAAM0iD,EAAKtB,GA6D3Bx5C,EAAIu7C,QAAQj5C,GAAG,GAGnB,SAASm5C,EAAYn5C,GACjB,IAGIrB,EAAMy6C,EAAO7qC,EAAO+pC,EAlMEr3C,EA+LtBnL,EAAOhL,GAAGC,OAAOsD,MACjB6gB,GAhMsBjO,EAgMSjB,EAAEiB,KA/L9Bk2C,EAAoBl2C,IAASA,GAAQ,WAgMxC8xB,EAAQolB,EAAUD,EAAYl4C,IAKlCrB,GAFAqB,EAAEnO,GAAKiE,GAEKpI,OAAO,QACnB0rD,EAAQtjD,EAAKpI,OAAO,QAEpBoI,EAAKpI,OAAO,QAAQC,KAAKolC,GACpBn/B,KAAK,cAAe,QACpBA,KAAK,IAAK,SACVA,KAAK,IAAKojD,EAAcJ,GAE7BroC,EAAQ7d,EAAGgpB,cAAc5jB,EAAMoZ,EAASynC,GAExC2B,EAAavlB,EAAQqlB,EAAkBtiD,GAAQ,EAE/C6I,EAAK/K,KAAKykD,EAAQ1B,EAAY2B,IAC9Bc,EAAMxlD,KAAKykD,EAtPG,GAsPkB,IAChC9pC,EAAM3a,KAAKykD,EAAQ1B,EAAY,IAE/B7gD,EAAKlC,KAAK,YAAa2K,EAAI+B,WAAW02C,GAAcA,IAEpDh3C,EAAEnO,GAAGgI,UAAU,KACVpO,MAAM,YAAa,SAAWiS,EAAI27C,cAAgB,KAG3D,SAASC,EAAUt5C,GACf,IAzNwBiB,EAyNpBnL,EAAOhL,GAAGC,OAAOsD,MACjB6gB,GA1NoBjO,EA0NSjB,EAAEiB,KAzN5Bo2C,EAAkBp2C,IAASA,GAAQ,WA4N1CjB,EAAEnO,GAAKiE,EACPyI,EAAIgkB,QAAQzsB,EAAM4H,EAAI67C,aAEtB7oD,EAAGkpB,YAAY9jB,EArQF,GAqQoBoZ,GAEjCpZ,EAAKpI,OAAO,QACPC,KAAKsqD,GACLrkD,KAAK,KATG4lD,IAUR5lD,KAAK,cAAe,UAEzBoM,EAAEnO,GAAGgI,UAAU,KAAKpO,MAAM,YAAa,SAAWiS,EAAI27C,cAAgB,KACtEr5C,EAAEnO,GAAGgI,UAAU,QAAQpO,MAAM,YAAa,SAAWiS,EAAI27C,cAAgB,KAG7E,SAASI,EAASz5C,GACd,IAAIlK,EAAOkK,EAAEnO,GACbiE,EAAK/K,OAAO,OACPU,MAAM,UAAW,IACjBwO,aACAC,SAAS,KACTzO,MAAM,UAAW,GAEtBqK,EAAK/K,OAAO,QACPU,MAAM,UAAW,IACjBwO,aACAC,SAAS,KACTzO,MAAM,UAAW,GAEtBqK,EAAK/K,OAAO,UACPU,MAAM,cAAe,QACrBA,MAAM,OAAQ,QACdA,MAAM,UAAW,IACjBwO,aACAC,SAAS,MACTtG,KAAK,IAAK,GAGnB,SAAS8lD,EAAW15C,GAChB,IAAIlK,EAAOkK,EAAEnO,GACbiE,EAAK/K,OAAO,OACPU,MAAM,UAAW,IACjBwO,aACAC,SAAS,KACTzO,MAAM,UAAW,GAEtBqK,EAAK+D,UAAU,QACVpO,MAAM,cAAe,QACrBA,MAAM,OAAQ,QACdA,MAAM,UAAW,IAK1B,SAASkuD,EAAa35C,GAElB,IAAIrV,EAAOG,GAAGC,OAAOsD,MACrB2R,EAAEnO,GAAKlH,EACPqV,EAAEnO,GAAGpG,MAAM,eAAgBiS,EAAIk8C,iBAAmB,MAClDl8C,EAAIm8C,mBAAmB75C,GACN,aAAbA,EAAEiB,QACF1C,EAAIgkB,QAAQ53B,EAAM+S,EAAI67C,aAI9B,IAAIO,EAAkB,QAEtB,SAASC,IAGLr8C,EAAIs8C,uBAEJt8C,EAAIu8C,YAAY9lD,KAAK,SAAU6L,GAC3B,IAAInO,EAAK/G,GAAGC,OAAOsD,MACfsQ,EAAO9M,EAAG9G,OAAO,QACV8G,EAAG9G,OAAO,QAChB4C,KAAKqS,EAAE+yB,OACZp0B,EAAK/K,KAAKsmD,EAAeroD,MAGlB6L,EAAIu8C,YAAYziD,QAAQ9J,OAAO,KACrC4E,QAAQ,aAAa,GACrBsB,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAEzL,KAE/BJ,KAAK,SAAU6L,GACpB,IACIrB,EACAhR,EAFAkE,EAAK/G,GAAGC,OAAOsD,MAII,aAAnB2R,EAAEm6C,MAAMl5C,SACRpP,EAAGS,QAAQ,iBAAiB,GAC5BiM,EAAIgkB,QAAQ1wB,EAAI6L,EAAI67C,cAIxB56C,GADAqB,EAAEnO,GAAKA,GACGnE,OAAO,QACjBC,EAAOkE,EAAGnE,OAAO,QAAQC,KAAKqS,EAAE+yB,OAChCp0B,EAAK/K,KAAKsmD,EAAeroD,IACzBlE,EAAKiG,KAAK,KAAMkmD,GAEhBjoD,EAAG+B,KAAK,YAAawmD,EAAep6C,EAAEm6C,MAAMroD,SAAUkO,EAAE1M,QAG5DoK,EAAIu8C,YAAYhiD,OAAOkC,SAG3B,SAAS+/C,EAAeroD,GACpB,IACI0H,EADO1H,EAAG9G,OAAO,QACN+K,OAAO0D,UAOtB,OALAD,EAAIjN,GAAKiN,EAAI5N,MAAQ,EACrB4N,EAAIE,GAAKF,EAAI7N,OAAS,EAEtB6N,EAAIjN,GAAK,EACTiN,EAAI5N,OAAS,EACN4N,EAuCX,IAnCQukB,EAmCJu8B,GAnCIv8B,EAAS,GAIN,SAAUw8B,EAAOC,EAAMC,GAC1B,IAAI1/C,GAAO,EA0BX,OAxBAgjB,EAAO/d,QAAQ,SAAU06C,EAAK3+C,GAC1B,IAAI4+C,EAAMC,EAAMC,EAAMC,EAElBJ,EAAIlmD,KAAO+lD,GAIfI,EAAOD,EAAInuD,EAbR,GAcHquD,EAAOF,EAAInuD,EAdR,GAeHsuD,EAAOH,EAAIhhD,EAdR,GAeHohD,EAAOJ,EAAIhhD,EAfR,GAiBQihD,EAAPH,GAAeA,EAAOI,GAAeC,EAAPJ,GAAeA,EAAOK,IACpDN,GAnBD,GAoBCC,GAnBD,KASC1/C,EAAMgB,KAcD,IAAThB,EACAgjB,EAAOrhB,KAAK,CAAElI,GAAI+lD,EAAOhuD,EAAGiuD,EAAM9gD,EAAG+gD,IAErC18B,EAAOhjB,GAAO,CAAEvG,GAAI+lD,EAAOhuD,EAAGiuD,EAAM9gD,EAAG+gD,GAGpC,CAAEluD,EAAGiuD,EAAM9gD,EAAG+gD,KAM7B,SAASJ,EAAe1kD,EAAGnB,GACvB,IAAIwY,EAAKrX,EAAE0L,GAAK1L,EAAEwL,GACdH,EAAKrL,EAAE2L,GAAK3L,EAAEyL,GACd25C,EAAO/tC,EAAG,EAAIrX,EAAEwL,GAChB65C,EAAOh6C,EAAG,EAAIrL,EAAEyL,GAEpB,GAAI5M,EAAI,CACJ,IAAIymD,EAAMX,EAAY9lD,EAAIumD,EAAMC,GAChC,OAAOx8C,EAAI+B,UAAU06C,EAAI1uD,EAAG0uD,EAAIvhD,GAGpC,OAAO8E,EAAI+B,UAAUw6C,EAAMC,GAG/B,SAASE,EAAgB5hD,EAAM6hD,GAC3B,IAAIC,EAAWD,EAAWrhD,UAAU,cAC/BR,KAAKA,GAAM7B,QAAQ9J,OAAO,KAC1B4E,QAAQ,aAAa,GACrBsB,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAEzL,KAEpC6mD,EAxaW,IAAA,GAwaiCv4B,EAAOhW,SAEvDsuC,EAAShnD,KAAK,SAAU6L,GACpB,IAAInO,EAAK/G,GAAGC,OAAOsD,MACfsQ,EAAO9M,EAAGnE,OAAO,QACjBC,EAAOkE,EAAGnE,OAAO,QAAQC,KAAKqS,EAAEgnB,KAEpCroB,EAAK/K,KAAKsmD,EAAeroD,IACpBpG,MAAM,YAAa,SAAW2vD,EAAa,KAChDztD,EAAKiG,KAAK,KAAMkmD,GACXruD,MAAM,YAAa,SAAW2vD,EAAa,KAEhDvpD,EAAG+B,KAAK,YAAa2K,EAAI+B,UAAUN,EAAE1T,EAAG0T,EAAEvG,MAIlD,SAAS4hD,EAAWC,GAOhB,MAAO,CACHhvD,EAPe,EAAI,GACdgvD,EAAQl6C,GAAKk6C,EAAQp6C,IAO1BzH,EARe,EAAI,GAEd6hD,EAAQj6C,GAAKi6C,EAAQn6C,KAUlC,SAASo6C,EAAaD,GAClB,IAAIE,EAAQH,EAAWC,GACvB,OAAO/8C,EAAI+B,UAAUg7C,EAAQp6C,GAAKs6C,EAAMlvD,EAAGgvD,EAAQn6C,GAAKq6C,EAAM/hD,GAGlE,SAASgiD,EAAUH,GACf,IAEIvuC,EAAKuuC,EAAQl6C,GAAKk6C,EAAQp6C,GAC1BH,EAAKu6C,EAAQj6C,GAAKi6C,EAAQn6C,GAC1B9M,EAAS4Y,KAAKyuC,KAAM3uC,EAAKA,EAAOhM,EAAKA,GACrC46C,EAAY5uC,EAAK1Y,EAJJunD,KAKbC,EAAY96C,EAAK1M,EALJunD,KAMbE,EAAMT,EAAWC,GACjBS,EAAQ9uC,KAAK+uC,KAAKj7C,EAAKgM,GAAM,GAEjC,MAAO,CACH7L,GAAI46C,EAAIxvD,EAAIqvD,EACZx6C,GAAI26C,EAAIriD,EAAIoiD,EACZz6C,GAAI06C,EAAIxvD,EAAIqvD,EACZt6C,GAAIy6C,EAAIriD,EAAIoiD,EACZ9/B,OAAQre,EAAIu+C,aAAathD,EAAGsB,SAASigD,UACrC77C,UAAW,UAAY07C,EAAQ,IAAMD,EAAIxvD,EAAI,IAAMwvD,EAAIriD,EAAI,KAInE,SAAS0iD,EAAab,GAClB,IAAIc,EAAQf,EAAWC,GAEvB,MAAO,CACHhvD,EAAG8vD,EAAM9vD,EAFF,GAGPmN,EAAG2iD,EAAM3iD,EAHF,IAOf,SAAS4iD,EAAmBhjD,EAAMijD,GAC9B,IAAIx+B,EAASw+B,EAAMziD,UAAU,kBACpBR,KAAKA,EAAM,SAAU2G,GAAK,MAAO,QAAUA,EAAEzL,KAGtDupB,EAAO3pB,KAAK,SAAU6L,GAClB,IAAInO,EAAK/G,GAAGC,OAAOsD,MAEnBwD,EAAG+B,KAAK,CACJyM,UAAW,SAAUL,GAAK,OAAOu7C,EAAav7C,EAAEu8C,eAEpD1qD,EAAG9G,OAAO,QACL6I,KAAK6nD,EAAUz7C,EAAEu8C,aACtB1qD,EAAG9G,OAAO,QACL6I,KAAKuoD,EAAan8C,EAAEu8C,aACpB5uD,KAAKqS,EAAEgnB,OAGLlJ,EACNtmB,QACA9J,OAAO,KACPkG,KAAK,CACFyM,UAAW,SAAUL,GAAK,OAAOu7C,EAAav7C,EAAEu8C,aAChDhoD,GAAI,SAAUyL,GAAK,MAAO,QAAUA,EAAEzL,MAEzCjC,QAAQ,gBAAgB,GAEpB6B,KAAK,SAAU6L,GACpB,IAAInO,EAAK/G,GAAGC,OAAOsD,MAEnBwD,EAAGnE,OAAO,QACL4E,QAAQ,eAAe,GACvBsB,KAAK6nD,EAAUz7C,EAAEu8C,aACtB1qD,EAAGnE,OAAO,QACL4E,QAAQ,eAAe,GACvBsB,KAAKuoD,EAAan8C,EAAEu8C,aACpB5uD,KAAKqS,EAAEgnB,OAGhBlJ,EAAO7lB,OAAOkC,SAGlB,SAASm7C,EAAc/oD,GACnB0gD,EAAW1gD,EAIfrC,QAAQC,OAAO,UACd+E,QAAQ,gBACL,CAAC,iBAAkB,cAAe,eAC9B,eAAgB,qBAEpB,SAAUqU,EAAO1O,EAAMwH,EAAM3H,EAAM+/C,GAc/B,OAbAl2C,EAAMgF,EACN7S,EAAKmE,EACL8F,EAAK0B,EACL7L,EAAKkE,EACL+3C,EAAOgI,EASA,CACH+H,OARJ,SAAgBC,EAAOC,GACnBh/C,EAAM++C,EACN55B,EAAS65B,GAOTC,UAJJ,aAMI7E,eAAgBA,EAChBzB,eAAgBA,EAChB2B,gBAAiBA,EACjBzB,gBAAiBA,EACjB0B,UAAWA,EACXC,YAAaA,EACbC,UAAWA,EAEXyE,kBAAmBrE,EACnBQ,gBAAiBA,EACjB5I,mBAAoBA,EAEpB6I,eAAgBA,EAChBE,aAAcA,EACdC,YAAaA,EACbG,UAAWA,EACXG,SAAUA,EACVC,WAAYA,EAEZC,aAAcA,EACdI,gBAAiBA,EACjBK,eAAgBA,EAChBa,gBAAiBA,EACjBoB,mBAAoBA,EAEpB/G,cAAeA,MA9lB/B;CCAC,WACG,aAEA,IACIjgD,EAAO,CACHM,OAAQ,UAIhBzL,QAAQC,OAAO,UACd+E,QAAQ,oBACL,CAAC,gBAED,SAAUnC,GACN,MAAO,CACHO,WAAY,WAAc,OAAOP,EAAGO,WAZjC,gBAYsD+H,IACzD0B,YAAahK,EAAGgK,YAChBtJ,UAAWV,EAAGU,cAjB9B;CCAC,WACG,aAEA,IAAIf,EAAMG,EAAUs/C,EAAKF,EAAeS,EAEpC5iC,EACA+yC,EAiCJ,SAASC,EAAO12C,EAAMvW,GAClBnD,EAAKmB,MAAM,wCAAyCuY,EAAM,OAAQvW,GAClEhD,EAAI4L,UAAU,aAIlBvO,QAAQC,OAAO,UACd+E,QAAQ,mBACL,CAAC,OAAQ,mBACL,mBAAoB,kBAAmB,mBACvC,oBAAqB,qBAAsB,oBAE/C,SAAUkB,EAAQwE,EACRu/C,EAAOC,EAAOF,EAAOG,EAAO3P,EAAOiQ,GA+BzC,OA9BAjoD,EAAO0D,EACPvD,EAAM+H,EA5CVkV,EAAa,CACTizC,YA4CM5I,EA1CN6I,YA6CM3I,EA3CN4I,eA4CMvY,EA1CNwY,YAuCA/Q,EAAMiI,EAtCN+I,eAAgBhR,EAChBiR,eAAgBjR,EAEhBkR,UAoCApR,EAAMiI,EAnCNoJ,aAAcrR,EACdsR,aAActR,EACduR,QAASvR,EACTwR,WAAYxR,EACZyR,SAAUzR,EACV0R,WAAY1R,EACZ2R,QAAS3R,EACT4R,WAAY5R,EACZ6R,WAAY7R,EAEZwH,cAAexH,EAEf8R,mBA0BArR,EAAOiI,EAzBPqJ,mBAAoBtR,GAgDb,CACHx+C,aApBJ,WACIrB,EAAIqB,aAAa4b,GACjBpd,EAAKmB,MAAM,8BAmBXqO,MAhBJ,WACI2gD,EAAehwD,EAAIqd,gBAAgB4yC,GACnCjwD,EAAI4L,UAAU,aACd/L,EAAKmB,MAAM,uBAcXsO,KAXJ,WACItP,EAAI4L,UAAU,YACd5L,EAAI4H,eAAeqV,GACnBjd,EAAIsd,mBAAmB0yC,GACvBA,EAAe,KACfnwD,EAAKmB,MAAM,2BAhF3B;CCAC,WACG,aAEA,IAAIwM,EAEAqD,EA2CAugD,EACAC,EA1CAjR,EAAW,SAAU3gD,GACrB,MAAO,UAAYA,EAAI,KAGvB6xD,EAAO,gBAEPC,EAAc,CACVh4C,KAAM,CACF4K,WAAY,MACZP,OAAQ,MACRQ,WAAY,OAEhBouB,OAAQ,CACJ7uB,OAAQ,MACRC,OAAQ,MACRE,MAAO,MACPC,IAAK,OAETjmB,KAAM,CACF0zD,SAAU,MACVC,OAAQ,MACRC,SAAU,GACVC,OAAQ,GACRC,QAAS,QAGjBC,EAAW,CACP,CACIz9C,KAAM,MACN/T,OAAQ,WAAcyxD,GAAe,KAEzC,CACI19C,KAAM,MACN/T,OAAQ,WAAc0xD,EAAU,SAEpC,CACI39C,KAAM,MACN/T,OAAQ,WAAc0xD,EAAU,UAGxCC,EAAQ,EAIZ,SAAS9P,IACL8P,GAASA,EAAQ,GAAKH,EAASrqD,OAC/BqqD,EAASG,GAAO3xD,SAChB+wD,EAAYS,EAASG,GAAO59C,KAC5Bi9C,EAAU,YAAcD,EACxB5jD,EAAMA,MAAM4yC,EAASiR,IAGzB,SAASjuB,IACL,OAAOyuB,EAASG,GAAO59C,KAG3B,SAAS69C,EAAQ9+C,EAAG6+C,GAChB,IAAI59C,EAAmB,SAAZjB,EAAEjG,MAAmBiG,EAAEiB,OAASjB,EAAEiB,KACzC89C,EAAOX,EAAYp+C,EAAEjG,OAEzB,OADUglD,GAAQA,EAAK99C,MACR49C,EAmBnB,SAASF,EAAexmD,GACpBuF,EAAI5H,OAAOxD,QAAQ6rD,EAAMhmD,GACzBuF,EAAI/S,OAAO2H,QAAQ6rD,EAAMhmD,GAG7B,SAASymD,EAAU/wC,GArBnB,IAAyBA,EAsBrB8wC,GAAe,GAtBM9wC,EAuBLA,EAtBhBnQ,EAAI5H,OAAO3B,KAAK,SAAU6L,GACtB,IAAIlK,EAAOkK,EAAEnO,GACTitD,EAAQ9+C,EAAG6N,IACX/X,EAAKxD,QAAQ6rD,GAAM,KAI3BzgD,EAAI/S,OAAOwJ,KAAK,SAAU6L,GACtB,IAAIrV,EAAOqV,EAAEnO,GACTitD,EAAQ9+C,EAAG6N,IACXljB,EAAK2H,QAAQ6rD,GAAM,KAe/B,SAAS7I,EAAc/oD,GACnB0gD,EAAW1gD,EAIfrC,QAAQC,OAAO,UACV+E,QAAQ,oBAAqB,CAAC,eAC3B,SAAUi1B,GAON,OANA9pB,EAAQ8pB,EAMD,CACH66B,WALJ,SAAoBvC,GAChB/+C,EAAM++C,GAMN1N,YAAaA,EACb9e,SAAUA,EACV6uB,QAASA,EACTxJ,cAAeA,MApHnC;CCAC,WACG,aAEA,IAAI5oD,EAAMgM,EAAUpO,EAAIiU,EAAK5D,EAAIN,EAAOxN,EAAK+2C,EACzCuI,EAAKC,EAAK6S,EAAK5S,EAAKnd,EAAKqd,EAAKC,EAAMF,EAAKyI,EAAQl8C,EAAKqmD,EAqBtDzpD,EACAkpB,EACA0B,EAQA8+B,EACAC,EAIAC,EACAC,EACAC,EACAjzC,EAOAkzC,EAAOC,EAAYC,EAAcxE,EAAYyE,EAE7Ch1D,EAAMsvD,EAAWnkD,EA9CjBm3C,EAAW,SAAU3gD,GACrB,MAAO,QAAUA,EAAI,KAGrB2vD,GAAa,CACbj7B,MAAO,CACHk7B,UAAW,UACX0D,QAAS,OACTC,SAAU,QAEdz+B,KAAM,CACF86B,UAAW,UACX0D,QAAS,OACTC,SAAU,QAEdC,QAAS,GACTC,SAAU,IAMVC,GAAU,CACNC,MAAO,GACPC,MAAO,GACPC,cAAe,GACf52B,OAAQ,GACR62B,aAAc,IAIlB7G,IAAY,EACZ8G,GAAc,EACdC,IAAW,EAKXC,GAAW,GACX5J,EAAa,GACb6J,EAAgB,GAChBC,EAAgB,GAChBC,EAAe,GAMfvrD,GAAkB,CAClBwrD,QAAS,GACTC,SAAU,GACVC,OAAQ,CACJxhB,QAAS,IACTj5B,MAAO,IACP06C,OAAQ,MAEZC,aAAc,CACVzC,OAAQ,IACRG,QAAS,IACTJ,SAAU,EACVyC,MAAO,IAEXE,aAAc,CACVF,MAAO,IAMf,SAASG,EAAc39C,EAAGd,GACtBtY,QAAQkI,OAAOkR,EAAGd,GACbA,EAAE1U,iBACIwV,EAAExV,SAIjB,SAASuvD,GAAUhkD,GACf,IACI2G,EADAzL,EAAK8E,EAAK9E,GAGdwgD,EAAOzD,YAAW,GAEd6N,EAAG5qD,GACH+oD,GAAajkD,IAIjB2G,EAAIosC,EAAI8U,iBAAiB7nD,GACzB2mD,GAAQC,MAAMxjD,KAAKuD,GACnBm/C,EAAG5qD,GAAMyL,EACTmhD,KACAC,MAGJ,SAAS9D,GAAajkD,GAClB,IAEIgoD,EAFA9sD,EAAK8E,EAAK9E,GACVyL,EAAIm/C,EAAG5qD,GAGPyL,IACAqhD,EAAYrhD,EAAEy3C,OACdwJ,EAAcjhD,EAAG3G,GACb+yC,EAAIkV,aAAathD,GAAG,IACpBuhD,GAAevhD,GAEnBmhD,KACAK,KACIH,IAAcrhD,EAAEy3C,SAChBrL,EAAIqV,kBAAkBzhD,EAAEzL,IAAIwL,QAAQ85C,IACpC6H,EAAwB1hD,IAE5BohD,MAIR,SAAS7D,GAAalkD,GAClB,IAAI9E,EAAK8E,EAAK9E,GACVyL,EAAIm/C,EAAG5qD,GACPyL,GA4OR,SAA6BA,GACzB,IACIlF,EADAvG,EAAKyL,EAAEzL,GAEX63C,EAAIuV,kBAAkBptD,GAAIwL,QAAQ6hD,GAClCxV,EAAIqV,kBAAkBltD,GAAIwL,QAAQ8hD,WAE3B1C,EAAG5qD,IAEC,GADXuG,EAAMxQ,EAAGy7B,KAAKxxB,EAAIyrD,GAAQC,SAEtBD,GAAQC,MAAM15B,OAAOzrB,EAAK,GAGzBklD,GAAQC,MAAM5rD,QACf0gD,EAAOzD,YAAW,GAGtB6P,KACAW,KA5PIC,CAAoB/hD,GAI5B,SAASw9C,GAAQnkD,GACb,IACI2G,EADAzL,EAAK8E,EAAK9E,GAGV4qD,EAAG5qD,GACHkpD,GAAWpkD,IAIf2G,EAAIosC,EAAI4V,eAAe3oD,GACvB2mD,GAAQC,MAAMxjD,KAAKuD,GACnBm/C,EAAG5qD,GAAMyL,EACTmhD,KAEAc,EAAgB5oD,EAAK6oD,OAAQliD,GAEzBA,EAAEkgD,MAAM7rD,QACR8tD,KAEJf,MAGJ,SAAS3D,GAAWpkD,GAChB,IAAI9E,EAAK8E,EAAK9E,GACVyL,EAAIm/C,EAAG5qD,GACPyL,IACAihD,EAAcjhD,EAAG3G,GACb+yC,EAAIkV,aAAathD,GAAG,IACpBuhD,GAAevhD,GAEnBmhD,KACAK,KACAJ,MAIR,SAASa,EAAgBG,EAAKC,GAC1BA,EAAMnC,MAAQ,GACdkC,EAAIriD,QAAQ,SAAUuiD,GAClB,IAAIC,EAAW,CACXjvD,IAAK+uD,EAAM9tD,GAAK,MAAQ+tD,EAAGjjB,OAAS,IAAMijB,EAAGn8C,KAC7Cq8C,IAAKF,EAAGjjB,OACRojB,QAASH,EAAGn8C,MAEhBk8C,EAAMnC,MAAMzjD,KAAK8lD,GAEjB,IAAIG,EAAMtW,EAAIuW,eAAeN,EAAM9tD,GAAI+tD,EAAGjjB,OAAQijB,EAAGn8C,MACjDu8C,IACA1C,GAAQE,MAAMzjD,KAAKimD,GACnBvD,EAAGoD,EAASjvD,KAAOovD,KAK/B,SAAShF,GAASrkD,GACd,IAAI9E,EAAK8E,EAAK9E,GACVyL,EAAIm/C,EAAG5qD,GAEPyL,IACA4iD,EAAsB5iD,EAAEkgD,OAExBh2D,QAAQkI,OAAO4N,EAAG3G,GACd+yC,EAAIkV,aAAathD,GAAG,IACpBuhD,GAAevhD,GAGnBiiD,EAAgB5oD,EAAK6oD,OAAQliD,GAE7BmhD,KACAgB,KACAL,MAIR,SAASnE,GAAWtkD,GAChB,IAAI9E,EAAK8E,EAAK9E,GACVyL,EAAIm/C,EAAG5qD,GACPyL,GACA4hD,EAAkB5hD,GAAG,GAI7B,SAAS49C,GAAQvkD,GACb,IAAIwpD,EAASzW,EAAI0W,SAASzpD,EAAM,OAC5BqmB,EAAMmjC,EAAOE,SACb/iD,EAAI6iD,EAAO1I,MAEf,GAAIz6B,EACAhzB,EAAKmB,MAAM6xB,EAAM,KAAO/0B,EAAK4J,QADjC,CAKA,GAAIyL,EAEA,OAoEsBrV,EArEL0O,GAqEF8gD,EArEDn6C,GAsEZgjD,WAAar4D,EACnBy0D,EAAIz0D,EAAK4J,IAAM4lD,EAAM7mD,SACrBumD,GAAmBM,GAHvB,IAAuBA,EAAOxvD,EAdPwvD,EAAOxvD,EACtB2I,EACA2vD,EACA38B,GAtDJtmB,EAAIosC,EAAI8W,WAAW7pD,MAEf2mD,GAAQE,MAAMzjD,KAAKuD,GAiDJm6C,EAhDDn6C,EAiDd1M,EAAM6vD,GADgBx4D,EAhDL0O,GAiDMmD,IAAK7R,EAAK63D,KACjCS,EAASE,EAAYx4D,EAAK63D,IAAK73D,EAAK6R,MACpC8pB,EAbR,SAAsBhzB,EAAK2vD,GACvB,OAAIjD,GAAQG,cAAc7sD,GACfA,IACA0sD,GAAQG,cAAc8C,IACtBA,EASCG,CAAa9vD,EAAK2vD,KAG1BjD,GAAQG,cAAc75B,GAAO7pB,KAAK09C,GAClCA,EAAMkJ,WAAa/8B,IAEnB05B,GAAQG,cAAc7sD,GAAO,CAAC6mD,GAC9BA,EAAMkJ,WAAa/vD,GAzDnB6rD,EAAGn/C,EAAE1M,KAAO0M,EACZmiD,KACAf,OAIR,SAASvD,GAAWxkD,GAChB,IAAIwpD,EAASzW,EAAI0W,SAASzpD,EAAM,UAC5BqmB,EAAMmjC,EAAOE,SACbrjC,EACAhzB,EAAKmB,MAAM6xB,EAAM,KAAO/0B,EAAK4J,IAGjCsuD,EAAOS,WAAWjqD,GAGtB,SAASykD,GAAWzkD,GAChB,IAAIwpD,EAASzW,EAAI0W,SAASzpD,EAAM,UAE3BwpD,EAAOE,UACRF,EAAOU,gBAIf,SAAS9P,GAAcp6C,GACnB07C,EAAOtB,gBAIX,SAAS+P,GAASjvD,GACd,OAAO4qD,EAAG5qD,GAGd,SAAS4uD,EAAYM,EAAOC,GACxB,OAAOD,EAAQ,IAAMC,EAkCzB,IAAIC,EAAa,IACbC,EAAY94D,GAAG+hB,MAAMqS,SAChBC,OAAO,CAAC,EAAG,KACXC,MAAM,CAACukC,EAAY,GAAKA,IACxBtkC,OAAM,GACXwkC,EAAe,iCACfC,EAAkB,yBAEtB,SAASjK,GAAmBM,EAAO4J,GAC/B,IAAIlpD,EAAKF,EAAGsB,QACRpK,EAAKsoD,EAAMtoD,GACXoP,EAAOk5C,EAAMl5C,OACb+iD,EAAK7J,EAAM8J,YACXxM,EAAS0C,EAAM1C,SACfyM,EAAU/J,EAAMgK,WAAa,WAAa,gBAC1C/pD,EAAQ2pD,EAAY,EAAI,IAExBlyD,IAAOA,EAAGyC,UACVzC,EAAGS,QAAQ,QAAQ,GACnBT,EAAGS,QAAQwxD,GAAiB,GAC5BjyD,EAAGS,QAAQ4xD,GAAUzM,GACrB5lD,EAAGS,QAAQuxD,GAAc,GACrB5iD,GACApP,EAAGS,QAAQ2O,GAAM,GAErBpP,EAAGoI,aACEC,SAASE,GACTxG,KAAK,eAAgBgwD,EAAUI,IAC/BpwD,KAAK,SAAUqoD,GAAWphD,GAAIqhD,YAI3C,SAAS0G,EAAsB1C,GAC3BA,EAAMngD,QAAQ,SAAU2iD,GACpBb,GAAkBa,KAI1B,SAASb,GAAkB7hD,GACvB,IACIokD,EADAtpD,EAAMxQ,EAAGy7B,KAAK/lB,EAAE1M,IAAK0sD,GAAQE,MAAO,OAE9B,GAANplD,IACAspD,EAAUpE,GAAQE,MAAM35B,OAAOzrB,EAAK,UAC7BqkD,EAAGiF,EAAQ,GAAG9wD,KACrB6uD,KACAL,MAIR,SAASF,EAAkB5hD,EAAGqkD,GAC1BzB,EAAsB5iD,EAAEkgD,cAEjBf,EAAGn/C,EAAEzL,IACZ,IAAIuG,EAAMxQ,EAAGy7B,KAAK/lB,EAAEzL,GAAIyrD,GAAQC,OAChCD,GAAQC,MAAM15B,OAAOzrB,EAAK,GAEtBupD,IACAlD,KACAW,MA8BR,SAASJ,EAAwB4C,GAC7B,SAASC,EAAOvkD,EAAGlJ,GACf,IAAIqB,EACJoG,EAAIgkB,QAAQviB,EAAEnO,GAAIiF,GAElBs1C,EAAIqV,kBAAkBzhD,EAAEzL,IAAIwL,QAAQ,SAAUpV,GAC1CwN,EAAIrB,IAA0B,aAAhBnM,EAAKsW,QAA0Bs4C,IAC7Ch7C,EAAIgkB,QAAQ53B,EAAKkH,GAAIsG,KAEzBi0C,EAAIuV,kBAAkB3hD,EAAEzL,IAAIwL,QAAQ,SAAUqG,GAC1CjO,EAAIrB,GAAQyiD,GACZh7C,EAAIgkB,QAAQnc,EAAKvU,GAAIsG,KAIzBmsD,EACAC,EAAOD,EAAKA,EAAI7M,QAAU4I,GAE1BjU,EAAIoY,aAAY,GAAMzkD,QAAQ,SAAUC,GACpCukD,EAAOvkD,EAAGqgD,KAMtB,SAASkB,GAAevhD,EAAGykD,GACvB,IACIC,EADAC,EAAS,GAGRF,IACDC,EAAKtY,EAAIwY,gBAAgB,CAAC5kD,EAAE1T,EAAG0T,EAAEvG,IACjCkrD,EAAS,CACLr4D,EAAG0T,EAAE1T,EACLmN,EAAGuG,EAAEvG,EACLorD,SAAU,CACNC,IAAKJ,EAAG,GACRK,IAAKL,EAAG,MAIpB1kD,EAAE2kD,OAASA,EACX93D,EAAI4L,UAAU,aAAc,CACxBlE,GAAIyL,EAAEzL,GACNwF,MAAOiG,EAAEjG,MACTirD,QAASL,IAKjB,SAASM,GAAWjlD,GAChB,OAAOA,EAAEugB,MAAQvgB,EAAEqZ,SAAW,SAAWrZ,EAAEqZ,SAG/C,SAAS9pB,GAAI4I,GACT,OAAO80C,EAAS90C,EAAI,UAAY,UAGpC,SAAS01C,GAAYvhD,GACjB,IACIqG,EADa,UAANrG,GACKitD,KAAcjtD,EAK9B,OAHAitD,GAAY5mD,EAlEZ4L,EAAIgkB,QAAQo9B,EAAM9lD,UAAU,SAAU0/C,IACtCh7C,EAAIgkB,QAAQi9B,EAAM3lD,UAAU,aAAc0/C,IAC1Ch7C,EAAIgkB,QAAQk9B,EAAW5lD,UAAU,kBAAmB0/C,IAkEpDl/C,EAAMA,MAAM4yC,EAAS,SAAW,IAAM19C,GAAIoD,IACnCA,EAGX,SAASo7C,GAAczhD,GACnB,IACIqG,EADa,UAANrG,GACK+zD,IAAgB/zD,EAKhC,OAHA+zD,EAAc1tD,EACd+uD,IACArnD,EAAMA,MAAM4yC,EAAS,sBAAwB,IAAM19C,GAAIoD,IAChDA,EAGX,SAASs8C,KACL50C,EAAMA,MAAM4kD,EAAInH,kBAChB1L,EAAIoY,cAAczkD,QAAQ,SAAUC,GAChCi/C,EAAIrC,kBAAkB58C,KAI9B,SAASmvC,KACL90C,EAAMA,MAAM4kD,EAAIjH,mBAChB5L,EAAI8Y,YAAYnlD,QAAQ,SAAUC,GAC9Bi/C,EAAIlG,gBAAgB/4C,KAI5B,SAASqvC,KACL,IAAI8V,EAAM9Y,EAAI+Y,UACVD,IACA5D,GAAe4D,GAAK,GACpBA,EAAI5kC,OAAQ,EACZ4kC,EAAItzD,GAAGS,QAAQ,SAAS,GACxBwvD,MAIR,SAASnM,GAAe0P,GAYxB,IAA2B9wD,EAXlB8wD,GAWkB9wD,EARD8wD,EAStB1G,IAAe,GACf7oD,EAAK3B,KAAK,SAAUqO,GACZA,EAAEq1C,SAAWtjD,GACbiO,EAAE3Q,GAAGS,QAAQ,iBAAiB,MAPtCqsD,IAAe,GAYnB,SAAS2G,GAAOC,GACZ,OAAOA,EAAO,aAAe,gBAGjC,SAAS5G,GAAexmD,EAAGotD,GACvB,IAAI7xD,EAAM4xD,GAAOC,GACjBzvD,EAAKxD,QAAQoB,EAAKyE,GAClBxN,EAAK2H,QAAQoB,EAAKyE,GAGtB,SAASqtD,GAAejxD,EAAIgxD,GACxB,IAAI7xD,EAAM4xD,GAAOC,GACjBzvD,EAAK3B,KAAK,SAAUqO,GACZA,EAAEjO,KAAOA,GACTiO,EAAE3Q,GAAGS,QAAQoB,GAAK,KAK9B,SAAS+xD,GAAenyD,EAAKiyD,GACzB,IAAI7xD,EAAM4xD,GAAOC,GACjB56D,EAAKwJ,KAAK,SAAUqO,GACZA,EAAElP,MAAQA,GACVkP,EAAE3Q,GAAGS,QAAQoB,GAAK,KAK9B,SAASy6C,KACL,IAAIuX,EAAWtZ,EAAIuZ,eACnBtrD,EAAMA,MAAM4yC,EAAS,gBAAkB,KAAOyY,EAASrxD,QACvD3H,EAAKmB,MAAM,kBAAoB63D,EAASrxD,OAAS,MACjDqxD,EAAS3lD,QAAQ,SAAUC,GACvBtT,EAAKmB,MAAM,cAAgBmS,EAAE0f,IAAM,KAAO1f,EAAE1M,IAAK0M,GAC7CA,EAAEnO,IACFmO,EAAEnO,GAAG+B,KAAK,eAAgBgwD,EAAU,MAC/BhwD,KAAK,SAAU,SAG5B8E,EAASypD,GAAa,KAG1B,SAAS9I,KACL,IAAIxsC,EAAQkoC,EAAOlyB,SAAShW,QAExB+4C,EAAa,EAQjB,OATUjP,EAGA9pC,EAAQ2zC,EACdoF,EAAapF,GAJP7J,EAI8B9pC,GACf4zC,EALf9J,EAKO9pC,IACb+4C,EAAanF,GANP9J,EAM8B9pC,IAGjC+4C,EAGX,SAAShM,GAAe/sC,GAChBA,EAAQkoC,EAAOlyB,SAAShW,QAC5B,OAAO+2C,EAAUD,GAAc92C,EAQnC,SAASukC,GAAavkC,GALtB,IAAwBA,EAMpB1a,EAAEgC,KAAK6rD,GAAQC,MAAO,SAAUnqD,GAC5B,GAAmB,SAAfA,EAAKiE,MAGL,OAFAjE,EAAKjE,GAAGgI,UAAU,KAAKpO,MAAM,YAAa,SAAW4tD,KAAqB,UAC1EvjD,EAAKjE,GAAGgI,UAAU,QAAQpO,MAAM,YAAa,SAAW4tD,KAAqB,KAGjFvjD,EAAKjE,GAAGgI,UAAU,KACbpO,MAAM,YAAa,SAAW4tD,KAAqB,OAG5DlnD,EAAEgC,KAAK6rD,GAAQE,MAAO,SAAUv1D,GAC5BA,EAAKkH,GAAGpG,MAAM,eAAgBmuD,GAAe/sC,GAAS,QAG1D/hB,GAAGC,OAAO,oBACL8O,UAAU,cACVA,UAAU,KACVpO,MAAM,YAAa,UAvBJohB,EAuB8BA,EAtB9CA,EAAQkoC,EAAOlyB,SAAShW,QACrB6zC,GAAgBA,EAAe7zC,IAqBqB,KAG/D,SAAS8hC,KACLvC,EAAIuC,oBACJwS,KACAK,KACAnnD,EAAMA,MAAM4yC,EAAS,4BAIzB,SAASkU,KACD7B,GACA5mD,EAASf,OAAO2nD,GAEpBA,EAAc5mD,EAASmtD,EAAc,KAGzC,SAASA,KACL/vD,EAAO6pD,EAAM9lD,UAAU,SAClBR,KAAK2mD,GAAQC,MAAO,SAAUjgD,GAAK,OAAOA,EAAEzL,MAE5ConB,OAAO,WAAWxnB,KAAK8qD,EAAIjG,gBAChCljD,EAAK6lB,OAAO,SAASxnB,KAAK8qD,EAAI/F,cAE9B,IAAIiC,EAAWrlD,EAAK0B,QACf9J,OAAO,KACPkG,KAAK,CACFW,GAAI,SAAUyL,GAAK,OAAOzB,EAAI+jB,OAAOtiB,EAAEzL,KACvCwF,MAAOkrD,GACP5kD,UAAW,SAAUL,GACjB,OAAOzB,EAAI+B,UAAUN,EAAE1T,EAAG0T,EAAEvG,IAEhCO,QAAS,IAEZyB,KAAK4kB,GACL1tB,GAAG,YAAa05C,EAAIyZ,eACpBnzD,GAAG,WAAY05C,EAAI0Z,cACnB9rD,aACArG,KAAK,UAAW,GAErBunD,EAASx/B,OAAO,WAAWxnB,KAAK8qD,EAAI9F,aACpCgC,EAASx/B,OAAO,SAASxnB,KAAK8qD,EAAI3F,WAElC2F,EAAI9O,qBAEJ,IAAI6V,EAAUlwD,EAAKmC,OACdgC,aACAC,SAAS,KACTzO,MAAM,UAAW,GACjB0O,SAEL6rD,EAAQrqC,OAAO,SAASxnB,KAAK8qD,EAAIxF,UACjCuM,EAAQrqC,OAAO,WAAWxnB,KAAK8qD,EAAIvF,YACnC8H,KAIJ,SAASyE,GAAct7D,GACnB,MAAO,CACHuW,GAAIvW,EAAKu7D,OAAO55D,EAChB6U,GAAIxW,EAAKu7D,OAAOzsD,EAChB2H,GAAIzW,EAAK8/B,OAAOn+B,EAChB+U,GAAI1W,EAAK8/B,OAAOhxB,GAwBxB,SAAS0sD,KACL,IACIC,EACJ7F,GAAW,GAFClyD,KAGN8F,KAAK,SAAU6L,GACA,aAAbA,EAAEiB,SACFjB,EAAElO,SAAWm0D,GAAcjmD,MAanC9V,QAAQ6V,QAAQigD,GAAQG,cAAe,SAAUkG,EAAS/yD,GACtD,IACI3I,EADA27D,EAAWD,EAAQhyD,OAGN,IAAbiyD,IACA37D,EAAO07D,EAAQ,IACVv0D,SAAWm0D,GAAct7D,GAC9BA,EAAKmH,SAASy0D,WAAY,GACP,GAAZD,GACPp8D,QAAQ6V,QAAQsmD,EAAS,SAAU17D,GAC/BA,EAAKmH,SAAWm0D,GAAct7D,GAC9BA,EAAKmH,SAASy0D,WAAY,IAE9BhG,GAAS9jD,KAAK,CACVlI,GAAIjB,EACJ0zB,IAAKs/B,EACL/J,WAAY8J,EAAQ,GAAGv0D,aAG3Bs0D,EAAY,KACZl8D,QAAQ6V,QAAQsmD,EAAS,SAAU17D,EAAMimC,GACrC,IA9BcjmC,EAzBL67D,EAAKC,EACtBzL,EACA0L,EACA35C,EACAhM,EACA1M,EAkDYsyD,EA3DN,GA2DgC/1B,GAAV01B,EA1DD,GAAK,GA2DpBM,GA/BUj8D,EA+BoBA,EA9BrCy7D,EAKEz7D,EAAKu7D,OAAO3xD,KAAO6xD,GAJtBA,EAAYz7D,EAAKu7D,OAAO3xD,IACjB,IA6BH5J,EAAKmH,UAzDI00D,EAyD0BG,EAzDrBF,EAyDgCG,EAxDtD5L,EAAMiL,GAwD+Bt7D,GAvDrC+7D,EAAOD,GAAWD,EAAMA,EACxBz5C,EAAKiuC,EAAI55C,GAAK45C,EAAI95C,GAClBH,EAAKi6C,EAAI35C,GAAK25C,EAAI75C,GAClB9M,EAAS4Y,KAAKyuC,KAAM3uC,EAAKA,EAAOhM,EAAKA,GAElC,CACHG,GAAI85C,EAAI95C,GAAMwlD,EAAO3lD,EAAK1M,EAC1B8M,GAAI65C,EAAI75C,GAAMulD,GAAQ35C,EAAK1Y,EAC3B+M,GAAI45C,EAAI55C,GAAMslD,EAAO3lD,EAAK1M,EAC1BgN,GAAI25C,EAAI35C,GAAMqlD,GAAQ35C,EAAK1Y,IA+CnB1J,EAAKmH,SAASy0D,WAAY,OAM1C,SAASpE,KACD5C,GACA7mD,EAASf,OAAO4nD,GAEpBA,EAAc7mD,EAASmuD,GAAc,KAGzC,SAASA,KACL,IAAIhsD,EAAKF,EAAGsB,SAEZtR,EAAO60D,EAAM3lD,UAAU,SAClBR,KAAK2mD,GAAQE,MAAO,SAAUlgD,GAAK,OAAOA,EAAE1M,OAE5Ca,KAAK,SAAU6L,GACZA,EAAEnO,IACFgoD,GAAmB75C,GAAG,KAIfrV,EAAK6M,QACf9J,OAAO,QACP+N,KAAK0qD,IACLvyD,KAAK,CACFsN,GAAI,SAAUlB,GAAK,OAAOA,EAAElO,SAASoP,IACrCC,GAAI,SAAUnB,GAAK,OAAOA,EAAElO,SAASqP,IACrCC,GAAI,SAAUpB,GAAK,OAAOA,EAAElO,SAASsP,IACrCC,GAAI,SAAUrB,GAAK,OAAOA,EAAElO,SAASuP,IACrC0a,OAAQkgC,GAAWphD,GAAI+kD,QACvBkH,eAAgB7K,GAAW6D,UAG1B3rD,KAAK8qD,EAAItF,cAGlBsF,EAAI5C,mBAAmBkE,GAAUb,GAEjCT,EAAIlF,kBAEJpvD,EAAKsN,OACArE,KAAK,mBAAoB,OACzBA,KAAK,SAAUqoD,GAAWphD,GAAIglD,UAC9Bp0D,MAAM,UAAW,IACjBwO,aACAC,SAAS,MACTtG,KAAK,CACFmzD,mBAAoB,OACpBD,eAAgB7K,GAAW8D,WAE9Bt0D,MAAM,UAAW,GACjB0O,SAKT,SAAS2nD,KACAvV,EAAIya,aACLroC,EAAMsoC,SAId,SAAS7F,KACA7U,EAAIya,cACD3H,GACA3mD,EAASf,OAAO0nD,GAEpBA,EAAS3mD,EAAS,WACdhM,EAAKmB,MAAM,yBACX8wB,EAAMziB,SACP,MAIX,IAAIgrD,GAAY,CACZC,SAAU,CACN9mD,UAAW,SAAUL,GACjB,IAAI+M,EAAKq6C,MAAMpnD,EAAE1T,GAAK,EAAI0T,EAAE1T,EACxByU,EAAKqmD,MAAMpnD,EAAEvG,GAAK,EAAIuG,EAAEvG,EAC5B,OAAO8E,EAAI+B,UAAUyM,EAAIhM,KAGjCsmD,SAAU,CACNnmD,GAAI,SAAUlB,GAAK,OAAOA,EAAElO,SAASoP,IACrCC,GAAI,SAAUnB,GAAK,OAAOA,EAAElO,SAASqP,IACrCC,GAAI,SAAUpB,GAAK,OAAOA,EAAElO,SAASsP,IACrCC,GAAI,SAAUrB,GAAK,OAAOA,EAAElO,SAASuP,KAEzCimD,cAAe,CACXjnD,UAAW,SAAUL,GACjB,IAAI0iD,EAAMtW,EAAImb,aAAavnD,EAAE1M,KAC7B,GAAIovD,EACA,OAAOzD,EAAI7E,eAAesI,EAAI5wD,SAAUkO,EAAE1M,QAM1D,SAASkuD,KACD1rD,GAAQA,EAAKmZ,QACbnZ,EAAKlC,KAAKszD,GAAUC,UAEpBx8D,GAAQA,EAAKskB,SACbtkB,EAAK8Q,KAAK0qD,IACLvyD,KAAKszD,GAAUG,UACpBpI,EAAI5C,mBAAmBkE,GAAUb,IAEjCzF,GAAaA,EAAUhrC,QACvBgrC,EAAUrmD,KAAKszD,GAAUI,eAMjC,SAASE,GAAiBpvD,GACtB,OAAOA,EAAGkyB,SAAWlyB,EAAGmyB,OAG5B,SAAS1L,GAAU7e,GACfA,EAAEugB,OAAQ,EACVz1B,GAAGC,OAAOsD,MAAMiE,QAAQ,SAAS,GACjCivD,GAAevhD,GACfqsC,EAAIob,eAAc,GAGtB,SAAS3oC,KACL,IAAI1mB,EAAKtN,GAAG6d,MAAM8X,YAClB,OAAQ6/B,KAAakH,GAAiBpvD,GAG1C,SAAS2mB,KACL,OAAO,EAIX,IAAI2oC,GAAoB,iHAIxB,SAASC,KACLh9D,EAAKc,MAAM,eAAgB,MACtB6G,QAAQo1D,IAAmB,GAGpC,SAASE,KACL5H,GAAQE,MAAMngD,QAAQ,SAAUC,GAC5BA,EAAE+yB,MAAQ,KAIlB,SAAS80B,KACL/xD,EAAK+D,UAAU,WAAWM,SAG9B,SAAS2tD,KACL9H,GAAQC,MAAMlgD,QAAQ,SAAUC,GAC5BA,EAAEy4C,MAAQ,OAIlB,SAASuB,KACL,IAAI3gD,EAAO,GACX1O,EAAKwJ,KAAK,SAAU6L,GACZA,EAAE+yB,OACF15B,EAAKoD,KAAK,CACNlI,GAAI,OAASyL,EAAE1M,IACfA,IAAK0M,EAAE1M,IACPy/B,MAAO/yB,EAAE+yB,MACTonB,MAAOn6C,MAKnBi6C,EAAYwF,EAAW5lD,UAAU,cAC5BR,KAAKA,EAAM,SAAU2G,GAAK,OAAOA,EAAEzL,KAsC5C,SAASwzD,KACL,MAAO,CACH3C,QAAS/Y,EAAI+Y,QACb4C,kBAAmB3b,EAAI2b,kBACvBC,YAAa5b,EAAI4b,aA6DzB,SAASC,KACL/F,KACAhB,KAGJ,SAAS7L,GAAc/oD,GACnB0gD,EAAW1gD,EACX0yD,EAAI3J,cAAc/oD,GAClBigD,EAAK8I,cAAc/oD,GACnB+/C,EAAIgJ,cAAc/oD,GAClBggD,EAAI+I,cAAc/oD,GAClBq3C,EAAI0R,cAAc/oD,GAClB8/C,EAAIiJ,cAAc/oD,GAGtBrC,QAAQC,OAAO,UACd+E,QAAQ,mBACL,CAAC,OAAQ,WAAY,YAAa,iBAC9B,eAAgB,eAAgB,mBAChC,qBAAsB,kBAAmB,mBACzC,gBAAiB,oBAAqB,qBACtC,qBAAsB,oBAAqB,kBAC3C,8BAEJ,SAAUkB,EAAQqK,EAAYlK,EAAMgT,EAAOlH,EAAM8nB,EAASvvB,EAAO8vC,EACvD0P,EAAOM,EAAOyT,EAAO9T,EAAOnjB,EAAOqjB,EAAOC,EAAQF,EAAO8T,GAgH/D,OA/GA17D,EAAO0D,EACPsI,EAAW+B,EACXnQ,EAAKiG,EACLgO,EAAMgF,EAENlJ,EAAQ8pB,EACRt3B,EAAM+H,EACNgvC,EAAMc,EACNyH,EAAMiI,EACNhI,EAAMsI,EACNuK,EAAMkJ,EACN9b,EAAMgI,EACNnlB,EAAMgC,EACNqb,EAAMgI,EACN/H,EAAOgI,EACPlI,EAAMgI,EACN4K,EAAOkJ,GAZPztD,EAAK0B,GAcFyxB,YAAYo6B,IA6FR,CACHzS,UA5FJ,SAAmB4S,EAAOvb,EAAQwb,EAAUC,EAAOlzD,GAjJ3D,IA0DsB0/C,EAAQvI,EAwFlBuI,EAASuT,EACTh8C,EAAMi8C,EACN1vD,EAAMwvD,EAENlJ,EAAKa,GAAQz2B,OACb61B,EAAMY,GAAQI,aAEd1zD,EAAKmB,MAAM,uBAAyBye,GAEpCs3B,EAAI4kB,OAhHL,CACHX,cAAeA,GACfC,iBAAkBA,GAClBH,sBAAuBA,GACvBC,iBAAkBA,GAClBL,aAAcnb,EAAImb,aAClBkB,aAAcjF,GACdrB,YAAaA,GACbhB,YAAaA,GACbuH,UAAW/J,GACXgK,UAAWnD,GACXoD,UAAWnD,IAqGoBpZ,GAC3BD,EAAIyc,UA3JL,CACHp9C,WA0J6BspC,EA1JVtpC,WACnBu0C,QAASA,GACTnG,mBAAoBA,GACpBgI,kBAAmBA,IAuJmBv1C,GAClC2yC,EAAIzC,OAnJL,CACH1mD,KAAM,WAAc,OAAOA,GAC3BnL,KAAM,WAAc,OAAOA,GAC3BsvD,UAAW,WAAc,OAAOA,GAChC6O,YAAa,WAAc,OAAO3c,EAAIjuC,aACtC+6C,QAAS7M,EAAIkV,aACb/H,UAAW,WAAc,OAAOA,IAChCM,mBAAoBA,GACpBG,qBAAsBA,GACtBiC,WAAY,WAAc,OAAOA,IACjC5C,YAAaA,GACbO,eAAgBA,IAwIU7E,EAAOlyB,UAC7BwpB,EAAI0c,WApIL,CACHjzD,KAAM,WAAc,OAAOA,GAC3B0xD,iBAAkBA,GAClBrX,mBAAoB8O,EAAI9O,mBACxBQ,iBAAkBrE,EAAIqE,mBAiIlBzhB,EAAI85B,YAAYjB,MAChB7I,EAAK+J,qBAAqBlB,MAC1Bxb,EAAI2c,aAvGc1c,EAuGmBA,EAtGtC,CACH7tB,MAAO,WAAc,OAAOA,GAC5ByE,WAHc2xB,EAuGmBA,GApGf3xB,UAClB+lC,UAAW,WAAc,OAAOxJ,EAAM7pD,OAAO0D,WAC7C1D,KAAM,WAAc,OAAOA,GAC3BnL,KAAM,WAAc,OAAOA,GAC3BsvD,UAAW,WAAc,OAAOA,GAChCgG,MAAO,WAAc,OAAOD,GAAQC,OACpCiH,UAAWA,GACX5G,SAAU,SAAUnoD,GAChB,IAAIixD,EAAM9I,GAEV,OADAA,GAAWnoD,EACJixD,GAEXzW,WAAYoC,EAAOpC,WACnBmM,QAAStS,EAAKsS,QACduK,YAAalD,GACb9J,mBAAoB,WAChB4C,EAAI5C,mBAAmBkE,GAAUb,OAqFjClT,EAAKwS,WA/EN,CACHlpD,KAAM,WAAc,OAAOA,GAC3BnL,KAAM,WAAc,OAAOA,KA8EvB2hD,EAAIgd,SAzEL,CACHzwD,IAwE2BA,EAvE3BgqB,OAuEgCkyB,EAvEjBlyB,SACfm9B,QAASA,GACT9E,WAAY,WAAc,OAAOA,GACjC3B,UAAW,WAAc,OAAOA,KAoES0F,GAErCxpD,EAAWvL,QAAQkI,OAAO,GAAI+C,GAAiBE,GAE/CmqD,EAAQ1S,EAAOp/C,OAAO,KAAKkG,KAAK,KAAM,cACtC6rD,EAAa3S,EAAOp/C,OAAO,KAAKkG,KAAK,KAAM,mBAC3C8rD,EAAe5S,EAAOp/C,OAAO,KAAKkG,KAAK,KAAM,sBAC7C+rD,EAAQ7S,EAAOp/C,OAAO,KAAKkG,KAAK,KAAM,cACtCsnD,EAAapO,EAAOp/C,OAAO,KAAKkG,KAAK,KAAM,mBAE3CjJ,EAAO60D,EAAM3lD,UAAU,SACvBogD,EAAYwF,EAAW5lD,UAAU,cACjC/D,EAAO6pD,EAAM9lD,UAAU,SAEvB8kB,EAAQ7zB,GAAGmyB,OAAO0B,QACb1P,KAAK3C,GACL2zC,MAAMD,GAAQC,OACdC,MAAMF,GAAQE,OACdS,QAAQlrD,EAASkrD,SACjBC,SAASnrD,EAASmrD,UAClBC,OAAOprD,EAASorD,OAAOC,OACvBC,aAAatrD,EAASsrD,aAAaD,OACnCE,aAAavrD,EAASurD,aAAaF,OACnCnuD,GAAG,OAAQ6uD,IAEhBnhC,EAAO9hB,EAAImgB,mBAAmBC,EAC1B0tB,EAAIkd,aAAc1qC,GAAWC,GAAaC,KAiD9Ck2B,OA9CJ,SAAgBsT,GACZj8C,EAAMi8C,EACN5pC,EAAM1P,KAAK3C,GACX8/B,EAAI6I,OAAO3oC,IA4CX8oC,aAzCJ,WACIz2B,EAAMxiB,OAENmwC,EAAIkd,cACJjd,EAAIkd,iBACJv6B,EAAIw6B,iBACJxK,EAAKyK,0BACLtd,EAAIud,gBACJ3K,EAAItC,YACJvQ,EAAIyd,eACJlvD,EAAGqzB,eAAek6B,IAElBrvD,EAAIgB,UAAU,KAAKM,SACnBtB,EAAIgB,UAAU,QAAQM,SAEtB6lD,GAAQC,MAAQ,GAChBD,GAAQE,MAAQ,GAChBF,GAAQG,cAAgB,GACxBH,GAAQz2B,OAAS,GACjBy2B,GAAQI,aAAe,GAEvBG,GAAW,GAEXf,EAAQC,EAAaC,EAAeC,EAAQzE,EAAa,KACzDvwD,EAAOsvD,EAAYnkD,EAAO,KAC1B6oB,EAAQ0B,EAAO,KAEXg/B,GACA3mD,EAASf,OAAO0nD,GAEhBC,GACA5mD,EAASf,OAAO2nD,GAEhBC,GACA7mD,EAASf,OAAO4nD,IASpBpP,mBAAoB8O,EAAI9O,mBACxBtC,YAAaA,GACbI,YAAa3B,EAAI2B,YACjBF,cAAeA,GACfkB,kBAAmBA,GACnBE,gBAAiBA,GACjBE,MAAOA,GACPsG,eAAgBA,GAChBxH,aAAcA,GACdiD,aAAcA,GAEdzC,kBAAmBA,GACnB0O,UAAWA,GACXC,aAAcA,GACdC,aAAcA,GACdC,QAASA,GACTC,WAAYA,GACZC,SAAUA,GACVC,WAAYA,GACZC,QAASA,GACTC,WAAYA,GACZC,WAAYA,GACZrK,cAAeA,GAEf6B,cAAeA,OAjpC/B;CCAC,WACG,aAEA,IAAI5oD,EAAM8D,EAAI+N,EAAKwF,EAAIpJ,EAAIrQ,EAAI+P,EAE3BqD,EASAosD,EACAC,EACAC,EACAC,EAVAC,GAAkB,EAClBC,EAAQ,kBACRC,EAAW,CACPh+D,KAAM,OACNT,MAAO,IAQXshD,EAAW,SAAU3gD,GACrB,MAAO,QAAUA,EAAI,KAIzB,SAAS4wD,EAAY7jD,GACjB,IAAI9E,EAAK8E,EAAK9E,GAEVu1D,EAAcv1D,GACd4oD,EAAe9jD,IAGnBywD,EAAcv1D,GAAM8E,EACpB0wD,EAAUttD,KAAKpD,GACfgxD,KAGJ,SAASlN,EAAe9jD,GACpB,IAAI9E,EAAK8E,EAAK9E,GACVyL,EAAI8pD,EAAcv1D,GAClByL,GACA9V,QAAQkI,OAAO4N,EAAG3G,GAClBgxD,KAEAC,EAAW,sCAAwC/1D,EAAK,KAIhE,SAAS6oD,EAAe/jD,GACpB,IAAI9E,EAAK8E,EAAK9E,GAEd,GADQu1D,EAAcv1D,GACf,CACH,IAAIuG,EAAMxQ,EAAGy7B,KAAKxxB,EAAIw1D,GACX,GAAPjvD,GACAivD,EAAUxjC,OAAOzrB,EAAK,UAEnBgvD,EAAcv1D,GACrB81D,SAEAC,EAAW,qCAAuC/1D,EAAK,KAK/D,SAASg2D,EAAUvqD,GACf,IASiBnO,EAAImO,EATjBnO,EAAK/G,GAAGC,OAAOsD,MACTwD,EAAGS,QAAQ,YAIjBi+C,KAIa1+C,EANDA,EAMKmO,EANDA,EAOpBlV,GAAG+O,UAAU,aACRvH,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACzBT,EAAGS,QAAQ,YAAY,GAEvBoL,EAAIi4C,eAAe31C,EAAEzL,IACrBy1D,GAAe,GAGnB,SAASzZ,IACLzlD,GAAG+O,UAAU,aACRvH,QAAQ,uBAAuB,GAEpCoL,EAAIi4C,eAAe,MACnBqU,GAAe,EAGnB,SAASQ,EAAc3xD,GACnBkL,EAAGO,SAASzL,EAAK,aAAc,IAAI,EAAM,CAAC,GAAI,KACzCvG,QAAQ,qBAAqB,GAatC,SAAS+3D,IACL,IAMII,EAAU,CACN9+D,MAAO,IACPD,OAAQ,GACRkO,QAAS,cAEb8wD,EAAW,CACPp+D,EAZE,EAaFmN,EAZE,EAaF9N,MAZC,IAaDD,OAZE,IAcNi/D,EAAW,CACPr+D,EAlBE,EAmBFmN,EAAGmxD,GACHj/D,MAlBC,IAmBDD,OAjBE,IAmBNm/D,EAAY,CACR9wD,MAAO,YACPzN,EApBC,GAqBDmN,EAAG,IAGPqxD,EAASb,EAAMp4D,KAAKgI,UAAU,aACzBR,KAAK0wD,EAAW,SAAU/pD,GAAK,OAAOA,EAAEzL,KAEjD,SAASw2D,EAAIvoD,GACT,OAAOyqC,EAAS,WAAa,KAAOzqC,EAGxCsoD,EAAO32D,KAAK,SAAU6L,GAClB,IAAInO,EAAK/G,GAAGC,OAAOsD,MACfwK,EAAMhH,EAAG9G,OAAO,OAUpB,SAASigE,EAAQz2D,EAAIhB,GACjBsF,EAAI9N,OAAO,kBAAkBwJ,GAAI5G,KAAK4F,GAT1C1B,EAAGS,QAAQ,SAAU0N,EAAEy3C,QACvB5lD,EAAGS,QAAQ,QAAS0N,EAAEirD,OAEtBpyD,EAAI9N,OAAO,eAAeoP,SACtB6F,EAAE0H,YACF8iD,EAAc3xD,GAOlBmyD,EAAQ,KAAMhrD,EAAE4H,IAChBojD,EAAQ,KAAMD,EAAI/qD,EAAEkrD,aAITJ,EAAOtzD,QACjB9J,OAAO,OACP4E,QAAQ,YAAY,GACpBA,QAAQ,SAAU,SAAU0N,GAAK,OAAOA,EAAEy3C,SAC1CnlD,QAAQ,QAAS,SAAU0N,GAAK,OAAOA,EAAEirD,QACzCt4D,GAAG,QAAS43D,GAERp2D,KAAK,SAAU6L,GACpB,IA5EkBnH,EA6EdA,EADK/N,GAAGC,OAAOsD,MACNX,OAAO,OAAOkG,KAAK62D,GAEhC5xD,EAAInL,OAAO,QAAQkG,KAAK82D,GACxB7xD,EAAInL,OAAO,QAAQkG,KAAK+2D,GAExB5mD,EAAGO,SAASzL,EAAK,OAAQ,IAAI,EAAO,CAAC,GAAI,KACpCvG,QAAQ,kBAAkB,GAnFbuG,EAqFDA,EApFrBkL,EAAGO,SAASzL,EAAK,YAAa,IAAI,EAAM,CAAC,GAAI,KACxCvG,QAAQ,wBAAwB,GAqF7B0N,EAAE0H,YACF8iD,EAAc3xD,GAGlBA,EAAInL,OAAO,QACNkG,KAAKi3D,GACLl9D,KAAKqS,EAAEzL,IAEZ,IAAI48C,EAAK,GACT,SAASga,EAAQ52D,EAAIw+B,GACjBl6B,EAAInL,OAAO,QAAQkG,KAAK,CACpBmG,MAAO,aAAexF,EACtBjI,EAnFH,GAoFGmN,EAAG03C,IACJxjD,KAAKolC,GACRoe,GAAM,GAGVga,EAAQ,KAAMnrD,EAAE4H,IAChBujD,EAAQ,KAAMJ,EAAI/qD,EAAEkrD,aAGxBJ,EAAO32D,KAAK,SAAU6L,GAClB,IAzGWzL,EAAIkjD,EA0GX94C,EADK7T,GAAGC,OAAOsD,MACLtD,OAAO,OAAOA,OAAO,QAC/B8pC,GA3GOtgC,EA2GSyL,EAAEzL,GA3GPkjD,EA2GWz3C,EAAEy3C,OA1GzBl5C,EAAI8iB,OAAOE,SAAShtB,GAAKkjD,EAAQ98C,EAAGsB,UA2GvC0C,EAAKlT,MAAM,OAAQopC,KAGvBo1B,EAAMt+D,MAAM8+D,EAAQ9+D,MAAQo+D,EAAU11D,QACtC41D,EAAMv+D,OAAO++D,EAAQ/+D,QAErBo/D,EAAO7yD,OAAOkC,SAKlB,SAASmwD,EAAWxwD,GACZowD,GACAx9D,EAAKoD,KAAK,oBAAsBgK,GAIxC,SAAS47C,EAAS+G,GACd/+C,EAAM++C,GACNwN,EAAQz5D,EAAGkB,YAAYy4D,EAAOC,IACxBtzD,OAENgzD,EAAgB,GAEhBE,IADAD,EAAY,IAGZpvD,EAAGmzB,YAAYu8B,GAGnB,SAASlV,IACLx6C,EAAGqzB,eAAeq8B,GAElB75D,EAAG0F,aAAai0D,GAChBF,EAAQ,KAERH,EAAgB,GAEhBE,IADAD,EAAY,IAIhB,SAASqB,IACLnB,EAAMnzD,OAGV,SAASu0D,IACLpB,EAAMl4D,OAGV,SAASu5D,EAAYh/D,GACjB,IACIqG,EACA09C,EAcJ,MAhBiB,UAAN/jD,EAKPqG,EAAKs3D,EAAMpsD,UAEXlL,IAAOrG,GAEH8+D,IAEAC,IAGRhb,EAAYpD,EAALt6C,EAAc,OAAmB,QACxC0H,EAAMA,MAAMg2C,EAAO,IAAMpD,EAAS,uBAC3Bt6C,EAIXzI,QAAQC,OAAO,UACd+E,QAAQ,kBACL,CAAC,OAAQ,eAAgB,iBAAkB,eACvC,eAAgB,YAAa,eAEjC,SAAUkB,EAAQsE,EAAM6O,EAAOyB,EAAM3I,EAAM9L,EAAM4zB,GAS7C,OARAz3B,EAAO0D,EACPI,EAAKkE,EACL6J,EAAMgF,EACNQ,EAAKiB,EACLrK,EAAK0B,EACL/R,EAAKiG,EACL8J,EAAQ8pB,EAED,CACHuxB,SAAUA,EACVP,YAAaA,EAEb+H,YAAaA,EACbC,eAAgBA,EAChBC,eAAgBA,EAEhB7M,eAAgBA,EAEhBryC,UAAW,WAAc,OAAO+rD,EAAM/rD,aACtCpH,KAAMs0D,EACNr5D,KAAMs5D,EACNxtD,OAAQytD,EACRhb,WAAY,WAAc,OAAO0Z,GACjC1U,cAAe,SAAU/oD,GAAU0gD,EAAW1gD,OAnT9D;CCAC,WACG,aAEA,IAAIG,EAAMpC,EAAI+P,EAAOgyC,EAEjB3uC,EACAuhD,EACAe,EAKAnnD,EAJA0yD,GAAY,EACZC,EAAe,KACfC,EAAgB,GAIhBxe,EAAW,SAAU3gD,GACrB,MAAO,UAAYA,EAAI,KAI3B,SAASo/D,EAAwB16D,GAC7B,IAAIiX,EAAInd,GAAG6gE,MAAM36D,GACbigD,EAAKvzC,EAAImlB,OAAOhW,QAChBrZ,EAAKkK,EAAImlB,OAAOviB,YAGpB,MAAO,CAAEhU,GAFC2b,EAAE,GAAKzU,EAAG,IAAMy9C,EAEVx3C,GADNwO,EAAE,GAAKzU,EAAG,IAAMy9C,GAK9B,SAAS2a,EAAGt/D,GAAK,OAAOA,EAAIA,EAE5B,SAASu/D,EAAMn2D,EAAGuS,GACd,OAAOgF,KAAKyuC,KAAKkQ,EAAGl2D,EAAEpJ,EAAI2b,EAAE3b,GAAKs/D,EAAGl2D,EAAE+D,EAAIwO,EAAExO,IAGhD,SAASqyD,EAAKC,GACV,OAAOA,EAAOruD,EAAImlB,OAAOhW,QA6B7B,SAASm/C,EAAmBL,GACxB,IAEIM,EAFAC,EAAYJ,EAAK,IACjBK,EAAU,KAmDd,OA1BInM,EAAQE,MAAM7rD,SACd43D,EAAsB,EAAZC,EAEVlM,EAAQE,MAAMngD,QAAQ,SAAUC,GAC5B,IACIo8C,EAEA2P,EAfKtnD,EAAM/O,EAAGuS,EAdXxD,EAAMknD,EACbzqD,EACAC,EACAC,EACAC,EACA+qD,EACAC,EACA7rD,EAmBIiE,EAAOzE,EAAElO,UAKR4L,EAAI67C,aAA4B,aAAbv5C,EAAEiB,SAItBwD,IAnCSknD,EAoCWA,EAnCxBzqD,GADOuD,EAoCWA,GAnCRvD,GACVC,EAAKsD,EAAKtD,GACVC,EAAKqD,EAAKrD,GACVC,EAAKoD,EAAKpD,GACV+qD,EAAKT,EAAMr/D,EACX+/D,EAAKV,EAAMlyD,EACX+G,IAAMa,EAAGF,IAAOirD,EAAGlrD,IAAOE,EAAGF,IAAOmrD,EAAGlrD,KAClCyqD,EAAGvqD,EAAGF,GAAMyqD,EAAGxqD,EAAGF,IAML+G,EAuBa0jD,KAvBhBj2D,EAsBX0mD,EAzBD,CAAE9vD,EAFA8/D,EAAK5rD,GAAKa,EAAGF,GAEN1H,EADP4yD,EAAK7rD,GAAKY,EAAGF,KAKhB5U,GADOmY,EAuBSA,GAtBPvD,IAAMxL,EAAEpJ,EAAImY,EAAKrD,IAC5B1L,EAAEpJ,EAAImY,EAAKvD,IAAMxL,EAAEpJ,EAAImY,EAAKrD,IAC5B1L,EAAE+D,EAAIgL,EAAKtD,IAAMzL,EAAE+D,EAAIgL,EAAKpD,IAC5B3L,EAAE+D,EAAIgL,EAAKtD,IAAMzL,EAAE+D,EAAIgL,EAAKpD,MACzBwqD,EAAMn2D,EAAGuS,IAAMikD,MAoBVH,EAAOF,EAAMzP,EAAOuP,IACTM,IACPA,EAAUF,EACVI,EAAUnsD,OAMvBmsD,EAGX,SAASG,EAAYnS,GACbqR,GAAgBrR,GAASqR,EAAal4D,MAAQ6mD,EAAM7mD,MAEpDk4D,GASR,SAAmBxrD,GACXA,EAAEnO,IACFmO,EAAEnO,GAAGS,QAAQ,YAAY,GAE7BoL,EAAIw9C,aAAarhD,UAAU,cAAcM,SAZrCoyD,CAAUf,IAEdA,EAAerR,IAanB,SAAiBn6C,GACb,IACIo8C,EADA/iD,EAAO,GAGX,IAAK2G,EAAEnO,GAAI,OAEXmO,EAAEnO,GAAGS,QAAQ,YAAY,GAGzB8pD,EAAQoQ,EAAgBxsD,GACxB9V,QAAQkI,OAAOgqD,EAAO,CAClB7nD,GAAI,gBACJyyB,IAAKhnB,EAAEysD,UAEXpzD,EAAKoD,KAAK2/C,GAENp8C,EAAE0sD,UACFtQ,EAAQoQ,EAAgBxsD,EAAG,GAC3B9V,QAAQkI,OAAOgqD,EAAO,CAClB7nD,GAAI,gBACJyyB,IAAKhnB,EAAE0sD,UAEXrzD,EAAKoD,KAAK2/C,IAGd6C,EAAIhE,gBAAgB5hD,EAAMqE,EAAIw9C,cApC1ByR,CAAQnB,IAuChB,SAASgB,EAAgB7hE,EAAM6R,GAC3B,IACIw+C,EAAMrwD,EAAKmH,SACX86D,EAAQpwD,EAAMw+C,EAAI95C,GAAK85C,EAAI55C,GAC3ByrD,EAAQrwD,EAAMw+C,EAAI75C,GAAK65C,EAAI35C,GAM/B,IAFc/U,EAAGmN,EAEbsT,GALOvQ,EAAMw+C,EAAI55C,GAAK45C,EAAI95C,IAKd0rD,EACZ7rD,GALOvE,EAAMw+C,EAAI35C,GAAK25C,EAAI75C,IAKd0rD,EACZrsD,EAXS,IAOClU,EAIQygB,EAJLtT,EAISsH,EAJGkM,KAAKyuC,KAAKpvD,EAAEA,EAAImN,EAAEA,IAM/C,MAAO,CAAEnN,EAAGkU,EAAIuM,EAAK6/C,EAAOnzD,EAAG+G,EAAIO,EAAK8rD,GAyB5C,SAASC,EAAU9sD,GACXA,EAAEnO,KACFmO,EAAEnO,GAAGS,QAAQ,YAAY,UAClBm5D,EAAczrD,EAAE1M,MAI/B,SAASy5D,EAAQ/sD,GACRA,EAAEnO,KAEPmO,EAAEnO,GAAGS,QAAQ,YAAY,GACzBm5D,EAAczrD,EAAE1M,KAAO,CAAEA,IAAK0M,IAKlC,SAASgtD,IAGLV,EADWN,EADFN,EAAwBr9D,QAKrC,SAAS4+D,IACL,IAAIjlB,EAAIr9C,EAAMmL,EA7CEqkD,EAlJQwR,EAGpBM,EAFAC,EACAC,EA8LCrhE,GAAG6d,MAAM6hB,UACVmmB,IAGCtE,EAAIob,kBACLzf,EAAK0jB,EAAwBr9D,MArMTs9D,EAsMM3jB,EArM1BkkB,EAAYJ,EAAK,IACjBK,EAAU,KAGVnM,EAAQC,MAAM5rD,SACd43D,EAAsB,EAAZC,EAEVlM,EAAQC,MAAMlgD,QAAQ,SAAUC,GAC5B,IAAI+rD,GAECruD,EAAI67C,aAA2B,SAAZv5C,EAAEjG,SAI1BgyD,EAAOF,EAAM,CAAEv/D,EAAG0T,EAAE1T,EAAGmN,EAAGuG,EAAEvG,GAAKkyD,IACtBM,GAAWF,EAAOG,IACzBD,EAAUF,EACVI,EAAUnsD,OAoLlBlK,EAhLGq2D,IAkLCz/D,EAAKmB,MAAM,sBAAuBiI,EAAKgoB,OAAO,IAC9CuuB,EAAIkd,aAAazzD,KAEjBnL,EAAOqhE,EAAmBhkB,GAzDlBmS,EA0DGxvD,EAzDdG,GAAG6d,MAAM6hB,UAAY2vB,EAAMtoD,GAAGS,QAAQ,YACvCw6D,EAAU3S,IAITrvD,GAAG6d,MAAM6hB,UAAa2vB,EAAMtoD,GAAGS,QAAQ,aAK3C+5C,EAAIqE,cAEAyJ,IACGA,EAAMtoD,GAAGS,QAAQ,YACjBw6D,EAAU3S,GAEV4S,EAAQ5S,KAVZ4S,EAAQ5S,GAoDJ9N,EAAIkd,aAAa5+D,KAO7B,SAASsjD,EAAY3hD,GACjB,IACIqG,EADa,UAANrG,GACKi/D,IAAcj/D,EAC1B+Q,EAAY4vC,EAALt6C,EAAc,SAAqB,WAC1Cu6D,EAAUjgB,EAAS,wBACnBkgB,EAAUx6D,EAAKq6D,EAAmB,KAStC,OAPAzB,EAAY54D,IAGR25D,EAAY,MAEhBzzD,EAAIlG,GAAG,YAAaw6D,GACpB9yD,EAAMA,MAAMgD,EAAO,IAAM6vD,GAClBv6D,EAGX,SAASg+C,IAEmC,EAApClsB,OAAOvwB,KAAKu3D,GAAep3D,QAC3B2rD,EAAQE,MAAMngD,QAAQ,SAAUC,GACxByrD,EAAczrD,EAAE1M,MAChBw5D,EAAU9sD,KAM1B,SAASs1C,EAAc/oD,GACnB0gD,EAAW1gD,EAIfrC,QAAQC,OAAO,UACV+E,QAAQ,kBACT,CAAC,OAAQ,YAAa,eAAgB,oBAEtC,SAAUkB,EAAQG,EAAM4zB,EAASkwB,GAsB7B,OArBA3nD,EAAO0D,EACP9F,EAAKiG,EACL8J,EAAQ8pB,EACRkoB,EAAMgI,EAkBC,CACHiV,SAjBJ,SAAkB7M,EAAO0L,GAErBlJ,EAAMkJ,EACNtvD,GAFA6E,EAAM++C,GAEI5jD,IACVmnD,EAAUtiD,EAAIsiD,QACVuL,IAAcjhE,EAAG8E,YACjByJ,EAAIlG,GAAG,YAAaq6D,GAExBn0D,EAAIlG,GAAG,QAASs6D,IAUhBzD,YAPJ,WACI3wD,EAAIlG,GAAG,YAAa,MACpBkG,EAAIlG,GAAG,QAAS,OAMhBs7C,YAAaA,EACb0C,iBAAkBA,EAClB2E,cAAeA,MA3T/B;CCAC,WACG,aAEA,IAAI5oD,EAAMG,EAAK0mC,EAAK65B,EAIhBC,EAAOC,EAAM5rD,EAAK6rD,EAAUC,EAE5BvgB,EAAW,SAAU3gD,GACrB,MAAO,SAAWA,EAAI,KAI1B,SAASiiD,IACL1hD,EAAI4L,UAVS,sBAajB,SAASg1D,IACLl6B,EAAIx8B,cAGR,SAASmF,EAAM8D,GACXotD,EAAWptD,EACXnT,EAAIqB,aAAas/D,GAGrB,SAASrxD,IACLtP,EAAI4H,eAAe+4D,GAGvB,SAASE,IAOLjb,EANQ,CACJI,MAAOnxC,EAAInN,GACXu+C,SAAUpxC,EAAImL,MACdkmC,YAAarxC,EAAIisD,SACjB3a,KAAM,QAKd,SAAS4a,KAGT,SAASC,IACLnsD,EAAM4rD,EAAKj/D,KAAK0C,QAAQ1C,KAAKwiC,eAAet9B,OAC5C7G,EAAKib,KAAK,eAAgBjG,GAqB9B,SAASosD,EAAkBz0D,GAlB3B,IACQlM,EACA4gE,EACAlpD,EAgBJnY,EAAKib,KAAK,eAAgBtO,GAC1Bg0D,EAAQh0D,EAAKg0D,MACbC,EAAOj0D,EAAKi0D,KACZ/5B,EAAIjmC,aACCC,SAAS0/C,EAAS,qBAClBz/C,YAvBDL,EAAUomC,EAAI9lC,UAAU,YACxBsgE,EAAO5gE,EAAQO,OAAO,QACtBmX,EAAU+tC,IAEdlxC,EAAM4rD,EAAKzoD,EAAQguC,OACnB0a,EAAWQ,EAAKrgE,OAAO,UAAUiF,GAAG,SAAUk7D,GAC9CR,EAAMttD,QAAQ,SAAUxL,GACpB,IAAI0T,EAAIqlD,EAAK/4D,GACbg5D,EAAS7/D,OAAO,UACPkG,KAAK,QAASqU,EAAE1T,IAChBX,KAAK,WAAYqU,EAAE1T,KAAOsQ,EAAQguC,OAAe,MACjDllD,KAAKsa,EAAE+lD,eAGb7gE,IAUFS,MAAM8/D,EAAKzgB,EAAS,OACpBj/C,UAAU4/D,EAAQ3gB,EAAS,UAC3Bh/C,WAGT,SAASogD,IACL+e,EAAS/e,YAGb,SAASuE,IACL,OAAOwa,EAASxa,aAGpB,SAASH,EAAO/wC,GACZ0rD,EAAS3a,OAAO/wC,GAGpB,SAAS4zC,EAAc/oD,GACnB0gD,EAAW1gD,EAGfrC,QAAQC,OAAO,UACd+E,QAAQ,iBACL,CAAC,OAAQ,mBAAoB,oBAE7B,SAAUkB,EAAQwE,EAAOm/C,GASrB,OARArnD,EAAO0D,EACPvD,EAAM+H,EACN2+B,EAAMwgB,EAENyZ,EAAc,CACVS,oBAAqBH,GAGlB,CACHzf,UAAWA,EACXuE,WAAYA,EACZH,OAAQA,EAERlE,iBAAkBA,EAClBkf,kBAAmBA,EACnBvxD,MAAOA,EACPC,KAAMA,EAENm5C,cAAeA,MAtH/B;CCAC,WACG,aAEA,IAAI5oD,EAAMpC,EAAI4jE,EAEVxwD,EAEAyhD,EAAIC,EAAKa,EAAOC,EAAOC,EAEvB7zC,EAGA6hD,EAAW,GAGf,SAASC,EAAgBC,GACrB,IAAI34D,EAAIgI,EAAI+N,aACZ,OAAO/V,EAAIA,EAAE,CAAC24D,EAAIC,QAASD,EAAIE,SAAW,CAAC,EAAG,GAGlD,SAAS3J,EAAgB4J,GACrB,IAAI94D,EAAIgI,EAAI+N,aACZ,OAAO/V,EAAIA,EAAE+4D,OAAOD,GAAS,CAAC,EAAG,GAgBrC,SAASlN,EAAaxrD,EAAM44D,GACxB,IAGIC,EAyBU74D,EAOKwsD,EAnCfn3C,EAAOrV,EAAK6uD,OACZr4D,EAAI6e,GAAQA,EAAK7e,EACjBmN,EAAI0R,GAAQA,EAAK1R,EAGrB,GAAIm1D,EAAW94D,GACX,OAAO,EAGX,GAAS7F,MAAL3D,GAAuB2D,MAALwJ,EAIlB,OAHA3D,EAAKyqB,OAAQ,EACbzqB,EAAKkqB,GAAKlqB,EAAKxJ,EAAIA,EACnBwJ,EAAKoqB,GAAKpqB,EAAK2D,EAAIA,GACZ,EAGX,GAAIi1D,GAAuBz+D,MAAV6F,EAAKxJ,GAA4B2D,MAAV6F,EAAK2D,EACzC,OAAO,EAIX,SAASo1D,IACL,MAAO,CACHviE,EAAG4hE,EAAI9/B,QAAQ9hB,EAAI,IACnB7S,EAAGy0D,EAAI9/B,QAAQ9hB,EAAI,KAmB3B,OAHAxW,EAAKyqB,OAAQ,EACbouC,EAAqB,SAAf74D,EAAKiE,OANQuoD,EAM2BxsD,EAAKwsD,GAZxC,CACHh2D,GAFMwJ,EAQFqpD,EAAGmD,EAAGjjB,SACFwvB,KAPAviE,EAAI6hE,EAAWD,EAAI//B,OAAOggC,GAClC10D,EAAG3D,EAAK2D,EAAI00D,EAAWD,EAAI//B,OAAOggC,KAUgBU,IAC1D3kE,QAAQkI,OAAO0D,EAAM64D,IACd,EAGX,SAASC,EAAW94D,GAChB,IACI04D,EA9DaH,EA6DbA,EAAMv4D,EAAKhI,SAGf,GAAKugE,GAAuB,SAAhBA,EAAIS,SAGT,GAAIT,EAKP,OAJAG,EAAwB,QAAhBH,EAAIS,QAAoBV,EAAgBC,GA1D7C,CANK,GAJKA,EAoEsDA,GA7DnDC,QAHR,EAIKD,EAAIE,OAHP,GAgEVz4D,EAAKyqB,OAAQ,EACbzqB,EAAKkqB,GAAKlqB,EAAKxJ,EAAIkiE,EAAM,GACzB14D,EAAKoqB,GAAKpqB,EAAK2D,EAAI+0D,EAAM,IAClB,OAPP14D,EAAKyqB,OAAQ,EASjB,OAAO,EAGX,SAASouB,IACLsR,EAAMlgD,QAAQ,SAAUC,GACpB4uD,EAAW5uD,KAInB,SAAS+uD,EAASC,EAAI7hD,EAAGxa,GACrB,IAAIs8D,EAAM,QAAUD,EAChBE,EAAO/hD,EAAI8hD,EAAM,IAAM9hD,EAAI8hD,EAC/B,OAAOt8D,EAAKu8D,EAAO,UAAYA,EAGnC,SAAShO,EAAiB7hB,GACtB,IAAIvpC,EAAOupC,EAKX,OAHAvpC,EAAKiE,MAAQ,SACbjE,EAAKujB,SAAW01C,EAAS,SAAU1vB,EAAOp+B,KAAMo+B,EAAOoY,QACvD6J,EAAaxrD,GACNA,EAGX,SAASksD,EAAe57C,GACpB,IAAItQ,EAAOsQ,EAQX,OANAtQ,EAAKiE,MAAQ,OACRjE,EAAKmL,OACNnL,EAAKmL,KAAO,cAEhBnL,EAAKujB,SAAW01C,EAAS,OAAQj5D,EAAKmL,MACtCqgD,EAAaxrD,GACNA,EAGX,SAAS6sD,EAAejf,EAAQtC,EAAO+tB,GACnC,IAAIC,EAAU1rB,EAAS,MAAQtC,EAAQ,IAAM+tB,EACzCzM,EAAM2M,EAAc3rB,EAAQtC,GAEhC,OAAKshB,GAILx4D,QAAQkI,OAAOswD,EAAK,CAChBpvD,IAAK87D,EACLr1D,MAAO,OACP0yD,QAAS0C,EAETluD,KAAM,WAAc,MAAO,YAC3BkjD,SAAU,WAAc,OAAO,GAC/B1M,OAAQ,WACJ,OAAOiL,EAAIj4B,OAAOgtB,QAEtBwM,UAAW,WAAc,OAAO,KAE7BvB,GAfI,KAkBf,SAASQ,EAAWv4D,GAChB,IAAI+3D,EAAM2M,EAAc1kE,EAAK6R,IAAK7R,EAAK63D,KAEvC,OAAKE,GAILx4D,QAAQkI,OAAOswD,EAAK,CAChBpvD,IAAK3I,EAAK4J,GACVwF,MAAO,OACPu1D,WAAY3kE,EACZ+hE,QAAS/hE,EAAK+hE,QACdD,QAAS9hE,EAAK83D,QACd3wD,SAAU,CACNoP,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAGRJ,KAAM,WACF,IAAI+L,EAAI01C,EAAI4M,WACRniD,EAAIu1C,EAAIM,WACZ,OAAQh2C,GAAKA,EAAE/L,MAAUkM,GAAKA,EAAElM,MA1KtB,UA4KdkjD,SAAU,WACN,IAAIn3C,EAAI01C,EAAI4M,WACRniD,EAAIu1C,EAAIM,WACZ,OAAQh2C,GAAKA,EAAEm3C,UAAch3C,GAAKA,EAAEg3C,UAExC1M,OAAQ,WACJ,IAAIzqC,EAAI01C,EAAI4M,WACRniD,EAAIu1C,EAAIM,WAEZ,OADWN,EAAIwD,OAAOzO,QAAUiL,EAAIj4B,OAAOgtB,QAC3BzqC,GAAKA,EAAEyqC,QAAYtqC,GAAKA,EAAEsqC,QAE9CwM,UAAW,WACP,IAAIj3C,EAAI01C,EAAI4M,WACRniD,EAAIu1C,EAAIM,WACRn8C,EAAMmG,GAAKA,EAAEi3C,WAAc,EAC3BsL,EAAMpiD,GAAKA,EAAE82C,WAAc,EAC/B,OAAOvB,EAAI5wD,SAASy0D,UAAY,EAAIt5C,KAAKuiD,IAAI3oD,EAAI0oD,IAErDniB,MAAOziD,EAAKyiD,QAETsV,GAzCI,KA6Cf,SAAS2M,EAAcI,EAAOC,GAC1B,IAAIC,EAAUxQ,EAAGsQ,GACbG,EAAUzQ,EAAGuQ,GACbG,EAASF,EAAkC,GAAxBG,EAAQ,MAAOL,GAClCM,EAASH,EAAkC,GAAxBE,EAAQ,MAAOJ,GAEtC,OAAIG,GAASE,GACTrjE,EAAKoZ,MAAM,+BAAiC+pD,EAAQE,GAC7C,MAGJ,CACH7J,OAAQyJ,EACRllC,OAAQmlC,GAIhB,SAASE,EAAQzyD,EAAM9I,GACnB,MAAO,MAAQ8I,EAAO,MAAQ9I,EAAK,YAIvC,SAAS4uD,EAAYnjD,EAAG3C,GACpB,IAAI8I,EAAO9I,EAAO,OAClB,OAAO2C,EAAE3C,GAAQ,IAAM2C,EAAEmG,GAG7B,SAAS6pD,EAAYhwD,EAAGymD,GAGpB,OAFoBtD,EAAYnjD,EAAtBymD,EAAyB,MAAwB,OAE9C,IADOtD,EAAYnjD,EAAtBymD,EAAyB,MAAwB,OAI/D,SAASc,EAAahzD,GAClB,IAAIjB,EAAM8rD,EAAI7qD,IAAOA,EACrB,OAAOjB,GAAO6rD,EAAG7rD,GAGrB,SAASwvD,EAASP,EAAUn7B,GACxB,IAMI6oC,EANA38D,EAAM08D,EAAYzN,GAClB2N,EAASF,EAAYzN,EAAU,GAC/B53D,EAAOw0D,EAAG7rD,GACV68D,EAAUhR,EAAG+Q,GACbrN,EAAS,GACT1I,EAAQxvD,GAAQwlE,EAiEpB,MA9DW,QAAP/oC,EACIz8B,GACAk4D,EAAO1I,MAAQxvD,EACfk4D,EAAOE,SAAW,+BAEXoN,IACPtN,EAAO1I,MAAQgW,GACHnN,aACRH,EAAOE,SAAW,+BAGZ,WAAP37B,EACF+yB,GAGD8V,EAAUtlE,EAAOwvD,EAAMmV,WAAanV,EAAM6I,WAC1CH,EAAOS,WAAa,SAAUjqD,GAC1BnP,QAAQkI,OAAO69D,EAAS52D,GACxBqE,EAAIm8C,mBAAmBM,KAL3B0I,EAAOE,SAAW,6BAQR,WAAP37B,IACF+yB,IAGD8V,EAAUtlE,EAAOwvD,EAAMmV,WAAanV,EAAM6I,YAMtCH,EAAOU,cAAgB,WACnB,IAAI6M,EAAkBjQ,EAAchG,EAAMkJ,YACtCgN,EAAS/lE,EAAGy7B,KAAKo0B,EAAM7mD,IAAK88D,EAAiB,OACnC,GAAVC,GACAD,EAAgB7pC,OAAO8pC,EAAQ,GAEnClW,EAAMroD,SAASw+D,UAAsC,GAA1BF,EAAgB/7D,OAEvC1J,GACAwvD,EAAMmV,WAAa,KACfnV,EAAM6I,aACN7I,EAAMmV,WAAanV,EAAM6I,WACzB7I,EAAM6I,WAAa,KACnB7I,EAAM7mD,IAAM48D,SACL/Q,EAAG7rD,GACV6rD,EAAG+Q,GAAU/V,SACNiF,EAAI8Q,MAGf/V,EAAM6I,WAAa,YACZ5D,EAAI8Q,IAEX/V,EAAMmV,WACN5xD,EAAIm8C,mBAAmBM,GAEvBz8C,EAAImkD,kBAAkB1H,IAjClC0I,EAAOE,SAAW,8BAuCnBF,EAGX,SAAS2B,EAAY+L,GACjB,IAAIr4D,EAAI,GAMR,OALA+nD,EAAMlgD,QAAQ,SAAUC,GACJ,WAAZA,EAAEjG,OAAwBw2D,GAAevwD,EAAEy3C,QAC3Cv/C,EAAEuE,KAAKuD,KAGR9H,EAGX,SAASgtD,IACL,IAAInP,EAAQ,GAMZ,OALAkK,EAAMlgD,QAAQ,SAAUC,GACJ,SAAZA,EAAEjG,OACFg8C,EAAMt5C,KAAKuD,KAGZ+1C,EAGX,SAAS4L,EAAkBvgB,GACvB,IAAI2U,EAAQ,GAMZ,OALAkK,EAAMlgD,QAAQ,SAAUC,GACJ,SAAZA,EAAEjG,OAAoBiG,EAAEsiD,GAAGjjB,SAAW+B,GACtC2U,EAAMt5C,KAAKuD,KAGZ+1C,EAGX,SAAS0L,EAAkBrgB,GACvB,IAAIovB,EAAO,GAMX,OALAtQ,EAAMngD,QAAQ,SAAUC,GAChBA,EAAEkmD,OAAO3xD,KAAO6sC,GAASphC,EAAEyqB,OAAOl2B,KAAO6sC,GACzCovB,EAAK/zD,KAAKuD,KAGXwwD,EAGX,SAAS7K,IACL,IACInpD,EAAKi0D,EADLD,EAAO,GAiBX,OAfAtQ,EAAMngD,QAAQ,SAAUC,GACH,aAAbA,EAAEiB,gBACKjB,EAAE0f,IACTljB,EAAMwD,EAAEsvD,WACRmB,EAAMzwD,EAAEgjD,WACJxmD,IAAQi0D,EACRzwD,EAAE0f,IAAM,eACDljB,EAAIyE,OAASwvD,EAAIxvD,OACxBjB,EAAE0f,IAAM,iBAER1f,EAAE0f,KACF8wC,EAAK/zD,KAAKuD,MAIfwwD,EAIXtmE,QAAQC,OAAO,UACd+E,QAAQ,mBACL,CAAC,OAAQ,YAAa,gBAEtB,SAAUkB,EAAQG,EAAMmgE,GAqBpB,OApBAhkE,EAAO0D,EACP9F,EAAKiG,EACL29D,EAAMwC,EAkBC,CACH7H,UAjBJ,SAAmBpM,EAAO8L,GAEtBj8C,EAAMi8C,EACNpJ,GAFAzhD,EAAM++C,GAEGuD,QAAQz2B,OACjB61B,EAAM1hD,EAAIsiD,QAAQI,aAClBH,EAAQviD,EAAIsiD,QAAQC,MACpBC,EAAQxiD,EAAIsiD,QAAQE,MACpBC,EAAgBziD,EAAIsiD,QAAQG,eAW5BlL,OARJ,SAAgBsT,GACZj8C,EAAMi8C,GAQNsB,aALJ,aAOIvI,aAAcA,EACd3S,kBAAmBA,EACnBuS,iBAAkBA,EAClBc,eAAgBA,EAChBW,eAAgBA,EAChBO,WAAYA,EACZkL,gBAAiBA,EACjBxJ,gBAAiBA,EACjB9B,SAAUA,EACVyE,aAAcA,EACd/C,YAAaA,EACbU,UAAWA,EACXvD,kBAAmBA,EACnBF,kBAAmBA,EACnBkE,aAAcA,MAza9B;CCAC,WACG,aAEA,IAAIpnD,EAAKlE,EAELqD,EAeAizD,EAbAC,GAAQ,GACRC,GAAO,GACPC,EAAM,GACNlyD,EAAM,GACNmyD,EAAO,KACP/0C,EAAO,CACHg1C,IAAK,wBACLC,IAAK,yBAGT3+C,GAAU,EACV4+C,EAAO,KACPC,EAAQ,GAGRlkB,EAAW,SAAU3gD,GACrB,MAAO,SAAWA,EAAI,KAG1B,SAAS8kE,EAAQnrC,GACb,MAAO,eAAiBA,EAAM,QAGlC,SAASorC,EAAKpmE,EAAGgQ,GACb,OAAOhQ,EAAI6lE,EAAM71D,EAAM,IAmB3B,SAASq2D,IACL,IACI5wD,EAAIR,EATI3G,EAAK7D,EAwGCgL,EAAIR,EAhGlB3G,EAAMmE,EAAIyrD,YAiGd,SAASoI,EAAItrC,GACT,IAAI1xB,EAAK68D,EAAQnrC,GACbjX,EAAItR,EAAI0lB,YAAYouC,OAAO,IAAK,WAC3B59D,KAAK,KAAMW,GACXX,KAAK,YAAa2K,EAAI+B,UAAUI,EAAIR,IAC7C8O,EAAEthB,OAAO,QACJkG,KAAK,OAAQooB,EAAKiK,IAClBryB,KAAK,UAAW,GACrBu9D,EAAMlrC,GAAOjX,EAjHAtZ,EAWLkJ,GAXArF,EAWLA,GAVHjN,GAAKoJ,EACT6D,EAAIE,GAAK/D,EACT6D,EAAI5N,OAAW,EAAF+J,EACb6D,EAAI7N,QAAY,EAAFgK,EASdgL,EAAKnH,EAAIjN,EAAIiN,EAAI5N,MAAQ,EACzBuU,EAAK3G,EAAIE,EAAIF,EAAI7N,OAAS,EAE1BilE,EAAcjzD,EAAI4iD,UAAS,GAC3B5iD,EAAIi1C,YAAW,GAuFGjyC,EArFLA,EAqFSR,EArFLA,EAgGjBqxD,EAAI,OACJA,EAAI,OA/FJL,EAAO,SAAUvC,EAAI1zD,GACjB,IAAIw2D,EAAKJ,EAAK93D,EAAI7N,OAAQuP,GACtBy2D,EAAK/C,EAAGriE,EAAIoU,EACZixD,EAAKhD,EAAGl1D,EAAIyG,EAGhB,MAAO,CAAE5T,EAAGoU,GAFJgxD,EAAKC,EAAKf,GAEEn3D,EAAGyG,GADdyxD,EAAKF,GAAMX,IAIxBc,EAAU,MAAOr4D,GAAM,GACvBq4D,EAAU,MAAOr4D,EAAK,GACtBs4D,IAGJ,SAASC,IAqFL,SAASC,EAAI9rC,GACT,IAAI1xB,EAAK68D,EAAQnrC,GACjBvoB,EAAI0lB,YAAYr4B,OAAO,IAAIwJ,GACtB0F,aACAC,SAAS62D,EAAO,IAChB52D,gBACEg3D,EAAMlrC,GA1FjBirC,EAAO,KAEPc,EAAU,OACVA,EAAU,OACVH,IAwFAE,EAAI,OACJA,EAAI,OArFJr0D,EAAI4iD,SAASqQ,GACbjzD,EAAIi1C,YAAW,GAGnB,SAASkf,IAKDX,EACAxzD,EAAIuiD,QAAQlgD,QAAQ,SAAUC,GAC1B,IANKA,EAMDiyD,EAAQ,CAAE3lE,EAAG0T,EAAE1T,EAAGmN,EAAGuG,EAAEvG,GACvBy4D,EAAShB,EAAKe,GAPbjyD,EAOwBA,EAN1BtC,EAAIohD,QAAQ9+C,EAAG,QAAU,EAAI,IAOhCA,EAAEiyD,MAAQA,EACVjyD,EAAEggB,GAAKhgB,EAAE1T,EAAI4lE,EAAO5lE,EACpB0T,EAAEkgB,GAAKlgB,EAAEvG,EAAIy4D,EAAOz4D,IAGxBiE,EAAIuiD,QAAQlgD,QAAQ,SAAUC,GAC1B,IAAIopD,EAAMppD,EAAEiyD,OAAS,CAAE3lE,EAAG0T,EAAE1T,EAAGmN,EAAGuG,EAAEvG,GACpCuG,EAAEggB,GAAKhgB,EAAE1T,EAAI88D,EAAI98D,EACjB0T,EAAEkgB,GAAKlgB,EAAEvG,EAAI2vD,EAAI3vD,SACVuG,EAAEiyD,QAIjBv0D,EAAI5H,OAAOmE,aACNC,SAAS62D,GACTn9D,KAAK8J,EAAIwpD,UAAUC,UACxBzpD,EAAI/S,OAAOsP,aACNC,SAAS62D,GACTt1D,KAAKiC,EAAI2rD,aACTz1D,KAAK8J,EAAIwpD,UAAUG,UACnB5rD,KAAKiC,EAAI2+C,oBACd3+C,EAAIu8C,YAAYhgD,aACXC,SAAS62D,GACTn9D,KAAK8J,EAAIwpD,UAAUI,eAG5B,SAASsK,EAAU3rC,EAAK1sB,EAAK0B,GA5F7B,IAAiBhQ,EACTwmE,EA4FJl4D,EAAIjN,GAAKiN,EAAI5N,MAAM,EACnB4N,EAAIE,GAAKF,EAAI7N,OAAO,EAEpBylE,EAAMlrC,GAAKl7B,OAAO,QACb6I,KAAK2F,GACL3F,KAAK,UAAW,GAChBqG,aACAC,SAAS62D,GACTn9D,KAAK,UAAW,GAChBA,KAAK,aAtGG3I,EAsGkBsO,EAAI7N,OArG/B+lE,EAAKJ,EAAKpmE,EAqG6BgQ,GApGpCsD,EAAIsO,MAAM,EAAGikD,GAAOvyD,EAAI+B,UAAU,EAAGmxD,GAAMlzD,EAAI2jB,MAAM2uC,KAuGhE,SAASmB,EAAU/rC,GACfkrC,EAAMlrC,GAAKl7B,OAAO,QACbkP,aACAC,SAAS62D,GACTn9D,KAAK,UAAW,GAChBA,KAAK,YAxGH2K,EAAI2jB,MAAM,GAAK3jB,EAAI+B,UAAU,EAAG,GAAK/B,EAAIsO,MAAM,EAAG,IAuI7D,SAASyoC,EAAc/oD,GACnB0gD,EAAW1gD,EAInBrC,QAAQC,OAAO,UACV+E,QAAQ,qBACT,CAAC,iBAAkB,eAEnB,SAAUqU,EAAO4gB,GAsBb,OArBA5lB,EAAMgF,EACNlJ,EAAQ8pB,EAoBD,CACH+kC,YAnBJ,SAAqBzM,GACjB/+C,EAAM++C,GAmBNgN,eAhBJ,aAkBIzC,UAAW,WAAc,OAAO10C,GAChCu8B,cAjBJ,YACIv8B,GAAWA,IAEP5U,EAAIihB,QAAQxiB,OACZ9B,EAAMA,MAAM4yC,EAAS,oBACrBqkB,MAEAj3D,EAAMA,MAAM4yC,EAAS,mBACrB6kB,MAUJxc,cAAeA,MApN3B;CCAC,WACG,aAEA,IAEI5oD,EAAMgM,EAAUpO,EAAIyZ,EAAIlX,EAAKC,EAAIu/C,EAAKH,EAAKxuC,EAF3C6uC,EAAM,uBAIN4lB,EAAW,GACXttD,EAAU,KACVjP,GAAQ,EAERq3C,EAAW,SAAU3gD,GACrB,MAAO,QAAUA,EAAI,KAOzB,SAASwD,EAAKma,EAAInQ,GACdpN,EAAKoD,KAAKy8C,EAAMtiC,EAAK,OAASnQ,GAGlC,SAASs4D,EAAUC,EAAK94C,GACpB,MAAmB,MAAXA,EAAI,GAAc84C,EAAM,IAAM94C,EAAI/d,MAAM,GAAK+d,EA+BzD,SAASmE,EAASvO,GACd,IAzCWlF,EAAInQ,EAYGwJ,EACdwE,EACAuqD,EACA94C,EACAlgB,EACAi5D,EAwBAxxD,EAAI,WACJyxD,EAAOjoE,EAAGyF,IAAIof,GACdqjD,EAAKD,EAAOjoE,EAAGyF,IAAIof,EAAQnc,aAAe,KAC1CuB,EAAKg+D,EAAOA,EAAK9tB,UAAY,GAEjC,OAAKlwC,EAGD49D,EAAS59D,GACFzE,EAAKgR,EAAG,wBAA0BvM,EAAK,MAElD49D,EAAS59D,GAAM4a,EAxCG7L,EAyCL6L,EAxCTrH,EAAQxd,EAAGyF,IAAIuT,EAAEuE,QACjBwqD,EAAM/uD,EAAEmhC,UACRlrB,EAAMjW,EAAE4L,SAAW,UACnB7V,EAAO,GACPi5D,EAAO,GAEXhvD,EAAEmvD,SAAWL,EAAUC,EAAK94C,GAE5BjW,EAAEovD,MAAQ,SAAU1jD,GAChB,OAAOojD,EAAUC,EAAKrjD,IAE1B1L,EAAEqvD,KAAO,SAAU3lD,GACf,OAAOqlD,EAAM,IAAMrlD,GAGnBlF,IACA5d,QAAQ6V,QAAQ+H,EAAO,SAAUvU,EAAOD,GACpC,IAAIs/D,EAAUP,EAAM,IAAM/+D,EAC1B+F,EAAK,IAAMu5D,GAAWr/D,EAAMoa,GAC5BtU,EAAKu5D,GAAWr/D,EAAMyM,EACtBsyD,EAAK71D,KAAK,IAAMnJ,KAEpByQ,EAAGiE,eAAe3O,GAClB3M,EAAKmB,MAAM,6BAA8BwkE,EAAKC,IAmB9CE,IACKloE,EAAGuX,IAAI2wD,EAAGtiB,WAGXsiB,EAAGtiB,UAAUnwC,QAAQ,SAAUS,GACjB,MAANA,GAAcgyD,EAAGhyD,IACjB1Q,EAAKgR,EAAG,OAASN,EAAI,uCAJ7B1Q,EAAKgR,EAAG,mDAUhBpU,EAAKmB,MAAM0+C,EAAM,uBAAyBh4C,EAAI4a,KAnEnClF,EA+CMnJ,EA/CFhH,EA+CK,gCA9CpBpN,EAAKoZ,MAAMymC,EAAMtiC,EAAK,OAASnQ,IAqEnC,SAASgV,IACL,OAAOhkB,GAAG4W,IAAIywD,GAAUj+D,OAG5B,SAASowC,EAAyBN,GAC9B,IAAI6e,EAAS,GAcb,OAbA34D,QAAQ6V,QAAQoyD,EAAU,SAAUU,GAChC,IAAInc,EAAOmc,EAAGpuB,UACV+L,EAAQlmD,EAAGyF,IAAI8iE,EAAGriB,QAAU,GAC5BsiB,EAAOxoE,EAAGsB,IAAI4kD,EAAMuiB,cACbzoE,EAAGsB,IAAI4kD,EAAMpM,aAEZ0uB,GAAQA,EAAK9uB,IACrB6e,EAAOpmD,KAAK,CACRlI,GAAImiD,EACJlS,GAAIquB,EAAGrjC,SAAW,IAAMknB,EAAO,QAIpCmM,EAGX,SAASmQ,EAAa5iC,EAAM6iC,GACxB,IAAIvxD,EAAM,GACN5G,EAAM,EAYV,OAVA5Q,QAAQ6V,QAAQoyD,EAAU,SAAUU,GAChCziC,EAAK3zB,KAAK,CACN8c,IAAKs5C,EAAGJ,SACRjjC,QAAUqjC,EAAGrjC,SAAW,GACxBn5B,GAAI,WACA68D,EAAYL,EAAGpuB,UAAWwuB,MAGlCvxD,EAAImxD,EAAGpuB,WAAa3pC,MAEjB4G,EAGX,SAASwxD,EAAY3+D,EAAI0+D,GACrB,IAAIE,EAAOtuD,GAAWA,EAAQ4/B,YAAclwC,EACxCqU,EAAU,GAGd,SAASwqD,EAAKhsC,GACV,IAAIirC,EAAMxtD,EAAQ4/B,UAClB/3C,EAAKmB,MAAM,WAAYu5B,EAAIirC,GAC3BxtD,EAAQuiB,KACRxe,EAAQwe,GAAMirC,GAGdz8D,GAAUu9D,IACVv9D,GAAQ,EACRiP,GAAWuuD,EAAK,eAChBvuD,EAAUstD,EAAS59D,KACR6+D,EAAK,YAEhBH,EAAS1+D,EADCsQ,GAAWva,EAAGyF,IAAI8U,EAAQ7R,cAGpCnG,EAAI4L,UAAU,oBAAqBmQ,GAEnC/b,EAAI4L,UAAU,kBACd4zC,EAAIgnB,gBAIZ,IAAIC,EAAc,CACdC,eAAgB,CACZh6C,IAAK,SACLirB,GAAI,WAAc,OAAOyI,EAAS,yBAClCr+C,KAAM,UAEV4kE,aAAc,CACVj6C,IAAK,YACLirB,GAAI,WAAc,OAAOyI,EAAS,uBAClCr+C,KAAM,QAEV6kE,aAAc,CACVl6C,IAAK,YACLirB,GAAI,WAAc,OAAOyI,EAAS,uBAClCr+C,KAAM,QAEV8kE,cAAe,CACXn6C,IAAK,aACLirB,GAAI,WAAc,OAAOyI,EAAS,wBAClCr+C,KAAM,SAEV+kE,cAAe,CACXp6C,IAAK,aACLirB,GAAI,WAAc,OAAOyI,EAAS,wBAClCr+C,KAAM,UAId,SAASglE,EAAcr/D,EAAI8E,GACvB,IAAIw6D,EAAOhvD,GAAWA,EAAQivD,QAC1B37D,EAAI07D,GAAQA,EAAKt/D,GACjB8B,EAAK/L,EAAGsB,IAAIuM,EAAE9B,IACd0rB,EAAI1rB,EAAK,WAAcA,EAAGgD,IAAW,aAEzC,OAAOlB,EAAI,CACP5D,GAAIsQ,EAAQ8tD,KAAKp+D,GACjBglB,IAAK1U,EAAQ6tD,MAAMv6D,EAAEohB,KACrBirB,GAAIrsC,EAAEqsC,GACNnuC,GAAI0rB,GACJ,KAGR,SAASgyC,EAAeD,EAASz6D,EAAM+nC,GACnC0yB,EAAQ/zD,QAAQ,SAAUxL,GACtB,IAAIu8B,EAAMwiC,EAAY/+D,GAClBglB,EAAMuX,GAAOA,EAAIvX,IACjBirB,EAAK1T,GAAOA,EAAI0T,GAChB51C,EAAOkiC,GAAOA,EAAIliC,KAElBkiC,EACAob,EAAI8nB,UAAU,CACVz/D,GAAI,QAAUA,EACdglB,IAAKA,EACLirB,GAAIA,EACJnuC,GAAI,WAAcvJ,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOA,QAEvCtQ,EAAM8iC,EAAcr/D,EAAI8E,KAC/B6yC,EAAI8nB,UAAUljC,KAK1B,SAASmjC,EAAgB1/D,GACrB,IAAI4D,EAAIy7D,EAAcr/D,GAClB4D,GACA+zC,EAAI8nB,UAAU,CACVz/D,GAAIsQ,EAAQ8tD,KAAKp+D,GACjBglB,IAAK1U,EAAQ6tD,MAAMv6D,EAAEohB,KACrBljB,GAAI8B,EAAE9B,GACNmuC,GAAIrsC,EAAEqsC,KAOlB,SAAS0vB,EAAM5nE,GACX,IAAIrB,EAAI4Z,GAAWA,EAAQ2rC,MAC3B,OAAOvlD,GAAKX,EAAGsB,IAAIX,EAAEqB,IAGzB,SAAS6nE,IACL,IAAIC,EAAKF,EAAM,UACf,QAAOE,GAAKA,IAGhB,SAASC,IACL,IAAIh+D,EAAK69D,EAAM,SACf79D,GAAMA,IAGV,SAASi+D,EAAiBj7D,GACtB,IAAIhD,EAAK69D,EAAM,UACf79D,GAAMA,EAAGgD,GAGb,SAASk7D,EAAgBtM,GACrB,IAAI5xD,EAAK69D,EAAM,SACf79D,GAAMA,EAAG4xD,GAGb,SAASuM,EAAcn3D,GACnB,IAAIhH,EAAK69D,EAAM,aACf79D,GAAMA,EAAGgH,GAGb,SAASo3D,IACL,IAAIp+D,EAAK69D,EAAM,YACf79D,GAAMA,IAGV,SAASq+D,EAAe5wB,GACpB,IAAIztC,EAAK69D,EAAM,cACf,OAAO79D,GAAMA,EAAGytC,GASpB,SAAS0kB,EAAO/L,EAAOpI,GACnB32C,EAAM++C,EACNpQ,EAAMgI,EAGV,SAAS4I,EAAe5jD,GACpB,SAASs7D,KAWb,SAAyBt7D,GACrB,IAAIksD,EAGJ7nD,EAAImqD,gBACJnqD,EAAIoqD,mBACJpqD,EAAIiqD,wBACJjqD,EAAIkqD,mBAEAvuD,EAAKu7D,QACLrP,EAAuB,QAAhBlsD,EAAKu7D,OACZl3D,EAAIgrD,WAAU,EAAMnD,KAGpB7nD,EAAIgrD,WAAU,GACdhrD,EAAIgrD,WAAU,GAAO,IAGzBrvD,EAAK08C,MAAMh2C,QAAQ,SAAUqG,GACzB,IAAIyuD,EAAQn3D,EAAI+qD,aAAariD,EAAK7R,IAC9BugE,EAAY1uD,EAAKqyC,OAAS,KAE1Boc,GAASA,EAAMhjE,KAAOgjE,EAAMhjE,GAAGyC,SAC/BugE,EAAMpc,MAAQqc,EACT1uD,EAAKwuD,QACNl3D,EAAIirD,UAAUkM,EAAMtgE,GAAIgxD,IAG5B74D,EAAKoD,KAAK,2BAA4BsW,EAAK7R,MAInD8E,EAAK6lC,QAAQn/B,QAAQ,SAAUs/B,GAC3B,IAAI01B,EAAQr3D,EAAI+qD,aAAappB,EAAO9qC,IAChCugE,EAAYz1B,EAAOoZ,OAAS,KAE5Bsc,GAASA,EAAMljE,KAAOkjE,EAAMljE,GAAGyC,SAC/BygE,EAAMtc,MAAQqc,EACTz1B,EAAOu1B,QACRl3D,EAAIirD,UAAUoM,EAAMxgE,GAAIgxD,IAG5B74D,EAAKoD,KAAK,6BAA8BuvC,EAAO9qC,MAIvD8E,EAAK6mD,MAAMngD,QAAQ,SAAUpV,GACzB,IAAIwvD,EAAQz8C,EAAI6pD,aAAa58D,EAAK4J,IAE9B4lD,GAASA,EAAMtoD,KAAOsoD,EAAMtoD,GAAGyC,SAC1B3J,EAAKiqE,QACNl3D,EAAIkrD,UAAUzO,EAAM7mD,IAAKiyD,GAE7BpL,EAAMtoD,GAAGS,QAAQ3H,EAAKqqE,KAAK,GAC3B7a,EAAMpnB,MAAQpoC,EAAKooC,OAGnBrmC,EAAKoD,KAAK,2BAA4BnF,EAAK4J,MAInDmJ,EAAIyjD,cACJzjD,EAAIykD,cAxEA8S,CAAgB57D,GAGhBA,EAAKe,MACL1B,EAASi8D,EAAat7D,EAAKe,OAE3Bu6D,IAqER,SAASrf,EAAc/oD,GACnB0gD,EAAW1gD,EACXrC,QAAQ6V,QAAQoyD,EAAU,SAAUU,GAChC,IAAIriB,EAAQlmD,EAAGyF,IAAI8iE,EAAGriB,QAAU,GAC5B0kB,EAAM5qE,EAAGsB,IAAI4kD,EAAM2kB,YACvBD,GAAOA,EAAI3oE,KAKnBrC,QAAQC,OAAO,UACd+E,QAAQ,qBACL,CAAC,OAAQ,WAAY,YAAa,eAAgB,mBAC9C,aAAc,mBAElB,SAAUkB,EAAQqK,EAAYlK,EAAMyU,EAAMpQ,EAAOs3B,EAAMioB,GASnD,OARAznD,EAAO0D,EACPsI,EAAW+B,EACXnQ,EAAKiG,EACLwT,EAAKiB,EACLnY,EAAM+H,EACN9H,EAAKo/B,EACLggB,EAAMiI,EAEC,CACHz2B,SAAUA,EACV8qC,OAAQA,EACR15C,KAAMA,EACNw1B,yBAA0BA,EAC1B0uB,aAAcA,EACdZ,UAAWA,EACXc,YAAaA,EACba,eAAgBA,EAChBE,gBAAiBA,EACjBmB,sBAAuB,WAAcx/D,GAAQ,GAC7C46C,MAAO,CACHC,OAAQ0jB,EACRkB,YAAahB,EACbiB,aAAchB,EACdiB,YAAahB,EACbiB,UAAWhB,EACXiB,SAAUhB,EACVrwB,WAAYswB,GAGhBzX,eAAgBA,EAChB3H,cAAeA,MAjZ/B;CCAC,WACG,aAEA,IAAI5oD,EAAMrC,EAASmuC,EAAYluC,EAAIkG,EAAIuT,EAAI1J,EAAOxN,EAAK6pC,EAAKjmC,EAAM3D,EAmB9D4oE,EACAt3B,EAEAlsB,EAAS4jC,EApBT7I,EAAW,SAAU3gD,GACrB,MAAO,QAAUA,EAAI,KAGrBqpE,EAAO,SACPC,EAAQ,iBACRC,EAAQ,gBACRC,EAAY,CACRnqE,MAAO,KAEXoqE,EAAS,IACTC,EAAS,GAETC,EAAWD,EAAS,GAEpBE,GAAa,EACbC,GAAc,EAMlB,SAASC,EAAgB7hE,EAAIc,GACzB,IAEIC,EAAQC,EAAMC,EAFdE,EAAIlF,EAAGkB,YAAY6C,EAAIc,GACvBghE,EAAM9hE,EA6EV,OA3EAmB,EAAEpD,QAAQqjE,GAAM,GA2ET,CACH/kE,MA1EJ,WACI,OAAO8E,GA0EP4gE,MA3DJ,WACI5gE,EAAEpB,QAEFoB,EAAEhI,OAAO,OAAO4E,QAAQ,UAAU,GAClCoD,EAAEhI,OAAO,OAAO4E,QAAQ,QAAQ,GAChCoD,EAAEhI,OAAO,OAAO4E,QAAQ,UAAU,GAElCgD,EAASI,EAAE7D,KAAK9G,OAAO,WACvBwK,EAAOG,EAAE7D,KAAK9G,OAAO,SACrByK,EAASE,EAAE7D,KAAK9G,OAAO,YAmDvByJ,QAhDJ,WACIhE,EAAG0F,aAAamgE,IAgDhBxgE,aAzEJ,SAAiBvJ,GACb,OAAOgJ,EAAO5H,OAAOpB,IAyErB0J,WAtEJ,SAAiB1J,GACb,OAAOiJ,EAAK7H,OAAOpB,IAsEnB2J,aAnEJ,SAAiB3J,GACb,OAAOkJ,EAAO9H,OAAOpB,IAmErBiqE,aAhDJ,SAAsBC,EAAShH,GAC3B,IAAIiH,EAAcC,EACdp3B,EAAW,EAEf,IAAKk3B,EAED,OADA9pE,EAAKoD,KAAK,mDACH,KACJ,IAAKyF,IAASG,EACjB,OAAO,KAcX,SAASihE,EAAYjrE,GACjB,QAAIA,EAAS,MAGT6J,EAAK9J,MAAM,SAAUC,EAAS,OAE3B,GAGX,OApBAgK,EAAE7D,KAAKpG,MAAM,MAAO+qE,EAAU,MAC9B9gE,EAAE7D,KAAKpG,MAAM,SAAU,MACvB8J,EAAK9J,MAAM,SAAU,MAErBgrE,EAAeD,EAAU9gE,EAAEhK,UAC3BgrE,EAAUpsE,EAAGkB,WAAWyqE,GAAUvqE,SAE9B+qE,IACAn3B,EAAWm3B,EAAeC,GAYzBC,EAAYrsE,EAAGqH,UAAU4D,EAAM,UAAY+pC,IAI5CkwB,GAAO95D,EAAEhK,SAAW8jE,GACpBmH,EAAYrsE,EAAGqH,UAAU4D,EAAM,WAAaG,EAAEhK,SAAW8jE,IAEtD95D,EAAEhK,WAmBjB,SAASkrE,EAAaC,GACbA,GACD/gB,EAAO7/C,aAAa,MAExB6/C,EAAO7/C,aAAa,OAAO3D,QAAQ,cAAc,GAGrD,SAASc,EAAQC,EAAO0/B,EAAOx/B,GAC3B,IAAIC,EAAKH,EAAM3F,OAAO,MAQtB,SAAS+F,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAG5CF,EAAQ,SAVa,iBAAVs/B,EACDA,EAAMlkC,QAAQ,KAAM,KAEpBkkC,GAOa,MACvBt/B,EAAQ,QAASF,GAGrB,SAASq/B,EAAUv/B,EAAOgG,GACtB,IAAIw5B,GAAU,EAWd,OATAx5B,EAAKy5B,UAAU/yB,QAAQ,SAAUrK,GAGzBm9B,EAFM,MAANn9B,GACOrC,EAhCT3F,OAAO,MAAMA,OAAO,MAAMkG,KAAK,UAAW,GAAGlG,OAAO,OAiCxC,IAEV0F,EAAQC,EAAOgG,EAAK25B,WAAWt9B,GAAI2D,EAAK45B,WAAWv9B,KACzC,KAGXm9B,EAyCX,IAAIikC,EAAe,CACfz3B,OAAQ,QACRj5B,KAAM,UAGV,SAAS2wD,EAAc19D,GAGnBy8C,EAAOwgB,QAEP,IAOIU,EACAC,EARAp+D,EAAMi9C,EAAOjgD,aAAa,OACrBvD,QAAQ,kBAAkB,GAC1B5E,OAAO,OACZyI,EAAQ2/C,EAAOjgD,aAAa,MACvBvD,QAAQ,aAAa,GAE1Be,EADQyiD,EAAO9/C,WAAW,SACZtI,OAAO,SAIzBqW,EAAGO,SAASzL,EAAMQ,EAAK6V,SAAW,YAAc,IAChD/Y,EAAMxI,KAAK0L,EAAKlD,QAEhB8gE,EAAU59D,EAAK49D,WAEXD,EAAQ,WACJ,IAAI5uC,EAAM,GACVA,EAAI0uC,EAAaG,IAAY59D,EAAK9E,GAClCzH,EAAG6C,MAAMsnE,EAAS7uC,IAGtBvvB,EAAIlG,GAAG,QAASqkE,GAChB7gE,EAAMxD,GAAG,QAASqkE,IAItBJ,EADUhkC,EAAUv/B,EAAOgG,IAI/B,SAAS69D,EAAa5oD,GAClBwnC,EAAOwgB,QAEP,IAAIngE,EAAQ2/C,EAAOjgD,aAAa,MAE5BxC,EADQyiD,EAAO9/C,WAAW,SACZtI,OAAO,SAEzByI,EAAMxI,KAAKs/C,EAAS,yBACpB3+B,EAAIvO,QAAQ,SAAUC,EAAGlE,GACrB1I,EAAQC,EAAOyI,EAAI,EAAGkE,KAE1B42D,IAGJ,SAAS5C,EAAU1wD,GACf,IAAImsB,EAAS3kC,GAAGC,OAAO,IAAM8qE,GACxB9qE,OAAO,eACP2C,OAAO,OACP4E,QAAQ,aAAa,GAC1BokC,EAAInH,OAAOE,EAAQomC,EAAQ,IAAMvyD,EAAE/O,GAAI+O,EAAEiW,IAAKjW,EAAEjN,GAAIiN,EAAEkhC,IAG1D,SAAS2yB,IACLhB,GAAc,EACdiB,IAGJ,SAASC,IACLlB,GAAc,EACVD,GACAoB,IAKR,SAASva,EAAY1jD,GAsBjB,SAASk+D,IACLrlD,EAAQthB,QAAQkG,OAChBob,EAAQqkD,aAAab,EAAYK,IAtHzC,SAAyB18D,GACrB6Y,EAAQokD,QAER,IAAIz9D,EAAMqZ,EAAQrc,aAAa,OACtBvD,QAAQ,QAAQ,GAChB5E,OAAO,OACZyI,EAAQ+b,EAAQrc,aAAa,MAE7BxC,EADQ6e,EAAQlc,WAAW,SACbtI,OAAO,SACrBwhB,EAAU7V,EAAK6V,SAAW,OAE9BnL,EAAGO,SAASzL,EAAKqW,EAAS,GAAI,EAAG,CAAC,EAAG,IAErC/Y,EAAMxI,KAAK0L,EAAKlD,OAChBy8B,EAAUv/B,EAAOgG,GAEjBm+D,IA+EAC,CAAgBp+D,GA0BZy8C,EAAOllD,QAAQsN,YACf43C,EAAO4hB,KAAKH,GAEZA,IAzBR,SAAS9pB,EAAcnhD,GACnB,IACIqG,EADa,UAANrG,GACK4lB,EAAQthB,QAAQsN,cAAgB5R,EAC5C+jD,EAAYpD,EAALt6C,EAAc,OAAmB,QACxCglE,EAAS1qB,EAAS,oBAQtB,OANIt6C,EACA9F,EAAI4L,UAAU,kBAEdm/D,IAEJv9D,EAAMA,MAAMg2C,EAAO,IAAMsnB,GAClBhlE,EAiBX,SAASilE,IACL/qE,EAAI4L,UAAU,iBACdyZ,EAAQthB,QAAQmB,KAAK+jD,EAAO+hB,IAGhC,SAASP,IACDplD,EAAQthB,QAAQsN,YAChB43C,EAAO4hB,KAAK5hB,EAAOllD,QAAQkG,MAE3Bg/C,EAAO+hB,GAAG/hB,EAAOllD,QAAQkG,MAQjC,SAASsgE,IACLthB,EAAOllD,QAAQmB,OAInB,SAASylE,IACL,IAAIx3D,EAAI81C,EACJgiB,EAVGhtE,GAAGC,OAAO,IAAM6qE,GAAO9/D,OAAOmI,wBAUT/M,OAAS8kE,EAErCh2D,EAAE+3D,KAAO,CAAEF,GAAInC,EAAYgC,KAAMI,EAASjzD,QAASizD,GAEnD93D,EAAEg4D,MAAQ,SAAUv+D,EAAGpD,GACnB,IACI+H,EADA65D,EAAKj4D,EAAE+3D,KAIP35D,EADA9T,EAAGsB,IAAIyK,GACC,WACJA,IACA2J,EAAEu2D,aAAav2D,EAAE+3D,KAAKlzD,UAGlB,WACJ7E,EAAEu2D,aAAav2D,EAAE+3D,KAAKlzD,UAG1BozD,EAAGpzD,UAAYpL,GACfw+D,EAAGpzD,QAAUpL,EACbuG,EAAEpP,QAAQiB,KAAKoI,aAAaC,SAAS,KAChC/F,KAAK,MAAOiK,GACZ3S,MAAM,MAAOwsE,EAAGpzD,QAAU,OAE/BzG,KAIR4B,EAAE03D,KAAO,SAAUrhE,GAAM2J,EAAEg4D,MAAMh4D,EAAE+3D,KAAKL,KAAMrhE,IAC9C2J,EAAE63D,GAAK,SAAUxhE,GAAM2J,EAAEg4D,MAAMh4D,EAAE+3D,KAAKF,GAAIxhE,IAG9C,SAASs3C,EAAqBrhD,GAC1B,IACI+jD,EAaJ,OAVAA,EAAOpD,GADPipB,EAHiB,UAAN5pE,GAGS4pE,IAAe5pE,GACN,SAAW,WAEpC4pE,EACIC,GACAmB,IAGJF,IAEJ/8D,EAAMA,MAAMg2C,EAAO,IAAMpD,EAAS,qBAC3BipB,EAIX,SAAStgB,IACL8f,EAAajlE,EAAKtB,aAAe6mE,EACjC9jD,EAAUkkD,EAAgBR,EAAOE,GACjChgB,EAASsgB,EAAgBP,EAAOC,GAEhC0B,IAjOAp5B,EAAc5F,EAAWxtC,iBACrB,WACI,MAAO,CACHC,EAAGZ,EAAQa,YACXC,EAAGd,EAAQe,aAEhB,WACC,IAAIH,EAAIinB,EAAQqkD,aAAab,EAAYK,GACrCmC,EAAKhmD,EAAQthB,QAAQsN,YAErB6C,GADO9V,GAAKitE,EAAKxC,EAAazqE,EAAIgrE,EAAW,IAChCiC,EAAKpiB,EAAOiiB,KAAKlzD,QAAU6wD,EAC5C5f,EAAOygB,aAAax1D,KA0NhC,SAASm0C,IACLhjC,EAAQ1d,UACR0d,EAAU,KAEV4jC,EAAOthD,UACPshD,EAAS,KACTqgB,GAAc,EACd/3B,IAIJl0C,QAAQC,OAAO,UACd+E,QAAQ,mBACL,CAAC,OAAQ,UAAW,aAAc,YAAa,eAAgB,eAC3D,eAAgB,mBAAoB,gBAAiB,cACrD,aAEJ,SAAUkB,EAAQE,EAAWipC,EACnBhpC,EAAMmE,EAAMsQ,EAAMmf,EAASvvB,EAAO2jC,EAAO5jC,EAAQu3B,GAavD,OAZAx/B,EAAO0D,EACP/F,EAAUiG,EACVkoC,EAAae,EACbjvC,EAAKiG,EACLC,EAAKkE,EACLqP,EAAKiB,EACL3K,EAAQ8pB,EACRt3B,EAAM+H,EACN8hC,EAAM6B,EACN9nC,EAAOkE,EACP7H,EAAKo/B,EAEE,CACH0pB,WAAYA,EACZV,cAAeA,EACfkhB,gBAAiBA,EAEjBrZ,YAAaA,EACbtP,cAAeA,EACfoD,YAAa+mB,EAEbjqB,qBAAsBA,EACtBopB,cAAeA,EACfG,aAAcA,EACdC,eAAgBA,EAChBE,iBAAkBA,EAClBrD,UAAWA,EAEXmE,cAAe,WAAc,OAAOriB,EAAOllD,QAAQsN,aACnD0yC,eAAgB,WAAc,OAAO1+B,EAAQthB,QAAQsN,aAErDo3C,cAAe,SAAU/oD,GAAU0gD,EAAW1gD,OAzb9D;CCAC,WACG,aAEA,IAAI8N,EAAOxN,EAEPogD,EAAW,SAAU3gD,GACrB,MAAO,WAAaA,EAAI,KAGxB8rE,EAAyB,KAG7B,SAASC,IACL,QAAKD,IAILA,GAAyB,EACzBvrE,EAAI4L,UAAU,kCACd4B,EAAMA,MAAM4yC,EAAS,4BACd,GAGX,SAASqrB,EAAoBj/D,GACzBxM,EAAI4L,UAAU,wBAAyBY,GACvCgB,EAAMA,MAAM4yC,EAAS,uBAAyB,IAAM5zC,EAAK/F,KACzD8kE,GAAyB,EAI7BluE,QAAQC,OAAO,UACd+E,QAAQ,8BACL,CAAC,eAAgB,mBAEjB,SAAUi1B,EAASvvB,GAIf,OAHAyF,EAAQ8pB,EACRt3B,EAAM+H,EAEC,CACHq0D,qBAAsB,SAAUxM,KAChCkN,wBAAyB,aACzBrU,cAAe,SAAU/oD,GAAU0gD,EAAW1gD,GAE9C8rE,iBAAkBA,EAClBC,oBAAqBA,MA5CrC;CCDC,WACG,aAEA,IAAI5rE,EAAWwyD,EAEXjS,EAAW,SAAU3gD,GACrB,MAAO,aAAeA,EAAI,KAI1B6iB,EAAU,CACVs1B,UAAW,kBACXv1B,QAAS,QACTsgB,QAAS,WAAc,OAAOyd,EAAS,4BAEvCsrB,SAAU,WACN7rE,EAAKmB,MAAM,uCAGf2qE,WAAY,WACRtZ,EAAKmZ,mBACL3rE,EAAKmB,MAAM,yCAGf2iD,MAAO,CACHC,OAAQ,WACJ,OAAOyO,EAAKmZ,oBAEhBtF,aAAc,SAAU9xD,GACpB,OAAQA,EAAKw3D,WAAW,cAE5Br0B,WAAY,SAAUz8B,GAClBu3C,EAAKoZ,oBAAoB3wD,IAE7BwtD,WAAY,SAAU5oE,GAClB0gD,EAAW1gD,EACX2yD,EAAK5J,cAAc/oD,MAK/BrC,QAAQC,OAAO,UACVulB,IAAI,CAAC,OAAQ,qBAAsB,8BAEpC,SAAUtf,EAAQs0C,EAAO0jB,GACrB17D,EAAO0D,EAEP8uD,EAAOkJ,EADD1jB,EAEFhnB,SAASvO,MAhDzB;CCCC,WACG,aAEA,IAAIziB,EAAMpC,EAAIuC,EAAK+2C,EAAKsI,EAAKhd,EAAK3wB,EAE9Bb,EAEA0nD,EAASsT,EAAYzQ,EAAa0Q,EAElC1rB,EAAW,SAAU3gD,GACrB,MAAO,SAAWA,EAAI,KAW1B,SAASssE,IACL,OAAO3Q,EAAY5zD,OAEvB,SAASwkE,EAAO/9D,GACZ,OAAO49D,EAAWzQ,EAAYntD,IAYlC,SAASgrD,EAAc79C,GACdA,EAAEuY,aACC4kC,IAAYn9C,IACZm9C,EAAUn9C,EACV27B,EAAI4M,MAAMglB,UAAU,CAChBjhE,GAAI0T,EAAE1T,GACNwF,MAAOkO,EAAElO,MACTkH,KAAMgH,EAAEhH,QAMxB,SAAS8kD,EAAa99C,GACbA,EAAEuY,aACC4kC,IACAA,EAAU,KACVxhB,EAAI4M,MAAMilB,YAMtB,SAASlM,EAAa/iC,GAClB,IAGIhkB,EAHA3Q,EAAKxD,KACLyqE,EAASjnE,GAAqB,MAAfA,EAAG64B,QAClBtyB,EAAKtN,GAAG6d,MAAM8X,aAAe,GAGjC,IAAI/iB,EAAI8pD,iBAAiBpvD,GAAzB,CAcA,GAVI0gE,EACAt2D,EAAI1X,GAAGC,OAAO8G,GAEd6L,EAAI5H,OAAO3B,KAAK,SAAU6L,GAClBA,IAAMwmB,IACNhkB,EAAI1X,GAAGC,OAAO8G,EAAKxD,SAK3Bm4B,GAAqB,SAAdA,EAAIzsB,MAQX,OAPI2+D,EAAWlyC,EAAIlzB,KACfylE,EAAevyC,EAAIlzB,MAEnBolE,EAAWlyC,EAAIlzB,KAAO,CAAEkzB,IAAKA,EAAK30B,GAAIA,GACtCo2D,EAAYxrD,KAAK+pB,EAAIlzB,WAEzB+/D,IAIJ,GAAK7wD,EAAL,CAQA,GAJIs2D,IACAH,GAAe,GAGfvgE,EAAGoyB,UAAYhoB,EAAElQ,QAAQ,YAGzB,OAFAymE,EAAevyC,EAAIjyB,SACnB8+D,IAICj7D,EAAGoyB,UACJkmB,GAAY,GAGhBgoB,EAAWlyC,EAAIjyB,IAAM,CAAEiyB,IAAKA,EAAK30B,GAAIA,GACrCo2D,EAAYxrD,KAAK+pB,EAAIjyB,IAErBiO,EAAElQ,QAAQ,YAAY,GAClBkQ,EAAElQ,QAAQ,WACVoL,EAAIyyC,mBAAmB3pB,GAE3B6sC,MAGJ,SAAS3f,IACLuU,EAAYloD,QAAQ,SAAUxL,GAChBzJ,GAAGC,OAAO,KAAOwT,EAAI+jB,OAAO/tB,IAClCjC,QAAQ,YAAY,KAE5B+gE,IAGJ,SAAS0F,EAAexkE,GACpB,IAAIiyB,EAAMkyC,EAAWnkE,GACjBiyB,IACA17B,GAAGC,OAAOy7B,EAAI30B,IAAIS,QAAQ,YAAY,UAC/BomE,EAAWnkE,GAClBjK,EAAG+7B,gBAAgB9xB,EAAI0zD,GACvBvqD,EAAIyyC,mBAAmB3pB,EAAIA,MAInC,SAASkqB,EAAYsoB,GACjB,IAAIC,EAAkC,EAArBhR,EAAY5zD,OAU7B,OARAqJ,EAAI5H,OAAOxD,QAAQ,YAAY,GAC/BomE,EAAa,GACbzQ,EAAc,GACdvqD,EAAIyyC,qBACC6oB,GACD3F,IAGG4F,EA6BX,SAAS5F,IACL,IAgBIh6D,EAhBAu/D,EAAO3Q,EAAY5zD,OAClBukE,EAEe,IAATA,GAaPv/D,EAAOw/D,EAAO,GAAGryC,IAErB95B,EAAKmB,MAAM,qCAAsCwL,GA5CrD,SAAwBA,GACpB,IAAI6/D,EAAY7/D,EAAKU,MACjB6O,EAAU,CACN7O,MAAOm/D,EACP3kE,GAAI8E,EAAK9E,IAGC,SAAd2kE,IACAtwD,EAAQtV,IAAM+F,EAAK/F,IACnBsV,EAAQuwD,SAAW9/D,EAAK6sD,OAAO3xD,GAC/BqU,EAAQwwD,SAAW//D,EAAKoxB,OAAOl2B,GAC/BqU,EAAQywD,WAAahgE,EAAKozD,QAEA,SAAtBpzD,EAAK6sD,OAAOnsD,MACZ6O,EAAQ0wD,YAAa,GAErB1wD,EAAQ0wD,YAAa,EACrB1wD,EAAQ2wD,WAAalgE,EAAKqzD,UAIlC7/D,EAAI4L,UAAU,iBAAkBmQ,GAwBhC4wD,CAAengE,KAIf6yC,EAAIgrB,aAAajP,GA9KrB,SAA4Bv0D,GACxB,IAAK,IAAIoI,EAAE,EAAG0G,EAAEo2D,IAAQ98D,EAAE0G,EAAG1G,IACzB,GAAI+8D,EAAO/8D,GAAG0qB,IAAIzsB,QAAUrG,EACxB,OAAO,EAGf,OAAO,EA+KH+lE,CAAmB,UACJ,IAAXb,IACA1sB,EAAI8nB,UAAU,CACVz/D,GAAI,gBACJglB,IAAK,eACLljB,GAAI64B,EAAIwqC,cACRl1B,GAAI,WAAc,OAAOyI,EAAS,6BAErB,GAAV2rB,KACP1sB,EAAI8nB,UAAU,CACVz/D,GAAI,oBACJglB,IAAK,QACLljB,GAAI64B,EAAIyqC,qBACRn1B,GAAI,WAAc,OAAOyI,EAAS,+BAlB9CrJ,EAAI4M,MAAM+kB,YAAYtN,GACtB/b,EAAImrB,qBAfJzzB,EAAI4M,MAAM6kB,cACVnpB,EAAIirB,kBAuCR,SAASna,EAAY3jD,GACjB,IAAIy6D,EAAUxpE,EAAGuX,IAAIxI,EAAKy6D,UAAY,GACtC5nB,EAAI6qB,cAAc19D,GAClBuqC,EAAImwB,eAAeD,EAASz6D,EAAMA,EAAK45B,WAAgB,KACvD2Q,EAAI4M,MAAM8kB,aAAaj8D,GACvB6yC,EAAImrB,mBAGR,SAASrP,IACL,OAAO4Q,IAGX,SAASnR,EAAcn7D,GACnB,IAAIstE,EAAKjB,EAET,OADAA,IAAiBrsE,EACVstE,EAGX,SAASC,IACL,IAAI36B,EAAU,GACV6W,EAAQ,GACR+jB,EAAQ,GAgBZ,OAdA5vE,QAAQ6V,QAAQ24D,EAAY,SAAU14D,GAClC,IAAIsD,EAAItD,EAAEwmB,IACNvmB,EAAIqD,EAAEvJ,MAEA,WAANkG,IACAi/B,EAAQziC,KAAK6G,EAAE/O,IACfulE,EAAMx2D,EAAE/O,IAAM+O,EAAErC,MAEV,SAANhB,IACA81C,EAAMt5C,KAAK6G,EAAE/O,IACbulE,EAAMx2D,EAAE/O,IAAM+O,EAAErC,QAIjB,CACHi+B,QAASA,EACT6W,MAAOA,EACP+jB,MAAOA,GAKf5vE,QAAQC,OAAO,UACd+E,QAAQ,oBACL,CAAC,OAAQ,YAAa,mBAAoB,qBAC1C,mBAAoB,qBAAsB,iBAE1C,SAAUkB,EAAQG,EAAMqE,EAAO8vC,EAAOyP,EAAOjjB,EAAO3tB,GAkBhD,OAjBA7W,EAAO0D,EACP9F,EAAKiG,EACL1D,EAAM+H,EACNgvC,EAAMc,EACNwH,EAAMiI,EACNjlB,EAAMgC,EACN3yB,EAAMgF,EAWC,CACHwlD,WAVJ,SAAoBtM,GAChB/+C,EAAM++C,EACDic,IApRbtT,EAAU,KACVsT,EAAa,GAEbC,IADA1Q,EAAc,MA2RN2B,cAJJ,aAMI5M,YAAaA,EAEb8I,cAAeA,EACfC,aAAcA,EACdwD,aAAcA,EACdwP,eAAgBA,EAChBroB,YAAaA,EACb2iB,aAAcA,EAEdjO,QAAS,WAAc,OAAOA,GAC9B6C,YAAa,WAAc,OAAOA,GAClCD,kBAAmBA,EAEnBP,cAAeA,EACfoS,iBAAkBA,EAClBnmB,SAAUA,EACV4B,cAAe,SAAU/oD,GAAU0gD,EAAW1gD,OA7T9D;CCAC,WACG,aAEA,IAAIG,EAAMpC,EAAIyZ,EAAIxF,EAAK1R,EAKnBktE,EAAaC,EAHbC,EAAQ,sBACRC,EAAW,GAKf,SAASC,EAAsBr+C,GAC3B,IAAI81B,EAAS,GACTtjC,EAAM,GAMVwN,EAAM/b,QAAQ,SAAUnR,GACpB,IALSoR,EAKLimB,EAAM,OAASr3B,EAAKq3B,IAEpBr3B,EAAK2f,QAITqjC,EAAO,IAAM3rB,GAAOr3B,EAAKmZ,SAAW,gBACpC6pC,EAAO3rB,IAZEjmB,EAYSpR,EAAKoR,EAXhB1V,EAAGuX,IAAI7B,GAAKA,EAAEyd,KAAK,IAAMzd,GAYhCsO,EAAI7R,KAAKwpB,MAGbliB,EAAGiE,eAAe4pC,GAClB7tC,EAAG2K,SAASsrD,EAAa1rD,GAAK,GAGlC,SAAS8rD,EAAiBptD,EAAGqtD,GACzB,IAAI5uE,EACAuhB,IACAvhB,EAAQ,GACRvB,QAAQ6V,QAAQiN,EAAG,SAAUzZ,EAAOD,GAChC7H,EAAM,UAAY6H,GAAOC,IAE7B8mE,EAAI5uE,MAAMA,IAIlB,SAAS6uE,EAAev4C,EAAGs4C,GACvBA,EAAI/nE,QAAQ,QAAUyvB,GAAG,GAyD7B,SAASw4C,EAAQxnC,GACb,IAAI9yB,EAAI8yB,EAAMh5B,OAAS,QACnBrE,EAAIq9B,EAAMioB,KAAO,CAAC,EAAG,GACrB3rC,EAAK0jB,EAAM9jB,MAAQ,EAEnB8qD,EAAYrsE,OAAO,KACd4E,QAAQ2N,GAAG,GACXrM,KAAK,YAAa2K,EAAI+B,UAAU5K,IAChChI,OAAO,QACPC,KAAKolC,EAAMplC,MACXlC,MAAM,YAAcyuE,EAAW7qD,EAAI,MAKhD,SAASmrD,EAAO5xD,GACZlc,EAAKmB,MAAMosE,EAAQ,iCAAkCrxD,EAAQ6xD,OAGjE,SAASC,EAAO9xD,GACZ,IACIpX,EAAM0oB,EAAMhf,EAAKwhB,EAASoB,EAAQgC,EAClChE,EAAO6+C,EAAMC,EAFbvhE,EAAOuP,EAAQvP,KAGfwhE,EAAW,GACXlsD,EAAO,GACP7e,EAAO,GAeX,SAASgrE,EAAGz9D,GACRvN,EAAK2M,KAAKvB,EAAM,MAAQmC,EAAO,qBAd9BhE,GAIL7H,EAAO6H,EAAK0hE,UACZ7gD,EAAO7gB,EAAK2hE,UACZl/C,EAAQziB,EAAKyiB,MACb6+C,EAAOthE,EAAKshE,KACZC,EAAOvhE,EAAKuhE,KACZ1/D,EAAM++D,EAAQ,IAAMzoE,EAAO,MAE3B9E,EAAKmB,MAAM,sBAAwB2D,EAAO,IAAK0oB,GAM1C4B,GAAOg/C,EAAG,SACVH,GAAMG,EAAG,QACTF,GAAME,EAAG,QAEVhrE,EAAKuE,OACL3H,EAAKoZ,MAAMhW,EAAK2tB,KAAK,QAIzB08C,EAAsBr+C,GAEtBA,EAAM/b,QAAQ,SAAUrK,GACpBmlE,EAASnlE,EAAEuwB,KAAO,CACdjZ,EAAGtX,EAAEqmB,OACL4e,EAAGjlC,EAAE6Y,OAAS,OAAS7Y,EAAEuwB,OAIjC00C,EAAK56D,QAAQ,SAAUC,GACnB2O,EAAK3O,EAAEzL,IAAMyL,IAGjB0c,EAAUk+C,EAAKl+C,QACfoB,EAAS88C,EAAK98C,QACdgC,EAAQ86C,EAAK96C,QAGTi6C,EAAYtuE,MAAM,UAAWq0B,GAG7BpD,GACAA,EAAQ3c,QAAQ,SAAUm2C,GACtB,IAlIMA,EAAK+kB,EAAKJ,EAWpB7rD,EAAGpb,EAAMymE,EAVTa,EACAj7D,EACAvK,EACA+kD,EACAnuC,EACAnhB,EACAF,EACA8V,EACAkwC,EACAkqB,EAwHQF,EAAMtsD,EAAKunC,EAAI3hD,IAlIb2hD,EAmIGA,EAlIbglB,GADoBL,EAmIGA,IAnIRI,EAmIGA,GAlIGrsE,MACrBqR,EAAIi2C,EAAIn8C,OAAS,QACjBrE,EAAIwgD,EAAI8E,KAAO,CAAC,EAAG,GACnBP,EAAMvE,EAAInjB,MACVzmB,EAAM2uD,EAAI3uD,KAAO,CAAC,GAAI,IACtBnhB,EAAImhB,EAAI,GACRrhB,EAAIqhB,EAAI,GACRvL,EAAKk6D,EAAIG,WAAa,EACtBnqB,EAAKgqB,EAAIpuD,MACTsuD,EAAM58D,EAAI+B,UAAU5K,GAGpBu7C,IACAkqB,GAAO58D,EAAIsO,MAAMokC,EAAIA,IAGzBjiC,EAAI+qD,EAAYrsE,OAAO,KAClB4E,QAAQ2N,GAAG,GACXrM,KAAK,YAAaunE,GAEvBvnE,EAAO,CACHjI,MAAOR,EACPO,OAAQT,EACRukB,aAAc,IAAM0rD,EAAMvgC,GAG9B0/B,EAAMrrD,EAAEthB,OAAO,OAAOkG,KAAKA,GAC3BwmE,EAAiBc,EAAMluD,EAAGqtD,GAC1BC,EAAeW,EAAIj/C,KAAMq+C,GAGrB/vE,EAAGuX,IAAIo5D,EAAII,WACXJ,EAAII,SAASt7D,QAAQ,SAAUU,GAC3By6D,EAAQL,EAASp6D,EAAE7R,MACnBgF,EAAO,CACHjI,MAAOR,EACPO,OAAQT,EACRukB,aAAc,IAAM0rD,EAAMvgC,EAC1Bt6B,UAAW9B,EAAI+B,UAAUG,EAAEu6C,MAE/Bqf,EAAMrrD,EAAEthB,OAAO,OAAOkG,KAAKA,GAC3BwmE,EAAiBc,EAAMluD,EAAGqtD,GAC1BC,EAAeW,EAAIK,YAAajB,KAIpC5f,GACAzrC,EAAEthB,OAAO,QACJC,KAAK8sD,GACL7mD,KAAK,CAAEtH,EAAGnB,EAAI,EAAGsO,EAAGxO,EAAI8V,MAqF7B+c,GACAA,EAAO/d,QAAQw6D,KAtDf7tE,EAAKoD,KAAKmqE,EAAQ,0BA2D1B,SAASzkB,EAAYqJ,EAAO0c,EAAUC,GAClC,IAAIhqE,EAAOgqE,GAAW,UACtBzB,EAAclb,EACdmb,EAAcuB,EAEd7uE,EAAKib,KAAKsyD,EAAQ,iCAAiCzoE,EAAK,QAExD3E,EAAI4L,UAAU,qBACd5L,EAAI4L,UAAU,oBAAqB,CAAEjH,KAAMA,IAI/CtH,QAAQC,OAAO,UACd+E,QAAQ,oBACL,CAAC,OAAQ,YAAa,eAClB,iBAAkB,mBAEtB,SAAUkB,EAAQG,EAAMyU,EAAMzB,EAAO3O,GAOjC,OANAlI,EAAO0D,EACP9F,EAAKiG,EACLwT,EAAKiB,EACLzG,EAAMgF,EACN1W,EAAM+H,EAEC,CACH4gD,YAAaA,EACbuI,mBAAoByc,EACpBxc,mBAAoB0c,MA1NpC;CCAC,WACG,aAEA,IAAIhuE,EAAMpC,EAAIgxC,EAAK9qC,EAAIozC,EAAKrQ,EAAK71B,EAO7B04C,EAASqlB,EAASC,EAAaC,EAAUC,EAAQC,EAJjD5uB,EAAW,SAAU3gD,GACrB,MAAO,UAAYA,EAAI,KAKvBkF,EAAO,YACPsqE,EAAU,aACVC,EAAM,yBACNC,EAAU,eAIVC,EAAM,CACNzuB,EAAG,CAAEj5C,GAAI,cAAeglB,IAAK,YAAa2iD,MAAM,GAChD5uB,EAAG,CAAE/4C,GAAI,eAAgBglB,IAAK,eAAgB2iD,MAAM,GACpDxuB,EAAG,CAAEn5C,GAAI,cAAeglB,IAAK,YAAa2iD,MAAM,GAChDtuB,EAAG,CAAEr5C,GAAI,YAAaglB,IAAK,eAAgB2iD,MAAM,GACjDpuB,EAAG,CAAEv5C,GAAI,cAAeglB,IAAK,WAAY2iD,MAAM,GAC/CluB,EAAG,CAAEz5C,GAAI,YAAaglB,IAAK,UAAW2iD,MAAM,GAC5C9tB,EAAG,CAAE75C,GAAI,aAAcglB,IAAK,QAAS2iD,MAAM,GAC3C5tB,EAAG,CAAE/5C,GAAI,aAAcglB,IAAK,eAC5Bi1B,EAAG,CAAEj6C,GAAI,aAAcglB,IAAK,UAAW2iD,MAAM,GAE7CttB,EAAG,CAAEr6C,GAAI,cAAeglB,IAAK,YAAa2iD,MAAM,GAChDptB,EAAG,CAAEv6C,GAAI,cAAeglB,IAAK,aAC7By1B,EAAG,CAAEz6C,GAAI,kBAAmBglB,IAAK,iBACjC+1B,EAAG,CAAE/6C,GAAI,gBAAiBglB,IAAK,eAE/Bk2B,EAAG,CAAEl7C,GAAI,eAAgBglB,IAAK,eAG9B4iD,EAAa,CACb,IAAK,YAAa,QAClB,KAEJA,EAAaA,EAAWC,OAAOtxE,GAAG4W,IAAIu6D,GAAK/nE,QAG3C,IAAImoE,EAAoB,CAChBxmB,MAAO,EACP3jC,QAAS,EACT4jC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRM,MAAO,EACPE,MAAO,EACPP,OAAQ,EACRh6B,GAAI,EACJi6B,IAAK,EACLQ,KAAM,UACNN,QAAS,GAEbkmB,EAAW,CACPpqD,QAAS,IACT2jC,MAAO,IACPC,OAAQ,IACRC,MAAO,IACPC,OAAQ,IACRC,OAAQ,IACRh6B,GAAI,IACJi6B,IAAK,KAGb,SAASh5C,EAAKu/C,GACV/+C,EAAM++C,EAQV,WACIif,EAAclrE,EAAG+8B,UACb/8B,EAAG48B,SAAS0uC,EAASO,GAAoB,CAAC,SAAS,GAEvD3vE,EAAKmB,MAAM,gCAAiC6tE,GAEvCA,IACDA,EAVGxxE,QAAQkI,OAAO,GAAIiqE,GAWtB7rE,EAAGk9B,SAASouC,EAASJ,GACrBhvE,EAAKmB,MAAM,uCAAwC6tE,IAGvDxxE,QAAQ6V,QAAQu8D,EAAU,SAAU77D,EAAGD,GACnC,IAAI+7D,EAAMN,EAAIx7D,GACd87D,IAAQA,EAAIL,OAASR,EAAYl7D,MArBrCg8D,GAwCJ,SAASC,EAAah8D,GAClB,OAAO,WACH,OAAQnW,EAAGsB,IAAI6U,EAAE+jC,IAAM/jC,EAAE+jC,KAAO/jC,EAAE+jC,IAAM,KAAO/jC,EAAEnN,IAAM,KAI/D,SAAS8C,EAAU9C,GACf,IAAImN,EAAIg7D,EAAQ75D,IAAItO,GACpBmN,EAAEqwB,IAAMslB,EAAQhgD,UAAUqK,EAAElM,GAAIkM,EAAE8Y,IAAK9Y,EAAEpK,GAAIomE,EAAah8D,IAG9D,SAASq3B,EAAUxkC,EAAKopE,GACpB,IAAIj8D,EAAIg7D,EAAQ75D,IAAItO,GAChBopE,GAAoBpyE,EAAG8E,aAC3BqR,EAAEu3B,IAAMoe,EAAQte,UAAUr3B,EAAElM,GAAIkM,EAAE8Y,IAAK9Y,EAAEy7D,KAAMz7D,EAAEpK,GAAIomE,EAAah8D,KAwCtE,SAASk8D,EAAqBtK,EAAKr/D,GAC/B,IAAI4pE,EAAY,GACZpK,EAAKloE,EAAGyF,IAAIiD,IAAgB,GAC5Bq6D,EAAQ/iE,EAAGuX,IAAI2wD,EAAGtiB,YAAc,GAEhCl9C,IAAgBA,EAAYk9C,UAC5BxjD,EAAKoD,KAAKisE,EAAM,iCAEhB,CAAC,MAAO,eAAgB,eAAeh8D,QAAQ,SAAUS,GACrDlW,EAAG+7B,gBAAgB7lB,EAAG6sD,KAI9B95B,EAAIx8B,cACJ4kE,EAAS5tD,QAET8uD,EAAiB,OAAQxK,GAEpBhF,EAAMh5D,QAMPsnE,EAASrpE,QAAQ,SAAS,GAC1BpI,QAAQ6V,QAAQstD,EAAO,SAAU/5D,GAC7B,IAAIC,EAAOikC,EAAKje,EAAKirB,GAEU,EAA3B23B,EAAW/nE,QAAQd,GACnBspE,EAAUngE,KAAKnJ,IAGfC,EAAQP,EAAYM,GACpBkkC,EAAM66B,EAAM,IAAM/+D,EAClBimB,EAAMqqB,EAAIwuB,UAAUC,EAAK9+D,EAAMgmB,KAC/BirB,EAAK,WACD,IAAIs4B,EAAOvpE,EAAMixC,GAEjB,OADUl6C,EAAGsB,IAAIkxE,GAAQA,IAASA,GACrB,KAAOxpE,EAAM,KAE9BqoE,EAASvlE,UAAUohC,EAAKje,EAAKhmB,EAAM8C,GAAImuC,MAG/C9mC,EAAIwvC,UAAUl6C,KAxBd2oE,EAASvjC,QAAQ4jC,GACjBL,EAASrpE,QAAQ,SAAS,GAC1BoL,EAAIwvC,aAyBJ0vB,EAAUvoE,QACV3H,EAAKoD,KAAKisE,EAAM,mCAAoCa,GAI5D,SAAS9lC,KAvHL2kC,EAAU3wE,GAAG4W,IAAIu6D,IACTl8D,QAAQ,SAAUzM,EAAKC,GAC3B,IAAI8F,EAAOqE,EAAIqzC,eAAez9C,GAC1BwpE,EAAOzjE,EAAK,GAEhB9F,EAAMD,IAAMA,EACZC,EAAM8C,GAAKgD,EAAK,GAEhB9F,EAAMixC,GAAK,WACP,OAAOl6C,EAAGsB,IAAIkxE,GAAQA,IAAS,GAAKA,KAgH5C1mB,EAAU9a,EAAIxE,cAActlC,GAzF5BsmC,EAAU,KACVA,EAAU,KACVA,EAAU,KACVse,EAAQje,eAERL,EAAU,KACVA,EAAU,KACVA,EAAU,KAAK,GACfA,EAAU,KACV1hC,EAAU,KACV0hC,EAAU,KAAK,GAiFfse,EAAQj0C,SA7ER21B,EAAU,KACV1hC,EAAU,KACVA,EAAU,KACVA,EAAU,KACVggD,EAAQje,eACR/hC,EAAU,KAGd,WACIggD,EAAQje,eAER,IAAI/H,EAAO,CAAC,CACJ7W,IAAK,YACLiW,QAASyd,EAAS,cAClB52C,GAAI,WACAutC,EAAIsvB,YAAY,KAAMyJ,MAGlCd,EAAUj4B,EAAIovB,aAAa5iC,EAAMusC,GACjCf,EAASxlB,EAAQne,YAAY,gBAAiB7H,GA4D9C2sC,IACApB,EAAWvlB,EAAQj0C,UACVi2B,QAAQ4jC,GACjBL,EAASrpE,QAAQ,SAAS,GAEtBopE,EAAYtlB,QACZA,EAAQt/C,OAERs/C,EAAQrkD,OAIhB,SAASsmC,IACLiD,EAAIjD,eAAe7mC,GACnBoyC,EAAIwxB,wBAGR,SAASnlB,EAAY38C,GACjB,IAAImN,EAAIg7D,EAAQ75D,IAAItO,GAEhBmN,GACIA,EAAEu3B,KACFv3B,EAAEu3B,IAAI9H,aAKlB,SAAS2sC,EAAiBvpE,EAAK+E,GAC3B,IAAIwxC,EAAQr5C,EAAG48B,SAAS0uC,EAASO,GACjCxyB,EAAMv2C,QAAerD,IAARoI,GAAqBwxC,EAAMv2C,GAAO+E,EAC/C7H,EAAGk9B,SAAS,aAAcmc,GAG9B,SAAS2F,IACL4G,EAAQv4C,SACRg/D,EAAiB,WAGrB,SAAS1mB,EAAWpa,GACZA,EACAqa,EAAQt/C,OAERs/C,EAAQrkD,OAIhB,SAAS0kD,EAAcC,GACnB,IAAI57C,EAAM+gE,EAAsB,SAAK,EACjCmB,EAAiB,OAATtmB,EAAiB,EAAImlB,EAAQnlB,KAAU,EACvC,GAARsmB,GAAaA,EAAOpB,EAAO3sD,SAC3BnU,EAAMkiE,GAEVpB,EAAO/qC,cAAc/1B,GAGzB,SAAS80C,EAAM90C,GACPA,EAAM8gE,EAAO3sD,QAAUnU,IAAQ8gE,EAAO/qC,iBACtC+qC,EAAO/qC,cAAc/1B,GAI7B5Q,QAAQC,OAAO,UACV+E,QAAQ,qBACT,CAAC,OAAQ,YAAa,iBAAkB,eACpC,qBAAsB,oBAE1B,SAAUkB,EAAQG,EAAM8xC,EAAO3tC,EAAMgwC,EAAOqP,GAQxC,OAPArnD,EAAO0D,EACP9F,EAAKiG,EACL+qC,EAAM+G,EACN7xC,EAAKkE,EACLkvC,EAAMc,EACNnR,EAAMwgB,EAEC,CACH72C,KAAMA,EACN45B,cAAeA,EACfuB,eAAgBA,EAChB4X,YAAaA,EACbT,cAAeA,EACf2G,WAAYA,EACZM,cAAeA,EACflB,aAAc8mB,EACdzsB,MAAOA,EACP0F,cAAe,SAAU/oD,GAAU0gD,EAAW1gD,OAnT9D;CCAC,WACG,aAEA,IAAIG,EAAM2N,EAAOxN,EAAK6Q,EAElBuvC,EAAW,SAAU3gD,GACrB,MAAO,UAAYA,EAAI,KAIvB2wE,EAAkB,CACd,iBACA,kBACA,mBAEJC,EAAiB,GAEjBC,EAAc,KACdC,EAAY,KACZC,EAAkB,EAItB,SAAS/nB,EAAc/oD,GACnBG,EAAKmB,MAAM,oCAEXqvE,EAAiB,EADjBjwB,EAAW1gD,GAEE,sBACT0gD,EAAS,qBACTA,EAAS,sBAIjB,SAASqwB,EAAsB3R,GACP,UAAhBwR,EACAI,IACuB,YAAhBJ,IACFxR,GAAuB,YAAdyR,GACVI,KAMZ,SAASD,IACL,IAAIpY,EAAMznD,EAAI0nD,UAOV1nD,EAAIsqD,qBACJn7D,EAAI4L,UAAU,yBAA0B,CACpC6V,IAAK5Q,EAAIuqD,cACTwV,MAPiB,UAAdL,GACHjY,GAAsB,WAAdA,EAAIprD,MAMUorD,EAAI5wD,GAAK,KAK3C,SAASipE,IACL,IAAIrY,EAAMznD,EAAI0nD,UASV1nD,EAAIsqD,qBACJn7D,EAAI4L,UAAU,wBAAyB,CACnC6V,IAAK5Q,EAAIuqD,cACTwV,MATiB,YAAdL,IAA2BjY,GACpB,SAAdA,EAAIprD,OACU,WAAdorD,EAAIprD,OACU,SAAdorD,EAAIprD,MAM+B,GAATorD,EAAI5wD,KAOtC,SAASmpE,EAAcC,GACnB,SAAKR,IAAiBQ,GAA0B,gBAAhBR,KAIhCA,EAAcC,EAAY,KAC1BvwE,EAAI4L,UAAU,iBACd4B,EAAMA,MAAM4yC,EAAS,4BACd,GAGX,SAAS2wB,IACLT,EAAc,cACdC,EAAY,KACZvwE,EAAI4L,UAAU,oBAAqB,CAC/BolE,YAAaZ,EAAgBI,KAEjChjE,EAAMA,MAAM6iE,EAAeG,IAC3BA,GAAmBA,EAAkB,GAAK,EAG9C,SAASS,IACLX,EAAcC,EAAY,QAC1BG,IACAljE,EAAMA,MAAM4yC,EAAS,oBAGzB,SAAS8wB,IACLZ,EAAcC,EAAY,UAC1BI,IACAnjE,EAAMA,MAAM4yC,EAAS,oBAGzB,SAAS+wB,IACe,YAAhBb,IACAC,EAAY,KACZvwE,EAAI4L,UAAU,4BACd4B,EAAMA,MAAM4yC,EAAS,wBAI7B,SAASgxB,IACe,YAAhBd,IACAC,EAAY,KACZvwE,EAAI4L,UAAU,4BACd4B,EAAMA,MAAM4yC,EAAS,wBAI7B,SAASixB,IACe,YAAhBf,IACAC,EAAY,KACZvwE,EAAI4L,UAAU,gCACd4B,EAAMA,MAAM4yC,EAAS,wBAI7B,SAASkxB,EAAa9kE,GAClB8jE,EAAc,UACdC,EAAY,KACZvwE,EAAI4L,UAAU,eAAgBY,GAC9BgB,EAAMA,MAAM4yC,EAAS,uBAAyB,IAAM5zC,EAAK/F,KAK7D,SAASomE,IACL,IAAI0E,EAAK1gE,EAAIuqD,cAEbp7D,EAAI4L,UAAU,gBAAiB,CAC3B4lE,IAAKD,EAAG,GACRE,IAAKF,EAAG,GACR9vD,IAAK8vD,IAETjB,EAAc,UACdC,EAAY,KACZ/iE,EAAMA,MAAM4yC,EAAS,yBAGzB,SAASjI,EAAahlC,GAClB,IAAI9S,EAAS+/C,EAASjtC,EAAE8kC,YAAc,SAAW,aAEjDj4C,EAAI4L,UAAU,eAAgB,CAC1BiqC,MAAO1iC,EAAE0iC,MACTqB,QAAS/jC,EAAE+jC,QACXzwC,IAAK0M,EAAE1M,IACPirE,MAAOv+D,EAAE8kC,cAEbq4B,EAAc,UACdC,EAAY,KACZ/iE,EAAMA,MAAM4yC,EAAS,UAAY,IAAM//C,GAG3C,SAAS63C,EAAe/kC,GACpBnT,EAAI4L,UAAU,iBAAkB,CAC5BiqC,MAAO1iC,EAAE0iC,MACTqB,QAAS/jC,EAAE+jC,QACXzwC,IAAK0M,EAAE1M,IACPirE,MAAOv+D,EAAE8kC,cAEbq4B,EAAc,UACdC,EAAY,KACZ/iE,EAAMA,MAAM4yC,EAAS,UAAY,IAAMA,EAAS,gBAGpD,SAAS0sB,IACL,IAAIyE,EAAK1gE,EAAIuqD,cAEbp7D,EAAI4L,UAAU,uBAAwB,CAClC+D,IAAK4hE,EAAG5iE,MAAM,EAAG4iE,EAAG/pE,OAAS,GAC7BmuD,IAAK4b,EAAGA,EAAG/pE,OAAS,GACpBia,IAAK8vD,IAETjB,EAAc,UACdC,EAAY,KACZ/iE,EAAMA,MAAM4yC,EAAS,uBAAyB,IAAMA,EAAS,UAGjE,SAASnH,IACLj5C,EAAI4L,UAAU,gBAAiB,IAC/B0kE,EAAc,UACdC,EAAY,KACZ/iE,EAAMA,MAAM4yC,EAAS,WAAa,IAAMA,EAAS,WAKrD/iD,QAAQC,OAAO,UACd+E,QAAQ,qBACL,CAAC,OAAQ,eAAgB,mBAEzB,SAAUkB,EAAQ+zB,EAASvvB,GAKvB,OAJAlI,EAAO0D,EACPiK,EAAQ8pB,EACRt3B,EAAM+H,EAEC,CACHo0D,YAAa,SAAUvM,GAAS/+C,EAAM++C,GACtCiN,eAAgB,aAEhBgU,cAAeA,EACfE,eAAgBA,EAChBE,oBAAqBA,EACrBC,mBAAoBA,EACpBC,eAAgBA,EAChBC,eAAgBA,EAChBC,0BAA2BA,EAC3BC,aAAcA,EAEdb,sBAAuBA,EAEvB5D,cAAeA,EACfC,qBAAsBA,EACtB30B,aAAcA,EACdD,eAAgBA,EAChBe,cAAeA,EAEfwP,cAAeA,MA7O/B;CCDC,WACG,aAEA,IAAI5oD,EAAMk3C,EAAK1U,EAEX+d,EAAW,SAAU3gD,GACrB,MAAO,YAAcA,EAAI,KAMzB6iB,EAAU,CACVs1B,UAAW,UACXv1B,QAAS,eACTsgB,QAAS,WAAc,OAAOyd,EAAS,kBAGvCsrB,SAAU,WACN7rE,EAAKmB,MAAM,8BAGf2qE,WAAY,WACRtpC,EAAIwuC,eAAc,GAClBhxE,EAAKmB,MAAM,gCAGfimE,QAAS,CACL0K,gBAAiB,CACbjlD,IAAK,UACLirB,GAAI,WAAc,OAAOyI,EAAS,6BAClC52C,GAAI,SAAUgD,GAAQ61B,EAAI4uC,wBAG9BW,mBAAoB,CAChBllD,IAAK,mBACLirB,GAAI,WAAc,OAAOyI,EAAS,gCAClC52C,GAAI,SAAUgD,GAAQ61B,EAAI6uC,wBAIlC/qE,YAAa,CACT0rE,EAAG,CACCroE,GAAI,WAAc64B,EAAIwuC,eAAc,IACpCl5B,GAAI,WAAc,OAAOyI,EAAS,6BAClC1zB,IAAK,WAGTolD,EAAG,CACCtoE,GAAI,WAAc64B,EAAI0uC,kBACtBp5B,GAAI,WAAc,OAAOyI,EAAS,uBAClC1zB,IAAK,gBAETqlD,EAAG,CACCvoE,GAAI,WAAc64B,EAAI4uC,uBACtBt5B,GAAI,WAAc,OAAOyI,EAAS,+BAClC1zB,IAAK,WAETslD,EAAG,CACCxoE,GAAI,WAAc64B,EAAI6uC,sBACtBv5B,GAAI,WAAc,OAAOyI,EAAS,gCAClC1zB,IAAK,oBAETha,UAAW,CACPlJ,GAAI,WAAc64B,EAAI8uC,kBACtBx5B,GAAI,WAAc,OAAOyI,EAAS,gCAClC1zB,IAAK,UAET9Z,WAAY,CACRpJ,GAAI,WAAc64B,EAAI+uC,kBACtBz5B,GAAI,WAAc,OAAOyI,EAAS,gCAClC1zB,IAAK,UAETulD,EAAG,CACCzoE,GAAI,WAAc64B,EAAIgvC,6BACtB15B,GAAI,WAAc,OAAOyI,EAAS,8BAClC1zB,IAAK,mBAGT22B,UAAW,CACP,IAAK,IAAK,IAAK,IAAK,YAAa,aAAc,MAIvDM,MAAO,CACHC,OAAQ,WACJ,OAAOvhB,EAAIwuC,eAAc,IAG7BppE,MAAO,WACH46B,EAAIwuC,iBAERqB,OAAQ,SAAU1lE,GACd61B,EAAIouC,yBAER0B,MAAO,SAAU/W,GACb/4B,EAAIouC,wBACJ15B,EAAIqwB,gBAAgB,uBAGxBgL,UAAW,SAAUh3D,GACjBinB,EAAIouC,uBAAsB,IAE9B4B,SAAU,WACNhwC,EAAIouC,uBAAsB,IAG9BvK,aAAc,SAAU9xD,GACpB,OAASA,EAAKw3D,WAAW,cAE7Br0B,WAAY,SAAUz8B,GAClBjb,EAAKmB,MAAM,oCAAqC8Z,GAChDunB,EAAIivC,aAAax2D,IAErBwtD,WAAY,SAAU5oE,GAClB0gD,EAAW1gD,EACX2iC,EAAIomB,cAAc/oD,MAK9BrC,QAAQC,OAAO,UACVulB,IAAI,CAAC,OAAQ,qBAAsB,qBAEpC,SAAUtf,EAAQs0C,EAAOxT,GACrBxkC,EAAO0D,EAEP8+B,EAAMgC,GADN0S,EAAMc,GAEFhnB,SAASvO,MAhIzB;CCCA,WACI,aAEA,IAAIxiB,EAAQD,EAAMpC,EAAImG,EAAMuE,EAAInI,EAC5BkX,EAAIxF,EAAK4gE,EAAMC,EAAMC,EAAMC,EAAOC,EAAOC,EAAMC,EAE/CC,EAAS7mE,EAAK8V,EAAMyU,EAEpBP,EAeJ,SAASH,EAAYtqB,GACjB,OAAO9N,EAAG8E,YAAegJ,EAAGkyB,SAAWlyB,EAAGmyB,OAG9C,SAAS5H,IACL,IAAIsuB,EAAKpuB,EAAOhW,QACZrZ,EAAKqvB,EAAOviB,YACZqkD,EAASyC,MAAMnW,GAAM,CACjB0uB,OAAQ,GACR,CACA9yD,MAAOokC,EACP2uB,QAASpsE,EAAG,GACZqsE,QAASrsE,EAAG,IAGpBgsE,EAAK78C,aAAasuB,EAAIz9C,GAGtB3G,EAAI4L,UAAU,cAAe,CACzBlE,GAAI,aACJywD,QAASL,IAgBjBz6D,QAAQC,OAAO,UAAW,CAAC,WAAY,UAAW,eACjDsC,WAAW,cAAe,CACvB,SAAU,OAAQ,YAClB,YAAa,cAAe,aAAc,eAAgB,aAC1D,iBAAkB,eAAgB,mBAAoB,eACtD,oBAAqB,oBAAqB,uBAC1C,yBAA0B,yBAA0B,kBACpD,mBAAoB,0BACpB,2BAA4B,0BAA2B,sBACvD,iCAAkC,sBAAuB,sBAEzD,SACI4uC,EAAUjrC,EAAQqa,EAClBla,EAAMoE,EAAQwC,EAAM6N,EAAM6uC,EAC1BtwC,EAAO4gB,EAASvvB,EAAOk/C,EACvBgsB,EAAQC,EAAQC,EAChBC,EAASC,EAASC,EAClBC,EAAQC,EACRC,EAAc9mC,EAAc+mC,EAAOC,EAAQC,EAC3CC,GAEA,IACIp0D,EACApI,EAFAtU,EAAS6a,EAAOza,SAGhB+kD,EAAS,CACL3xB,UAAW,WAAc,OAAOA,GAChCP,OAAQ,WAAc,OAAOA,IAGrCl2B,EAAS0uC,EACT3uC,EAAO0D,EAEP9F,EAAKiG,EACLE,EAAOkE,EACPK,EAAKmC,EACLtK,EAAM+H,EACNmP,EAAKiB,EACLzG,EAAMgF,EAEN47D,EAAOW,EACPV,EAAOW,EACPV,EAAOW,EACPV,EAAQW,EACRV,EAAQW,EACRV,EAAOW,EACPV,EAAOW,EAGHxwE,EAAO+wE,WACP/wE,EAAOgxE,aACPhxE,EAAOixE,gBAEPl0E,EAAOm3C,WAAa,CAChBxwC,IAAK1D,EAAO+wE,UACZj+B,MAAO9yC,EAAOgxE,YACd78B,QAASn0C,EAAOixE,cAChB78B,WAAYp0C,EAAOo0C,aAI3Br3C,EAAOqoD,aAAe,WArG9B,IAAoBhoC,EAAAA,EAsGG1iB,EAAGkB,WAAWiF,EAAKtB,cArGtCiwE,EAAKnqB,OAAO,CAACjoC,EAAErhB,MAAOqhB,EAAEthB,UAwGpBiB,EAAO+lC,IAAI,WAAY,WACnBhmC,EAAKuC,IAAI,kCACTkwE,EAAKhjE,OACLnH,EAAG4C,aACHwnE,EAAK5qE,UACL6qE,EAAK7qE,UACL8rE,EAAa9rE,UACbglC,EAAahlC,YAGjBkrE,EAAU50E,GAAGC,OAAO,aACpB8N,EAAM6mE,EAAQ30E,OAAO,OACrBmZ,EAAK5Z,EAAGkB,WAAWiF,EAAKtB,cACxBzC,EAAKmB,MAAM,2BAA4BqW,GACvCrL,EAAIjF,KAAKsQ,GACToI,EAAM,CAACpI,EAAGvY,MAAOuY,EAAGxY,QA1FxB03B,EAAYvqB,EAAInL,OAAO,KAAKkG,KAAK,KAAM,mBAEvCivB,EAAS48C,EAAK78C,aAAa,CACvB/pB,IAAKA,EACLuqB,UAAWA,EACXV,YAAaA,EACbC,aAAcA,IA1ClBhU,EAAO9V,EAAInL,OAAO,QAClBqW,EAAG2K,SAASC,GAEZpQ,EAAIuiB,aAAanS,GAgIb6xD,EAAOtjE,OAEPiiE,EAAKjxE,eAELoxE,EAAMpiE,OACNqiE,EAAMriE,KAAKkiE,EAAMmB,EAAO1nE,GACxBwmE,EAAK3pB,SAAS,CAAEC,eAAgBypB,EAAKzpB,iBACrCypB,EAAKliE,KAAKrE,SAAak8C,EAAQzoC,EAAKuW,GAGpC49C,EAAKK,WAAW,qBAEhBR,EAAapjE,KAAKs8B,GAClBA,EAAat8B,KAAKojE,GAElBnB,EAAKjjE,QAELxP,EAAKuC,IAAI,mCAhKrB;CCAA,WAEI,IAAIvC,EAEAq0E,EAEJ,SAASC,EAAQ3rB,EAAGsqB,GAChB,IAAIhlC,EAAI0a,EAAE4rB,IACNhhE,EAAIo1C,EAAEknB,IACV,OAAQ5hC,GAAMA,EAAEglC,QAAWA,EAAc1/D,EAAJ06B,EAGzC,SAASumC,EAAQ7rB,EAAGsqB,GAChB,IAAI38C,EAAOg+C,EAAQ3rB,EAAGsqB,GACtB,MAAO,CAAC38C,EAAK48C,QAAS58C,EAAK68C,SAG/B,SAASsB,EAAU9rB,EAAGsqB,GAElB,OADWqB,EAAQ3rB,EAAGsqB,GACV9yD,MAGhB3iB,QAAQC,OAAO,WACV+E,QAAQ,yBAA0B,CAC/B,OAAQ,sBAAuB,0BAA2B,kBAC1D,wBAAyB,mBACzB,SAAUkB,EAAQgxE,EAAgBf,EAAOb,EAAM6B,EAAO5B,GAElD/yE,EAAO0D,EAEP,IAAIkxE,EAAiBF,EAAehvE,OAAO,CAEvCmC,GAAI,mBACJgtE,YAAa,aAEbrkE,KAAM,YACF6jE,EAAW1yE,MACNmzE,cAAc,mBAAoB,KACvCnB,EAAMnjE,OACNsiE,EAAKtiE,OACL7O,KAAKw0B,OAAS48C,EAAKgC,aAGvBC,UAAW,SAAUroE,GACjBhL,KAAKszE,WAAatoE,EAClBhL,KAAKuzE,OAASvoE,EAAKuoE,OACnBvzE,KAAKwzE,KAAOxoE,EAAKwoE,KACjBxzE,KAAKyzE,SAAWzoE,EAAK0oE,OAErB,IAAIC,EAAQ3zE,KACR4zE,EAAMf,EAAQ7yE,KAAKyzE,UACnBj1D,EAAQs0D,EAAU9yE,KAAKyzE,UAEP,QAAhBzzE,KAAKuzE,QACLvB,EAAMtuE,OACNytE,EAAK1oE,OAEL0oE,EAAK9sB,SAASr5C,EAAKwoE,KAAMxoE,EAAK6oE,YAC7B38D,KAAK,SAAU8G,GACZg1D,EAAM51D,WAAWY,GACjB3f,EAAKmB,MAAM,kCAAmCwe,GAC9C21D,EAAMG,OAAOC,OAAO,cAAc,GAClC3C,EAAK4C,WAAWJ,EAAKp1D,EAAO,QAET,SAAhBxe,KAAKuzE,QAEZpC,EAAKztE,OACLsuE,EAAMvpE,OAENupE,EAAMiC,WAAWjpE,EAAKwoE,MAAMt8D,KAAK,SAAUg9D,GACvCP,EAAML,WAAW1kD,OAASslD,EAC1BP,EAAMG,OAAOC,OAAO,cAAc,GAClC3C,EAAK4C,WAAWJ,EAAKp1D,EAAO,SAGhC2yD,EAAKztE,OACLsuE,EAAMtuE,OAENiwE,EAAMG,OAAOC,OAAO,cAAc,GAElC3C,EAAK4C,WAAW,CAAC,EAAG,GAAI,KAIhCG,kBAAmB,WACf,OAAOn0E,KAAKuzE,QAGhBpvD,UAAW,WACP,IAAIyvD,EAAMf,EAAQ7yE,KAAKyzE,UAAU,GACjCrC,EAAK4C,WAAWJ,EAAKd,EAAU9yE,KAAKyzE,UAAU,GAAO,QAI7D,OAAOf,GAAY,IAAIO,KA9FvC;ACFA;CCEA,WAEI,aAEA,IAAImB,EAEAC,EACAC,EAEJ,SAASzlE,IACLylE,EAAc,IACdD,EAAsB53E,GAAGC,OAAO,iBAG3B2C,OAAO,QACPC,KAAK,aAEVi1E,IAGJ,SAASC,EAAcC,GACnBJ,EAAoB7oE,UAAU,eAAeM,SAC7CwoE,EAAcG,EAAOj7C,UACrB+6C,IAGJ,SAASG,EAAiB1pE,EAAMu3B,GACxBA,IAAU+xC,EAAYtuE,OAAS,IAInCsuE,EAAYp8C,OAAOqK,EAAQ,GAC3B6xC,EAAMM,iBAAiB1pE,EAAK9E,IAE5BquE,KAGJ,SAASA,IACL,IAAIxnC,EAAYsnC,EAAoB7oE,UAAU,eACzCR,KAAKspE,GAEVvnC,EAAU5jC,QACL9J,OAAO,OACHkG,KAAK,QAAS,cACdjB,GAAG,QAASowE,GAChBr1E,OAAO,KACHC,KAAK,SAAUqS,GACZ,OAAOA,EAAExO,OAGrB4pC,EAAUnjC,OACLgC,aACAC,SAAS,KACTzO,MAAM,UAAW,GACjB0O,SAGT,SAASpI,IACMjH,GAAGC,OAAO,QAChBuH,QAAQ,sBAAsB,GAEnC,IAEI0wE,EAAwBl4E,GAAGm4E,kBAFL,oBACF,wBAGxBP,EACKzoE,aACAC,SAAS,KACTzO,MAAM,UAAW,GACjBy3E,WAAW,YAAa,SAAUljE,GAC/B,OAAOgjE,IAInB,SAAStB,EAAUyB,IAEnBj5E,QAAQC,OAAO,WACd+E,QAAQ,yBAA0B,CAC/B,+BACA,SAAUk0E,GAGN,OAFAX,EAAQW,EAED,CACHlmE,KAAMA,EACN2lE,cAAeA,EACfnB,UAAWA,EACX3vE,KAAMA,MAtFtB;CCAA,WACI,aAEA,IAAIsxE,EAEJ,SAASC,EAAWC,EAAQxyE,GAExB,IAAIsE,EAAOtE,GAAW,GAEtB1C,KAAKk1E,OAAS,GACdl1E,KAAKm1E,SAELn1E,KAAKo1E,WAAW7nE,MAAMvN,KAAMqN,WAExBrG,EAAKquE,aACLr1E,KAAKq1E,WAAaruE,EAAKquE,YAGvBH,GACAl1E,KAAKs1E,IAAIJ,GAIjBD,EAAW/rE,UAAY,CACnB8qD,MAAOghB,EACPI,WAAY,aACZG,SAAU,SAAUvqE,GAChB,GAAIorB,OAAOo/C,eAAexqE,KAAUorB,OAAOltB,UAIvC,OAHAlJ,KAAKk1E,OAAO9mE,KAAKpD,IACjBA,EAAKyqE,WAAaz1E,MACb01E,MAAM1qE,EAAKuI,IAAI,OAASvI,EAIjC,GAAIhL,KAAK01E,MAAM1qE,EAAK9E,IAChB,OAAOlG,KAAK01E,MAAM1qE,EAAK9E,IAG3B,IACI8tD,EAAQ,IADUh0D,KAAKg0D,MACKhpD,EAAMhL,MAMtC,OALAg0D,EAAMyhB,WAAaz1E,MAEdk1E,OAAO9mE,KAAK4lD,GACjBh0D,KAAK01E,MAAM1qE,EAAK9E,IAAM8tD,GAI1BshB,IAAK,SAAUtqE,GACX,IAAI2oE,EAAQ3zE,KAEZ,IAAInE,QAAQq6B,QAAQlrB,GAKhB,OAAOhL,KAAKu1E,SAASvqE,GAJrBA,EAAK0G,QAAQ,SAAUC,GACnBgiE,EAAM4B,SAAS5jE,MAM3B7F,OAAQ,SAAUkoD,GACd,IAAIzxB,EAAQz+B,EAAEiC,QAAQ/F,KAAKk1E,OAAQlhB,GACnCh0D,KAAKk1E,OAAOh9C,OAAOqK,EAAO,IAE9BhvB,IAAK,SAAUrN,GAEX,OAAKA,GAIElG,KAAK01E,MAAMxvE,IAHP,MAKf4O,KAAM,WAEF,IAAIugE,EAAar1E,KAAKq1E,WAKtB,OAHAA,EAAaA,EAAW73E,KAAKwC,MAC7BA,KAAKk1E,OAAOpgE,KAAKugE,GAEVr1E,MAEXstB,OAAQ,SAAU+nD,GACd,OAAOvxE,EAAEwpB,OAAOttB,KAAKk1E,OAAQG,IAEjCpvE,MAAO,WACHnC,EAAEuP,IAAIrT,KAAKk1E,OAAQ,SAAUt7D,GACzBA,EAAE9N,WAEN9L,KAAKm1E,UAETA,OAAQ,WACJn1E,KAAK01E,MAAQ,GACb11E,KAAKk1E,OAAS,IAElBS,OAAQ,SAAUjzE,GACd,OAAO1C,KAAKk1E,OAAO7hE,IAAI,SAAU2gD,GAC7B,OAAOA,EAAM2hB,OAAOjzE,OAKhC7G,QAAQC,OAAO,WACV+E,QAAQ,kBACT,CAAC,aAAc,YACX,SAAU+0E,EAASh6D,GAGf,OAFAq5D,EAAWlxE,OAAS6X,EAAG7X,OACvBixE,EAAQY,EACDX,KAzGvB;CCAA,WACI,aAKA,IAAIY,EAAO7pE,EAGPm/B,EACA8mC,EAFApK,GAAa,EAKb/iE,EAAY,UAIZ2iE,EAAY,CACRnqE,MAAO,KAGf,SAASw4E,EAAYC,GACjB,GAAI5qC,EACA,OAAOA,EAGX8mC,EAAe8D,EAEf,IAAIrzE,EAAU7G,QAAQkI,OAAO,GAAI0jE,EAAW,CACxC/7D,MAAO5G,IA2DX,OAHAqmC,EAAe,IArDf0qC,EAAQA,EAAM9xE,OAAO,CACjBylE,GAAI,WACAr+B,EAAa3nC,GAAGA,KACXoI,aACAC,SAtBD,KAuBCzO,MAAM,MAAO44E,SAEtB3M,KAAM,SAAU5lE,EAAUG,GACtBunC,EAAa3nC,GAAGA,KACXoI,aACAC,SA5BD,KA6BCzO,MAAM,MAAOqG,EAAW,GAAgC,MACxDqC,KAAK,MAAOlC,IAErB6E,KAAM,WAEF,GAAKo/D,EAAL,CAIA,IAAIoO,EAAkBhE,EAAa6D,cAC/BryE,EAAW,EAEXwyE,EAAgBpmE,cAChBpM,EAAWwyE,EAAgBzyE,GAAGmM,OAAOtS,OACrCoG,GAzCG,IA4CP0nC,EAAa3nC,GAAGA,KACXpG,MAAM,MA9CJ,GA8C0BqG,EAAW,MAC5C0nC,EAAa3nC,GAAGiF,SAEpB/E,KAAM,WACFynC,EAAa3nC,GAAGE,QAEpB47C,qBAAsB,SAAUrhD,GAC5B,IACI+jD,EAYJ,OATAA,GADA6lB,EAHiB,UAAN5pE,GAGS4pE,IAAe5pE,GACf,SAAW,UAE3B4pE,EACA7nE,KAAKyI,OAELzI,KAAK0D,OAGTsI,EAAMA,MAAMg2C,EAAO,kBACZ6lB,MArEV,iBAyEwBnlE,IAChBc,GAAGS,QAAQa,GAAW,GAE5BqmC,EAIXtvC,QAAQC,OAAO,WACd+E,QAAQ,2BAA4B,CACjC,oBAAqB,eACrB,SAAUwF,EAAMyvB,GAIZ,OAHA+/C,EAAQxvE,EACR2F,EAAQ8pB,EAEDggD,KAnGnB;CCAA,WACI,aAEA,IAAIb,EAAYD,EAEZlsB,EAAsB,CACtB3mC,OAAQ,WACR4mC,QAAS,QAGb,SAASmtB,EAAuBlrE,GAE5B,IAAImrE,EAAmBlB,EAAWlxE,OAAO,CACrCiwD,MAAOghB,IAGPnkC,EAAU,GAOd,OANA7lC,EAAK0G,QAAQ,SAAU0kE,GACnBA,EAAY1kE,QAAQ,SAAUs/B,GAC1BH,EAAQziC,KAAK4iC,OAId,IAAImlC,EAAiBtlC,GAGhCh1C,QAAQC,OAAO,WACd+E,QAAQ,qBAAsB,CACvB,kBAAmB,iBAAkB,0BACrC,eACA,SAAUw1E,EAAKC,EAAMnrC,EAAchpC,GA8D/B,OA5DA8yE,EAAaoB,EAEbrB,EAAQsB,EAAKvyE,OAAO,CAEhBwyE,SAAU,SACVC,oBAAoB,EACpBC,OAAQ,CACJC,MAAS,WAGbtB,WAAY,WACRp1E,KAAK22E,MAAQ32E,KAAKm2B,YAAYiE,UAC9Bp6B,KAAK22E,MAAMvB,WAAW7nE,MAAMvN,KAAMqN,YAEtCupE,SAAU,WACF52E,KAAKwD,KACLxD,KAAKwD,GAAG+B,KAAK,QAASvF,KAAK62E,gBAChB72E,KAAKwD,GAAG9G,OAAO,cACrBU,MAAM,OAAQ4C,KAAK82E,iBAExB92E,KAAK+2E,yBAGbvyE,KAAM,WACF,IAAIoO,EAAO5S,KAAKuT,IAAI,QACpB,OAAOu1C,EAAoBl2C,IAASA,GAAQ,WAEhD+7C,YAAa,WACT,IAAIzoD,EAAKlG,KAAKuT,IAAI,MACdgjE,EAAWv2E,KAAKuT,IAAI,YACxB43B,EAAa6rC,cAAc9wE,EAAIqwE,GAC/BprC,EAAa1iC,QAEjBwuE,kBAAmB,WACf,IAAI/wE,EAAKlG,KAAKk3E,kBAAkBC,aAC5BC,IAAWlxE,GAAKlG,KAAKuT,IAAI,YAAcrN,EAE3ClG,KAAKid,IAAI,CAAEk6D,WAAYC,KAE3BL,qBAAsB,WAClB,IAAI/kB,EAAc7vD,EAAG48B,SAAS,eAAgC,gBAC1DiM,EAAUhrC,KAAKuT,IAAI,WAAay+C,EAEpChyD,KAAKwD,GAAGpG,MAAM,aAAc4tC,EAAU,UAAY,WAEtDqsC,OAAQ,WACJ,IAAI5vE,EAAOzH,KAAKwD,GAChBiE,EAAK/K,OAAO,OACPU,MAAM,UAAW,IACjBwO,aACAC,SAAS,KACTzO,MAAM,UAAW,GAEtBqK,EAAK+D,UAAU,QACVpO,MAAM,cAAe,QACrBA,MAAM,OAAQ,QACdA,MAAM,UAAW,OAIvB,CACH84E,uBAAwBA,MA7F5C;CCAA,WACI,aAEA,IAAI3zE,EAAOmT,EAAIlX,EAAKwN,EAAOsrE,EAAIr7E,EAAIwC,EAAIZ,EAEnCstC,EAEAjlC,EAAK,iBACLqxE,EAAa,SACb97D,EAAa,CACTkzC,YAwIR,SAAqB3jD,GACjB,IAAIy6D,EAAUxpE,EAAGuX,IAAIxI,EAAKy6D,UAAY,IArE1C,SAAsBz6D,GAGlBmgC,EAAaqsC,eAEb,IAIIhtE,EAAM2gC,EAAassC,eAAe,OAC7BxzE,QAAQ,kBAAkB,GAC1B5E,OAAO,OACZyI,EAAQqjC,EAAassC,eAAe,MAC/BnzE,GAAG,QARA,WACR7F,EAAG6C,MAAMi2E,EAAY,CAAExkC,MAAO/nC,EAAK9E,OAQ9BjC,QAAQ,aAAa,GAE1Be,EADQmmC,EAAausC,aAAa,SACpBr4E,OAAO,SAEzBqW,EAAGO,SAASzL,EAAMQ,EAAK6V,SAAW,YAAc,IAChD/Y,EAAMxI,KAAK0L,EAAKlD,OAGKjK,EAAG0mC,UAAUv/B,EAAOgG,GApDzCmgC,EAAawsC,eAAe,MAC5BxsC,EAAawsC,eAAe,OAAO1zE,QAAQ,cAAc,IAmGzD2zE,CAAa5sE,GAxFjB,SAAwBy6D,EAASz6D,EAAM+nC,GACnC0yB,EAAQ/zD,QAAQ,SAAUxL,GACtB,IAVW+O,EACXmsB,EASIqB,EAAMwiC,EAAY/+D,GAClBglB,EAAMuX,GAAOA,EAAIvX,IACjBirB,EAAK1T,GAAOA,EAAI0T,GAChB51C,EAAOkiC,GAAOA,EAAIliC,KAElBkiC,IAfOxtB,EAgBG,CACN/O,GAAI,QAAUA,EACdglB,IAAKA,EACLirB,GAAIA,EACJnuC,GAAI,WAAcvJ,EAAG6C,MAAMf,EAAM,CAAEwyC,MAAOA,MAnBlD3R,EAAS3kC,GAAGC,OAAO,IAAMwJ,GACxBxJ,OAAO,eACP2C,OAAO,OACP4E,QAAQ,aAAa,GAC1BqzE,EAAGp2C,OAAOE,EAAQl7B,EAAK,IAAM+O,EAAE/O,GAAI+O,EAAEiW,IAAKjW,EAAEjN,GAAIiN,EAAEkhC,OA4FlDuvB,CAAeD,EAASz6D,EAAMA,EAAK9E,MAxInC++D,EAAc,CACdC,eAAgB,CACZh6C,IAAK,SACLirB,GAAI,mBACJ51C,KAAM,UAEV4kE,aAAc,CACVj6C,IAAK,YACLirB,GAAI,iCACJ51C,KAAM,QAEV6kE,aAAc,CACVl6C,IAAK,YACLirB,GAAI,iCACJ51C,KAAM,QAEV8kE,cAAe,CACXn6C,IAAK,aACLirB,GAAI,kCACJ51C,KAAM,SAEV+kE,cAAe,CACXp6C,IAAK,aACLirB,GAAI,kCACJ51C,KAAM,UAId,SAASsO,EAAKojE,GA+FVzzE,EAAIqB,aAAa4b,GA5FjB0vB,EAAe5oC,EAAM0vE,GA4EzB,SAAS4F,EAAYjmB,GACjBzmB,EAAaqsC,eAEb,IAAI1vE,EAAQqjC,EAAassC,eAAe,MAEpCzyE,EADQmmC,EAAausC,aAAa,SACpBr4E,OAAO,SAEzByI,EAAMxI,KAAK,kBACXsyD,EAAMlgD,QAAQ,SAAUyC,EAAG1G,GAf3B,SAASrI,EAAQC,EAAKC,GAClBH,EAAG9F,OAAO,MAAMkG,KAAK,QAASF,GAAK/F,KAAKgG,GAVhD,IAAiBN,EAAO0/B,EAAOx/B,EACvBC,EADSH,EAyBDA,EAzBQ0/B,EAyBDj3B,EAAI,EAzBIvI,EAyBDiP,EAAEZ,IAAI,MAxB5BpO,EAAKH,EAAM3F,OAAO,MAWtB+F,EAAQ,SATa,iBAAVs/B,EACDA,EAAMlkC,QAAQ,KAAM,KAEpBkkC,GAMa,MACvBt/B,EAAQ,QAASF,KAejBuD,IAOJ,SAASuuE,EAAc9wE,EAAIqwE,GACvB/3E,EAAI4L,UAAU,iBAAkB,CAC5BlE,GAAIA,EACJwF,MAAO6qE,IAUf,SAAS/mE,IACL,IACIwyC,EADK7W,EAAa3nC,GAAGgM,SACT,OAAS,OACzBxD,EAAMA,MAAMg2C,EAAO,kBAGvB,SAASv5C,IACL0iC,EAAa1iC,OAGjB,SAAS/E,IACLynC,EAAa3nC,GAAGE,OAGpB,SAASyC,IACL3H,EAAI4H,eAAeqV,GACnB0vB,EAAahlC,UAGjBtK,QAAQC,OAAO,WACd+E,QAAQ,0BAA2B,CAChC,2BAA4B,eAAgB,mBAAoB,eAChE,gBAAiB,YAAa,aAAc,cAE5C,SAAUwF,EAAMsQ,EAAMpQ,EAAOuvB,EAASgiD,EAAM51E,EAAM27B,EAAMl/B,GAWpD,OATA4D,EAAQ8D,EACRqP,EAAKiB,EACLnY,EAAM+H,EACNyF,EAAQ8pB,EACRwhD,EAAKQ,EACL77E,EAAKiG,EACLzD,EAAKo/B,EACLhgC,EAAKc,EAEE,CACHkQ,KAAMA,EACNmoE,cAAeA,EACfe,UAAWF,EAEXroE,OAAQA,EACR/G,KAAMA,EACN/E,KAAMA,EACNyC,QAASA,EACT0J,UAAW,WAAc,OAAOs7B,EAAat7B,aAC7CimE,YAAa,WAAc,OAAO3qC,OArMlD;CCAA,WACI,aAEA,IAAI9sC,EAAMG,EAAKuyE,EAEXt1D,EACA+yC,EAgBJ,SAASC,EAAO12C,EAAMvW,GAClBnD,EAAKmB,MAAM,qCAAsCuY,EAAM,OAAQvW,GAC/DhD,EAAI4L,UAAU,cAGlB,SAASvK,IACLrB,EAAIqB,aAAa4b,GACjBpd,EAAKmB,MAAM,8BAGf,SAASqO,IACL2gD,EAAehwD,EAAIqd,gBAAgB4yC,GACnCjwD,EAAI4L,UAAU,cACd/L,EAAKmB,MAAM,uBAGf,SAASsO,IACLtP,EAAI4L,UAAU,aACd5L,EAAI4H,eAAeqV,GACnBjd,EAAIsd,mBAAmB0yC,GACvBA,EAAe,KACfnwD,EAAKmB,MAAM,uBAIf3D,QAAQC,OAAO,WACd+E,QAAQ,oBAAqB,CAC1B,OAAQ,mBAAoB,oBAAqB,sBAEjD,SAAUkB,EAAQwE,EAAOmrE,EAAQsG,GAQ7B,OAPA35E,EAAO0D,EACPvD,EAAM+H,EA3CVkV,EAAa,CACTw8D,kBA2CAlH,EAAOW,EA1CPwG,mBAAoBnH,EACpBoH,mBAAoBpH,EACpBqH,iBAAkBrH,EAElBsH,kBAAmBtH,EACnBuH,gBAsCQN,EAtCeppB,gBA0ChB,CACH/uD,aAAcA,EACdgO,MAAOA,EACPC,KAAMA,MA9DtB;CCAA,WACI,aAEA,IAAIzP,EAAMsZ,EAAMnZ,EAEZwyE,EAAMuH,EAAMC,EAAMC,EAAMxH,EAAOyH,EAAMC,EAAOzG,EAAO0G,EACnDpuE,EAAKk8C,EAAQzoC,EAAKjX,EAAMwtB,EAG5B,SAAS3lB,EAAKmrD,EAAO6e,EAAU5e,EAAUC,EAAO7L,EAAUyqB,GA0B1D,IAA+BC,EAxB3BvuE,EAAMwvD,EACNtT,EAASuT,EACTh8C,EAAMi8C,EACN1lC,EAAS65B,EACTrnD,EAAO8xE,EAGPH,EAAM9pE,OACN8pE,EAAM7E,OAASyE,EACfC,EAAK3pE,KAAKrE,EAAKk8C,EAAQzoC,EAAKuW,EAAQxtB,GACpCiqE,EAAMoC,UAAUmF,GAChBE,EAAK7pE,KAAKrE,EAAKgqB,IACfkkD,EAAK5E,OAASyE,GACT3pD,OAAS4pD,EACdI,EAAM9E,OAASyE,EACfrG,EAAMrjE,OASqBkqE,EARLphE,EAAKhW,SAASo3E,SASpC16E,EAAKmB,MAAM,yBAA0Bu5E,GACjCA,IACAv6E,EAAI4L,UAAU,iBAAkB,CAC5Bs4B,IAAKq2C,IAGTP,EAAKQ,sBACLR,EAAKS,wBAbb,SAAS9yE,IACL+rE,EAAM/rE,UACN9H,EAAKmB,MAAM,6BAgBf,SAAS05E,EAAaluE,GAClB3M,EAAKmB,MAAM,8BAA+BwL,GAC1CgmE,EAAKkI,aAAaluE,GAGtB,SAASmuE,EAAcnuE,GACnB3M,EAAKmB,MAAM,+BAAgCwL,GAC3CutE,EAAK74D,QACLuxD,EAAMuD,cAAcxpE,EAAKypE,QACzBkE,EAAMtF,UAAUroE,GAGpB,SAASouE,EAAcpuE,GACnB3M,EAAKmB,MAAM,+BAAgCwL,GAC3CutE,EAAKxE,OAAO,aAAc/oE,GAG9B,SAASotE,EAAiBptE,GACtB3M,EAAKmB,MAAM,6BAA8BwL,GACzCutE,EAAKxE,OAAO,QAAS/oE,EAAKquE,OAG9B,SAASC,EAAWtuE,GAEhButE,EAAKtyC,OAAOj7B,GAGhB,SAASs8C,EAAe0P,GAChBA,EACAuiB,kBAAkBviB,GAOtB1G,gBAAe,GAInB,SAAS1J,EAAOsT,GACZj8C,EAAMi8C,EACNue,EAAK7xB,OAAO3oC,GAIhB,SAASgoB,EAAOuzC,GACZ39E,QAAQ6V,QAAQ8nE,EAAU,SAAUh2E,GAChCA,EAAGyiC,WAIX,SAAS6sB,IACL7sB,EAAOsyC,EAAKkB,eAGhB,SAAS3lB,IACL7tB,EAAOsyC,EAAKmB,eAGhB,SAASC,IAEL,IAAI5iB,EAAUwhB,EAAKqB,kBAAkB,SAAU5lB,GAC3C,OAAOA,EAAMzgD,IAAI,aAGrB1X,QAAQ6V,QAAQqlD,EAAS,SAAU/C,GAC/BA,EAAM6lB,kBAId,SAAS74B,IAEL,IAAI+V,EAAUwhB,EAAKqB,kBAAkB,SAAU5lB,GAC3C,OAAOA,EAAMzgD,IAAI,aAGrB1X,QAAQ6V,QAAQqlD,EAAS,SAAU/C,GAC/BA,EAAM8lB,KAAI,KAGdtB,EAAK3qE,QAGThS,QAAQC,OAAO,WACd+E,QAAQ,oBAAqB,CAC1B,OAAQ,YAAa,mBAAoB,uBACzC,qBAAsB,qBAAsB,mBAC5C,yBAA0B,mBAAoB,qBAC9C,yBAA0B,sBAAuB,yBACjD,SAAUkB,EAAQqa,EAAQ7V,EAAOorE,EAAQoI,EAAQC,EAC7CC,EAAQrI,EAASsI,EAAaC,EAAQC,EAASC,EAASC,GAExDj8E,EAAO0D,EACP4V,EAAOyE,EACP5d,EAAM+H,EACNyqE,EAAOW,EACP4G,EAAOwB,EACPvB,EAAOwB,EACPvB,EAAOwB,EACPhJ,EAAQW,EACR8G,EAAOyB,EACPxB,EAAQyB,EACRlI,EAAQmI,EACRzB,EAAQ0B,EAmBR,OAFAJ,EAAYK,qBAfC,WACT,GAAKhC,EAAKiC,iBAAV,CAIA,IAAI5oB,EAAQ,GAAGmc,OACPwK,EAAKkB,cACLlB,EAAKmB,eAGb79E,QAAQ6V,QAAQkgD,EAAO,SAAUnqD,GAC7BA,EAAKgzE,gBAMN,CAEH5rE,KAAMA,EACN+3C,OAAQA,EAERzgD,QAASA,EACT8xE,kBAAmBiB,EACnBhB,mBAAoBiB,EACpBhB,mBAAoBiB,EAEpBf,kBAAmBiB,EAEnBhyB,eAAgBA,EAChB8wB,iBAAkBA,EAElBtlB,YAAaA,EACbgB,YAAaA,EACb6lB,kBAAmBA,EACnB34B,MAAOA,MA7LvB;CCAA,WACI,aAEA,IAAIi0B,EAAYD,EAEZ0F,EAAc,GAId5xB,EAAsB,GAE1B,SAAS6xB,EAAqB3vE,EAAM8oE,GAEhC,IAAI8G,EAAiB3F,EAAWlxE,OAAO,CACnCiwD,MAAOghB,IAGPttB,EAAQ,GAOZ,OANA18C,EAAK0G,QAAQ,SAAUmpE,GACnBA,EAAWnpE,QAAQ,SAAUqG,GACzB2vC,EAAMt5C,KAAK2J,OAIZ,IAAI6iE,EAAelzB,GAG9B7rD,QAAQC,OAAO,WACd+E,QAAQ,mBAAoB,CACzB,kBAAmB,iBAAkB,mBACrC,cAAe,mBAAoB,yBAA0B,eAC7D,oBACA,SAAUw1E,EAAKyE,EAAWb,EAAQ53E,EAAIsuB,EAAIoqD,EAAO54E,EAAI64E,GA2HjD,OAzHA/F,EAAaoB,EAEbrB,EAAQ8F,EAAU/2E,OAAO,CAErBwyE,SAAU,OACVE,OAAQ,CACJC,MAAS,WAEbtB,WAAY,WACRp1E,KAAK22E,MAAQ32E,KAAKm2B,YAAYiE,UAC9Bp6B,KAAK22E,MAAMvB,WAAW7nE,MAAMvN,KAAMqN,YAEtCupE,SAAU,WACF52E,KAAKwD,IACLxD,KAAKwD,GAAG+B,KAAK,QAASvF,KAAK62E,iBAGnCloB,YAAa,WACTosB,EAAME,aAAaj7E,OAEvBwE,KAAM,WACF,IAAIoO,EAAO5S,KAAKuT,IAAI,QACpB,OAAOu1C,EAAoBl2C,IAASA,GAAQ,gBAEhD9K,MAAO,WAEH,OADY9H,KAAKuT,IAAI,SACRpQ,MAAQnD,KAAKuT,IAAI,OAAO,IAAM,WAE/C2nE,WAAY,WACR,OAAOF,EAAKznE,IAAI,UAEpBmxB,MAAO,WACH,IAAIj/B,EAAQzF,KAAKuT,IAAI,SACjBrN,EAAKlG,KAAKuT,IAAI,OAAO,IAAM,UAE3Bkc,EAAS,CAAC,IADKhqB,GAASA,EAAMtC,KAAOsC,EAAMtC,KAAO+C,IACpBA,EAAIA,EAAIlG,KAAKuT,IAAI,OAC/C4nE,EAAMn7E,KAAKk7E,aAGf,OAAOzrD,EAFI0rD,EAAM1rD,EAAOzpB,OAAUm1E,EAAM,IAI5CC,YAAa,WACT,IAEInxB,EAFAxiD,EAAOzH,KAAKwD,GACZkhC,EAAQ1kC,KAAK8pD,UAAU9pD,KAAK0kC,SAGhCj9B,EAAK/K,OAAO,QAAQ4C,KAAKolC,GACzBulB,EAAcnmD,EAAEu3E,QAAQr7E,KAAK0kC,SAA+D,EAApD1kC,KAAK+pD,kBAAkBtiD,GAAQ,GAEvEA,EAAK/K,OAAO,QACPkP,aACArG,KAAK,CACFjI,MAAO2sD,KAGnBwwB,SAAU,WAEN,GAAKz6E,KAAKwD,GAAV,CAEA,IACI83E,EAAY,EADNZ,GAGA/pD,EAAGnS,QA1FR,EA2FD88D,EA3FC,GAuFKZ,GAI8B/pD,EAAGnS,SA1FtC,GAsFKk8D,GAKO/pD,EAAGnS,UAChB88D,EA5FC,IAsFKZ,GAM8B/pD,EAAGnS,UAG3Cxe,KAAKwD,GAAG9G,OAAO,KAAK8O,UAAU,KACzBpO,MAAM,YAAa,SAAWk+E,EAAY,OAEnDC,cAAe,WACX,IAAIrnD,EAAU/xB,EAAG48B,SAAS,eAAsB,MAChD/+B,KAAKwD,GAAGpG,MAAM,aAAc82B,EAAU,UAAY,WAEtDsnD,QAAS,SAAUh4E,GACf,IAAIiE,EAAOhL,GAAGC,OAAO8G,GACjBgB,EAAOxE,KAAKwE,OAMZmc,GAFJ3gB,KAAKwD,GAAKiE,GAEGpI,OAAO,KACfkG,KAAK,QAAS,oBAGf+K,EAAOqQ,EAAEthB,OAAO,QAAQkG,KAAK,CAC7BjI,MAAO,EACPD,OAAQq9E,GACRtvE,GAAKsvE,IAGT/5D,EAAEthB,OAAO,UAAUkG,KAAK,IAAKm1E,GAE7B,IAAIe,EAAYf,KAChB/5D,EAAEthB,OAAO,OAAOkG,KAAK,CACjB4b,aAAc,IAAM3c,EACpBlH,MAAOm+E,EACPp+E,OAAQo+E,EACRx9E,GAAIw9E,EAAY,EAChBrwE,GAAIqwE,EAAY,IAGpB,IAAIC,EAAY17E,KAAK0kC,QAErB/jB,EAAEthB,OAAO,QACJC,KAAKo8E,GACLn2E,KAAK,KA9BG,GA+BRA,KAAK,KA9BG,IA+BRA,KAAK,cAAe,QAEzBvF,KAAKy6E,WACLz6E,KAAK27E,cACL37E,KAAKu7E,gBAEL,IAAItxB,EAAcnmD,EAAEu3E,QAAQr7E,KAAK0kC,SAA+D,EAApD1kC,KAAK+pD,kBAAkBtiD,GAAQ,GAC3E6I,EAAK/K,KAAK,CAAEjI,MAAO2sD,OAIpB,CACH0wB,qBAAsBA,MA5JtC;CCAA,WACI,aAEA,IAAIp4E,EAAOmT,EAAI1J,EAAOnO,EAAIY,EAGtBm9E,EAAWC,EADXC,EAAW,OAGf,SAASjtE,IACL+sE,EAAYr5E,IA+BhB,SAAS04E,EAAajwE,GA5BtB,IAAwBA,EAChB+wE,EA4BJltE,IA5BIktE,EAAS,CACTj0E,OAFgBkD,EA+BMA,GA7BVlD,QACZ28B,UAAW,CAAC,MAAO,KAAM,OAAQ,cACjCE,WAAY,CACRq3C,IAAO,MACP9mC,WAAc,aACd+mC,GAAM,KACNjnC,KAAQ,QAEZpQ,WAAY,CACRs3C,IAAK,GACLF,IAAOhxE,EAAKuI,IAAI,MAChB0oE,GAAMjxE,EAAKuI,IAAI,OAAO,GACtByhC,KAAQ,OACRE,WAAclqC,EAAKuI,IAAI,gBAI3BvI,EAAKuI,IAAI,cACTwoE,EAAOt3C,UAAUr2B,KAAK,IAAK,WAAY,aACvC2tE,EAAOt2E,MAAgB,SAAIuF,EAAKuI,IAAI,YAAYmjD,IAChDqlB,EAAOt2E,MAAiB,UAAIuF,EAAKuI,IAAI,YAAYkjD,KASrDolB,EANOE,EAUX,WACIH,EAAUnzE,OACVmzE,EAAUpE,eAEV,IAIIhtE,EAAMoxE,EAAUnE,eAAe,OAC1BxzE,QAAQ,QAAQ,GAChB5E,OAAO,OACZyI,EAAQ8zE,EAAUnE,eAAe,MAC5BnzE,GAAG,QARA,WACR7F,EAAG6C,MAAMw6E,EAAU,CAAEzmC,OAAQwmC,EAAS/zE,UAQjC7D,QAAQ,aAAa,GAE1Be,EADQ42E,EAAUlE,aAAa,SACjBr4E,OAAO,SAEzByI,EAAMxI,KAAKu8E,EAAS/zE,OACpB4N,EAAGO,SAASzL,EAAK,OAAQ,GAAI,EAAG,CAAC,EAAG,IACpC3M,EAAG0mC,UAAUv/B,EAAO62E,GAtBpBtH,GAyBJ,SAAS9rE,IACLmzE,EAAUnzE,OAGd,SAAS/E,IACLk4E,EAAUp4E,GAAGE,OAGjB,SAAS8L,IACL,IACIwyC,EADK45B,EAAUp4E,GAAGgM,SACN,OAAS,OACzBxD,EAAMA,MAAMg2C,EAAO,eAGvB,SAAS77C,IACLy1E,EAAUz1E,UAGdtK,QAAQC,OAAO,WACd+E,QAAQ,yBAA0B,CAC/B,2BAA4B,eAAgB,eAAgB,cAC5D,aACA,SAAUwF,EAAMsQ,EAAMmf,EAASn3B,EAAMk/B,GAQjC,OANAt7B,EAAQ8D,EACRqP,EAAKiB,EACL3K,EAAQ8pB,EACRj4B,EAAKc,EACLF,EAAKo/B,EAEE,CACHo9C,aAAcA,EACdpsE,KAAMA,EACNpG,KAAMA,EACN/E,KAAMA,EACN8L,OAAQA,EACRrJ,QAASA,EACT0J,UAAW,WAAc,OAAO+rE,EAAU/rE,iBA1G1D;CCFA,WACI,aAEA,IAAIxR,EAAM8D,EAAI+N,EAAKwF,EAAI1J,EAAOM,EAAIssE,EAS9Bnd,EACAC,EACAE,EATAC,GAAkB,EAClBC,EAAQ,mBACRC,EAAW,CACPh+D,KAAM,OACNT,MAAO,IAOf,SAASuxD,EAAY7jD,GACjB,IAWoBA,EAChB9E,EACAyL,EAbAzL,EAAK8E,EAAK9E,GAEd,GAAIu1D,EAAcv1D,GAEd,OAQAA,GADgB8E,EARDA,GASL9E,SACVyL,EAAI8pD,EAAcv1D,KAElBrK,QAAQkI,OAAO4N,EAAG3G,GAClBgxD,KAiKR,SAAoBvwD,GACZowD,GACAx9D,EAAKoD,KAAK,qBAAuBgK,GAjKjCwwD,CAAW,sCAAwC/1D,EAAK,MAZ5Du1D,EAAcv1D,GAAM8E,EACpB0wD,EAAUttD,KAAKpD,GACfgxD,IAeJ,SAASE,EAAUvqD,GACf,IASiBnO,EAAImO,EATjBnO,EAAK/G,GAAGC,OAAOsD,MACTwD,EAAGS,QAAQ,aAkBrBxH,GAAG+O,UAAU,aACRvH,QAAQ,uBAAuB,GAEpC20E,EAAMuD,cAAc,QAbH34E,EAJDA,EAIKmO,EAJDA,EAKpBlV,GAAG+O,UAAU,aACRvH,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACzBT,EAAGS,QAAQ,YAAY,GAEvB20E,EAAMuD,cAAcxqE,EAAEzL,KAU1B,SAASi2D,EAAc3xD,GACnBkL,EAAGO,SAASzL,EAAK,aAAc,IAAI,EAAM,CAAC,GAAI,KACzCvG,QAAQ,qBAAqB,GAatC,SAAS+3D,IACL,IAMII,EAAU,CACN9+D,MAAO,IACPD,OAAQ,GACRkO,QAAS,cAEb8wD,EAAW,CACPp+D,EAZE,EAaFmN,EAZE,EAaF9N,MAZC,IAaDD,OAZE,IAcNi/D,EAAW,CACPr+D,EAlBE,EAmBFmN,EAAGmxD,GACHj/D,MAlBC,IAmBDD,OAjBE,IAmBNm/D,EAAY,CACR9wD,MAAO,YACPzN,EApBC,GAqBDmN,EAAG,IAGPqxD,EAASb,EAAMp4D,KAAKgI,UAAU,aACzBR,KAAK0wD,EAAW,SAAU/pD,GAAK,OAAOA,EAAEzL,KAEjD,SAASw2D,EAAIvoD,GACT,MAAO,YAAcA,EAGzBsoD,EAAO32D,KAAK,SAAU6L,GAClB,IAAInO,EAAK/G,GAAGC,OAAOsD,MACfwK,EAAMhH,EAAG9G,OAAO,OAUpB,SAASigE,EAAQz2D,EAAIhB,GACjBsF,EAAI9N,OAAO,kBAAoBwJ,GAAI5G,KAAK4F,GAT5C1B,EAAGS,QAAQ,SAAU0N,EAAEy3C,QACvB5lD,EAAGS,QAAQ,QAAS0N,EAAEirD,OAEtBpyD,EAAI9N,OAAO,eAAeoP,SACtB6F,EAAE0H,YACF8iD,EAAc3xD,GAOlBmyD,EAAQ,KAAMhrD,EAAE4H,IAChBojD,EAAQ,KAAMD,EAAI/qD,EAAEkrD,aAGTJ,EAAOtzD,QACjB9J,OAAO,OACP4E,QAAQ,YAAY,GACpBA,QAAQ,SAAU,SAAU0N,GAAK,OAAOA,EAAEy3C,SAC1CnlD,QAAQ,QAAS,SAAU0N,GAAK,OAAOA,EAAEirD,QACzCt4D,GAAG,QAAS43D,GAERp2D,KAAK,SAAU6L,GACpB,IA3EkBnH,EA4EdA,EADK/N,GAAGC,OAAOsD,MACNX,OAAO,OAAOkG,KAAK62D,GAEhC5xD,EAAInL,OAAO,QAAQkG,KAAK82D,GACxB7xD,EAAInL,OAAO,QAAQkG,KAAK+2D,GAExB5mD,EAAGO,SAASzL,EAAK,OAAQ,IAAI,EAAO,CAAC,GAAI,KACpCvG,QAAQ,kBAAkB,GAlFbuG,EAoFDA,EAnFrBkL,EAAGO,SAASzL,EAAK,YAAa,IAAI,EAAM,CAAC,GAAI,KACxCvG,QAAQ,wBAAwB,GAoF7B0N,EAAE0H,YACF8iD,EAAc3xD,GAGlBA,EAAInL,OAAO,QACNkG,KAAKi3D,GACLl9D,KAAKqS,EAAEzL,IAEZ,IAAI48C,EAAK,GACT,SAASga,EAAQ52D,EAAIw+B,GACjBl6B,EAAInL,OAAO,QAAQkG,KAAK,CACpBmG,MAAO,aAAexF,EACtBjI,EAlFH,GAmFGmN,EAAG03C,IACJxjD,KAAKolC,GACRoe,GAAM,GAGVga,EAAQ,KAAMnrD,EAAE4H,IAChBujD,EAAQ,KAAMJ,EAAI/qD,EAAEkrD,aAGxBJ,EAAO32D,KAAK,SAAU6L,GAElB,IAzGWzL,EAAIkjD,EA0GX94C,EADK7T,GAAGC,OAAOsD,MACLtD,OAAO,OAAOA,OAAO,QAC/B8pC,GA3GOtgC,EA2GSyL,EAAEzL,GA3GPkjD,EA2GWz3C,EAAEy3C,OA1GzBl5C,EAAI8iB,OAAOE,SAAShtB,GAAKkjD,EAAQ98C,EAAGsB,UA4GvC0C,EAAKlT,MAAM,OAAQopC,KAGvBo1B,EAAMt+D,MAAM8+D,EAAQ9+D,MAAQo+D,EAAU11D,QACtC41D,EAAMv+D,OAAO++D,EAAQ/+D,QAErBo/D,EAAO7yD,OAAOkC,SASlB,SAASu7C,KACLuU,EAAQz5D,EAAGkB,YAAYy4D,EAAOC,IACxBtzD,OAENgzD,EAAgB,GAChBC,EAAY,GAEZpvD,EAAGmzB,YAAYu8B,GAGnB,SAASkd,EAAaluE,GAClB3M,EAAKmB,MAAM,uBAAwBwL,GAErBA,EAAKoxE,QAEX1qE,QAAQ,SAAU2qE,GACtBxtB,EAAYwtB,KAIpB,SAAS7sE,EAAOvR,GACZ,IACIqG,EACA09C,EAcJ,MAhBiB,UAAN/jD,EAKPqG,EAAKs3D,EAAMpsD,UAEXlL,EAAKg4E,QAAQr+E,IAET29D,EAAMnzD,OAENmzD,EAAMl4D,OAGds+C,EAAO19C,EAAK,OAAS,OACrB0H,EAAMA,MAAMg2C,EAAO,oBACZ19C,EAGX,SAAS6B,IACLmG,EAAGqzB,eAAeq8B,GAElB75D,EAAG0F,aAAai0D,GAChBF,EAAQ,KAERH,EAAgB,GAChBC,EAAY,GAGhB7/D,QAAQC,OAAO,WACV+E,QAAQ,uBAAwB,CAC7B,OAAQ,eAAgB,iBAAkB,eAC1C,eAAgB,eAAgB,yBAEhC,SAAUkB,EAAQsE,EAAM6O,EAAOyB,EAAMmf,EAAS9nB,EAAMssE,GAShD,OARAj8E,EAAO0D,EACPI,EAAKkE,EACL6J,EAAMgF,EACNQ,EAAKiB,EACL3K,EAAQ8pB,EACRxpB,EAAK0B,EACL4qE,EAAQ0B,EAED,CACHjzB,SAAUA,EACV6xB,aAAcA,EACd/yE,QAASA,EACTqJ,OAAQA,EACRK,UAAW,WAAc,OAAO+rD,EAAM/rD,iBA7Q1D;CCCA,WAEI,IAAIxR,EAAMpC,EAAI0K,EAAIqF,EAAOxN,EAAKw8E,EAAMrC,EAAOx2E,EAAI6uE,EAAMuL,EAAM9D,EAAMF,EAC7DxH,EAAMmB,EAAOsK,EAAMhyE,EAAK0F,EAE5B,SAASyuC,IACL,MAAO,CACHgC,EAAG,CAACC,EAAmB,uBACvBb,EAAG,CAAC08B,EAAkB,qBACtBp9B,EAAG,CAACq9B,EAAe,wBACnBz9B,EAAG,CAAC09B,EAAqB,8BACzBx9B,EAAG,CAACC,EAAe,4BACnB6B,EAAG,CAAC98B,EAAW,oBACfw7B,EAAG,CAACC,EAAa,4BACjBwB,EAAG,CAACC,EAAiB,6BACrBhB,EAAG,CAACs5B,EAAmB,uBACvB54B,EAAG,CAAC67B,EAAW,2BACfr9B,EAAG,CAACC,EAAa,0BACjBC,EAAG,CAACo9B,EAAsB,6BAC1B37B,IAAK,CAACC,EAAe,kBACrBN,UAAW,CAACC,EAAiB,qBAE7Bg8B,EAAG,WAAc5sE,EAAI8iB,OAAOQ,SAAShpB,IAErCnB,IAAKqnC,EAEL4Q,GAAI,WAAc4wB,EAAM6K,MAAM,IAC9Bv7B,GAAI,WAAc0wB,EAAM6K,MAAM,IAC9Bt7B,GAAI,WAAcywB,EAAM6K,MAAM,IAC9Br7B,GAAI,WAAcwwB,EAAM6K,MAAM,IAC9Bp7B,GAAI,WAAcuwB,EAAM6K,MAAM,IAE9BlgD,aAAcq1C,EAAMtwB,YAAYpkD,KAAK00E,GAErClkC,YAAa,CACT,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,OAAQ,KACvC,CAAC,IAAK,IAAK,IAAK,IAAK,UAAW,IAAK,IAAK,IAAK,OAC/C,KAKZ,SAASn/B,EAAK6iE,EAAQ2I,EAASrgB,GAC3B+W,EAAOW,EACPQ,EAAQmI,EACR7vE,EAAMwvD,EACNgjB,IAGJ,SAASA,EAAaC,GAElB,IAAIC,EAAKv+B,IACL22B,EAAMr5E,EAAGyF,IAAIu7E,GAEb3H,GACAxxE,EAAEgC,KAAKwvE,EAAK,SAAUpwE,EAAOD,GACnBnB,EAAEsmE,WAAWnlE,EAAK,OAChBi4E,EAAGj4E,GACH5G,EAAKoD,KAAK,YAAcwD,EAAM,mBAE9Bi4E,EAAGj4E,GAAO,CAACC,EAAM8C,GAAI9C,EAAMixC,OAM3CxvC,EAAGhC,YAAYu4E,GAEfv2E,EAAG83B,aAAa,CACZ,CAAC,QAAS,oCACV,CAAC,cAAe,0BAChB,CAAC,OAAQ,sCACT,CAAC,aAAc,iBACf,CAAC,WAAY,SAIrB,SAASiS,IAIM6nC,EAAK4E,oBACL5E,EAAK6E,iBACLpM,EAAKnhE,YACZmhE,EAAKxhE,SACE+sE,EAAK1sE,aACZ0sE,EAAK/sE,UAIb,IAAIssC,EAAa,GAEjB,SAASC,EAAiB/sC,EAAMlF,GAC5BgyC,EAAW9sC,GAAQlF,EAAI,EAAI,EAC3B3H,EAAGk9B,SAAS,cAAeyc,GAoB/B,SAAS8E,IACL,IACIy8B,GADmBrC,EAAKznE,IAAI,SAAW,GACE,EAE7CynE,EAAK/9D,IAAI,QAASogE,GAClBtM,EAAKje,cACL9mD,EAAMA,MAvBV,SAAiCu2B,GAC7B,OAAQA,GACJ,KAAK,EAAG,MAAO,qBACf,KAAK,EAAG,MAAO,8BACf,KAAK,EAAG,MAAO,yBAmBP+6C,CAAwBD,IAGxC,SAASv8B,IACL,IACIy8B,GADiBvC,EAAKznE,IAAI,SAAW,GACA,EAEzCynE,EAAK/9D,IAAI,QAASsgE,GAClBxM,EAAKje,cACL9mD,EAAMA,MAxBV,SAA+Bu2B,GAC3B,OAAQA,GACJ,KAAK,EAAG,MAAO,mBACf,KAAK,EAAG,MAAO,4BACf,KAAK,EAAG,MAAO,sBACf,KAAK,EAAG,MAAO,gCAmBPi7C,CAAsBD,IAGtC,SAASd,EAAiBx+E,GACtB06E,EAAMnpE,OAAOvR,GAGjB,SAASy+E,EAAcz+E,GACnBu+E,IAAOl9B,qBAAqBrhD,GAGhC,SAAS0+E,EAAoB1+E,GACzB89C,EAAiB,QAASi1B,EAAKxhE,OAAOvR,IAG1C,SAASmhD,IACLm9B,EAAK/sE,SAGT,SAAS2U,IACLw0D,EAAMx0D,YACNnY,EAAMA,MAAM,sBAGhB,SAAS4zC,EAAY3hD,GACjB89C,EAAiB,SAAU08B,EAAKgF,qBAAqBx/E,IACrD8yE,EAAKjd,cAGT,SAASzS,IACL7iD,EAAI4L,UAAU,mBACd4B,EAAMA,MAAM,2BAGhB,SAAS2tE,IACL5I,EAAK4I,oBACL3tE,EAAMA,MAAM,wBAGhB,SAAS4wE,IACL7L,EAAK/vB,QACLh1C,EAAMA,MAAM,cAGhB,SAASm1C,IACL+wB,EAAM1iE,SAGV,SAASkuE,EAAgB7+E,EAAQgb,GAC7B7N,EAAMA,MAAMnN,EAAS,IAAMgb,GAG/B,SAAS2lC,IAELk+B,EADSnF,EAAK/4B,cACO,OAAQ,OAAQ,SAGzC,SAASq9B,IAELa,EADSnF,EAAKsE,uBACO,OAAQ,OAAQ,mBAGzC,SAASp6B,EAASzzC,GACd3Q,EAAKoD,KAAK,yCAA2CuN,GAGzD,SAAS0zC,EAAez9C,GACpB,IAAI09C,EAEJ,OAAK19C,GAKL09C,EAAQhE,IAAY15C,IAMbhJ,EAAGuX,IAAImvC,IAAU,CAACA,EAAO,KAH5BF,EAAS,cAAgBx9C,EAAM,WACxB,OARPw9C,EAAS,OACF,MAYf5mD,QAAQC,OAAO,WACd+E,QAAQ,yBAA0B,CAC/B,OAAQ,YAAa,aAAc,eAAgB,mBACnD,oBAAqB,yBAA0B,eAC/C,uBAAwB,2BAA4B,mBACpD,qBAAsB,2BAA4B,iBAElD,SAAUkB,EAAQG,EAAM4G,EAAMgtB,EAASvvB,EAAOo3E,EAAQvD,EAAS/zE,EACrDsrE,EAAQiM,EAAQ3D,EAAQF,EAAQ8D,EAAQxD,EAASnlE,GAiBvD,OAfA7W,EAAO0D,EACP9F,EAAKiG,EACLyE,EAAKmC,EACLkD,EAAQ8pB,EACRt3B,EAAM+H,EACNy0E,EAAO2C,EACPhF,EAAQyB,EACRpJ,EAAOW,EACPxvE,EAAKkE,EACLk2E,EAAOqB,EACPnF,EAAOwB,EACP1B,EAAOwB,EACPyC,EAAOqB,EACP3tE,EAAMgF,EAEC,CACHrG,KAAMA,EACNmuE,aAAcA,EACdt6B,eAAgBA,MAhPhC;CCCA,WAEI,IAAIo7B,EAAgB,CAChBp5C,MAAO,CACHplC,KAAM,CACFquB,KAAM,WAEVrd,KAAM,CACFqd,KAAM,YAGdnpB,KAAM,CACF0b,MAAO,CACHyN,KAAM,WAEVrd,KAAM,CACFqd,KAAM,aAKlB9xB,QAAQC,OAAO,WACV+E,QAAQ,aAAc,CACnB,aAAc,iBAAkB,cAAe,mBAC/C,SAAUm0E,EAAO9kE,EAAK7N,EAAI+uE,GACtB,OAAO4D,EAAMjxE,OAAO,CAChBe,UAAW,cACXi5E,OAAQ,GACRC,QAAS,GAET5I,WAAY,SAAUpqE,EAAMvD,GACxBzH,KAAK6E,OAAS4C,EACd2pE,EAAKmJ,qBAAqBv6E,KAAKy6E,SAASj9E,KAAKwC,OAC7CA,KAAKi+E,eACLj+E,KAAKu0E,SACLv0E,KAAKk+E,eAETtH,SAAU,SAAU1sE,GAKhB,GAJiB,MAAbA,GAAiC,MAAbA,GACpBlK,KAAKm+E,YAGQ,UAAbj0E,EAAsB,CACtB,IAAI5M,EAAQ0C,KAAKg+E,QAAQ1+E,KAAKmI,OAAO0D,UAAU7N,MAAQ,GACnDD,EAAS2C,KAAKg+E,QAAQ1+E,KAAKmI,OAAO0D,UAAU9N,OAAS,GAEzD2C,KAAKg+E,QAAQ1+E,KAAKA,KAAKU,KAAKuT,IAAI,UAChCvT,KAAKg+E,QAAQ1tE,KAAK/K,KAAK,CACnBjI,MAAOA,EACPD,OAAQA,IACTD,MAAM,CACL4U,UAAW9B,EAAI+B,WAAY3U,EAAM,EAAK,MAAQD,EAAO,EAAK,UAKtE+gF,YAAa,aACb3D,SAAU,aAEV4D,YAAa,WACT,IAAIC,EAASx6E,EAAEC,OAAO,GAAI+5E,EAAe99E,KAAKuT,IAAI,WAAa,IAE3DvT,KAAKuT,IAAI,WACTvT,KAAKg+E,QAAQ1+E,KAAKlC,MAAMkhF,EAAO55C,MAAMplC,MACrCU,KAAKg+E,QAAQ1tE,KAAKlT,MAAMkhF,EAAO55C,MAAMp0B,OAGrCtQ,KAAKuT,IAAI,UACTvT,KAAK+9E,OAAO79D,MAAM9iB,MAAMkhF,EAAO95E,KAAK0b,OACpClgB,KAAK+9E,OAAOztE,KAAKlT,MAAMkhF,EAAO95E,KAAK8L,QAG3C6tE,UAAW,WACPn+E,KAAKwD,GAAGpG,MAAM,YAAa8S,EAAI+B,UAAUjS,KAAKuT,IAAI,KAAO,KACrDvT,KAAKuT,IAAI,KAAO,QAExBgrE,WAAY,WACRv+E,KAAKg+E,QAAQx6E,GAAKxD,KAAKlB,QAAQO,OAAO,KACjCkG,KAAK,QAAS,eAEnBvF,KAAKg+E,QAAQ1tE,KAAOtQ,KAAKg+E,QAAQx6E,GAAGnE,OAAO,QAC3CW,KAAKg+E,QAAQ1+E,KAAOU,KAAKg+E,QAAQx6E,GAAGnE,OAAO,QACtCC,KAAKU,KAAKuT,IAAI,UACdhO,KAAK,IAAK,SACVnI,MAAM,cAAe,UAE1B4C,KAAKg+E,QAAQ1tE,KAAK/K,KAAK,CACnBjI,MAAO0C,KAAKg+E,QAAQ1+E,KAAKmI,OAAO0D,UAAU7N,MAAQ,GAClDD,OAAQ2C,KAAKg+E,QAAQ1+E,KAAKmI,OAAO0D,UAAU9N,OAAS,KACrDD,MAAM,CACL4U,UAAW9B,EAAI+B,UAAU,OAAQ,WAGzCusE,WAAY,WACR,IAAI7uE,EAAO3P,KAAKg+E,QAAQx6E,GAAGiE,OAAO0D,UAClCnL,KAAKosB,SAAWzc,EAAKtS,OAErB2C,KAAK+9E,OAAOv6E,GAAKxD,KAAKlB,QAAQO,OAAO,KAChCkG,KAAK,QAAS,cAEnBvF,KAAK+9E,OAAOztE,KAAOtQ,KAAK+9E,OAAOv6E,GAAGnE,OAAO,QACpCkG,KAAK,CACFjI,MAAO0C,KAAKosB,SACZ/uB,OAAQ2C,KAAKosB,WAGrBpsB,KAAK+9E,OAAO79D,MAAQ7d,EAAGgpB,cAAcrrB,KAAK+9E,OAAOv6E,GAC7CxD,KAAKuT,IAAI,QAASvT,KAAKosB,UAG3B,IAAIqyD,GAAU9uE,EAAKrS,MAAQ,EAAK0C,KAAKosB,SAAW,KAC5CsyD,GAAS1+E,KAAKosB,SAAU,EAAI,KAChCpsB,KAAK+9E,OAAOv6E,GAAGpG,MAAM,CACjB4U,UAAW9B,EAAI+B,UAAUwsE,EAAOC,MAGxCT,aAAc,aACd1J,OAAQ,WACJv0E,KAAKwD,GAAKxD,KAAK6E,OAAOxF,OAAO,KACxBkG,KAAK,QAAS,eACdnI,MAAM,CACH4U,UAAW,4BAGnBhS,KAAKlB,QAAUkB,KAAKwD,GAAGnE,OAAO,KACzBkG,KAAK,QAAS,wBAEnBvF,KAAKu+E,aAEDv+E,KAAKuT,IAAI,SACTvT,KAAKw+E,aAGTx+E,KAAKq+E,cACLr+E,KAAKo+E,cACLp+E,KAAKy6E,YAETyD,YAAa,aACbpyE,OAAQ,WACJ9L,KAAKwD,GAAGsI,eA3IhC;CCAA,WAEI,IAAI4mE,EAEJ72E,QAAQC,OAAO,WACV+E,QAAQ,uBAAwB,CAC7B,kBACA,SAAUo0E,GAEN,IAAI0J,EAAkB1J,EAAWlxE,OAAO,CACpCqxE,WAAY,WACR1C,EAAW1yE,MAEfgvB,SAAU,SAAUgmD,EAAOtwC,EAAOk6C,EAAYl8E,GAC1C,GAAI1C,KAAK01E,MAAMhxC,EAAMx+B,IACjBlG,KAAKuT,IAAImxB,EAAMx+B,IAAI+W,IAAIynB,OACpB,CACH,IAAI0nB,EAAM,IAAI4oB,EAAMtwC,EAAOk6C,EAAYl8E,GACvC1C,KAAKs1E,IAAIlpB,OAKrB,OAAOsmB,GAAY,IAAIiM,KAvBvC;CCAA,WACI,aAEA,IAAIjM,EACAmM,EAEA/3E,EAAkB,CAClBwrD,QAAS,GACTC,SAAU,GACVC,OAAQ,CACJxhB,QAAS,IACTj5B,MAAO,IACP+7D,QAAS,IACTrhB,OAAQ,MAEZC,aAAc,CACVzC,OAAQ,IACRG,QAAS,IACT0uB,WAAY,IACZrsB,MAAO,IAEXE,aAAc,CACVF,MAAO,IAIX7E,EACO,CACHC,UAAW,UACX0D,QAAS,OACTC,SAAU,QAJd5D,EAWS,GAMb,SAASl9B,IACL,OAAO,EAGX70B,QAAQC,OAAO,WACd+E,QAAQ,qBACL,CACI,OAAQ,WAAY,mBAAoB,iBAAkB,qBAC1D,mBAAoB,qBAAsB,mBAC1C,sBAAuB,+BACvB,SAAUxC,EAAMgM,EAAU7L,EAAK0R,EAAKqoE,EAAME,EAAMC,EAAMtH,EAC5C2B,EAAgBqB,GAEtB,IAgQqB5pE,EAAKi0C,EAAQiI,EAAQzoC,EAAKuW,EAAQxtB,EAhQnD+3E,EAAShM,EAAehvE,OAAO,CAC/B8K,KAAM,SAAUrE,EAAKi0C,EAAQiI,EAAQzoC,EAAKuW,EAAQxtB,GAG9C,IAAIg4E,GAFJtM,EAAW1yE,MAEYi/E,wBAAwBzhF,KAAKwC,MACpDo0E,EAAM30C,YAAY,0BAA2Bu/C,GAE7Ch/E,KAAKwK,IAAMA,EAEXxK,KAAKg5E,sBAELh5E,KAAKie,IAAMA,EACXje,KAAKw0B,OAASA,EAEdx0B,KAAKoH,SAAWvL,QAAQkI,OAAO,GAAI+C,EAAiBE,GAEpDhH,KAAK1D,KAAO0D,KAAKw5E,SAASroB,MAAM3lD,UAAU,SAC1CxL,KAAKw5E,SAASpoB,WAAW5lD,UAAU,cACnCxL,KAAKyH,KAAOzH,KAAKw5E,SAASloB,MAAM9lD,UAAU,UAE9CwtE,oBAAqB,WAEjBh5E,KAAKk/E,UAAYl/E,KAAKy+C,OAEtBz+C,KAAKy+C,OAAShiD,GAAGC,OAAO,oBACnB2C,OAAO,KAAKkG,KAAK,QAAS,eAE/BvF,KAAKw5E,SAAW,CACZroB,MAAOnxD,KAAKm/E,WAAWn/E,KAAKy+C,OAAQ,eACpC2S,WAAYpxD,KAAKm/E,WAAWn/E,KAAKy+C,OAAQ,oBACzC2gC,eAAgBp/E,KAAKm/E,WAAWn/E,KAAKy+C,OAAQ,uBAC7C6S,MAAOtxD,KAAKm/E,WAAWn/E,KAAKy+C,OAAQ,eACpC4gC,WAAYr/E,KAAKm/E,WAAWn/E,KAAKy+C,OAAQ,sBAGjD0gC,WAAY,SAAUt6E,EAAQC,GAC1B,OAAOD,EAAOxF,OAAO,KAAKkG,KAAK,QAAST,IAE5Cw6E,iBAAkB,SAAUC,EAAa93E,GACrC,IAAI8uE,EAAW9uE,EAAK8L,IAAI,YACxB,OAAOvT,KAAKoH,SAASm4E,GAAahJ,IAAav2E,KAAKoH,SAASm4E,GAAa9sB,OAE9E+sB,kBAAmB,WAEfx/E,KAAKswB,MAAQ7zB,GAAGmyB,OAAO0B,QAClB1P,KAAK63D,EAAKgH,iBACVntB,QAAQtyD,KAAKoH,SAASkrD,SACtBC,SAASvyD,KAAKoH,SAASmrD,UACvBC,OAAOxyD,KAAKs/E,iBAAiB9hF,KAAKwC,KAAM,WACxC0yD,aAAa1yD,KAAKs/E,iBAAiB9hF,KAAKwC,KAAM,iBAC9C2yD,aAAa3yD,KAAKs/E,iBAAiB9hF,KAAKwC,KAAM,iBAC9C4xD,MAAM,IACNC,MAAM,IACNvtD,GAAG,OAAQtE,KAAKmzD,KAAK31D,KAAKwC,OAC1B6N,QAEL7N,KAAKgyB,KAAO9hB,EAAImgB,mBAAmBrwB,KAAKswB,MACpC,aACAtwB,KAAKwwB,UACLxwB,KAAKywB,YAAYjzB,KAAKwC,MACtB0wB,EACA0gD,GAGJpxE,KAAKimC,UAETy5C,aAAc,WACVjjF,GAAGC,OAAO,oBAAoB6I,KAAK,cAAegzE,EAAKvkB,MAAMzgD,IAAI,OAEjE,IAAIihB,EAAS/3B,GAAGC,OAAO,oBAAoB+K,OAAO0D,UAC9Cw0E,EAAa3/E,KAAKy+C,OAAOh3C,OAAO0D,UAChCqT,GAASgW,EAAOn3B,OAAS,KAAOsiF,EAAWtiF,OAC3CY,EAAKu2B,EAAOl3B,MAAQ,GAAOqiF,EAAW1hF,EAAI0hF,EAAWriF,MAAQ,GAAKkhB,EAClEpT,EAAKopB,EAAOn3B,OAAS,GAAOsiF,EAAWv0E,EAAIu0E,EAAWtiF,OAAS,GAAKmhB,EAExE4yD,EAAK4C,WAAW,CAAC/1E,EAAGmN,GAAIoT,EAAO,MAEnCohE,gBAAiB,SAAUtjF,GACvBA,EAAK8hF,YAAY5gF,KAAKlB,EAAtBA,IAEJ62D,KAAM,WAEFnzD,KAAKyH,KACAlC,KAAK,CACFyM,UAAW,SAAUL,GACjB,IAAI+M,EAAKq6C,MAAMpnD,EAAE1T,GAAK,EAAI0T,EAAE1T,EACxByU,EAAKqmD,MAAMpnD,EAAEvG,GAAK,EAAIuG,EAAEvG,EAC5B,OAAO8E,EAAI+B,UAAUyM,EAAIhM,MAIrC1S,KAAK1D,KACAwJ,KAAK9F,KAAK4/E,iBACVr6E,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAE4B,IAAI,YAAYV,KACnDtN,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAE4B,IAAI,YAAYT,KACnDvN,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAE4B,IAAI,YAAYR,KACnDxN,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAE4B,IAAI,YAAYP,MAG5DnF,MAAO,WACH7N,KAAKswB,MAAMziB,SAEfo4B,OAAQ,WAEA44C,GACAx0E,EAASf,OAAOu1E,GAEpBA,EAAcx0E,EAASrK,KAAK6/E,QAAQriF,KAAKwC,MAAO,MAEpD6/E,QAAS,WACL7/E,KAAK8yD,cACL9yD,KAAK8zD,cACL9zD,KAAKswB,MAAMziB,SAEfilD,YAAa,WACT,IAAI2mB,EAAclB,EAAKkB,cAEvBz5E,KAAKyH,KAAOzH,KAAKw5E,SAASloB,MAAM9lD,UAAU,SACrCR,KAAKyuE,EAAa,SAAU9nE,GAAK,OAAOA,EAAE4B,IAAI,QAEpCvT,KAAKyH,KAAK0B,QACpB9J,OAAO,KACPkG,KAAK,CACFW,GAAI,SAAUyL,GAAK,OAAOzB,EAAI+jB,OAAOtiB,EAAE4B,IAAI,QAC3C7H,MAAO,SAAUiG,GAAK,OAAOA,EAAEklE,gBAC/B7kE,UAAW,SAAUL,GACjB,OAAOzB,EAAI+B,UAAUN,EAAElK,KAAKxJ,EAAG0T,EAAElK,KAAK2D,IAE1CO,QAAS,IAEZyB,KAAKpN,KAAKgyB,MACVpmB,aACArG,KAAK,UAAW,GAEZO,KAAK,SAAU6L,GAAKA,EAAE6pE,QAAQx7E,KAAM2R,KAE7C3R,KAAKswB,MAAMshC,MAAM6nB,IAErB3lB,YAAa,WAET,IAAI4lB,EAAcnB,EAAKmB,cAEvB15E,KAAK1D,KAAO0D,KAAKw5E,SAASroB,MAAM3lD,UAAU,SACrCR,KAAK0uE,EAAa,SAAU/nE,GAAK,OAAOA,EAAE4B,IAAI,QAEpCvT,KAAK1D,KAAK6M,QACpB9J,OAAO,QACP+N,KAAKpN,KAAK83D,cACVvyD,KAAK,CACFsN,GAAI,SAAUlB,GAAK,OAAOA,EAAE4B,IAAI,YAAYV,IAC5CC,GAAI,SAAUnB,GAAK,OAAOA,EAAE4B,IAAI,YAAYT,IAC5CC,GAAI,SAAUpB,GAAK,OAAOA,EAAE4B,IAAI,YAAYR,IAC5CC,GAAI,SAAUrB,GAAK,OAAOA,EAAE4B,IAAI,YAAYP,IAC5C0a,OAAQkgC,EAAiB2D,QACzBkH,eAAgB7K,IAGf9nD,KAAK,SAAU6L,GAAKA,EAAE6pE,QAAQx7E,KAAM2R,KAE7C3R,KAAK1D,KAAKsN,OACLrE,KAAK,mBAAoB,OACzBnI,MAAM,UAAW,IACjBwO,aACAC,SAAS,MACTtG,KAAK,CACFmzD,mBAAoB,SAEvBt7D,MAAM,UAAW,GACjB0O,SAEL9L,KAAKswB,MAAMuhC,MAAM6nB,IAErB5hB,aAAc,WACE93D,KACN8F,KAAK,SAAU6L,GACjBA,EAAEysE,YAAY5gF,KAAKmU,EAAnBA,MAGRuhD,eAAgB,SAAUvhD,EAAGykD,GACzB,IACIC,EADAC,EAAS,GAGRF,IACDC,EAAK1kD,EAAE4kD,gBAAgB,CAAC5kD,EAAE1T,EAAG0T,EAAEvG,IAC/BkrD,EAAS,CACLr4D,EAAG0T,EAAE1T,EACLmN,EAAGuG,EAAEvG,EACLorD,SAAU,CACNC,IAAKJ,EAAG,GACRK,IAAKL,EAAG,MAIpB1kD,EAAE2kD,OAASA,EACX93D,EAAI4L,UAAU,cAAe,CACzBlE,GAAIyL,EAAE4B,IAAI,MACV7H,MAAOiG,EAAE4B,IAAI,SACbojD,QAASL,KAGjBwpB,cAAe,WACP9/E,KAAKswB,OACLtwB,KAAKswB,MAAM1P,KAAK63D,EAAKgH,kBAG7BhvD,YAAa,WACT,IAAI1mB,EAAKtN,GAAG6d,MAAM8X,YAClB,OAAqBpyB,KAAKm5D,iBAAiBpvD,IAE/CovD,iBAAkB,SAAUpvD,GACxB,OAAOA,EAAGkyB,SAAWlyB,EAAGmyB,QAE5B1L,UAAW,SAAU7e,GACjBA,EAAEmoE,KAAI,GACNpH,EAASxf,eAAevhD,GACxB+mE,EAAKtf,eAAc,IAEvB6f,qBAAsB,WAElBj5E,KAAKk/E,UAAUtzE,aACVC,SAAS,MACTzO,MAAM,UAAW,GACjB0O,SAEL9L,KAAKy+C,OACArhD,MAAM,UAAW,GACjBwO,aACAG,MAAM,KACNF,SAAS,KACTzO,MAAM,UAAW,GACjB0I,KAAK,MAAO,WACTsuE,EAAM2L,8BAGlBC,mBAAoB,WAChBhgF,KAAKk/E,UAAUtzE,aACVC,SAAS,KACTzO,MAAM,UAAW,GACjB0O,SAEL9L,KAAKy+C,OACArhD,MAAM,UAAW,GACjBwO,aACAG,MAAM,KACNF,SAAS,KACTzO,MAAM,UAAW,GACjB0I,KAAK,MAAO,WACTsuE,EAAM2L,8BAGlBd,wBAAyB,WACrBj/E,KAAKg5E,sBACLh5E,KAAKi5E,0BAQb,OAHWvG,GAAY,IAAIqM,EAAOv0E,EAAKi0C,EAAQiI,EAAQzoC,EAAKuW,EAAQxtB,MAzTpF;CCAA,WACI,aAEA,IAAI3I,EAAM42E,EAAYD,EAAO1oE,EAAI4D,EAAKkhE,EAAMqH,EAAMwH,EAC9CrkE,EAAIzZ,EAAIy2E,EAAOsH,EAIf5qB,EAAa,IACbC,EAAY94D,GAAG+hB,MAAMqS,SAChBC,OAAO,CAAC,EAAG,KACXC,MAAM,CAACukC,EAAY,GAAKA,IACxBtkC,OAAM,GAGX48B,EAAa,CACbj7B,MAAO,CACHk7B,UAAW,UACX0D,QAAS,OACTC,SAAU,QAEdz+B,KAAM,CACF86B,UAAW,UACX0D,QAAS,OACTC,SAAU,QAEdC,QAAS,GACTC,SAAU,IAGd,SAASmD,IAEL,IAAIsrB,EAAangF,KAAKghE,cAAchhE,KAAKuT,IAAI,OAAQvT,KAAKuT,IAAI,QAE1D2Y,EAAQrwB,QAAQkI,OAAO,GAAIo8E,EAAY,CACvCl7E,IAAKjF,KAAKuT,IAAI,MACd7H,MAAO,OACPjI,SAAU,CACNoP,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,KAIZhT,KAAKid,IAAIiP,GAeb,SAASk0D,EAAa34E,GAClB,MAAiC,WAAzBA,EAAK8L,IAAI,aAAmC9L,EAAK8L,IAAI,UAGjE,SAASytD,EAAcI,EAAOC,GAE1B,IAAIjH,EAAep6D,KAAK8zE,OAAO9f,MAAMoG,aAAa58D,KAAKwC,KAAK8zE,QACxDuM,EAAWrgF,KAAK8zE,OAAO9f,MAAMpC,QAC7B0uB,EAAalmB,EAAap6D,KAAMohE,GAChCwd,EAAaxkB,EAAap6D,KAAMqhE,GAEpC,OAAKif,GAAe1B,GAKpB5+E,KAAK63D,OAASwoB,EAASt6E,QAAQu6E,GAC/BtgF,KAAKo8B,OAASikD,EAASt6E,QAAQ64E,GAIxB,CACH/mB,OAJJ73D,KAAKsgF,WAAaA,EAKdlkD,OAJJp8B,KAAK4+E,WAAaA,KAPdvgF,EAAKoZ,MAAM,+BAAiC2pD,EAAQ,IAAMC,GACnD,MAcf,SAASkf,EAAqBv1E,EAAMw1E,GAEhC,IAAIC,EAAYzL,EAAMjxE,OAAO,CACzBqxE,WAAY,WACRp1E,KAAK22E,MAAQ32E,KAAKm2B,YAAYiE,UAC9Bp6B,KAAK22E,MAAMvB,WAAW7nE,MAAMvN,KAAMqN,WAClCrN,KAAK60D,cAETif,OAAQ0M,EACR3rB,WAAYA,EACZmM,cAAeA,EACfpuD,KAAM,WACF,OAAO5S,KAAKuT,IAAI,SAEpBsjE,aAAc,WACV,OAAOj7D,EAAGie,WAAW,OACjB75B,KAAKu2E,SACLv2E,KAAKuT,IAAI,QACT,CACImtE,SAAU1gF,KAAKuT,IAAI,YACnBquB,SAAU5hC,KAAKuT,IAAI,YACnBotE,cAAe3gF,KAAKuT,IAAI,eAE3BvT,KAAc,UAAIA,KAAK4rD,UAAUg1B,oBAAsB,OAGhE9qB,SAAU,WACN,OAAO,GAEX1M,OAAQ,WAEJ,IAAIyO,EAAS73D,KAAKuT,IAAI,UAClB6oB,EAASp8B,KAAKuT,IAAI,UAClBstE,EAAeT,EAAavoB,GAC5BipB,EAAeV,EAAahkD,GAEhC,OAAO,GAAkB,GAE7Bw6C,SAAU,WACF52E,KAAKwD,KACLxD,KAAKwD,GAAG+B,KAAK,QAASvF,KAAK62E,gBAC3B72E,KAAKy6E,aAGbnc,QAAS,WACL,IACIvQ,EADA/iD,EAAO,IAGQ7I,EAAG48B,SAAS,eAAsB,OACX,eAArB/+B,KAAKuT,IAAI,UAmQ/BklE,EAAKsI,wBA9PA/gF,KAAKid,IAAI,YAAY,GACrB8wC,EAAQ/tD,KAAKm+D,kBACbtiE,QAAQkI,OAAOgqD,EAAO,CAClB7nD,GAAI,iBACJyyB,IAAK34B,KAAKuT,IAAI,WAElBvI,EAAKoD,KAAK2/C,GAEN/tD,KAAKuT,IAAI,WACTw6C,EAAQ/tD,KAAKm+D,gBAAgB,GAC7BtiE,QAAQkI,OAAOgqD,EAAO,CAClB7nD,GAAI,iBACJyyB,IAAK34B,KAAKuT,IAAI,WAElBvI,EAAKoD,KAAK2/C,IAGCtxD,GAAGC,OAAO,qBACpB8O,UAAU,cACVR,KAAKA,GACL7B,QAAQ9J,OAAO,KACf4E,QAAQ,aAAa,GACrBsB,KAAK,KAAM,SAAUoM,GAAK,OAAOA,EAAEzL,KAE/BJ,KAAK,SAAU6L,GACpB,IApHZzG,EAoHgB1H,EAAK/G,GAAGC,OAAOsD,MACfsQ,EAAO9M,EAAGnE,OAAO,QACjBC,EAAOkE,EAAGnE,OAAO,QAAQC,KAAKqS,EAAEgnB,KAEhCqoD,IAxHhB91E,EAwH0C1H,EAzHhC9G,OAAO,QACN+K,OAAO0D,WAElBlN,GAAKiN,EAAI5N,MAAQ,EACrB4N,EAAIE,GAAKF,EAAI7N,OAAS,EAEtB6N,EAAIjN,GAAK,EACTiN,EAAI5N,OAAS,EACN4N,GAmHSoF,EAAK/K,KAAKy7E,GACLz7E,KAAK,KAAM,GACXA,KAAK,KAAM,GAEhBjG,EAAKiG,KAAK,KA1KR,UA2KGA,KAAK,cAAe,UAEzB/B,EAAG+B,KAAK,YAAa2K,EAAI+B,UAAUN,EAAE1T,EAAG0T,EAAEvG,MAI9CpL,KAAKy6E,aAGbvc,UAAW,WACPl+D,KAAKid,IAAI,YAAY,GACrBxgB,GAAGC,OAAO,qBAAqB8O,UAAU,cAAcM,SACvD9L,KAAKy6E,YAETtiB,IAAK,SAAUF,EAAU11B,GAGrB,OAAQA,GAAU01B,EAAW,GAAK,IAFvBj4D,KAAKuT,IAAI,UAAU/P,GAAGiE,OAAO0D,UACzB7N,MAAQ,IAG3B2jF,gBAAiB,WACb,MAAO,CACHpuE,GAAI7S,KAAKuT,IAAI,UAAUtV,EACvB6U,GAAI9S,KAAKuT,IAAI,UAAUnI,EACvB2H,GAAI/S,KAAKuT,IAAI,UAAUtV,EACvB+U,GAAIhT,KAAKuT,IAAI,UAAUnI,IAG/B81E,aAAc,SAAU/oB,EAAKC,GACzB,IAAIzL,EAAM3sD,KAAKihF,kBACX5oB,EAAOD,GAAWD,EAAMA,EACxBz5C,EAAKiuC,EAAI55C,GAAK45C,EAAI95C,GAClBH,EAAKi6C,EAAI35C,GAAK25C,EAAI75C,GAClB9M,EAAS4Y,KAAKyuC,KAAM3uC,EAAKA,EAAOhM,EAAKA,GAEzC,MAAO,CACHG,GAAI85C,EAAI95C,GAAMwlD,EAAO3lD,EAAK1M,EAC1B8M,GAAI65C,EAAI75C,GAAMulD,GAAQ35C,EAAK1Y,EAC3B+M,GAAI45C,EAAI55C,GAAMslD,EAAO3lD,EAAK1M,EAC1BgN,GAAI25C,EAAI35C,GAAMqlD,GAAQ35C,EAAK1Y,IAGnCo4E,YAAa,WACT,IAAI+C,EAAYnhF,KAAKuT,IAAI,aACzB,GAAI4tE,EAAW,CACX,IAAI7oB,EAAYt4D,KAAKm4D,IAAIgpB,EAAUC,YAAaD,EAAU5+C,OAC1DviC,KAAKid,IAAI,WAAYjd,KAAKkhF,aAAa5oB,SAEvCt4D,KAAKid,IAAI,WAAYjd,KAAKihF,mBAG1BjhF,KAAKuT,IAAI,aACTvT,KAAKqhF,qBAGLrhF,KAAKwD,IACLxD,KAAKwD,GAAG+B,KAAKvF,KAAKuT,IAAI,aAGtBvT,KAAK4rD,WACL5rD,KAAK4rD,UAAUwyB,eAGvBiD,mBAAoB,WAChB,IAAIC,EAAYthF,KAAKm+D,gBAAgB,GACjCojB,EAAYvhF,KAAKm+D,kBACrB1hE,GAAGC,OAAO,mBACL6I,KAAK,YAAa2K,EAAI+B,UAAUqvE,EAAUrjF,EAAGqjF,EAAUl2E,IAC5D3O,GAAGC,OAAO,mBACL6I,KAAK,YAAa2K,EAAI+B,UAAUsvE,EAAUtjF,EAAGsjF,EAAUn2E,KAEhEo2E,YAAa,WACT,OAAOxhF,KAAKy1E,WAAWnoD,OAAO,SAAU1T,GACpC,OAAOA,EAAErG,IAAI,eAGrB7W,OAAQ,WAEJ,OADAsD,KAAKid,IAAI,CAAE2kB,UAAY,IAChB5hC,KAAKwhF,eAEhBC,SAAU,WACNzhF,KAAKid,IAAI,CACL2kB,UAAY,EACZ8+C,UAAY,KAGpB/xB,YAAa,WACM3uD,KAAKwhF,cAGhBvB,EAAMyB,YAAY1hF,MAElBigF,EAAMv8E,QAGdy6D,gBAAiB,SAAUhwD,GACvB,IAAIwzE,EAAS,IAnQV,GAmQ2BvQ,EAAK5yD,SAC/BojE,EAAU5hF,KAAKuT,IAAI,YAAYV,GAC/BgvE,EAAU7hF,KAAKuT,IAAI,YAAYT,GAC/BgvE,EAAU9hF,KAAKuT,IAAI,YAAYR,GAC/BgvE,EAAU/hF,KAAKuT,IAAI,YAAYP,GAC/BurD,EAAQpwD,EAAMyzE,EAAUE,EACxBtjB,EAAQrwD,EAAM0zE,EAAUE,EAQ5B,IAJc9jF,EAAGmN,EAIbsT,GAPOvQ,EAAM2zE,EAAUF,GAOXrjB,EACZ7rD,GAPOvE,EAAM4zE,EAAUF,GAOXrjB,EACZrsD,EAAK,GAAKwvE,GANA1jF,EAMeygB,EANZtT,EAMgBsH,EALtBkM,KAAKyuC,KAAKpvD,EAAIA,EAAImN,EAAIA,IAOjC,MAAO,CAAEnN,EAAGkU,EAAIuM,EAAK6/C,EAAOnzD,EAAG+G,EAAIO,EAAK8rD,IAE5Cgd,QAAS,SAAUh4E,GACf,IAAIlH,EAAOG,GAAGC,OAAO8G,GACjBgJ,EAAKF,EAAGsB,SAGZ5N,KAAKwD,GAAKlH,GAELsP,aACAC,SALO,KAMPtG,KAAK,SAAUqoD,EAAWphD,GAAIqhD,WAEnC7tD,KAAKu7E,gBACLv7E,KAAKy6E,YAET7kB,UAAW,WACP,IAAIt4D,EAAQg4D,EAEZ,GADIt1D,KAAKuT,IAAI,cAAejW,EAAQ,KAChC0C,KAAK4rD,UAAW,CAChB,IAAIptC,EAAQ/hB,GAAG+hB,MAAMqU,UACZmvD,iBAAiB,CAAC,EAAG,IAC1Bt9C,EAAQ1kC,KAAK4rD,UAAUr4C,IAAI,SAAS8hB,MAAM,KAE9C,OAAQ6qD,EAAK+B,0BACT,IAAK,iBACDzjE,EAAMsS,OAAO,CAAC,KAAM,KAAM,OAC1BxzB,EAAQkhB,EAAMkmB,EAAM,IACpB,MACJ,IAAK,kBACDlmB,EAAMsS,OAAO,CAAC,OAAQ,OAAQ,SAC9BxzB,EAAQkhB,EAAMkmB,EAAM,IACpB,MACJ,IAAK,kBAKDpnC,GAJAkhB,EAAQ/hB,GAAG+hB,MAAMqS,SACZC,OAAO,CAAC,EAAG,GAAI,IAAK,IAAM,MAC1BC,MAAMt0B,GAAGs0B,MAAM,IAAK,IACpBC,OAAM,IACGssB,SAAS5Y,EAAM,MAIzC,OAAOpnC,GAEXm9E,SAAU,WAEN,GAAKz6E,KAAKwD,GAAV,CAEA,IAAI0+E,EAAiBliF,KAAK41D,YAEtBt4D,EAAQi4D,EAAU2sB,GAAkB9Q,EAAK5yD,QAC7Cxe,KAAKwD,GAAG+B,KAAK,eAAgBjI,EAAQ,MAErC,IAAIyvD,EA1UD,IAAA,GA0UqCqkB,EAAK5yD,SAE7C/hB,GAAGC,OAAO,qBACL8O,UAAU,cACVA,UAAU,KACVpO,MAAM,YAAa,SAAW2vD,EAAa,KAEhD/sD,KAAKo+E,cAEDp+E,KAAK4rD,WACL5rD,KAAK4rD,UAAU6uB,aAGvBx0C,OAAQ,WACAjmC,KAAKuT,IAAI,aACTvT,KAAKs+D,WAGbid,cAAe,WAEX,GAAyB,eAArBv7E,KAAKuT,IAAI,QAAb,CAIA,IAAI2gB,EAAU/xB,EAAG48B,SAAS,eAAsB,MAChD/+B,KAAKwD,GAAGpG,MAAM,aAAc82B,EAAU,UAAY,YAEtD+iD,kBAAmB,WACfj3E,KAAKid,IAAI,CAAEk6D,WAAmC,OAAvByB,EAAMzB,gBAEjCrrE,OAAQ,WAEJ,IAAIxO,EAAQi4D,EAAUD,GAAc8b,EAAK5yD,QAEzCxe,KAAKwD,GAAGoI,aACHC,SAAS,KACTtG,KAAK,SAAU,WACfnI,MAAM,eAAwB,EAARE,GACtBsO,aACAG,MAAM,KACN3O,MAAM,UAAW,MAQ9B,OAAO,IAJc63E,EAAWlxE,OAAO,CACnCiwD,MAAOysB,IAGJ,CAAmBz1E,GAO9BnP,QAAQC,OAAO,WACd+E,QAAQ,mBAAoB,CACzB,OAAQ,kBAAmB,aAC3B,eAAgB,iBAAkB,mBAClC,mBAAoB,wBAAyB,YAAa,eAC1D,yBAA0B,sBAC1B,SAAUkB,EAAQs0E,EAAKT,EAAS5nE,EAAMkH,EAClC68D,EAAQkI,EAAQkI,EAASC,EAAM/7E,EAAMi0E,EAASjI,GAe9C,OAbAh0E,EAAO0D,EACPuK,EAAK0B,EACLkC,EAAMgF,EACNk8D,EAAOW,EACP0G,EAAOwB,EACPhF,EAAaoB,EACbrB,EAAQY,EACRqK,EAAQkC,EACRvmE,EAAKwmE,EACLjgF,EAAKkE,EACLuyE,EAAQ0B,EACR4F,EAAO7N,EAEA,CACHkO,qBAAsBA,MAratC;ACEI1kF,QAAQC,OAAO,WACV+E,QAAQ,iBAAkB,CACvB,aAAc,mBACd,SAAUwhF,EAAOjR,GACb,OAAOiR,EAAMt+E,OAAO,CAChBe,UAAW,kBACXw9E,UAAW,GACXC,UAAW,GACXnN,WAAY,SAAU1wC,EAAOjR,EAAK/wB,GAC9B1C,KAAK1D,KAAOoG,EAAQpG,KACpB0D,KAAK6E,OAAS4uB,EACdzzB,KAAK22E,MAAQ32E,KAAKm2B,YAAYiE,UAC9Bp6B,KAAK22E,MAAMvB,WAAW7nE,MAAMvN,KAAMqN,YAEtCupE,SAAU,WACN52E,KAAK1D,KAAKs6E,WACV52E,KAAKm2B,YAAYiE,UAAUw8C,SAASrpE,MAAMvN,KAAMqN,YAEpDuzE,kBAAmB,WACf,OAAO5gF,KAAKuT,IAAI,QAAU,IAE9B6qE,YAAa,WACT,IAAI9hF,EAAO0D,KAAK1D,KAChB0D,KAAKid,IAAI,CACLhf,GAAI3B,EAAKu7D,OAAO55D,EAAI3B,EAAK8/B,OAAOn+B,GAAK,EACrCmN,GAAI9O,EAAKu7D,OAAOzsD,EAAI9O,EAAK8/B,OAAOhxB,GAAK,KAG7CqvE,SAAU,WACNz6E,KAAKlB,QAAQ1B,MAAM,YACf,SAAWg0E,EAAKoR,gBAAgB,GAAI,IAAM,MAElDvE,aAAc,WACVj+E,KAAK1D,KAAKsvD,UAAY5rD,MAE1B8L,OAAQ,WACJ9L,KAAK1D,KAAKsvD,UAAY,KACtB5rD,KAAK1D,KAAKs6E,WACV52E,KAAKm2B,YAAYiE,UAAUtuB,OAAOyB,MAAMvN,KAAMqN;CCxCtE,WACI,aAEA,IAAI9K,EAAOmT,EAAI1J,EAAOnO,EAElB4kF,EAAWvuB,EAEf,SAASrlD,IACL4zE,EAAYlgF,IAyChB,SAASm/E,EAAY12E,GAtCrB,IAAwBA,EAEhB6sD,EACAz7B,EAoCJvtB,IArCIgpD,GAFgB7sD,EAyCMA,GAvCRuI,IAAI,UAClB6oB,EAASpxB,EAAKuI,IAAI,UAsCtB2gD,EApCO,CACHpsD,MAAO,OACP28B,UAAW,CACP,OAAQ,IACR,SAAU,OAAQ,UAAW,SAAU,IACvC,SAAU,OAAQ,UAAW,UAEjCE,WAAY,CACR8M,KAAQ,OACRixC,SAAU,SACVC,OAAQ,OACRC,UAAW,UACXC,SAAU,SACVC,SAAU,SACVC,OAAQ,OACRC,UAAW,UACXC,SAAU,UAEdr+C,WAAY,CACRs3C,IAAK,GACLzqC,KAAQzmC,EAAKuI,IAAI,QACjBmvE,SAAU7qB,EAAOtkD,IAAI,YACrBovE,OAAQ9qB,EAAOtkD,IAAI,MACnBqvE,UAAW/qB,EAAOtkD,IAAI,SAASpQ,KAC/B0/E,SAAU73E,EAAKuI,IAAI,UAAY,MAC/BuvE,SAAU1mD,EAAO7oB,IAAI,YACrBwvE,OAAQ3mD,EAAO7oB,IAAI,MACnByvE,UAAW5mD,EAAO7oB,IAAI,SAASpQ,KAC/B8/E,SAAUj4E,EAAKuI,IAAI,UAAY,QAY3C,WACIkvE,EAAUh6E,OACVg6E,EAAUjL,eAEV,IAAIhtE,EAAMi4E,EAAUhL,eAAe,OAC1BxzE,QAAQ,QAAQ,GAChB5E,OAAO,OACZyI,EAAQ26E,EAAUhL,eAAe,MAEjCzyE,EADQy9E,EAAU/K,aAAa,SACjBr4E,OAAO,SAEzByI,EAAMxI,KAAK40D,EAASpsD,OACpB4N,EAAGO,SAASzL,EAAK,OAAQ,GAAI,EAAG,CAAC,EAAG,IACpC3M,EAAG0mC,UAAUv/B,EAAOkvD,GAhBpBqgB,GAmBJ,SAAS9rE,IACLg6E,EAAUh6E,OAGd,SAAS/E,IACL++E,EAAUj/E,GAAGE,OAGjB,SAAS8L,IACL,IACIwyC,EADKygC,EAAUj/E,GAAGgM,SACN,OAAS,OACzBxD,EAAMA,MAAMg2C,EAAO,eAGvB,SAAS77C,IACLs8E,EAAUt8E,UAGdtK,QAAQC,OAAO,WACd+E,QAAQ,wBAAyB,CAC9B,2BAA4B,eAAgB,eAAgB,cAC5D,SAAUwF,EAAMsQ,EAAMmf,EAASn3B,GAO3B,OALA4D,EAAQ8D,EACRqP,EAAKiB,EACL3K,EAAQ8pB,EACRj4B,EAAKc,EAEE,CACH+iF,YAAaA,EACb7yE,KAAMA,EACNpG,KAAMA,EACN/E,KAAMA,EACN8L,OAAQA,EACRrJ,QAASA,EACT0J,UAAW,WAAc,OAAO4yE,EAAU5yE,iBA3G1D;CCAA,WACI,aAEA,IAAIuhE,EAAMluB,EAAgB/2C,EAEZqoB,EAAQ+vB,EAEtB,SAAS11C,IACL7O,KAAKmzE,cAAc,oBAAqB,KACxC3+C,EAAS48C,EAAKgC,YACd7uB,EAAa,KAGjB,SAASF,EAASQ,EAAOC,EAAaC,GAElC,GAAIR,IAAeM,EACf,OAAO,IAAIq+B,QAAQ,SAAUp2D,GACzBA,MAIRy3B,EAAaM,EAEb,IACaD,EADTu+B,EAAUh3E,EAAGogB,YAgBjB,OAbAvsB,KAAKyH,OAAO+D,UAAU,KAAKM,SAEP,eAAhBg5C,IACAF,EAAU1B,EAAe2B,IAAU3B,EAAeW,GAClDs/B,EAAUh3E,EAAG+gB,mBAGPi2D,EAAQnjF,KAAKyH,OAAQq9C,EAAaD,EAAO,CAC/C3B,eAAgB0B,EAChBxmC,YAAa2mC,GAAY,EACzB93B,QAAS,KAOjB,SAAS9I,IACLqQ,EAAOjtB,QAGX,SAAS+sB,EAAasuB,EAAIz9C,GACtBnF,KAAKyH,OAAOrK,MAAM,eAAiB,EAAMwlD,EAAM,MAGnD,SAASwgC,IACL,OAAO7+B,EAGX1oD,QAAQC,OAAO,WACd+E,QAAQ,kBAAmB,CACxB,mBAAoB,aAAc,sBAElC,SAAUkxE,EAAQvsB,EAAMutB,GAgBpB,OAfA3B,EAAOW,EACP5lE,EAAKq5C,EAcc,IAZJutB,EAAehvE,OAAO,CAEjCmC,GAAI,YACJgtE,YAAa,MAEbrkE,KAAMA,EACNw1C,SAAUA,EACVlgC,UAAWA,EACXmQ,aAAcA,EACd8uD,cAAeA,QAxE/B;CCAA,WACI,aAEA,IAAI/kF,EAEA2f,EAEJ,SAASZ,EAAWnf,GAKhB,OAJIA,IACA+f,EAAO/f,EACPI,EAAKmB,MAAM,uBAERwe,EAGXniB,QAAQC,OAAO,WACd+E,QAAQ,wBACL,CAAC,OACG,SAAUkB,GAIN,OAFA1D,EAAO0D,EAEA,CACHqb,WAAYA,MAvBhC;CCAA,WAEI,IAAIs1D,EAEJ72E,QAAQC,OAAO,WACV+E,QAAQ,yBAA0B,CAE/B,WAE+B,SAAvBwiF,KACA3Q,EAAW1yE,MACN8zE,OAAS,KACd9zE,KAAKsjF,kBAAoB,KAqB7B,OAlBAD,EAAqBn6E,UAAY,CAC7B+tE,kBAAmB,WACf,IAAIrlB,EAAQ5xD,KAAK8zE,OAAO2F,cACpB5nB,EAAQ7xD,KAAK8zE,OAAO4F,cAExB51E,EAAEgC,KAAK8rD,EAAMmc,OAAOlc,GAAQ,SAAU19C,GAClCA,EAAE8iE,kBAAkBj3E,KAAKsjF,sBAGjCnM,WAAY,WACR,OAAOn3E,KAAKsjF,mBAEhBnH,cAAe,SAAUj2E,GACrBlG,KAAKsjF,kBAAoBp9E,EACzBlG,KAAKi3E,sBAINvE,GAAY,IAAI2Q,KAjCvC;CCAA,WACI,aAEA,SAASrO,EAAMuO,EAAY9N,GACvBz1E,KAAKujF,WAAa,GAClBvjF,KAAKid,IAAIphB,QAAQkI,OAAO,GAAIw/E,GAAc,IAAK,CAAEC,QAAQ,IACzDxjF,KAAKy1E,WAAaA,EAClBz1E,KAAKo1E,WAAW7nE,MAAMvN,KAAMqN,WAGhC2nE,EAAM9rE,UAAY,CAEdksE,WAAY,aAEZwB,SAAU,SAAU1sE,EAAUhF,EAAOxC,KAErC6Q,IAAK,SAAUhO,GACX,OAAOvF,KAAKujF,WAAWh+E,IAG3B0X,IAAK,SAAUhY,EAAK+E,EAAKtH,GAErB,IAAKuC,EACD,OAAOjF,KAGX,IAAIujF,EACe,iBAARt+E,GACPs+E,EAAat+E,EACbvC,EAAUsH,IAETu5E,EAAa,IAAIt+E,GAAO+E,EAG7B,IAAIhD,EAAmBtE,EAAZA,GAAsB,GAE7B+gF,EAAQz8E,EAAKy8E,MACbD,EAASx8E,EAAKw8E,OACdE,EAAU,GACVC,EAAW3jF,KAAK4jF,UAEpB5jF,KAAK4jF,WAAY,EAEZD,IAED3jF,KAAK6jF,oBAAsBztD,OAAO1vB,OAC9B0vB,OAAOo/C,eAAex1E,KAAKujF,aAE/BvjF,KAAK8jF,QAAU,IAGnB,IAAIttE,EAAUxW,KAAKujF,WACfO,EAAU9jF,KAAK8jF,QACfC,EAAW/jF,KAAK6jF,oBAuBpB,GArBAhoF,QAAQ6V,QAAQ6xE,EAAY,SAAUS,EAAWzhD,GAE7Cv4B,EAAMg6E,EAEDlgF,EAAEmgF,QAAQztE,EAAQ+rB,GAAQv4B,IAC3B05E,EAAQt1E,KAAKm0B,GAGZz+B,EAAEmgF,QAAQF,EAASxhD,GAAQv4B,GAG5B85E,EAAQvhD,GAASv4B,SAFV85E,EAAQvhD,GAKfkhD,SACOjtE,EAAQ+rB,GAEf/rB,EAAQ+rB,GAASv4B,KAIpBw5E,EAAQ,CACLE,EAAQ19E,SACRhG,KAAKkkF,SAAWl9E,GAEpB,IAAK,IAAIyG,EAAI,EAAGA,EAAIi2E,EAAQ19E,OAAQyH,IAChCzN,KAAK42E,SAAS8M,EAAQj2E,GAAIzN,KACtBwW,EAAQktE,EAAQj2E,IAAKzG,GAKjC,OADAhH,KAAK4jF,WAAY,EACV5jF,MAEX21E,OAAQ,SAAUjzE,GACd,OAAO7G,QAAQqoC,KAAKlkC,KAAKujF,aAE7Bz3E,OAAQ,WACA9L,KAAKy1E,YACLz1E,KAAKy1E,WAAW3pE,OAAO9L,QAKnCnE,QAAQC,OAAO,WACd+E,QAAQ,aAAc,CACnB,YACA,SAAU+a,GAGN,OAFAo5D,EAAMjxE,OAAS6X,EAAG7X,OAEXixE,KAzGnB;CCAA,WAEI,IAAItC,EAEJ72E,QAAQC,OAAO,WACV+E,QAAQ,iCAAkC,CACvC,OAAQ,sBAAuB,eAAgB,iBAC/C,SAAUxC,EAAM00E,EAAgBr9D,EAAIxF,GAEhC,IAAIi0E,EAAqBpR,EAAehvE,OAAO,CAC3CmC,GAAI,oBACJgtE,YAAa,uBAEbrkE,KAAM,YACF6jE,EAAW1yE,MACNmzE,cAAc,SAAU,KACxB5tE,KAAK,CACFyM,UAAW9B,EAAI+B,UAAU,IAAK,OAGtCjS,KAAKu0E,SACLv0E,KAAKyI,QAGT8rE,OAAQ,WACJ,IAAI5zD,EAAGzV,EAEPyV,EAAI3gB,KAAKyH,OAAOpI,OAAO,KACvBqW,EAAGO,SAAS0K,EAAG,OAAQ,KAAKpb,KAAK,QAAS,cAC1Cob,EAAEthB,OAAO,QAAQC,KAAK,4BACjBiG,KAAK,CAAEtH,EAAG,IAAKmN,EAAG,MAEvBF,EAAMyV,EAAElZ,OAAO0D,WACXlN,GAAKiN,EAAI5N,MAAM,EACnB4N,EAAIE,GAAKF,EAAI7N,OAAO,EACpBsjB,EAAEpb,KAAK,YAAa2K,EAAI+B,UAAU/G,EAAIjN,EAAGiN,EAAIE,OAIrD,OAAOsnE,GAAY,IAAIyR,KAvCvC;CCAA,WACI,aAEA,IAAInJ,EAAM9qE,EAAK7N,EAAIiK,EAAI0mE,EAAOoR,EAAOxoE,EAEjC0sC,EAAa,GAOba,EAAY,CACRx2B,MAAO,CACHy2B,OAAQ,UACRC,QAAS,WAEbt2B,KAAM,CACFq2B,OAAQ,UACRC,QAAS,YAGjBg7B,EAAY,CACR1xD,MAAO,QACPI,KAAM,SAGdl3B,QAAQC,OAAO,WACd+E,QAAQ,iBAAkB,CACvB,aAAc,YAAa,oBAC3B,iBAAkB,cAAe,eACjC,wBAAyB,mBAAoB,2BAC7C,qBAAsB,yBACtB,SAAUm0E,EAAOoN,EAAMzE,EAAQzoE,EAAO1O,EAAMwH,EACxCs2E,EAASpK,EAAaqK,EAAS7L,EAAME,GAUrC,OARAtsE,EAAK0B,EACL4N,EAAKwmE,EACLpH,EAAO2C,EACPztE,EAAMgF,EACN7S,EAAKmE,EACLwsE,EAAQsR,EACRF,EAAQG,EAEDvP,EAAMjxE,OAAO,CAChBqxE,WAAY,WACRp1E,KAAKyH,KAAOzH,KAAKwkF,aACjBxkF,KAAKk3E,kBAAoB0B,EACzB54E,KAAKykF,QAAU,CACX7T,UAAa,mBACbC,SAAY,oBAGpBn0E,OAAQ,WACJsD,KAAKid,IAAI,YAAY,IAEzBslB,MAAO,WAEH,IAAI2yC,EAASl1E,KAAKy1E,WAAWP,OACzBhvE,EAAKlG,KAAKuT,IAAI,MAMlB,OAJYzP,EAAE4zB,KAAKw9C,EAAQ,SAAUlhB,EAAOvmD,GACxC,OAAOumD,EAAMzgD,IAAI,QAAUrN,KAGfgvE,EAAOlvE,QAE3By7E,SAAU,WACNzhF,KAAKid,IAAI,YAAY,IAEzBunE,WAAY,WAGR,OAFAxkF,KAAKid,IAAI,WAAYjd,KAAK62E,gBAC1BuN,EAAMnxB,aAAajzD,MACZA,MAEX27E,YAAa,WACT,IAAIhI,EAAQ3zE,KACRy2E,EAAS56E,QAAQkI,OAAO,GAAI/D,KAAKykF,QAASzkF,KAAKy2E,QACnD56E,QAAQ6V,QAAQ+kE,EAAQ,SAAU3X,EAAS75D,GACvC0uE,EAAMnwE,GAAGc,GAAGW,EAAK0uE,EAAM7U,GAASthE,KAAKm2E,OAG7C+Q,iBAAkB,WACd1kF,KAAKid,IAAI,WAAW,IAExB0nE,gBAAiB,WACb3kF,KAAKid,IAAI,WAAW,IAExB2nE,QAAS,WACDnoF,GAAG6d,MAAMuqE,mBAEbpoF,GAAG6d,MAAMo1B,iBACTgpC,EAAKxd,aAAal7D,KAAMA,KAAKw2E,sBAEjCsD,IAAK,SAAU5nD,GACXlyB,KAAKid,IAAI,CAAEiV,MAAOA,IAClBlyB,KAAKkyB,MAAQA,GAEjB1tB,KAAM,WACF,MAAO,WAEX02E,WAAY,WACR,OAAOF,EAAKznE,IAAI,UAEpBmxB,MAAO,WACH,IAAIj/B,EAAQzF,KAAKuT,IAAI,SACjBrN,EAAKlG,KAAKuT,IAAI,MAEdkc,EAAS,CAAC,IADKhqB,GAASA,EAAMtC,KAAOsC,EAAMtC,KAAO+C,IACpBA,EAAIA,GAClCi1E,EAAMn7E,KAAKk7E,aAGf,OAAOzrD,EAFI0rD,EAAM1rD,EAAOzpB,OAAUm1E,EAAM,IAI5CrxB,UAAW,SAAUplB,GACjB,OAAQA,GAASA,EAAMv6B,QAAW,IAEtC4/C,kBAAmB,SAAUvmD,GAGzB,OAFWA,EAAG9G,OAAO,QACN+K,OAAO0D,UACX7N,MAAQirD,IAEvBuuB,cAAe,WACX,IAAI7hE,EAAIjV,KAAKuT,IAAI,UACbrN,EAAKlG,KAAKuT,IAAI,UACdg2C,EAAOt0C,EAAI,SAAW,UAC1B,OAAOA,EAAI/E,EAAI8iB,OAAOE,SAAShtB,EAAI,EAAGoG,EAAGsB,SACrCu7C,EAAU78C,EAAGsB,SAAS27C,IAE9Bu7B,SAAU,SAAU7mE,EAAKgsC,GACrB,IAAI86B,EAAW,EAMf,OAJmB,IAAf96B,IACA86B,EAAW,GAGR,CACH9mF,GAAIggB,EAAM,EAjIf,EAkIK7S,GAAI6S,EAAM,EAlIf,EAmIK3gB,MAAO2gB,EAAMgsC,EAAa,GAAiB86B,EAC3C1nF,OAAQ4gB,EAAM,KAGtB+rC,QAAS,SAAU/rC,EAAKgsC,GACpB,MAAO,CACHhsD,GAAIggB,EAAM,EACV7S,GAAI6S,EAAM,EACV3gB,MAAO2gB,EAAMgsC,EACb5sD,OAAQ4gB,IAGhB44D,aAAc,WACV,OAAOj7D,EAAGie,WAAW,OACjB75B,KAAKu2E,SACLv2E,KAAKuT,IAAI,QACT,CACI61C,OAAQppD,KAAKuT,IAAI,UACjBquB,SAAU5hC,KAAKuT,IAAI,YACnBwjD,QAAS/2D,KAAKuT,IAAI,WAClB2e,MAAOlyB,KAAKuT,IAAI,SAChBotE,cAAe3gF,KAAKuT,IAAI,iBAIpCgjD,gBAAiB,SAAU4J,GACvB,IAAI94D,EAAI2rE,EAAM51D,aACd,OAAO/V,EAAIA,EAAE+4D,OAAOD,GAAS,CAAC,EAAG,IAErC0Z,cAAe,WACXuK,EAAM7jB,WAAWvgE,OAErBi3E,kBAAmB,WACfj3E,KAAKid,IAAI,CAAEk6D,WAAmC,OAAvByB,EAAMzB,gBAEjClxC,OAAQ,WACJjmC,KAAKo7E,eAETA,YAAa,WACT,IAEInxB,EAFAxiD,EAAOzH,KAAKwD,GACZkhC,EAAQ1kC,KAAK8pD,UAAU9pD,KAAK0kC,SAGhCj9B,EAAK/K,OAAO,QAAQ4C,KAAKolC,GACzBulB,EAAavlB,EAAQ1kC,KAAK+pD,kBAAkBtiD,GAAQ,EAEpDA,EAAK/K,OAAO,QACPkP,aACArG,KAAKvF,KAAK8kF,SAASx8B,EAAY2B,KAExCuxB,QAAS,SAAUh4E,GACfxD,KAAKwD,GAAK/G,GAAGC,OAAO8G,GACpBxD,KAAKu0E,SAEDv0E,KAAK+2E,sBACL/2E,KAAK+2E,wBAGb0D,SAAU,WAEN,GAAKz6E,KAAKwD,GAAV,CAEA,IACI83E,EAAY,EADNhzB,GAGA4xB,EAAY17D,QAtMlB,GAuMA88D,EAvMA,IAmMMhzB,GAI6B4xB,EAAY17D,SAtM/C,GAkMM8pC,GAKO4xB,EAAY17D,UACzB88D,EAxMA,IAkMMhzB,GAM6B4xB,EAAY17D,UAGnDxe,KAAKwD,GAAG9G,OAAO,iBACVU,MAAM,YAAa,SAAWk+E,EAAY,OAEnD0J,iBAAkB,SAAUtgD,GAExB,IAAIugD,EAASjlF,KAAKwD,GAAG9G,OAAO,iBACvB2C,OAAO,KACPkG,KAAK,QAAS,SAUnB,MAAO,CACH+K,KATO20E,EAAO5lF,OAAO,QACpBkG,KAAK,QAAS,kBASfjG,KAPO2lF,EAAO5lF,OAAO,QAAQC,KAAKolC,GACjCn/B,KAAK,cAAe,QACpBA,KAAK,IAAK,SACVA,KAAK,IAAKojD,MAOnBu8B,gBAAiB,SAAU1hF,GAEvB,IACI0c,EADAW,EAAU7gB,KAAKwE,KAAKxE,KAAKuT,IAAI,SAG7B4xE,EAAQ3hF,EAAGnE,OAAO,KACjBkG,KAAK,QAAS,QAEnB4/E,EAAM9lF,OAAO,QACRkG,KAAK,QAAS,aACdA,KAAK,KAxOR+iD,IAyOG/iD,KAAK,KAzOR+iD,IA0OG/iD,KAAK,QAAS+iD,GACd/iD,KAAK,SAAU+iD,GACflrD,MAAM,OAAQ4C,KAAK82E,cAAct5E,KAAKwC,QAE3CkgB,EAAQ7d,EAAGgpB,cAAc85D,EAAOtkE,EAASynC,IACnC/iD,KAAKvF,KAAKgqD,QAAQ1B,EAAY,IACpCpoC,EAAM9iB,MAAM,OAAQinF,EAAU/3E,EAAGsB,WAErC2mE,OAAQ,WACJ,IAEItqB,EAFAxiD,EAAOzH,KAAKwD,GACZkhC,EAAQ1kC,KAAK8pD,UAAU9pD,KAAK0kC,SAG5B4sB,EAAQ7pD,EAAKpI,OAAO,KACnBkG,KAAK,QAAS,gBAEf6/E,EAAgBplF,KAAKglF,iBAAiBtgD,GAC1CulB,EAAavlB,EAAQ1kC,KAAK+pD,kBAAkBtiD,GAAQ,EACpD29E,EAAc90E,KACT/K,KAAKvF,KAAK8kF,SAASx8B,EAAY2B,IAEpCjqD,KAAKklF,gBAAgB5zB,GAErB7pD,EAAKlC,KAAK,YACN2K,EAAI+B,WAlQNq2C,IAAAA,KAoQEtoD,KAAKy2E,QACLz2E,KAAK27E,cAGT37E,KAAKy6E,YAGT1D,qBAAsB,kBArRtC;CCAA,WACI,aAEA,IAAIsO,EAAIrS,EAAOhB,EAAO2G,EAItB,SAAS2M,EAAW9hF,EAAI28D,GAIpB,OAHA38D,EAAGs2E,KAAI,GACPt2E,EAAGvF,EAAIuF,EAAGmuB,GAAKwuC,EAAM,GACrB38D,EAAG4H,EAAI5H,EAAGquB,GAAKsuC,EAAM,IACd,EAGX,SAASlN,EAAaxrD,EAAM44D,GAExB,IAKIC,EA8CU74D,EAnDVqV,EAAOrV,EAAK8L,IAAI,UAChBtV,EAAI6e,GAAQA,EAAK7e,EACjBmN,EAAI0R,GAAQA,EAAK1R,EAEjB6S,EAAM,CAAC,IAAK,KAIhB,QALoBrc,IAAN3D,QAAyB2D,IAANwJ,EAS7B,OAHA3D,EAAKqyE,KAAI,GACTryE,EAAKkqB,GAAKlqB,EAAKxJ,EAAIA,OACnBwJ,EAAKoqB,GAAKpqB,EAAK2D,EAAIA,GAKvB,GAAsB,gBAAlB3D,EAAK8uE,SAA4B,CACjC,GAAkC,QAA9BoC,EAAMxE,oBAEN,OADA5T,EAAW94D,IACJ,EAGX,IAAIu4D,EAAMv4D,EAAK8L,IAAI,YAUnB,OARKysD,EAAIE,QAAWF,EAAIC,UACpBD,EAAM,CACFC,SAAU,GACVC,OAAQ,GAAKz4D,EAAK86B,eAI1B+iD,EAAW79E,EAAM89E,EAAYvlB,IAIjC,GAAIO,EAAW94D,GACX,OAAO,EAGP44D,IAuBJC,EAAqB,SAAf74D,EAAKiE,OAAmCjE,EAAKwsD,GAVxC,CACHh2D,GAFMwJ,EAQH+4D,KANKviE,EAhEL,GAgEoBonF,EAAGvlD,OAhEvB,IAiEH10B,EAAG3D,EAAK2D,EAjEL,GAiEoBi6E,EAAGvlD,OAjEvB,MAyE+C0gC,IAEvC,eAAf/4D,EAAKiE,QACL40D,EAAKE,IACL/4D,EAAKxJ,EAAIwJ,EAAKkqB,GAAK2uC,EAAGriE,EACtBwJ,EAAK2D,EAAI3D,EAAKoqB,GAAKyuC,EAAGl1D,GAE1BvP,QAAQkI,OAAO0D,EAAM64D,IAzBrB,SAASE,IACL,MAAO,CACHviE,EAAGonF,EAAGtlD,QAAQ9hB,EAAI,IAClB7S,EAAGi6E,EAAGtlD,QAAQ9hB,EAAI,MAyB9B,SAASsiD,EAAW/8D,GAChB,IAgBqBw8D,EACjB34D,EAjBA24D,EAAMx8D,EAAG+P,IAAI,YAEjB,SAAKysD,GAAuB,IAAfA,EAAIE,QAAgC,IAAhBF,EAAIC,WAIjB,QAAhBD,EAAIS,QACG6kB,EAAW9hF,GASDw8D,EATqBA,GAUtC34D,EAAI2rE,EAAM51D,cACH/V,EAAE,CAAC24D,EAAIC,QAASD,EAAIE,SAAW,CAAC,EAAG,KAT1B,SAAhBF,EAAIS,SACG6kB,EAAW9hF,EAAI+hF,EAAYvlB,KAW1C,SAASulB,EAAYvlB,GACjB,IAGIxhD,EAAQ,KAHEwzD,EAAMwT,YAAc,KAI9BC,GAAW,KAHAzT,EAAM0T,aAAe,KAGFlnE,GAAU,EAK5C,MAAO,CAHCA,EAAQwhD,EAAIC,QACXzhD,EAAQwhD,EAAIE,OAAUulB,GAKnC5pF,QAAQC,OAAO,WACd+E,QAAQ,2BACL,CAAC,gBAAiB,wBACd,0BAA2B,yBAC3B,SAAU8kF,EAAMrB,EAASsB,EAASxL,GAO9B,OALAiL,EAAKM,EACL3S,EAAQsR,EACRtS,EAAQ4T,EACRjN,EAAQyB,EAED,CACHnnB,aAAcA,EACdsN,WAAYA,MAxIhC;CCDC,WACG,aAEA,IAEIliE,EAAMpC,EAAIi1E,EAAOqH,EAAMsN,EAAMC,EAF7B1T,EAAO,wBAIPtO,EAAW,GACXttD,EAAU,KACVjP,GAAQ,EAMZ,SAAS9F,EAAKma,EAAInQ,GACdpN,EAAKoD,KAAK2wE,EAAOx2D,EAAK,OAASnQ,GAGnC,SAASs4D,EAAUC,EAAK94C,GACpB,MAAmB,MAAXA,EAAI,GAAc84C,EAAM,IAAM94C,EAAI/d,MAAM,GAAK+d,EA+BzD,SAASmE,EAASvO,GACd,IAzCWlF,EAAInQ,EAYGwJ,EACdwE,EACAuqD,EACA94C,EACAlgB,EACAi5D,EAwBAxxD,EAAI,WACJyxD,EAAOjoE,EAAGyF,IAAIof,GACdqjD,EAAKD,EAAOjoE,EAAGyF,IAAIof,EAAQnc,aAAe,KAC1CuB,EAAKg+D,EAAOA,EAAK9tB,UAAY,GAEjC,OAAKlwC,EAGD49D,EAAS59D,GACFzE,EAAKgR,EAAG,wBAA0BvM,EAAK,MAElD49D,EAAS59D,GAAM4a,EAxCG7L,EAyCL6L,EAxCTrH,EAAQxd,EAAGyF,IAAIuT,EAAEuE,QACjBwqD,EAAM/uD,EAAEmhC,UACRlrB,EAAMjW,EAAE4L,SAAW,UACnB7V,EAAO,GACPi5D,EAAO,GAEXhvD,EAAEmvD,SAAWL,EAAUC,EAAK94C,GAE5BjW,EAAEovD,MAAQ,SAAU1jD,GAChB,OAAOojD,EAAUC,EAAKrjD,IAE1B1L,EAAEqvD,KAAO,SAAU3lD,GACf,OAAOqlD,EAAM,IAAMrlD,GAGnBlF,IACA5d,QAAQ6V,QAAQ+H,EAAO,SAAUvU,EAAOD,GACpC,IAAIs/D,EAAUP,EAAM,IAAM/+D,EAC1B+F,EAAK,IAAMu5D,GAAWr/D,EAAMoa,GAC5BtU,EAAKu5D,GAAWr/D,EAAMyM,EACtBsyD,EAAK71D,KAAK,IAAMnJ,KAEpByQ,GAAGiE,eAAe3O,GAClB3M,EAAKmB,MAAM,6BAA8BwkE,EAAKC,IAmB9CE,IACKloE,EAAGuX,IAAI2wD,EAAGtiB,WAGXsiB,EAAGtiB,UAAUnwC,QAAQ,SAAUS,GACjB,MAANA,GAAcgyD,EAAGhyD,IACjB1Q,EAAKgR,EAAG,OAASN,EAAI,uCAJ7B1Q,EAAKgR,EAAG,mDAUhBpU,EAAKmB,MAAM4yE,EAAO,uBAAyBlsE,EAAI4a,KAnEpClF,EA+CMnJ,EA/CFhH,EA+CK,gCA9CpBpN,EAAKoZ,MAAM26D,EAAOx2D,EAAK,OAASnQ,IAqEpC,SAASk5D,EAAa5iC,EAAM6iC,GACxB,IAAIvxD,EAAM,GACN5G,EAAM,EAYV,OAVA5Q,QAAQ6V,QAAQoyD,EAAU,SAAUU,GAChCziC,EAAK3zB,KAAK,CACN8c,IAAKs5C,EAAGJ,SACRjjC,QAAUqjC,EAAGrjC,SAAW,GACxBn5B,GAAI,WACA68D,EAAYL,EAAGpuB,UAAWwuB,MAGlCvxD,EAAImxD,EAAGpuB,WAAa3pC,MAEjB4G,EAGX,SAASwxD,EAAY3+D,EAAI0+D,GACrB,IAAIE,EAAOtuD,GAAWA,EAAQ4/B,YAAclwC,EACxCqU,EAAU,GAGd,SAASwqD,EAAKhsC,GACV,IAAIirC,EAAMxtD,EAAQ4/B,UAClB/3C,EAAKmB,MAAM,WAAYu5B,EAAIirC,GAC3BxtD,EAAQuiB,KACRxe,EAAQwe,GAAMirC,GAGdz8D,GAAUu9D,IACVtuD,GAAWuuD,EAAK,eAChBvuD,EAAUstD,EAAS59D,KACR6+D,EAAK,YAEhBH,EAAS1+D,EADCsQ,GAAWva,EAAGyF,IAAI8U,EAAQ7R,eAO5C,SAASkhE,EAAM5nE,GACX,IAAIrB,EAAI4Z,GAAWA,EAAQ2rC,MAC3B,OAAOvlD,GAAKX,EAAGsB,IAAIX,EAAEqB,IAGzB,SAAS6nE,IACL,IAAIC,EAAKF,EAAM,UACf,QAAOE,GAAKA,IAGhB,SAASC,IACL,IAAIh+D,EAAK69D,EAAM,SACf79D,GAAMA,IAGV,SAASi+D,EAAiBj7D,GACtB,IAAIhD,EAAK69D,EAAM,UACf79D,GAAMA,EAAGgD,GAGb,SAASk7D,EAAgBtM,GACrB,IAAI5xD,EAAK69D,EAAM,SACf79D,GAAMA,EAAG4xD,GAGb,SAASuM,EAAcn3D,GACnB,IAAIhH,EAAK69D,EAAM,aACf79D,GAAMA,EAAGgH,GAGb,SAASo3D,IACL,IAAIp+D,EAAK69D,EAAM,YACf79D,GAAMA,IAOV,SAASyqE,EAAWpqB,GAChB,IAAImc,EAAKV,EAASzb,GACbmc,GAGDhuD,EAAUguD,EACV0M,EAAM8L,aAAaxmE,EAAQ7R,cAH3BtG,EAAKoZ,MAAM,mCAAqC4wC,GAOxD,SAASuG,EAAe5jD,GACpB3M,EAAKib,KAAK,iCAAkCtO,GAC5C66E,EAAK5/E,QACL,IAAI8/E,EAAgBtpF,GAAGC,OAAO,qBAC9BoH,EAAEgC,KAAKkF,EAAK6mD,MAAO,SAAUv1D,GACzB,IAAI4J,EAAK5J,EAAK4J,GAAG1F,QAAQ,UAAW,SAASA,QAAQ,IAAK,KACtDwlF,EAAWzN,EAAK0N,QAAQ//E,GACpB8/E,GACAH,EAAK72D,SAAS82D,EAAWxpF,EAAMypF,EAAe,CAC1CzpF,KAAM0pF,MAO1BnqF,QAAQC,OAAO,WACd+E,QAAQ,sBAAuB,CAC5B,OAAQ,YAAa,yBACrB,qBAAsB,uBAAwB,iBAE9C,SAAUkB,EAAQG,EAAM2vE,EAASkI,EAC7BmM,EAAQC,GAQR,OAPA9nF,EAAO0D,EACP9F,EAAKiG,EACLgvE,EAAQW,EACR0G,EAAOwB,EACP8L,EAAOK,EACPJ,EAAYK,EAEL,CACH92D,SAAUA,EACVojD,WAAYA,EACZ9N,aAAcA,EACdE,YAAaA,EACbd,UAAWA,EAEX5hB,MAAO,CACHC,OAAQ0jB,EACRkB,YAAahB,EACbiB,aAAchB,EACdiB,YAAahB,EACbiB,UAAWhB,EACXiB,SAAUhB,GAEdxX,eAAgBA,MAvNhC;CCCA,WACI,aAEA,IAAIzsD,EAEAI,EAAQ,CACR6yE,WAAY,SAAUlvE,EAAIxD,GACtB1C,KAAKkG,GAAKA,EACVlG,KAAKwD,GAAKrB,EAAGkB,YAAY6C,EAAIxD,GAC7B1C,KAAKioE,QAEDvlE,EAAQ+F,MACRzI,KAAKwD,GAAGiF,QAGhBw/D,MAAO,WACHjoE,KAAKwD,GAAGyC,QACRjG,KAAKiH,OAASjH,KAAKwD,GAAGnE,OAAO,OAAO4E,QAAQ,UAAU,GACtDjE,KAAKkH,KAAOlH,KAAKwD,GAAGnE,OAAO,OAAO4E,QAAQ,QAAQ,GAClDjE,KAAKmH,OAASnH,KAAKwD,GAAGnE,OAAO,OAAO4E,QAAQ,UAAU,IAE1DwzE,eAAgB,SAAUx5E,GACtB,OAAO+B,KAAKiH,OAAO5H,OAAOpB,IAE9By5E,aAAc,SAAUz5E,GACpB,OAAO+B,KAAKkH,KAAK7H,OAAOpB,IAE5B05E,eAAgB,SAAU15E,GACtB,OAAO+B,KAAKmH,OAAO9H,OAAOpB,IAE9Bu5E,aAAc,WACVx3E,KAAKiH,OAAOuE,UAAU,KAAKM,SAC3B9L,KAAKkH,KAAKsE,UAAU,KAAKM,SACzB9L,KAAKmH,OAAOqE,UAAU,KAAKM,UAE/B3F,QAAS,WACLhE,EAAG0F,aAAa7H,KAAKkG,KAEzB2J,UAAW,WACP,OAAO7P,KAAKwD,GAAGqM,cAIvBhU,QAAQC,OAAO,WACd+E,QAAQ,oBAAqB,CAC1B,cAAe,eACf,SAAUulF,EAAM//E,GAIZ,OAFAlE,EAAKkE,EAEE+/E,EAAKriF,OAAOxB,MAlD/B;CCAA,WACI,aAEA,IAAI0yE,EAAYD,EAEZlsB,EAAsB,CACtBC,QAAS,QAGb,SAASs9B,EAAiBr7E,EAAM8oE,GAO5B,OAAO,IALoBmB,EAAWlxE,OAAO,CACzCiwD,MAAOghB,EACPlB,OAAQA,IAGL,CAAyB9oE,GAGpCnP,QAAQC,OAAO,WACV+E,QAAQ,yBAA0B,CAC/B,mBAAoB,kBAAmB,iBACvC,6BAA8B,+BAE9B,SAAUrC,EAAK63E,EAAKyE,EAAWwL,EAAOlS,GAmClC,OAjCAa,EAAaoB,EAEbrB,EAAQ8F,EAAU/2E,OAAO,CAErBwyE,SAAU,cACVE,OAAQ,CACJ8P,SAAY,mBACZ7P,MAAS,WAGbtB,WAAY,WACRp1E,KAAK22E,MAAQ32E,KAAKm2B,YAAYiE,UAC9Bp6B,KAAK22E,MAAMvB,WAAW7nE,MAAMvN,KAAMqN,YAEtCupE,SAAU,WACF52E,KAAKwD,IACLxD,KAAKwD,GAAG+B,KAAK,QAASvF,KAAK62E,iBAGnCloB,YAAa,WACT23B,EAAMrL,aAAaj7E,OAEvBwE,KAAM,WACF,IAAIoO,EAAO5S,KAAKuT,IAAI,QACpB,OAAOu1C,EAAoBl2C,IAASA,GAAQ,WAEhD8hE,iBAAkB,WACVj4E,GAAG6d,MAAMuqE,mBACbzQ,EAAMM,iBAAiB10E,KAAKuT,IAAI,OAChC+yE,EAAM5iF,WAIP,CACH2iF,iBAAkBA,MA5DtC;CCDA,WAEI,IAAIlkF,EAEA6rE,EAAoB,CACpBxmB,MAAO,EACP3jC,QAAS,EACT4jC,OAAQ,EACRC,MAAO,EACPC,OAAQ,EACRM,MAAO,EACPE,MAAO,EACPP,OAAQ,EACRh6B,GAAI,EACJi6B,IAAK,EACLQ,KAAM,UACNN,QAAS,GAGb,SAASy+B,IACL,OAAOrkF,EAAG48B,SAAS,cAAeivC,GAGtC,SAASz6D,EAAItO,GAET,OADkBuhF,IACCvhF,GAGvB,SAASgY,EAAIhY,EAAKC,GACd,IAAIuhF,EAAcD,IAGlB,OAFAC,EAAYxhF,GAAOC,EACnB/C,EAAGk9B,SAAS,cAAeonD,GACpBA,EAAYxhF,GAGvBpJ,QAAQC,OAAO,WACd+E,QAAQ,oBAAqB,CAC1B,eACA,SAAUwF,GAIN,OAFAlE,EAAKkE,EAEE,CACHkN,IAAKA,EACL0J,IAAKA,MA5CrB;CCCA,WACI,aAEA,IAAI+3D,EAEAtC,EAIJ72E,QAAQC,OAAO,WACd+E,QAAQ,qBAAsB,CAC3B,OAAQ,aAAc,wBAAyB,qBAC/C,mBAAoB,mBAAoB,mBAAoB,2BAC5D,yBAA0B,sBAAuB,0BAA2B,kBAC5E,wBAAyB,yBAA0B,iCACnD,SAAUxC,EAAMu3E,EAAS8Q,EAAMC,EAAMC,EAAMpO,EAAMpH,EAAMyV,EAAO5V,EAAO8B,EAC3Df,EAAOb,EAAM6B,EAAO8T,EAAM3U,GAEhC6C,EAAQY,EAER,IAAImR,EAAShU,EAAehvE,OAAO,CAC/BqxE,WAAY,YACR1C,EAAW1yE,MACNg0D,MAAQ,KAEbh0D,KAAKgnF,YAAa,EAClBhnF,KAAKinF,WAAa,KAClBjnF,KAAKq5E,MAAQ,KAEb,IAAI6N,EAAclS,EAAMjxE,OAAO,CAC3Bq2D,aAAcp6D,KAAKo6D,aACnBxI,MAAO5xD,KAAKy5E,YAAYj8E,KAAKwC,QAGjCA,KAAKg0D,MAAQ,IAAIkzB,EACjBlnF,KAAKmnF,oBAGTA,iBAAkB,WACdnnF,KAAKg0D,MAAM/2C,IAAI,CAAEmqE,WAAYV,EAAKW,0BAA0B,GAAIrnF,QAChEA,KAAKg0D,MAAM/2C,IAAI,CAAE4zB,QAAS81C,EAAKzQ,uBAAuB,GAAIl2E,QAC1DA,KAAKg0D,MAAM/2C,IAAI,CAAEyqC,MAAOk/B,EAAKjM,qBAAqB,GAAI36E,QACtDA,KAAKg0D,MAAM/2C,IAAI,CAAEqqE,YAAaR,EAAKT,iBAAiB,GAAIrmF,QACxDA,KAAKg0D,MAAM/2C,IAAI,CAAE40C,MAAO2mB,EAAK+H,qBAAqB,GAAIvgF,SAE1Dw6E,eAAgB,WACZ,OAAOx6E,KAAKgnF,YAAchnF,KAAKinF,YAAcjnF,KAAKq5E,OAEtDtF,OAAQ,SAAU9uE,EAAKC,GACnBlF,KAAKiF,GAAOC,EACRlF,KAAKw6E,kBACLx6E,KAAKunF,eAGbA,YAAa,WAETvnF,KAAKg0D,MAAM/2C,IAAI,CACX/W,GAAIlG,KAAKinF,WAAW/gF,GACpBshF,WAAYxnF,KAAKinF,WAAWO,aAGhCxnF,KAAKynF,iBACLznF,KAAK0nF,sBAGL1nF,KAAKg0D,MAAM/2C,IAAI,CAAEmqE,WAAYV,EAAKW,0BAA0BrnF,KAAKinF,WAAWG,WAAYpnF,QACxFA,KAAKg0D,MAAM/2C,IAAI,CAAE4zB,QAAS81C,EAAKzQ,uBAAuBl2E,KAAKinF,WAAWp2C,QAAS7wC,QAC/EA,KAAKg0D,MAAM/2C,IAAI,CAAEyqC,MAAOk/B,EAAKjM,qBAAqB36E,KAAKinF,WAAWv/B,MAAO1nD,QACzEA,KAAKg0D,MAAM/2C,IAAI,CAAEqqE,YAAaR,EAAKT,iBAAiBrmF,KAAKq5E,MAAOr5E,QAChEA,KAAKg0D,MAAM/2C,IAAI,CAAE40C,MAAO2mB,EAAK+H,qBAAqBvgF,KAAKinF,WAAWp1B,MAAO7xD,QAErEA,KAAK2nF,iBAAmB3nF,KAAKg0D,MAAMzgD,IAAI,cAAc2hE,OAAOlvE,QAC5DirE,EAAMvtE,OAGV1D,KAAK4uB,OAAO4wD,oBACZx/E,KAAK4nF,iBAETloE,MAAO,WACH1f,KAAKinF,WAAa,KAClBjnF,KAAKmnF,oBAETU,WAAY,SAAU5iF,GAElB,OADY,IAAI61B,OAAO,UACVJ,KAAKz1B,GAAK,IAE3ByiF,oBAAqB,WACjB,IAAI/T,EAAQ3zE,KACZ8D,EAAEgC,KAAK9F,KAAKinF,WAAWa,cAAe,SAAUroF,EAAUyG,GACtDpC,EAAEgC,KAAK6tE,EAAM0F,MAAO,SAAU0O,GACtBA,EAAK7hF,KAAOA,IACZ6hF,EAAKtoF,SAAWA,QAKhCgoF,eAAgB,WACZ,IAAI9T,EAAQ3zE,KACRgoF,EAAoB,GAExBlkF,EAAEgC,KAAK9F,KAAKinF,WAAWp1B,MAAO,SAAUv1D,GAEpC,IAEI2I,EAFM0uE,EAAMkU,WAAWvrF,EAAK2rF,KAEhB,IADNtU,EAAMkU,WAAWvrF,EAAK4rF,KAE5BzS,EAAauS,EAAkB/iF,IAAQ,GACjCnB,EAAE4zB,KAAK+9C,EAAYn5E,IAGzBm5E,EAAWrnE,KAAK9R,GAGpB0rF,EAAkB/iF,GAAOwwE,IAG7B3xE,EAAEqkF,MAAMH,EAAmB,SAAUvS,GACT,EAApBA,EAAWzvE,QACXlC,EAAEgC,KAAK2vE,EAAY,SAAUn5E,EAAMimC,GAC/BjmC,EAAK6kF,UAAY,CACbC,YAAa3L,EAAWzvE,OACxBu8B,MAAOA,QAM3BolD,aAAc,WACV,MAxHL,WAwHY3nF,KAAKg0D,MAAMzgD,IAAI,OAE1B6mD,aAAc,SAAU99D,EAAM4J,GAI1B,MAHyB,eAArB5J,EAAKiX,IAAI,UACTrN,EAAKlG,KAAK6nF,WAAW3hF,IAElBlG,KAAKg0D,MAAMzgD,IAAI,WAAWA,IAAIrN,IACjClG,KAAKg0D,MAAMzgD,IAAI,SAASA,IAAIrN,IAC5BlG,KAAKg0D,MAAMzgD,IAAI,cAAcA,IAAIrN,IAEzCuzE,YAAa,WACT,OAAIz5E,KAAKg0D,MACE,GAAG+Z,OACN/tE,KAAKg0D,MAAMzgD,IAAI,WAAW2hE,OAC1Bl1E,KAAKg0D,MAAMzgD,IAAI,SAAS2hE,OACxBl1E,KAAKg0D,MAAMzgD,IAAI,cAAc2hE,OAC7Bl1E,KAAKg0D,MAAMzgD,IAAI,eAAe2hE,QAG/B,IAEXwE,YAAa,WACT,OAAO15E,KAAKg0D,MAAMzgD,IAAI,SAAS2hE,QAEnC+Q,QAAS,SAAUmC,GACf,OAAOpoF,KAAKg0D,MAAMzgD,IAAI,SAASA,IAAI60E,IAEvCC,UAAW,SAAUC,GACjB,OAAOtoF,KAAKg0D,MAAMzgD,IAAI,WAAWA,IAAI+0E,IAEzC1O,kBAAmB,SAAU2O,GACzB,IAAI32B,EAAQ5xD,KAAKy5E,cACjB,OAAO31E,EAAEwpB,OAAOskC,EAAO22B,IAE3BpL,iBAAkB,WACd,IAAIv7C,EAAW5hC,KAAK45E,kBAAkB,SAAUnyE,GAC5C,OAAOA,EAAK8L,IAAI,YAAY,KAGhC,QAAIquB,EAAS57B,SAET47B,EAASlwB,QAAQ,SAAUjK,GACvBA,EAAKg6E,aAGToF,IAAQrjF,GAAGE,QACJ,IAKf05E,aAAc,WACV,IAAIx7C,EAAW99B,EAAEwpB,OAAOttB,KAAK05E,cAAe,SAAUp9E,GAClD,OAAOA,EAAKiX,IAAI,YAAY,KAGhC,QAAIquB,EAAS57B,SAET47B,EAASlwB,QAAQ,SAAUpV,GACvBA,EAAKmlF,aAGToF,IAAQrjF,GAAGE,QACJ,IAKf87C,YAAa,WACT,IAAI9R,EAAQ1tC,KAAKwoF,gBAAgB,SAWjC,OAVAxoF,KAAKyoF,gBAAgB,SAAU/6C,GAE/B5pC,EAAEgC,KAAK9F,KAAKg0D,MAAMzgD,IAAI,SAAS2hE,OAAQ,SAAUn9D,GAC7CA,EAAKwjE,kBAGTz3E,EAAEgC,KAAK9F,KAAKg0D,MAAMzgD,IAAI,SAAS2hE,OAAQ,SAAU54E,GAC7CA,EAAKi/E,mBAGD7tC,GAEZmvC,qBAAsB,WAClB,IAAInvC,EAAQ1tC,KAAKwoF,gBAAgB,mBAMjC,OALAxoF,KAAKyoF,gBAAgB,mBAAoB/6C,GACzC5pC,EAAEgC,KAAK9F,KAAKy5E,cAAe,SAAUhyE,GACjCA,EAAKsvE,0BAGDrpC,GAEZzH,OAAQ,SAAU3rB,GAETta,KAAKw6E,kBACNx6E,KAAK4uB,OAAO4wD,oBAGZx/E,KAAKsa,EAAM1H,MACX5S,KAAKsa,EAAM1H,MAAM0H,GAEjBjc,EAAKoZ,MAAM,2BAA4B6C,GAG3Cta,KAAK4uB,OAAOqX,SACZjmC,KAAK4nF,iBAETA,cAAe,WACqB,EAA5B5nF,KAAKy5E,cAAczzE,OACnBmsE,EAAOzuE,OAEPyuE,EAAO1pE,QAIfigF,sBAAuB,SAAUpuE,GAQ7B,GANkBta,KAAKg0D,MAAMzgD,IAAI,UAG7BvT,KAAKg0D,MAAM/2C,IAAI,CAAE40C,MAAO2mB,EAAK+H,qBAAqB,GAAIvgF,QAGvC,UAAfsa,EAAMquE,KAAkB,CACxB,IAAIrsF,EAAO0D,KAAKg0D,MAAMzgD,IAAI,SAAS+hE,IAAIh7D,EAAMtP,MAC7C1O,EAAKu4D,aACLx2D,EAAKmB,MAAM,aAAclD,KAGjCssF,aAAc,SAAUtuE,GACpB,IAAIhe,EAAO0D,KAAKimF,QAAQ3rE,EAAMuuE,SAC9BvsF,EAAKwP,SACL9L,KAAKg0D,MAAMzgD,IAAI,SAASzH,OAAOxP,IAEnCwsF,wBAAyB,SAAUxuE,GAE/B,IACI02B,EADgBhxC,KAAKg0D,MAAMzgD,IAAI,YAI/BvT,KAAKg0D,MAAM/2C,IAAI,CAAE4zB,QAAS81C,EAAKzQ,uBAAuB,GAAIl2E,QAG3C,UAAfsa,EAAMquE,MACN33C,EAAShxC,KAAKg0D,MAAMzgD,IAAI,WAAW+hE,IAAIh7D,EAAMtP,MAC7C3M,EAAKmB,MAAM,eAAgBwxC,IACL,YAAf12B,EAAMquE,OACb33C,EAAShxC,KAAKqoF,UAAU/tE,EAAMuuE,UACvB5rE,IAAI3C,EAAMtP,OAGzB+9E,eAAgB,SAAUzuE,GACtB02B,OAAOllC,UAEXk9E,sBAAuB,SAAU1uE,GAC7B,IACIvC,EADc/X,KAAKg0D,MAAMzgD,IAAI,UAI7BvT,KAAKg0D,MAAM/2C,IAAI,CAAEyqC,MAAOk/B,EAAKjM,qBAAqB,GAAI36E,QAGvC,UAAfsa,EAAMquE,OACN5wE,EAAO/X,KAAKg0D,MAAMzgD,IAAI,SAAS+hE,IAAIh7D,EAAMtP,MACzC3M,EAAKmB,MAAM,aAAcuY,KAGjCkxE,wBAAyB,SAAU3uE,GAC/B,IACIw5D,EADmB9zE,KAAKg0D,MAAMzgD,IAAI,eAIlCvT,KAAKg0D,MAAM/2C,IAAI,CAAEmqE,WAAYV,EAAKW,0BAA0B,GAAIrnF,QAGjD,UAAfsa,EAAMquE,OACN7U,EAAS9zE,KAAKg0D,MAAMzgD,IAAI,cAAc+hE,IAAIh7D,EAAMtP,MAChD3M,EAAKmB,MAAM,eAAgBs0E,OASvC,OAHWpB,GAAY,IAAIqU,KArTvC;CCAA,WAKkC,SAA1BmC,IACAlpF,KAAK8+B,UAAY,GACjB4zC,EAAW1yE,KALf,IAAI2X,EAAMnZ,EACNk0E,EAOJwW,EAAwBhgF,UAAY,CAEhCu2B,YAAa,SAAUnlB,EAAO6uE,GACrBnpF,KAAK8+B,UAAUxkB,KAChBta,KAAK8+B,UAAUxkB,GAAS,IAE5Bta,KAAK8+B,UAAUxkB,GAAOlM,KAAK+6E,IAE/BxpD,eAAgB,SAAUwpD,KAE1BC,gBAAiB,SAAU9uE,EAAOC,GAC9BzW,EAAEgC,KAAK9F,KAAK8+B,UAAUxkB,GAAQ,SAAUtS,GACpCA,EAAGuS,MAIXm6D,iBAAkB,SAAUxuE,GACxByR,EAAKhW,OAAO,WAAYuE,GACxB1H,EAAI4L,UAAU,iBAAkB,CAC5Bs4B,IAAKx8B,IAETlG,KAAKopF,gBAAgB,0BAA2BljF,IAEpD65E,yBAA0B,WACtB//E,KAAKopF,gBAAgB,+BAGzBC,QAAS,WACLrpF,KAAK8+B,UAAY,KAIzBjjC,QAAQC,OAAO,WACV+E,QAAQ,+BAAgC,CACrC,YAAa,mBACb,SAAUub,EAAQ7V,GAKd,OAHAoR,EAAOyE,EACP5d,EAAM+H,EAECmsE,GAAY,IAAIwW,KAlDvC;CCAA,WACI,aAEA,IAAI9X,EAAMkY,EAEN5W,EACApI,EACA91C,EACA+0D,EAgBJ,SAAS5qB,EAAiB50D,GACtB,IAe6BpH,EACzBiX,EACAgpC,EACAz9C,EACAqkF,EACAC,EAnBAntF,EAmCR,SAA4BghE,GACxB,IAEIM,EAFAC,EALR,SAAcH,GACV,OAAOA,EAAOlpC,EAAOhW,QAILi/C,CAAK,IACjBK,EAAU,KAyBd,IAAIjM,EAAQ,GAER6gB,EAASoB,OAAO9f,MAAMzgD,IAAI,WAC1Bs+C,EAAQ6gB,EAASoB,OAAO4F,eAGxB7nB,EAAM7rD,SACN43D,EAAsB,EAAZC,EAEVhM,EAAMngD,QAAQ,SAAUC,GACpB,IACIo8C,EAEA2P,EArBKtnD,EAAM/O,EAAGuS,EAdXxD,EAAMknD,EACbzqD,EACAC,EACAC,EACAC,EACA+qD,EACAC,EACA7rD,EAyBIiE,EAAOzE,EAAE4B,IAAI,YAMb6C,IAtCSknD,EAuCWA,EAtCxBzqD,GADOuD,EAuCWA,GAtCRvD,GACVC,EAAKsD,EAAKtD,GACVC,EAAKqD,EAAKrD,GACVC,EAAKoD,EAAKpD,GACV+qD,EAAKT,EAAMr/D,EACX+/D,EAAKV,EAAMlyD,EACX+G,IAAMa,EAAKF,IAAOirD,EAAKlrD,IAAOE,EAAKF,IAAOmrD,EAAKlrD,KAC1CyqD,EAAGvqD,EAAKF,GAAMyqD,EAAGxqD,EAAKF,IAMT+G,EA0Ba0jD,KA1BhBj2D,EAyBX0mD,EA5BD,CAAE9vD,EAFA8/D,EAAK5rD,GAAKa,EAAKF,GAER1H,EADP4yD,EAAK7rD,GAAKY,EAAKF,KAKlB5U,GADOmY,EA0BSA,GAzBPvD,IAAMxL,EAAEpJ,EAAImY,EAAKrD,IAC5B1L,EAAEpJ,EAAImY,EAAKvD,IAAMxL,EAAEpJ,EAAImY,EAAKrD,IAC5B1L,EAAE+D,EAAIgL,EAAKtD,IAAMzL,EAAE+D,EAAIgL,EAAKpD,IAC5B3L,EAAE+D,EAAIgL,EAAKtD,IAAMzL,EAAE+D,EAAIgL,EAAKpD,MACzBwqD,EAAMn2D,EAAGuS,IAAMikD,MAuBVH,EAAOF,EAAMzP,EAAOuP,IACTM,IACPA,EAAUF,EACVI,EAAUnsD,OAO9B,OAAOmsD,EA5FIH,EAckBh7D,EAfI3C,KAgB7B4Z,EAAInd,GAAG6gE,MAAM36D,GACbigD,EAAKpuB,EAAOhW,QACZrZ,EAAKqvB,EAAOviB,YACZu3E,GAAM5vE,EAAE,GAAKzU,EAAG,IAAMy9C,EACtB6mC,GAAM7vE,EAAE,GAAKzU,EAAG,IAAMy9C,EACnB,CAAE3kD,EAAGurF,EAAIp+E,EAAGq+E,KAlBfntF,GACIitF,GAAuBA,IAAwBjtF,GAC/CitF,EAAoBrrB,YAExB5hE,EAAKgiE,WACEirB,GACPA,EAAoBrrB,YAGxBqrB,EAAsBjtF,EAY1B,SAASihE,EAAGt/D,GACR,OAAOA,EAAIA,EAGf,SAASu/D,EAAMn2D,EAAGuS,GACd,OAAOgF,KAAKyuC,KAAKkQ,EAAGl2D,EAAEpJ,EAAI2b,EAAE3b,GAAKs/D,EAAGl2D,EAAE+D,EAAIwO,EAAExO,IAmEzB,SAAnBs+E,KACAhX,EAAW1yE,MACN2pF,cAAgB,GACrB3pF,KAAK4pF,eAAiB,GAG1BF,EAAiBxgF,UAAY,CACzB2F,KAAM,WACF2lB,EAAS48C,EAAKgC,YAEd,IAAI5oE,EAAM/N,GAAGC,OAAO,UACpB8N,EAAIlG,GAAG,YAAaq6D,GACpBn0D,EAAIlG,GAAG,QA3Hf,WACQ7H,GAAG6d,MAAMuqE,mBAERpoF,GAAG6d,MAAM6hB,UACVn8B,KAAK6pF,iBAGJ7pF,KAAKo5D,iBACFmwB,GACAvpF,KAAKk7D,aAAaquB,GAAqB,KAkHT/rF,KAAKwC,QAE3Cg3E,cAAe,WAEX,IAAI8S,EAAY9pF,KAAK2pF,cAAc3jF,OAEjB,IAAd8jF,EACA9pF,KAAK2pF,cAAc,GAAGh7B,cACH,EAAZm7B,EACPR,EAAMvR,UAAU/3E,KAAK2pF,eAErBL,EAAM5lF,QAGdw3D,aAAc,SAAUzzD,EAAM+uE,GAE1B,IAAIl8D,EAAQ7d,GAAG6d,MACXyvE,EAAYjmF,EAAEiC,QAAQ/F,KAAK4pF,eAAgBniF,EAAK8L,IAAI,OAEpDw2E,EAAY,KAERvT,GAAuBl8D,EAAM6hB,WAAaq6C,GAC1Cx2E,KAAK6pF,iBAGT7pF,KAAK2pF,cAAcv7E,KAAK3G,GACxBzH,KAAK4pF,eAAex7E,KAAK3G,EAAK8L,IAAI,OAElC9L,EAAK/K,UAELsD,KAAKgqF,WAAWviF,EAAMsiF,GAG1B/pF,KAAKg3E,iBAETgT,WAAY,SAAUviF,EAAM86B,GACxBviC,KAAK2pF,cAAczxD,OAAOqK,EAAO,GACjCviC,KAAK4pF,eAAe1xD,OAAOqK,EAAO,GAClC96B,EAAKg6E,YAEToI,eAAgB,WACZ/lF,EAAEgC,KAAK9F,KAAK2pF,cAAe,SAAUliF,GACjCA,EAAKg6E,aAGTzhF,KAAK2pF,cAAgB,GACrB3pF,KAAK4pF,eAAiB,GACtB5pF,KAAKg3E,iBAET5d,cAAe,SAAUn7D,GACrB,IAAIstE,EAAKjB,EAET,OADAA,EAAegS,QAAQr+E,GAChBstE,IAIf1vE,QAAQC,OAAO,WACd+E,QAAQ,qBAAsB,CAC3B,mBAAoB,0BACpB,SAAUkxE,EAAQkY,GAGd,OAFA7Y,EAAOW,EACPuX,EAAQW,EACDvX,GAAY,IAAIgX,KAnMnC;CCAC,WACG,aAIA,SAAS5+E,EAAKhO,EAAGF,GACf,MAAO,OAASE,EAAI,IAAMF,EAG5Bf,QAAQC,OAAO,WACV+E,QAAQ,0BAA2B,CAChC,OAAQ,YACR,sBAAuB,gBAAiB,eAExC,SAAUxC,EAAMpC,EAAI82E,EAAgBlJ,EAAIv9D,GAgIpC,OAHuB,IA3HLymE,EAAehvE,OAAO,CAEpCmC,GAAI,gBACJgtE,YAAa,eAEbrkE,KAAM,WACF7O,KAAKwK,IAAM/N,GAAGC,OAAO,UACrBsD,KAAKkqF,mBACLlqF,KAAK2C,UAAY3C,KAAKmzE,cAAc,oBAAqB,MAE7Dc,WAAY,SAAU/tE,GAClB,IAAIytE,EAAQ3zE,KAiBZ,OAhBAA,KAAK2C,UAAU6I,UAAU,KAAKM,SAC9B9L,KAAK4uB,OAASi7C,EAAGj7C,OAAO1oB,GAEpBlG,KAAK4uB,QACL5uB,KAAK1C,MAAQ0C,KAAK4uB,OAAO5jB,KAAKlO,EAC9BkD,KAAK3C,OAAS2C,KAAK4uB,OAAO5jB,KAAKpO,EAE/BoD,KAAKmqF,eAEDluF,EAAGgU,QAAQ,gBACXjQ,KAAKoqF,cAGT/rF,EAAKoD,KAAK,+BAAgCyE,GAGvC,IAAIg9E,QAAQ,SAAUp2D,GACzBA,EAAQ6mD,MAGhBuW,iBAAkB,WACflqF,KAAKsgB,KAAOtgB,KAAKwK,IAAInL,OAAO,QACtBkG,KAAK,KAAM,YAEpBigF,SAAU,WACN,OAAOxlF,KAAK1C,OAEhBooF,UAAW,WACP,OAAO1lF,KAAK3C,QAEhBgtF,aAAc,SAAUjlE,GAEpB,IAAIlf,EAAKkf,EAAWoJ,OAAOxjB,KAAK9E,GAGhC,GAFiBzJ,GAAGC,OAAO,IAAMwJ,GAElBD,QAAS,CAEpB,IAAI+E,EAAOoa,EAAWoJ,OAAOxjB,KACzBs/E,EAAWtqF,KAAKsgB,KAAKjhB,OAAO,UACvBkG,KAAK,UAAWuF,EAAKE,EAAKlO,EAAGkO,EAAKpO,IAClC2I,KAAK,KAAMW,GAGpBpC,EAAEgC,KAAKsf,EAAWoJ,OAAOW,MAAO,SAAU7e,GACtCg6E,EAASjrF,OAAO,QACXkG,KAAK,QAAS+K,EAAKxT,GACnByI,KAAK,SAAU+K,EAAK1T,GACpB2I,KAAK,IAAK+K,EAAKrS,GACfsH,KAAK,IAAK+K,EAAKlF,GACfhO,MAAM,OAAQkP,EAAGq0B,YAAYrwB,EAAK2E,EAAE0Y,KAAM,SAC1CvwB,MAAM,SAAUkP,EAAGq0B,YAAYrwB,EAAK2E,EAAEyY,OAAQ,aAGvD5pB,EAAEgC,KAAKsf,EAAWoJ,OAAOf,MAAO,SAAUltB,GACtC+pF,EAASjrF,OAAO,QACXkG,KAAK,IAAKhF,EAAKoR,GACfvU,MAAM,OAAQkP,EAAGq0B,YAAYpgC,EAAK0U,EAAE0Y,KAAM,SAC1CvwB,MAAM,SAAUkP,EAAGq0B,YAAYpgC,EAAK0U,EAAEyY,OAAQ,aAI3D,OAAO48D,GAEXH,aAAc,WAEV,IAAIxW,EAAQ3zE,KACR4uB,EAAS5uB,KAAK2C,UAAUtD,OAAO,OAC9BkG,KAAK,QAASqpB,GACdrpB,KAAK,UAAWuF,EAAK9K,KAAK4uB,OAAO5jB,KAAKlO,EAAGkD,KAAK4uB,OAAO5jB,KAAKpO,IAE/DkH,EAAEgC,KAAK9F,KAAK4uB,OAAOP,QAAS,SAAUjJ,GAClCuuD,EAAM0W,aAAajlE,GAEnBwJ,EACKvvB,OAAO,KACPA,OAAO,OACPkG,KAAK,aAAc,SACnBA,KAAK,QAAS,IACdA,KAAK,SAAU,IACfA,KAAK,IAAK6f,EAAWnnB,GACrBsH,KAAK,IAAK6f,EAAWha,MAGlCg/E,WAAY,WAER,IAKI38E,EAAGkjC,EALH/hB,EAAS5uB,KAAK2C,UAAUjG,OAAO,OAAO2C,OAAO,KAG7CpB,EAAI+B,KAAK1C,MADK,EAEd8N,EAAIpL,KAAK3C,OAFK,EAKlB,IAAKoQ,EAAI,EAAGkjC,EAAI1yC,EAAGwP,EAAIkjC,EAAGljC,IACtBmhB,EAAOvvB,OAAO,QACTkG,KAAK,QAAS,IACdA,KAAK,SAAUvF,KAAK3C,QACpBkI,KAAK,IATI,EASCkI,GACVlI,KAAK,IAAK,GAGnB,IAAKkI,EAAI,EAAGkjC,EAAIvlC,EAAGqC,EAAIkjC,EAAGljC,IACtBmhB,EAAOvvB,OAAO,QACTkG,KAAK,SAAU,IACfA,KAAK,QAASvF,KAAK1C,OACnBiI,KAAK,IAjBI,EAiBCkI,GACVlI,KAAK,IAAK,UArI1C;CCAD,WACI,aAEA,IAAI0vE,EAAYD,EAEZlsB,EAAsB,CACtBC,QAAS,QAGb,SAASs+B,EAA0Br8E,EAAM8oE,GAOrC,OAAO,IALmBmB,EAAWlxE,OAAO,CACxCiwD,MAAOghB,EACPlB,OAAQA,IAGL,CAAwB9oE,GAGnCnP,QAAQC,OAAO,WACd+E,QAAQ,wBAAyB,CAC9B,YAAa,mBAAoB,kBAAmB,iBACpD,6BAA8B,+BAE9B,SAAU8W,EAAMnZ,EAAK63E,EAAKyE,EAAWwL,EAAOlS,GAmCxC,OAjCAa,EAAaoB,EAEbrB,EAAQ8F,EAAU/2E,OAAO,CAErBwyE,SAAU,aACVE,OAAQ,CACJ8P,SAAY,mBACZ7P,MAAS,WAGbtB,WAAY,WACRp1E,KAAK22E,MAAQ32E,KAAKm2B,YAAYiE,UAC9Bp6B,KAAK22E,MAAMvB,WAAW7nE,MAAMvN,KAAMqN,YAEtCupE,SAAU,WACF52E,KAAKwD,IACLxD,KAAKwD,GAAG+B,KAAK,QAASvF,KAAK62E,iBAGnCloB,YAAa,WACT23B,EAAMrL,aAAaj7E,OAEvBwE,KAAM,WACF,IAAIoO,EAAO5S,KAAKuT,IAAI,QACpB,OAAOu1C,EAAoBl2C,IAASA,GAAQ,WAEhD8hE,iBAAkB,WACVj4E,GAAG6d,MAAMuqE,mBACbzQ,EAAMM,iBAAiB10E,KAAKuT,IAAI,OAChC+yE,EAAM5iF,WAIP,CACH2jF,0BAA2BA,MA5D3C;CCAA,WACI,aAEA,IAAI9kF,EAAOmT,EAAI1J,EAAOnO,EAElB0sF,EAAgBC,EAEpB,SAAS37E,IACL07E,EAAiBhoF,IA8BrB,SAAS04E,EAAajwE,GA3BtB,IAA6BA,EA4BzB6D,IACA27E,EA5BO,CACH1iF,OAFqBkD,EA6BWA,GA3BpBuI,IAAI,QAChBoxB,WAAY,CACRu3C,IAAK,IACLh2E,GAAM,KACNqwE,SAAY,OACZkU,MAAS,YACTC,OAAU,WAEd9lD,WAAY,CACRs3C,IAAK,IACLh2E,GAAM8E,EAAKuI,IAAI,MACfgjE,SAAYvrE,EAAKuI,IAAI,YACrBk3E,MAASz/E,EAAKuI,IAAI,SAClBm3E,OAAU1/E,EAAKuI,IAAI,WAEvBkxB,UAAW,CACP,KACA,WACA,IACA,QACA,WAWZ,WACI8lD,EAAe9hF,OACf8hF,EAAe/S,eAEf,IAAIhtE,EAAM+/E,EAAe9S,eAAe,OAC/BxzE,QAAQ,QAAQ,GAChB5E,OAAO,OACZyI,EAAQyiF,EAAe9S,eAAe,MAEtCzyE,EADQulF,EAAe7S,aAAa,SACtBr4E,OAAO,SAEzByI,EAAMxI,KAAKkrF,EAAc1iF,OACzB4N,EAAGO,SAASzL,EAAK,OAAQ,GAAI,EAAG,CAAC,EAAG,IACpC3M,EAAG0mC,UAAUv/B,EAAOwlF,GAhBpBjW,GAmBJ,SAAS9rE,IACL8hF,EAAe9hF,OAGnB,SAAS/E,IACL6mF,EAAe/mF,GAAGE,OAGtB,SAAS8L,IACL,IACIwyC,EADKuoC,EAAe/mF,GAAGgM,SACX,OAAS,OACzBxD,EAAMA,MAAMg2C,EAAO,oBAGvB,SAAS77C,IACLokF,EAAepkF,UAGnBtK,QAAQC,OAAO,WACd+E,QAAQ,6BAA8B,CACnC,2BAA4B,eAAgB,eAAgB,cAC5D,SAAUwF,EAAMsQ,EAAMmf,EAASn3B,GAO3B,OALA4D,EAAQ8D,EACRqP,EAAKiB,EACL3K,EAAQ8pB,EACRj4B,EAAKc,EAEE,CACHs8E,aAAcA,EACdpsE,KAAMA,EACNpG,KAAMA,EACN/E,KAAMA,EACN8L,OAAQA,EACRrJ,QAASA,EACT0J,UAAW,WAAc,OAAO06E,EAAe16E,iBA/F/D;CCAA,WACI,aAEA,IAAIgmE,EAAOngE,EAAIlX,EAAKwN,EAAOnO,EAEvBo0E,EAAc0Y,EAAax/C,EAG3BrmC,EAAY,UACZ2iE,EAAY,CACRh/D,MAAM,EACNnL,MAAO,KAEXme,EAAa,CACTizC,YAmCR,SAA2B1jD,GACvB2/E,EAAc3/E,EAlBlB,WAGIinE,EAAauF,eAEb,IAAIhtE,EAAMynE,EAAawF,eAAe,OAC7BxzE,QAAQ,QAAQ,GAChB5E,OAAO,OACZyI,EAAQmqE,EAAawF,eAAe,MAEpCzyE,EADQitE,EAAayF,aAAa,SACpBr4E,OAAO,SAEzByI,EAAMxI,KAAKqrF,EAAY7iF,OACvB4N,EAAGO,SAASzL,EAAK,OAAQ,GAAI,EAAG,CAAC,EAAG,IACf3M,EAAG0mC,UAAUv/B,EAAO2lF,GAKzCpW,KAlCJ,SAAS1lE,EAAK+7E,GAEVz/C,EAAey/C,EAoCfpsF,EAAIqB,aAAa4b,GAjCjBjd,EAAI4L,UAAU,kBAEd,IAAI1H,EAAU7G,QAAQkI,OAAO,GAAI0jE,EAAW,CACxC/7D,MAAO5G,KAGXmtE,EAAe,IAAI4D,EArBd,kBAqBwBnzE,IAChBc,GAAGS,QAAQa,GAAW,GAgDvC,SAAS0K,IACL,IAVIq7E,EAUAvmF,EAAK2tE,EAAapiE,YAClBmyC,EAAO19C,EAAK,OAAS,OAfb,SAAR4kE,IACA+I,EAAazuE,GAAGiF,OAgBpBuD,EAAMA,MAAMg2C,EAAO,kBACnBxjD,EAAI4L,UAAU9F,EAAK,iBAAmB,iBACtCA,EAxBA2tE,EAAazuE,GAAGE,KAAKynC,EAAa2qC,cAActM,KAS5CqhB,EAAgB5Y,EAAazuE,GAAGmM,OAAOtS,OACvC8tC,EAAat7B,YACbs7B,EAAa2qC,cAAczM,KAAKwhB,EAAe3hB,GAE/CA,KAcR,SAAS/iE,IACL3H,EAAI4H,eAAeqV,GACnBjd,EAAI4L,UAAU,iBACd6nE,EAAa9rE,UAGjBtK,QAAQC,OAAO,WACd+E,QAAQ,2BAA4B,CACjC,oBAAqB,eAAgB,mBAAoB,eAAgB,cACzE,SAAUwF,EAAMsQ,EAAMpQ,EAAOuvB,EAASn3B,GAQlC,OANAk3E,EAAQxvE,EACRqP,EAAKiB,EACLnY,EAAM+H,EACNyF,EAAQ8pB,EACRj4B,EAAKc,EAEE,CACHkQ,KAAMA,EACNW,OAAQA,EACRrJ,QAASA,EACT0J,UAAW,WAAc,OAAOoiE,EAAapiE,aAC7CimE,YAAa,WAAc,OAAO7D,OA5GlD;CCDC,WACG,aAEA,IAAIS,EAGA9E,EAAM,CACNzuB,EAAG,CAAEj5C,GAAI,oBAAqBglB,IAAK,YAAa2iD,MAAM,GACtD5uB,EAAG,CAAE/4C,GAAI,qBAAsBglB,IAAK,eAAgB2iD,MAAM,GAC1DxuB,EAAG,CAAEn5C,GAAI,cAAeglB,IAAK,YAAa2iD,MAAM,GAChDtuB,EAAG,CAAEr5C,GAAI,YAAaglB,IAAK,eAAgB2iD,MAAM,GACjDpuB,EAAG,CAAEv5C,GAAI,cAAeglB,IAAK,WAAY2iD,MAAM,GAC/CluB,EAAG,CAAEz5C,GAAI,kBAAmBglB,IAAK,UAAW2iD,MAAM,GAClD9tB,EAAG,CAAE75C,GAAI,mBAAoBglB,IAAK,QAAS2iD,MAAM,GAEjDltB,EAAG,CAAEz6C,GAAI,wBAAyBglB,IAAK,iBACvC+1B,EAAG,CAAE/6C,GAAI,sBAAuBglB,IAAK,eAErCk2B,EAAG,CAAEl7C,GAAI,qBAAsBglB,IAAK,eAGxCrvB,QAAQC,OAAO,WACV+E,QAAQ,sBAAuB,CAC5B,YAAa,iBAAkB,yBAC/B,sBACA,SAAU5E,EAAIgxC,EAAKikC,EAAO4Z,GAER,SAAVC,IACArY,EAAW1yE,KA8Gf,OA3GA+qF,EAAQ7hF,UAAY,CAEhBpE,UAAW,gBAEX+J,KAAM,WACF7O,KAAKwD,GAAKypC,EAAIxE,cAAczoC,KAAK8E,WACjC9E,KAAK8hC,SACL9hC,KAAKwtE,QAELxtE,KAAKgrF,cACLhrF,KAAKirF,cACLjrF,KAAKwD,GAAGsQ,SACR9T,KAAKkrF,eACLlrF,KAAK0uE,cACL1uE,KAAKwD,GAAGE,QAEZsnF,YAAa,WACTlnF,EAAEgC,KAAK8nE,EAAK,SAAU1oE,EAAOD,GACzB,IAAI+F,EAAOkmE,EAAMxuB,eAAez9C,GAC5B+F,IACA9F,EAAM8C,GAAKgD,EAAK,GAChB9F,EAAMixC,GAAKnrC,EAAK,GAAK,KAAO/F,EAAM,QAI9CkmF,OAAQ,SAAUlmF,GACd,OAAO2oE,EAAI3oE,IAEf28C,YAAa,SAAU38C,GACnB,IAAImN,EAAIpS,KAAKmrF,OAAOlmF,GAEhBmN,GAAKA,EAAEu3B,KACPv3B,EAAEu3B,IAAI9H,cAGd95B,UAAW,SAAU9C,GACjB,IAAImN,EAAIpS,KAAKmrF,OAAOlmF,GACpBmN,EAAEqwB,IAAMziC,KAAKwD,GAAGuE,UAAUqK,EAAElM,GAAIkM,EAAE8Y,IAAK9Y,EAAEpK,GAAIoK,EAAE+jC,KAEnD1M,UAAW,SAAUxkC,EAAKopE,GACtB,IAAIj8D,EAAIpS,KAAKmrF,OAAOlmF,GAChBopE,GAAoBpyE,EAAG8E,aAC3BqR,EAAEu3B,IAAM3pC,KAAKwD,GAAGimC,UAAUr3B,EAAElM,GAAIkM,EAAE8Y,IAAK9Y,EAAEy7D,KAAMz7D,EAAEpK,GAAIoK,EAAE+jC,MAG3D3mC,OAAQ,WACJxP,KAAKwD,GAAGgM,UAGZ44C,cAAe,SAAUC,GACrB,IAAI9lB,EAAQviC,KAAKwtE,QAAQ4d,iBAAmB,EACxCzc,EAAiB,OAATtmB,EAAiB,EAAIroD,KAAKwtE,QAAQnlB,KAAU,EAC5C,GAARsmB,GAAaA,EAAO3uE,KAAK8hC,SAASlhB,SAClC2hB,EAAQosC,GAGZ3uE,KAAK8hC,SAASU,cAAcD,IAGhCw6C,MAAO,SAAUx6C,GACTA,EAAQviC,KAAK8hC,SAASlhB,QAAU2hB,IAAUviC,KAAK8hC,SAASU,iBACxDxiC,KAAK8hC,SAASU,cAAcD,IAIpC0oD,YAAa,WACTjrF,KAAKypC,UAAU,KACfzpC,KAAKypC,UAAU,KACfzpC,KAAKypC,UAAU,KACfzpC,KAAKwD,GAAGsmC,eAER9pC,KAAKypC,UAAU,KACfzpC,KAAKypC,UAAU,KACfzpC,KAAKypC,UAAU,KAAK,GACpBzpC,KAAKypC,UAAU,MAEnByhD,aAAc,WACVlrF,KAAK+H,UAAU,KACf/H,KAAK+H,UAAU,KACf/H,KAAKwD,GAAGsmC,eACR9pC,KAAK+H,UAAU,MAGnBumE,qBAAsB,aAGtBI,YAAa,WACT,IAAIiF,EAAQ3zE,KACZA,KAAKwD,GAAGsmC,eAER,IAAI/H,EAAO,CAAC,CACR7W,IAAK,YACLiW,QAAS,aACTn5B,GAAI,WACA8iF,EAAKjmB,YAAY,KAAM8O,EAAMrF,yBAIrCwc,EAAKnmB,aAAa5iC,EAAM/hC,KAAKsuE,sBAC7BtuE,KAAK8hC,SAAW9hC,KAAKwD,GAAGomC,YAAY,gBAAiB7H,IAGzD57B,QAAS,WACL8mC,EAAIjD,eAAehqC,KAAK8E,aAIzB4tE,GAAY,IAAIqY,KA1IvC;CCAC,WACG,aAEA,IAAI1sF,EAAM2N,EAAOxN,EAEbowE,EAAkB,CACd,iBACA,kBACA,mBAEJC,EAAiB,CACb,qBACA,6BACA,iCAGJnlB,EAAO,KACP2hC,EAAe,EACfC,EAAW,EAGf,SAASjc,IAGL,OAFAhxE,EAAKmB,MAAM,kCAENkqD,IAGLA,EAAO,KACPlrD,EAAI4L,UAAU,sBACd4B,EAAMA,MAAM,gCACL,GAGX,SAASujE,IACLlxE,EAAKmB,MAAM,kCAAmCovE,EAAgB0c,IAE9D5hC,EAAO,cACPlrD,EAAI4L,UAAU,yBAA0B,CACpColE,YAAaZ,EAAgB0c,KAEjCt/E,EAAMA,MAAM6iE,EAAeyc,IAE3BA,IADAD,EAAeC,GACQ,GAAK,EAGhC,SAASrJ,IACL,OAAOrT,EAAgByc,GAI3BxvF,QAAQC,OAAO,WACV+E,QAAQ,sBAAuB,CAC5B,OAAQ,eAAgB,mBAExB,SAAUkB,EAAQ+zB,EAASvvB,GAKvB,OAJAlI,EAAO0D,EACPiK,EAAQ8pB,EACRt3B,EAAM+H,EAEC,CACHo0D,YAAa,SAAUvM,KACvBiN,eAAgB,aAEhBgU,cAAeA,EACfE,eAAgBA,EAChB0S,uBAAwBA,MAjE5C;CCAC,WACG,aAEA,IAAI5jF,EAAY6hF,EAGZp/D,EAAU,CACVs1B,UAAW,oBACXv1B,QAAS,eACTsgB,QAAS,kBAET+oC,SAAU,WACN7rE,EAAKmB,MAAM,gCAGf2qE,WAAY,WACR+V,EAAK7Q,eAAc,GACnBhxE,EAAKmB,MAAM,kCAGfmF,YAAa,CACT0rE,EAAG,CACCroE,GAAI,WAAck4E,EAAK7Q,eAAc,IACrCl5B,GAAI,4BACJjrB,IAAK,WAGTolD,EAAG,CACCtoE,GAAI,WAAck4E,EAAK3Q,kBACvBp5B,GAAI,sBACJjrB,IAAK,gBAGT22B,UAAW,CACP,IAAK,MAIbM,MAAO,CACHC,OAAQ,WACJ,OAAO89B,EAAK7Q,eAAc,MAKtCxzE,QAAQC,OAAO,WACVulB,IAAI,CAAC,OAAQ,sBAAuB,sBAErC,SAAUtf,EAAQwpF,EAAQlZ,GACtBh0E,EAAO0D,EAEPm+E,EAAO7N,EADAkZ,EAEFl8D,SAASvO,MApD1B;CCCA,WACI,aAEA,IAAI9U,EAEAw/E,EACAC,EAAc,CACVC,sBAAsB,GAG9B,SAAS9kC,EAAO+kC,GACZH,EAAaG,EAGjB,SAASlM,IACL,OAAO+L,EAGX,SAAS/N,EAAqBx/E,GAC1B,IACIqG,EADa,UAANrG,GACKwtF,EAAYC,qBAAuBpP,QAAQr+E,GACvD+Q,EAAO1K,EAAK,SAAW,UAI3B,OAFAmnF,EAAYC,qBAAuBpnF,EACnC0H,EAAMA,MAAMgD,EAAO,sBACZ1K,EAGX,SAASy8E,IACL,OAAO0K,EAAYC,qBAGvB7vF,QAAQC,OAAO,WACd+E,QAAQ,mBACL,CAAC,eACG,SAAUi1B,GAIN,OAFA9pB,EAAQ8pB,EAED,CACH8wB,OAAQA,EACR64B,cAAeA,EAEfhC,qBAAsBA,EACtBsD,oBAAqBA,MA5CzC;CCAA,WACI,aAEA,IAAI/0E,EAAO7J,EAEX,SAAS4wE,EAAerwE,GACpB1C,KAAKo1E,WAAW7nE,MAAMvN,KAAMqN,WAGhC0lE,EAAe7pE,UAAY,CAEvBhD,GAAI,KACJgtE,YAAa,OAEbkC,WAAY,WACRp1E,KAAKmD,KAAOnD,KAAKkzE,YAAY19C,cAAch1B,QAAQ,KAAM,KACzDR,KAAKw7C,MAAQ,CACTtnB,QAASl0B,KAAKmD,KAAO,aAG7BgwE,cAAe,SAAUtuE,EAAQ4C,GAC7B,IAAIjE,EAAK/G,GAAGC,OAAO,IAAMsD,KAAKkG,IAC9B,OAAI1C,EAAGyC,QACKxJ,GAAGC,OAAOmI,GAAQxF,OAAOoI,GAAMlC,KAAK,KAAMvF,KAAKkG,IAEpD1C,GAEXiE,KAAM,WACF,OAAOhL,GAAGC,OAAO,IAAMsD,KAAKkG,KAEhCoE,QAAS,WACL,OAAOnI,EAAG48B,SAAS,eAAe/+B,KAAKw7C,MAAMtnB,UAEjDrkB,UAAW,WACP,MAA2C,YAApC7P,KAAKyH,OAAOrK,MAAM,eAE7BsG,KAAM,WACF,IAAI+D,EAAOzH,KAAKyH,OAEZzH,KAAK6P,aACLpI,EACKmE,aACAC,SAAS,KACTzO,MAAM,UAAW,GACjB0I,KAAK,MAAO,WACT2B,EAAKrK,MAAM,aAAc,aAIzCqL,KAAM,WACF,IAAIhB,EAAOzH,KAAKyH,OAEXzH,KAAK6P,aACNpI,EACKrK,MAAM,aAAc,WACpBwO,aACAC,SAAS,KACTzO,MAAM,UAAW,IAG9BoS,OAAQ,WACJ,IAAIlL,GAAMg4E,QAAQt8E,KAAK6P,aACnBmyC,EAAO19C,EAAK,OAAS,OAEzBA,EAAKtE,KAAKyI,OAASzI,KAAK0D,OACxBsI,EAAMA,MAAMg2C,EAAO,IAAMhiD,KAAKkzE,aAC9BlzE,KAAKyoF,gBAAgBzoF,KAAKw7C,MAAMtnB,QAAS5vB,IAE7CkkF,gBAAiB,SAAUvjF,GACvB,OAAO9C,EAAG48B,SAAS,eAAe95B,IAAQ,GAE9CwjF,gBAAiB,SAAUxjF,EAAKC,GAC5B,IAAIwoC,EAAQvrC,EAAG48B,SAAS,eACxB2O,EAAMzoC,GAAOC,EAAQ,EAAI,EACzB/C,EAAGk9B,SAAS,cAAeqO,KAInC7xC,QAAQC,OAAO,WACV+E,QAAQ,sBAAuB,CAC5B,YAAa,eAAgB,eAC7B,SAAU+a,EAAIka,EAASzvB,GAMnB,OAJA2F,EAAQ8pB,EACR3zB,EAAKkE,EAEL0sE,EAAehvE,OAAS6X,EAAG7X,OACpBgvE,KAvFvB;CCAA,WACI,aAEA,IAAI92E,EAAI00B,EAEJ6D,EACAo3D,EAAqB,GAEzB,SAASr3D,EAAa7xB,GAClB,IAAImpF,EAAe5vF,EAAGsB,IAAImF,EAAQ4xB,eAAiB,aAWnD,OATA5xB,EAAQ4xB,aAAe,WACnBu3D,IAEAhwF,QAAQ6V,QAAQk6E,EAAoB,SAAU7hF,GAC1CA,EAAGyqB,MAIXA,EAAS7D,EAAG4D,aAAa7xB,GAI7B,SAAS0wE,IACL,OAAO5+C,EAUX,SAAS+lD,EAAqB32E,GAC1BgoF,EAAmBx9E,KAAKxK,GAG5B,SAASkoF,EAAwBloF,GAC7B,IAAImoF,EAZR,SAA+BhiF,GAC3B,IAAK,IAAI0D,EAAI,EAAGgrB,EAAMmzD,EAAmB5lF,OAAQyH,EAAIgrB,EAAKhrB,IACtD,GAAIm+E,EAAmBn+E,KAAO1D,EAAI,OAAO0D,EAE7C,OAAQ,EAQMu+E,CAAsBpoF,IAEnB,IAAbmoF,GACAH,EAAmB1zD,OAAO6zD,GAIlC,SAASvJ,EAAgB3jE,EAAKsiD,GAC1B,IAAI8qB,EAAS,EACTrrE,GAAQ/B,EAAMsiD,GAAO,EAQzB,OANIvgD,EAAOpC,IAAU2iD,EACjB8qB,EAASptE,GAAO+B,EAAOpC,KAChBoC,EAAOpC,IAAU2iD,IACxB8qB,EAASptE,GAAO+B,EAAOpC,MAGpBytE,EAGX,SAASztE,IACL,OAAOgW,EAAOhW,QAGlB,SAASw1D,EAAW/hE,EAAWuM,EAAO5S,GAClC4oB,EAAOQ,QAAQ/iB,EAAWuM,EAAO5S,GAGrC/P,QAAQC,OAAO,WACd+E,QAAQ,mBAAoB,CACzB,YAAa,cACb,SAAUqB,EAAMqjD,GAKZ,OAHAtpD,EAAKiG,EACLyuB,EAAK40B,EAEE,CACH6tB,UAAWA,EACX7+C,aAAcA,EACdgmD,qBAAsBA,EACtBuR,wBAAyBA,EAEzBttE,MAAOA,EACPgkE,gBAAiBA,EACjBxO,WAAYA,MAnF5B;CCAA,WACI,aAEA,SAASoS,EAAK1jF,GACNA,GAAWA,EAAQc,KACnBxD,KAAKwD,GAAKd,EAAQc,GAClBxD,KAAKksF,IAAMrwF,QAAQU,QAAQyD,KAAKwD,KAGpCxD,KAAKo1E,WAAW7nE,MAAMvN,KAAMqN,WAGhCxR,QAAQC,OAAO,WACd+E,QAAQ,cAAe,CACpB,YACA,SAAU+a,GAgBN,OAdA9X,EAAEC,OAAOqiF,EAAKl9E,UAAW,CACrB1F,GAAI,KACJyC,MAAO,WACCjG,KAAKksF,KACLlsF,KAAKksF,IAAIjmF,SAGjBE,QAAS,WAEL,OADAnG,KAAKiG,QACEjG,QAIfomF,EAAKriF,OAAS6X,EAAG7X,OACVqiF,KA/BnB;CCAC,WACG,aAEAvqF,QAAQC,OAAO,WAAY,IAC1BsC,WAAW,eACR,CAAC,OAAQ,SAAU,OAAQ,YAAa,sBAExC,SAAUC,EAAMC,EAAQk2C,EAAMv4C,EAAIgxC,GAC9BA,EAAI5F,WAAW,CACXnrC,MAAOoC,EACPs5B,IAAK,WAGTt5B,EAAO6xC,OAAO,YAAa,WAClBl0C,EAAGsZ,cAAcjX,EAAO8nC,YACzB9nC,EAAO8nC,UAAU10B,QAAQ,SAAUy+C,QAK3C9xD,EAAKuC,IAAI,oCApBrB","file":"../onos.js","sourcesContent":["\n\n(function () {\n    'use strict';\n\n    angular.module('onosApp')\n\n        .directive('resize', ['$window', 'FnService', function ($window, fs) {\n            return {\n                scope: {\n                    offsetHeight: '@',\n                    offsetWidth: '@',\n                    notifier: '&',\n                },\n                link: function (scope, element) {\n                    var elem = d3.select(element[0]);\n                    scope.$watchCollection(function () {\n                        return {\n                            h: $window.innerHeight,\n                            w: $window.innerWidth,\n                        };\n                    }, function () {\n                        var offH = scope.offsetHeight || 0,\n                            offW = scope.offsetWidth || 0,\n                            wsz = fs.windowSize(offH, offW);\n\n                        elem.style({\n                            height: wsz.height + 'px',\n                            width: wsz.width + 'px',\n                        });\n\n                        if (fs.isF(scope.notifier)) {\n                            scope.notifier();\n                        }\n                    });\n\n                    angular.element($window).bind('resize', function () {\n                        scope.$apply();\n                    });\n                },\n            };\n        }])\n\n        .directive('ngRepeatComplete', [function () {\n            return function (scope) {\n                if (scope.$last) {\n                    scope.$emit('ngRepeatComplete');\n                    scope.$broadcast('ngRepeatComplete');\n                }\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    angular.module('onosUtil', []);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var mastHeight = 48,\n        padMobile = 16,\n        dialogOpts = {\n            edge: 'left',\n        };\n\n    var ls;\n\n    function getLion(x) {\n        var lion = ls.bundle('core.fw.Mast');\n        return lion(x);\n    }\n\n    angular.module('onosMast', ['onosNav'])\n        .controller('MastCtrl',\n        ['$log', '$scope', '$location', '$window', 'WebSocketService',\n            'NavService', 'DialogService', 'LionService',\n\n        function ($log, $scope, $location, $window, wss, ns, ds, _ls_) {\n            var self = this;\n\n            ls = _ls_;\n\n            $scope.lion = getLion;\n\n            function triggerRefresh(action) {\n                var uicomp = action === 'add' ? getLion('uicomp_added')\n                                              : getLion('uicomp_removed'),\n                    okupd = getLion('ui_ok_to_update');\n\n                function createConfirmationText() {\n                    var content = ds.createDiv();\n                    content.append('p').text(uicomp + ' ' + okupd);\n                    return content;\n                }\n\n                function dOk() {\n                    $log.debug('Refreshing GUI');\n                    $window.location.reload();\n                }\n\n                function dCancel() {\n                    $log.debug('Canceling GUI refresh');\n                }\n\n                ds.openDialog('app-dialog', dialogOpts)\n                    .setTitle(getLion('confirm_refresh_title'))\n                    .addContent(createConfirmationText())\n                    .addOk(dOk)\n                    .addCancel(dCancel)\n                    .bindKeys();\n            }\n\n            wss.bindHandlers({\n                'guiAdded': function () { triggerRefresh('add'); },\n                'guiRemoved': function () { triggerRefresh('rem'); },\n            });\n\n            self.toggleNav = function () {\n                ns.toggleNav();\n            };\n\n            $scope.username = function () {\n                return onosUser || getLion('unknown_user');\n            };\n\n            $scope.helpTip = '';\n\n            $scope.directTo = function () {\n                var curId = $location.path().replace('/', ''),\n                    viewMap = $scope.onos['viewMap'],\n                    helpUrl = viewMap[curId];\n                $window.open(helpUrl);\n            };\n\n            $log.log('MastCtrl has been created');\n        }])\n\n        .factory('MastService', ['FnService', function (fs) {\n            return {\n                mastHeight: function () {\n                    return fs.isMobile() ? mastHeight + padMobile : mastHeight;\n                },\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $location, $window, fs;\n\n    var navShown = false;\n\n    function updatePane() {\n        var vis = navShown ? 'visible' : 'hidden';\n        d3.select('#nav').style('visibility', vis);\n    }\n\n    function showNav() {\n        navShown = true;\n        updatePane();\n    }\n    function hideNav() {\n        navShown = false;\n        updatePane();\n    }\n    function toggleNav() {\n        navShown = !navShown;\n        updatePane();\n    }\n    function hideIfShown() {\n        if (navShown) {\n            hideNav();\n            return true;\n        }\n        return false;\n    }\n\n    function navTo(path, params) {\n        var url;\n        if (!path) {\n            $log.warn('Not a valid navigation path');\n            return null;\n        }\n        $location.url('/' + path);\n\n        if (fs.isO(params)) {\n            $location.search(params);\n        } else if (params !== undefined) {\n            $log.warn('Query params not an object', params);\n        }\n\n        url = $location.absUrl();\n        $log.log('Navigating to ', url);\n        $window.location.href = url;\n    }\n\n    angular.module('onosNav', [])\n        .controller('NavCtrl', ['$log',\n\n            function (_$log_) {\n                var self = this;\n                $log = _$log_;\n\n                self.hideNav = hideNav;\n                $log.log('NavCtrl has been created');\n            },\n        ])\n        .factory('NavService',\n            ['$log', '$location', '$window', 'FnService',\n\n            function (_$log_, _$location_, _$window_, _fs_) {\n                $log = _$log_;\n                $location = _$location_;\n                $window = _$window_;\n                fs = _fs_;\n\n                return {\n                    showNav: showNav,\n                    hideNav: hideNav,\n                    toggleNav: toggleNav,\n                    hideIfShown: hideIfShown,\n                    navTo: navTo,\n                };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    angular.module('onosSvg', ['onosUtil']);\n\n}());\n","\n(function () {\n    'use strict';\n\n    angular.module('onosRemote', ['onosUtil']);\n\n}());\n","\n(function () {\n    'use strict';\n\n    angular.module('onosWidget', []);\n\n}());\n","\n(function () {\n    'use strict';\n\n    angular.module('onosLayer', ['onosUtil']);\n\n}());\n","\n(function () {\n\n    var ps, fs, mast, wss, is, EditableTextComponent;\n\n    var panel,\n        pStartY,\n        wSize,\n        wssHandlers = {},\n        options;\n\n    var topPdg = 28,\n        defaultLabelWidth = 110,\n        defaultValueWidth = 80;\n\n    var container,\n        top,\n        bottom;\n\n    function createDetailsPanel(name, _options) {\n        options = _options;\n        scope = options.scope;\n\n        panel = ps.createPanel(name, options);\n\n        calculatePositions();\n\n        panel.el().style({\n            position: 'absolute',\n            top: pStartY + 'px',\n        });\n\n        hide();\n\n        return panel;\n    }\n\n    function calculatePositions() {\n        pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n            + mast.mastHeight() + topPdg;\n        wSize = fs.windowSize(pStartY);\n        pHeight = wSize.height;\n    }\n\n    function hide() {\n        panel.hide();\n    }\n\n    function setResponse(name, callback) {\n        var additionalHandler = {};\n        additionalHandler[name] = callback;\n\n        wss.bindHandlers(additionalHandler);\n        wssHandlers = _.extend({}, wssHandlers, additionalHandler);\n    }\n\n    function addContainers() {\n        container = panel.append('div').classed('container', true);\n        top = container.append('div').classed('top', true);\n        bottom = container.append('div').classed('bottom', true);\n    }\n\n    function addCloseButton(onClose) {\n        var closeBtn = top.append('div').classed('close-btn', true);\n\n        is.loadEmbeddedIcon(closeBtn, 'close', 20);\n        closeBtn.on('click', onClose || function () {});\n    }\n\n    function addHeading(icon, makeEditable) {\n        top.append('div').classed('iconDiv ' + icon, true);\n\n        if (makeEditable) {\n            new EditableTextComponent(top.append('h2'), {\n                scope: options.scope,\n                nameChangeRequest: options.nameChangeRequest,\n                keyBindings: options.keyBindings,\n            });\n        } else {\n            top.append('h2');   \n        }\n    }\n\n    function addTable(parent, className) {\n        return parent.append('div').classed(className, true).append('table');\n    }\n\n    function addProp(tbody, key, value) {\n        var tr = tbody.append('tr');\n\n        function addCell(cls, txt, width) {\n            tr.append('td').attr('class', cls).attr('width', width).text(txt);\n        }\n\n        addCell('label', key + ' :', defaultLabelWidth);\n        addCell('value', value, defaultValueWidth);\n    }\n\n    function addPropsList(el, props) {\n        var tblDiv = el.append('div').classed('top-tables', true);\n        var left = addTable(tblDiv, 'left').append('tbody');\n        var right = addTable(tblDiv, 'right').append('tbody');\n\n        var keys = _.keys(props);\n\n        _.each(props, function (value, key) {\n            var index = keys.indexOf(key);\n\n            if (index < keys.length / 2) {\n                addProp(left, key, value);\n            } else {\n                addProp(right, key, value);\n            }\n        });\n    }\n\n    function empty() {\n        panel.empty();\n    }\n\n    function select(id) {\n        return panel.el().select(id);\n    }\n\n    function destroy() {\n        wss.unbindHandlers(wssHandlers);\n    }\n\n    angular.module('onosLayer')\n        .factory('DetailsPanelService', [\n\n            'PanelService', 'FnService', 'MastService', 'WebSocketService',\n            'IconService', 'EditableTextComponent',\n\n            function (_ps_, _fs_, _mast_, _wss_, _is_, _etc_) {\n\n                ps = _ps_;\n                fs = _fs_;\n                mast = _mast_;\n                wss = _wss_;\n                is = _is_;\n                EditableTextComponent = _etc_;\n\n                return {\n                    create: createDetailsPanel,\n                    setResponse: setResponse,\n\n                    addContainers: addContainers,\n                    addCloseButton: addCloseButton,\n                    addHeading: addHeading,\n                    addPropsList: addPropsList,\n\n                    container: function () { return container; },\n                    top: function () { return top; },\n                    bottom: function () { return bottom; },\n                    select: select,\n\n                    empty: empty,\n                    hide: hide,\n                    destroy: destroy,\n                };\n            },\n        ]);\n})();\n","\n(function () {\n    'use strict';\n\n    var $log, fs, ps, ks;\n\n    var defaultSettings = {\n            width: 300,\n            edge: 'left',\n        };\n\n    var pApi, panel, dApi,\n        keyBindings = {};\n\n    function createDialog(id, opts) {\n        var header, body, footer,\n            settings = angular.extend({}, defaultSettings, opts),\n            p = ps.createPanel(id, settings),\n            cls = opts && opts.cssCls;\n\n        p.classed('dialog', true);\n        if (cls) {\n            p.classed(cls, true);\n        }\n        panel = p;\n\n        function reset() {\n            p.empty();\n            p.append('div').classed('header', true);\n            p.append('div').classed('body', true);\n            p.append('div').classed('footer', true);\n\n            header = p.el().select('.header');\n            body = p.el().select('.body');\n            footer = p.el().select('.footer');\n        }\n\n        function hAppend(x) {\n            if (typeof x === 'string') {\n                return header.append(x);\n            }\n            header.node().appendChild(x.node());\n            return header;\n        }\n\n        function bAppend(x) {\n            if (typeof x === 'string') {\n                return body.append(x);\n            }\n            body.node().appendChild(x.node());\n            return body;\n        }\n\n        function fAppend(x) {\n            if (typeof x === 'string') {\n                return footer.append(x);\n            }\n            footer.node().appendChild(x.node());\n            return footer;\n        }\n\n        function destroy() {\n            ps.destroyPanel(id);\n        }\n\n        return {\n            reset: reset,\n            appendHeader: hAppend,\n            appendBody: bAppend,\n            appendFooter: fAppend,\n            destroy: destroy,\n        };\n    }\n\n    function makeButton(callback, text, keyName, chained) {\n        var cb = fs.isF(callback),\n            key = fs.isS(keyName);\n\n        function invoke() {\n            cb && cb();\n            if (!chained) {\n                clearBindings();\n                panel.hide();\n            }\n        }\n\n        if (key) {\n            keyBindings[key] = invoke;\n        }\n\n        return createDiv('dialog-button')\n            .text(text)\n            .on('click', invoke);\n    }\n\n    function setTitle(title) {\n        if (pApi) {\n            pApi.appendHeader('h2').text(title);\n        }\n        return dApi;\n    }\n\n    function addContent(content) {\n        if (pApi) {\n            pApi.appendBody(content);\n        }\n        return dApi;\n    }\n\n    function addButton(cb, text, key, chained) {\n        if (pApi) {\n            pApi.appendFooter(makeButton(cb, text, key, chained));\n        }\n        return dApi;\n    }\n\n    function _addOk(cb, text, chained) {\n        return addButton(cb, text || 'OK', 'enter', chained);\n    }\n\n    function addOk(cb, text) {\n        return _addOk(cb, text, false);\n    }\n\n    function addOkChained(cb, text) {\n        return _addOk(cb, text, true);\n    }\n\n    function addCancel(cb, text) {\n        return addButton(cb, text || 'Cancel', 'esc');\n    }\n\n    function clearBindings() {\n        keyBindings = {};\n        ks.dialogKeys();\n    }\n\n    function openDialog(id, opts) {\n        $log.debug('Open DIALOG', id, opts);\n        if (!pApi) {\n            pApi = createDialog(id, opts);\n        }\n        pApi.reset();\n        panel.show();\n\n        dApi = {\n            setTitle: setTitle,\n            addContent: addContent,\n            addButton: addButton,\n            addOk: addOk,\n            addOkChained: addOkChained,\n            addCancel: addCancel,\n            bindKeys: function () {\n                ks.dialogKeys(keyBindings);\n            },\n        };\n        return dApi;\n    }\n\n    function closeDialog() {\n        $log.debug('Close DIALOG');\n        if (pApi) {\n            clearBindings();\n            panel.hide();\n            pApi.destroy();\n            pApi = null;\n            dApi = null;\n        }\n    }\n\n    function createDiv(cls) {\n        var div = d3.select(document.createElement('div'));\n        if (cls) {\n            div.classed(cls, true);\n        }\n        return div;\n    }\n\n    angular.module('onosLayer')\n    .factory('DialogService',\n        ['$log', 'FnService', 'PanelService', 'KeyService',\n\n\n        function (_$log_, _fs_, _ps_, _ks_) {\n            $log = _$log_;\n            fs = _fs_;\n            ps = _ps_;\n            ks = _ks_;\n\n            return {\n                openDialog: openDialog,\n                closeDialog: closeDialog,\n                createDiv: createDiv,\n            };\n        }]);\n}());\n","\n(function () {\n\n    var ks, wss;\n\n    var EditableText = function (el, options) {\n        this.el = el;\n        this.scope = options.scope;\n        this.options = options;\n\n        this.el.classed('editable clickable', true).on('click', this.onEdit.bind(this));\n        this.editingName = false;\n    };\n\n    EditableText.prototype = {\n\n        bindHandlers: function () {\n            ks.keyBindings({\n                'enter': this.save.bind(this),\n                'esc': [this.cancel.bind(this), 'Close the details panel']\n            });\n        },\n\n        unbindHandlers: function () {\n            ks.unbindKeys();\n\n            if (this.options.keyBindings) {\n                ks.keyBindings(this.options.keyBindings);\n            }\n        },\n\n        addTextField: function () {\n            return this.el.append('input').classed('name-input', true)\n                .attr('type', 'text')\n                .attr('value', this.scope.panelData.name)[0][0];\n        },\n\n        onEdit: function () {\n            if (!this.editingName) {\n                this.el.classed('editable clickable', false);\n                this.el.text('');\n\n                var el = this.addTextField();\n                el.focus();\n                el.select();\n                this.editingName = true;\n\n                this.bindHandlers();\n\n                ks.enableGlobalKeys(false);\n            }\n        },\n\n        exit: function (name) {\n            this.el.text(name);\n            this.el.classed('editable clickable', true);\n            this.editingName = false;\n            ks.enableGlobalKeys(true);\n            this.unbindHandlers();\n        },\n\n        cancel: function (a, b, ev) {\n\n            if (this.editingName) {\n                this.exit(this.scope.panelData.name);\n                return true;\n            }\n\n            return false;\n        },\n\n        save: function () {\n            var id = this.scope.panelData.id,\n                val,\n                newVal;\n\n            if (this.editingName) {\n                val = this.el.select('input').property('value').trim();\n                newVal = val || id;\n\n                this.exit(newVal);\n                this.scope.panelData.name = newVal;\n                wss.sendEvent(this.options.nameChangeRequest, { id: id, name: val });\n            }\n        },\n    };\n\n\n    angular.module('onosLayer')\n        .factory('EditableTextComponent', [\n\n            'KeyService', 'WebSocketService',\n\n            function (_ks_, _wss_) {\n                ks = _ks_;\n                wss = _wss_;\n\n                return EditableText;\n            },\n        ]);\n\n})();\n","\n(function () {\n    'use strict';\n\n    var $timeout;\n\n    var defaultSettings = {\n            fade: 200,\n            showFor: 1200,\n        },\n        w = '100%',\n        h = 200,\n        xpad = 20,\n        ypad = 10,\n        rx = 10,\n        vbox = '-200 -' + (h/2) + ' 400 ' + h;\n\n    var settings,\n        timer = null,\n        data = [],\n        enabled;\n\n    var flashDiv, svg;\n\n\n    function computeBox(el) {\n        var text = el.select('text'),\n            box = text.node().getBBox();\n\n        box.x = -box.width / 2;\n        box.y = -box.height / 2;\n\n        box.x -= xpad;\n        box.width += xpad * 2;\n        box.y -= ypad;\n        box.height += ypad * 2;\n\n        return box;\n    }\n\n    function updateFlash() {\n        if (!svg) {\n            svg = flashDiv.append('svg').attr({\n                width: w,\n                height: h,\n                viewBox: vbox,\n            });\n        }\n\n        var items = svg.selectAll('.flashItem')\n            .data(data);\n\n        items.each(function (msg) {\n            var el = d3.select(this),\n                box;\n\n            el.select('text').text(msg);\n            box = computeBox(el);\n            el.select('rect').attr(box);\n        });\n\n\n        var entering = items.enter()\n            .append('g')\n            .attr({\n                class: 'flashItem',\n                opacity: 0,\n            })\n            .transition()\n            .duration(settings.fade)\n            .attr('opacity', 1);\n\n        entering.each(function (msg) {\n            var el = d3.select(this),\n                box;\n\n            el.append('rect').attr('rx', rx);\n            el.append('text').text(msg);\n            box = computeBox(el);\n            el.select('rect').attr(box);\n        });\n\n        items.exit()\n            .transition()\n            .duration(settings.fade)\n            .attr('opacity', 0)\n            .remove();\n\n        if (svg && data.length === 0) {\n            svg.transition()\n                .delay(settings.fade + 10)\n                .remove();\n            svg = null;\n        }\n    }\n\n    function flash(msg) {\n        if (!enabled) return;\n\n        if (timer) {\n            $timeout.cancel(timer);\n        }\n\n        timer = $timeout(function () {\n            data = [];\n            updateFlash();\n        }, settings.showFor);\n\n        data = [msg];\n        updateFlash();\n    }\n\n    function enable(b) {\n        enabled = !!b;\n    }\n\n    function tempDiv(ms) {\n        var div = d3.select('body').append('div').classed('centered', true),\n            delay = (ms === undefined || ms < 100) ? 3000 : ms;\n        $timeout(function () { div.remove(); }, delay);\n        return div;\n    }\n\n    angular.module('onosLayer')\n        .factory('FlashService', ['$timeout',\n        function (_$timeout_) {\n            $timeout = _$timeout_;\n\n            function initFlash(opts) {\n                settings = angular.extend({}, defaultSettings, opts);\n                flashDiv = d3.select('#flash');\n                enabled = true;\n            }\n\n            return {\n                initFlash: initFlash,\n                flash: flash,\n                enable: enable,\n                tempDiv: tempDiv,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $timeout, ts, fs;\n\n    var id = 'loading-anim',\n        dir = 'data/img/loading/',\n        pfx = '/load-',\n        nImgs = 16,\n        speed = 100,\n        waitDelay = 500;\n\n    var div,\n        img,\n        th,\n        idx,\n        task,\n        wait,\n        images = [];\n\n    function dbg() {\n        var args = Array.prototype.slice.call(arguments);\n        args.unshift('loading');\n        fs.debug.apply(this, args);\n    }\n\n    function preloadImages() {\n        var idx;\n\n        function addImg(th) {\n            var img = new Image();\n            img.src = fname(idx, th);\n            images.push(img);\n        }\n\n        dbg('preload images start...');\n        for (idx=1; idx<=nImgs; idx++) {\n            addImg('light');\n            addImg('dark');\n        }\n        dbg('preload images DONE!', images);\n    }\n\n    function fname(i, th) {\n        var z = i > 9 ? '' : '0';\n        return dir + th + pfx + z + i + '.png';\n    }\n\n    function nextFrame() {\n        idx = idx === 16 ? 1 : idx + 1;\n        img.attr('src', fname(idx, th));\n        task = $timeout(nextFrame, speed);\n    }\n\n    function startAnim() {\n        dbg('start ANIMATION');\n        th = ts.theme();\n        div = d3.select('#'+id);\n        if (div.empty()) {\n            div = d3.select('body').append('div').attr('id', id);\n            img = div.append('img').attr('src', fname(1, th));\n            idx = 1;\n            task = $timeout(nextFrame, speed);\n        }\n    }\n\n    function stopAnim() {\n        dbg('*stop* ANIMATION');\n        if (task) {\n            $timeout.cancel(task);\n            task = null;\n        }\n        d3.select('#'+id).remove();\n    }\n\n    function start() {\n        dbg('start (schedule)');\n        wait = $timeout(startAnim, waitDelay);\n    }\n\n    function stop() {\n        if (wait) {\n            dbg('start CANCELED');\n            $timeout.cancel(wait);\n            wait = null;\n        }\n        stopAnim();\n    }\n\n    function waiting() {\n        return !!wait;\n    }\n\n    angular.module('onosLayer')\n        .factory('LoadingService',\n        ['$timeout', 'ThemeService', 'FnService', 'WebSocketService',\n\n            function (_$timeout_, _ts_, _fs_, wss) {\n            $timeout = _$timeout_;\n            ts = _ts_;\n            fs = _fs_;\n\n            preloadImages();\n\n            var self = {\n                start: start,\n                stop: stop,\n                waiting: waiting,\n            };\n            wss._setLoadingDelegate(self);\n            return self;\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs;\n\n    var defaultSettings = {\n        edge: 'right',\n        width: 200,\n        margin: 20,\n        hideMargin: 20,\n        xtnTime: 750,\n        fade: true,\n    };\n\n    var panels,\n        panelLayer;\n\n\n    function init() {\n        panelLayer = d3.select('#floatpanels');\n        panelLayer.text('');\n        panels = {};\n    }\n\n    function noop() {}\n\n    function margin(p) {\n        return p.settings.margin;\n    }\n    function hideMargin(p) {\n        return p.settings.hideMargin;\n    }\n    function noPx(p, what) {\n        return Number(p.el.style(what).replace(/px$/, ''));\n    }\n    function widthVal(p) {\n        return noPx(p, 'width');\n    }\n    function heightVal(p) {\n        return noPx(p, 'height');\n    }\n    function pxShow(p) {\n        return margin(p) + 'px';\n    }\n    function pxHide(p) {\n        return (-hideMargin(p) - widthVal(p) - (noPx(p, 'padding') * 2)) + 'px';\n    }\n\n    function makePanel(id, settings) {\n        var p = {\n                id: id,\n                settings: settings,\n                on: false,\n                el: null,\n            },\n            api = {\n                show: showPanel,\n                hide: hidePanel,\n                toggle: togglePanel,\n                empty: emptyPanel,\n                append: appendPanel,\n                width: panelWidth,\n                height: panelHeight,\n                bbox: panelBBox,\n                isVisible: panelIsVisible,\n                classed: classed,\n                el: panelEl,\n            };\n\n        p.el = panelLayer.append('div')\n            .attr('id', id)\n            .attr('class', 'floatpanel')\n            .style('opacity', 0);\n\n        p.el.style(p.settings.edge, pxHide(p));\n        panelWidth(p.settings.width);\n        if (p.settings.height) {\n            panelHeight(p.settings.height);\n        }\n\n        panels[id] = p;\n\n        function showPanel(cb) {\n            var endCb = fs.isF(cb) || noop;\n            p.on = true;\n            p.el.transition().duration(p.settings.xtnTime)\n                .each('end', endCb)\n                .style(p.settings.edge, pxShow(p))\n                .style('opacity', 1);\n        }\n\n        function hidePanel(cb) {\n            var endCb = fs.isF(cb) || noop,\n                endOpacity = p.settings.fade ? 0 : 1;\n            p.on = false;\n            p.el.transition().duration(p.settings.xtnTime)\n                .each('end', endCb)\n                .style(p.settings.edge, pxHide(p))\n                .style('opacity', endOpacity);\n        }\n\n        function togglePanel(cb) {\n            if (p.on) {\n                hidePanel(cb);\n            } else {\n                showPanel(cb);\n            }\n            return p.on;\n        }\n\n        function emptyPanel() {\n            return p.el.text('');\n        }\n\n        function appendPanel(what) {\n            return p.el.append(what);\n        }\n\n        function panelWidth(w) {\n            if (w === undefined) {\n                return widthVal(p);\n            }\n            p.el.style('width', w + 'px');\n        }\n\n        function panelHeight(h) {\n            if (h === undefined) {\n                return heightVal(p);\n            }\n            p.el.style('height', h + 'px');\n        }\n\n        function panelBBox() {\n            return p.el.node().getBoundingClientRect();\n        }\n\n        function panelIsVisible() {\n            return p.on;\n        }\n\n        function classed(cls, bool) {\n            return p.el.classed(cls, bool);\n        }\n\n        function panelEl() {\n            return p.el;\n        }\n\n        return api;\n    }\n\n    function removePanel(id) {\n        panelLayer.select('#' + id).remove();\n        delete panels[id];\n    }\n\n    angular.module('onosLayer')\n    .factory('PanelService',\n        ['$log', '$window', 'FnService',\n\n        function (_$log_, _$window_, _fs_) {\n            $log = _$log_;\n            fs = _fs_;\n\n            function createPanel(id, opts) {\n                var settings = angular.extend({}, defaultSettings, opts);\n                if (!id) {\n                    $log.warn('createPanel: no ID given');\n                    return null;\n                }\n                if (panels[id]) {\n                    $log.warn('Panel with ID \"' + id + '\" already exists');\n                    return null;\n                }\n                if (fs.debugOn('widget')) {\n                    $log.debug('creating panel:', id, settings);\n                }\n                return makePanel(id, settings);\n            }\n\n            function destroyPanel(id) {\n                if (panels[id]) {\n                    if (fs.debugOn('widget')) {\n                        $log.debug('destroying panel:', id);\n                    }\n                    removePanel(id);\n                } else {\n                    if (fs.debugOn('widget')) {\n                        $log.debug('no panel to destroy:', id);\n                    }\n                }\n            }\n\n            return {\n                init: init,\n                createPanel: createPanel,\n                destroyPanel: destroyPanel,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs, sus, ls;\n\n    var defaultSettings = {\n            fade: 500,\n        },\n        w = '100%',\n        h = '80%',\n        vbox = '-200 0 400 400',\n        pad = 10,\n        offy = 45,\n        sepYDelta = 20,\n        colXDelta = 16,\n        yTextSpc = 12,\n        offDesc = 8;\n\n    var settings,\n        data = [],\n        yCount;\n\n    var qhdiv, svg, pane, rect, items;\n\n    var keyDisp = {\n        equals: '=',\n        slash: '/',\n        backSlash: '\\\\',\n        backQuote: '`',\n        leftArrow: 'L-arrow',\n        upArrow: 'U-arrow',\n        rightArrow: 'R-arrow',\n        downArrow: 'D-arrow',\n    };\n\n    var neededBindings = [\n        'globalKeys', 'globalFormat', 'viewKeys', 'viewGestures',\n    ];\n\n\n    function mkKeyDisp(id) {\n        var v = keyDisp[id] || id;\n        return fs.cap(v);\n    }\n\n    function addSeparator(el, i) {\n        var y = sepYDelta/2 - 5;\n        el.append('line')\n            .attr({ 'class': 'qhrowsep', x1: 0, y1: y, x2: 0, y2: y });\n    }\n\n    function addContent(el, data, ri) {\n        var xCount = 0,\n            clsPfx = 'qh-r' + ri + '-c';\n\n        function addColumn(el, c, i) {\n            var cls = clsPfx + i,\n                oy = 0,\n                aggKey = el.append('g').attr('visibility', 'hidden'),\n                gcol = el.append('g').attr({\n                    'class': cls,\n                    transform: sus.translate(xCount, 0),\n                });\n\n            c.forEach(function (j) {\n                var k = j[0],\n                    v = j[1];\n\n                if (k !== '-') {\n                    aggKey.append('text').text(k);\n\n                    gcol.append('text').text(k)\n                        .attr({\n                            'class': 'key',\n                            y: oy,\n                        });\n                    gcol.append('text').text(v)\n                        .attr({\n                            'class': 'desc',\n                            y: oy,\n                        });\n                }\n\n                oy += yTextSpc;\n            });\n\n            var kbox = aggKey.node().getBBox(),\n                ox = kbox.width + offDesc;\n            gcol.selectAll('.desc').attr('x', ox);\n            aggKey.remove();\n\n            var bbox = gcol.node().getBBox();\n            xCount += bbox.width + colXDelta;\n        }\n\n        data.forEach(function (d, i) {\n            addColumn(el, d, i);\n        });\n\n        return el.node().getBBox().height;\n    }\n\n    function updateKeyItems() {\n        var rows = items.selectAll('.qhRow').data(data);\n\n        yCount = offy;\n\n        var entering = rows.enter()\n            .append('g')\n            .attr({\n                'class': 'qhrow',\n            });\n\n        entering.each(function (r, i) {\n            var el = d3.select(this),\n                sep = r.type === 'sep',\n                dy;\n\n            el.attr('transform', sus.translate(0, yCount));\n\n            if (sep) {\n                addSeparator(el, i);\n                yCount += sepYDelta;\n            } else {\n                dy = addContent(el, r.data, i);\n                yCount += dy;\n            }\n        });\n\n        var ibox = items.node().getBBox(),\n            paneW = ibox.width + pad * 2,\n            paneH = ibox.height + offy;\n\n        items.selectAll('.qhrowsep').attr('x2', ibox.width);\n        items.attr('transform', sus.translate(-paneW/2, -pad));\n        rect.attr({\n            width: paneW,\n            height: paneH,\n            transform: sus.translate(-paneW/2-pad, 0),\n        });\n\n    }\n\n    function checkFmt(fmt) {\n        var a = fs.isA(fmt),\n            n = a && a.length,\n            ns = 0,\n            na = 0;\n\n        if (n) {\n            a.forEach(function (d) {\n                fs.isA(d) && na++;\n                fs.isS(d) && ns++;\n            });\n            if (na === n || ns === n) {\n                return a;\n            }\n        }\n        return null;\n    }\n\n    function buildBlock(map, fmt) {\n        var b = [];\n        fmt.forEach(function (k) {\n            var v = map.get(k),\n                a = fs.isA(v),\n                d = (a && a[1]),\n                dfn = fs.isF(d),\n                dval = (dfn && dfn()) || d;\n\n            if (k === '-' || dval) {\n                b.push([mkKeyDisp(k), dval]);\n            }\n        });\n        return b;\n    }\n\n    function emptyRow() {\n        return { type: 'row', data: [] };\n    }\n\n    function mkArrRow(fmt) {\n        var d = emptyRow();\n        d.data.push(fmt);\n        return d;\n    }\n\n    function mkColumnarRow(map, fmt) {\n        var d = emptyRow();\n        fmt.forEach(function (a) {\n            d.data.push(buildBlock(map, a));\n        });\n        return d;\n    }\n\n    function mkMapRow(map, fmt) {\n        var d = emptyRow();\n        d.data.push(buildBlock(map, fmt));\n        return d;\n    }\n\n    function addRow(row) {\n        var d = row || { type: 'sep' };\n        data.push(d);\n    }\n\n    function aggregateData(bindings) {\n        var hf = '_helpFormat',\n            gmap = d3.map(bindings.globalKeys),\n            gfmt = bindings.globalFormat,\n            vmap = d3.map(bindings.viewKeys),\n            vgest = bindings.viewGestures,\n            vfmt, vkeys;\n\n        vfmt = checkFmt(vmap.get(hf));\n        vmap.remove(hf);\n\n        if (!vfmt) {\n            vkeys = vmap.keys();\n            vfmt = vkeys.sort();\n        }\n\n        data = [];\n\n        addRow(mkMapRow(gmap, gfmt));\n        addRow();\n        addRow(fs.isA(vfmt[0]) ? mkColumnarRow(vmap, vfmt) : mkMapRow(vmap, vfmt));\n        addRow();\n        addRow(mkArrRow(vgest));\n    }\n\n    function qhlionTitle() {\n        var lion = ls.bundle('core.fw.QuickHelp');\n        return lion('qh_title');\n    }\n\n    function popBind(bindings) {\n        pane = svg.append('g')\n            .attr({\n                class: 'help',\n                opacity: 0,\n            });\n\n        rect = pane.append('rect')\n            .attr('rx', 8);\n\n        pane.append('text')\n            .text(qhlionTitle())\n            .attr({\n                class: 'title',\n                dy: '1.2em',\n                transform: sus.translate(-pad, 0),\n            });\n\n        items = pane.append('g');\n        aggregateData(bindings);\n        updateKeyItems();\n\n        _fade(1);\n    }\n\n    function fadeBindings() {\n        _fade(0);\n    }\n\n    function _fade(o) {\n        svg.selectAll('g.help')\n            .transition()\n            .duration(settings.fade)\n            .attr('opacity', o);\n    }\n\n    function addSvg() {\n        svg = qhdiv.append('svg')\n            .attr({\n                width: w,\n                height: h,\n                viewBox: vbox,\n            });\n    }\n\n    function removeSvg() {\n        svg.transition()\n            .delay(settings.fade + 20)\n            .remove();\n    }\n\n    function goodBindings(bindings) {\n        var warnPrefix = 'Quickhelp Service: showQuickHelp(), ';\n        if (!bindings || !fs.isO(bindings) || fs.isEmptyObject(bindings)) {\n            $log.warn(warnPrefix + 'invalid bindings object');\n            return false;\n        }\n        if (!(neededBindings.every(function (key) { return key in bindings; }))) {\n            $log.warn(\n                warnPrefix +\n                'needed bindings for help panel not provided:',\n                neededBindings\n            );\n            return false;\n        }\n        return true;\n    }\n\n\n    angular.module('onosLayer')\n    .factory('QuickHelpService',\n        ['$log', 'FnService', 'SvgUtilService', 'LionService',\n\n        function (_$log_, _fs_, _sus_, _ls_) {\n            $log = _$log_;\n            fs = _fs_;\n            sus = _sus_;\n            ls = _ls_;\n\n            function initQuickHelp(opts) {\n                settings = angular.extend({}, defaultSettings, fs.isO(opts));\n                qhdiv = d3.select('#quickhelp');\n            }\n\n            function showQuickHelp(bindings) {\n                svg = qhdiv.select('svg');\n                if (!goodBindings(bindings)) {\n                    return null;\n                }\n                if (svg.empty()) {\n                    addSvg();\n                    popBind(bindings);\n                } else {\n                    hideQuickHelp();\n                }\n            }\n\n            function hideQuickHelp() {\n                svg = qhdiv.select('svg');\n                if (!svg.empty()) {\n                    fadeBindings();\n                    removeSvg();\n                    return true;\n                }\n                return false;\n            }\n\n            return {\n                initQuickHelp: initQuickHelp,\n                showQuickHelp: showQuickHelp,\n                hideQuickHelp: hideQuickHelp,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $route, fs, ks, gs;\n\n    var veil;\n\n    function init() {\n        var wSize = fs.windowSize(),\n            ww = wSize.width,\n            wh = wSize.height,\n            shrink = wh * 0.3,\n            birdDim = wh - shrink,\n            birdCenter = (ww - birdDim) / 2,\n            svg;\n\n        veil = d3.select('#veil');\n\n        svg = veil.select('svg').attr({\n            width: ww,\n            height: wh,\n        }).style('opacity', 0.2);\n\n        gs.addGlyph(svg, 'bird', birdDim, false, [birdCenter, shrink/2]);\n    }\n\n    function show(msg) {\n        var msgs = fs.isA(msg) || [msg],\n            pdiv = veil.select('.msg');\n        pdiv.selectAll('p').remove();\n\n        msgs.forEach(function (line) {\n            pdiv.append('p').text(line);\n        });\n\n        veil.style('display', 'block');\n        ks.enableKeys(false);\n    }\n\n    function hide() {\n        veil.style('display', 'none');\n        ks.enableKeys(true);\n    }\n\n    function lostServer(ctrlName, msg) {\n        if ($route.current.$$route.controller === ctrlName) {\n            $log.debug('VEIL-service: ', ctrlName);\n            show(msg);\n        } else {\n            $log.debug('VEIL-service: IGNORING ', ctrlName);\n        }\n    }\n\n    angular.module('onosLayer')\n    .factory('VeilService',\n        ['$log', '$route', 'FnService', 'KeyService', 'GlyphService', 'WebSocketService',\n\n        function (_$log_, _$route_, _fs_, _ks_, _gs_, wss) {\n            $log = _$log_;\n            $route = _$route_;\n            fs = _fs_;\n            ks = _ks_;\n            gs = _gs_;\n\n            var self = {\n                init: init,\n                show: show,\n                hide: hide,\n                lostServer: lostServer,\n            };\n            wss._setVeilDelegate(self);\n            return self;\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log;\n\n    angular.module('onosRemote')\n    .factory('RestService',\n        ['$log', '$http', 'FnService', 'UrlFnService',\n\n        function (_$log_, $http, fs, ufs) {\n            $log = _$log_;\n\n            function get(url, callback, errorCb) {\n                var fullUrl = ufs.rsUrl(url);\n\n                $http.get(fullUrl).then(function (response) {\n                    callback(response.data);\n                }, function (response) {\n                    var emsg = 'Failed to retrieve JSON data: ' + fullUrl;\n                    $log.warn(emsg, response.status, response.data);\n                    if (errorCb) {\n                        errorCb(emsg);\n                    }\n                });\n            }\n\n            function post(url, data, callbacks) {\n                var fullUrl = ufs.rsUrl(url);\n                $http.post(fullUrl, data).then(function (response) {\n                    if (callbacks && fs.isF(callbacks.success)) {\n                        callbacks.success(response.data);\n                    }\n                }, function (response) {\n                    var msg = 'Problem with $http post request: ' + fullUrl;\n                    $log.warn(msg, response.status, response.data);\n\n                    if (callbacks && fs.isF(callbacks.error)) {\n                        callbacks.error(msg);\n                    }\n                });\n            }\n\n            return {\n                get: get,\n                post: post,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var uiContext = '/onos/ui/',\n        rsSuffix = uiContext + 'rs/',\n        wsSuffix = uiContext + 'websock/';\n\n    angular.module('onosRemote')\n        .factory('UrlFnService', ['$location', function ($loc) {\n\n            function matchSecure(protocol) {\n                var p = $loc.protocol(),\n                    secure = (p === 'https' || p === 'wss');\n                return secure ? protocol + 's' : protocol;\n            }\n\n            function urlBase(protocol, port, host) {\n\n                var match = $loc.absUrl().match('.*//[^/]+/(.+)' + uiContext),\n                    appPrefix = match ? '/' + match[1] : '';\n\n                return matchSecure(protocol) + '://' +\n                    (host || $loc.host()) + ':' +\n                    (port || $loc.port()) + appPrefix;\n            }\n\n            function httpPrefix(suffix) {\n                return urlBase('http') + suffix;\n            }\n\n            function wsPrefix(suffix, wsport, host) {\n                return urlBase('ws', wsport, host) + suffix;\n            }\n\n            function rsUrl(path) {\n                return httpPrefix(rsSuffix) + path;\n            }\n\n            function wsUrl(path, wsport, host) {\n                return wsPrefix(wsSuffix, wsport, host) + path;\n            }\n\n            return {\n                rsUrl: rsUrl,\n                wsUrl: wsUrl,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $loc, fs, gs, ufs, wsock, vs, ls;\n\n    var webSockOpts, \n        ws = null, \n        wsUp = false, \n        handlers = {}, \n        pendingEvents = [], \n        host, \n        url, \n        clusterNodes = [], \n        clusterIndex = -1, \n        glyphs = [],\n        connectRetries = 0, \n        openListeners = {}, \n        nextListenerId = 1, \n        loggedInUser = null; \n\n    var builtinHandlers = {\n\n        bootstrap: function (data) {\n            $log.debug('bootstrap data', data);\n            loggedInUser = data.user;\n            clusterNodes = data.clusterNodes;\n            clusterNodes.forEach(function (d, i) {\n                if (d.uiAttached) {\n                    clusterIndex = i;\n                    $log.info('Connected to cluster node ' + d.ip);\n                }\n            });\n            glyphs = data.glyphs;\n            glyphs.forEach(function (d, i) {\n                var gdata = {};\n                gdata['_' + d.id] = d.viewbox;\n                gdata[d.id] = d.path;\n                gs.registerGlyphs(gdata);\n            });\n        },\n\n        error: function (data) {\n            var m = data.message || 'error from server';\n            $log.error(m, data);\n\n            vs && vs.show([\n                'Oops!',\n                'Server reports error...',\n                m,\n            ]);\n        },\n    };\n\n\n\n    function handleOpen() {\n        $log.info('Web socket open - ', url);\n        vs && vs.hide();\n\n        if (fs.debugOn('txrx')) {\n            $log.debug('Sending ' + pendingEvents.length + ' pending event(s)...');\n        }\n        pendingEvents.forEach(function (ev) {\n            _send(ev);\n        });\n        pendingEvents = [];\n\n        connectRetries = 0;\n        wsUp = true;\n        informListeners(host, url);\n    }\n\n    function handleMessage(msgEvent) {\n        var ev, h;\n\n        try {\n            ev = JSON.parse(msgEvent.data);\n        } catch (e) {\n            $log.error('Message.data is not valid JSON', msgEvent.data, e);\n            return null;\n        }\n        if (fs.debugOn('txrx')) {\n            $log.debug(' << *Rx* ', ev.event, ev.payload);\n        }\n\n        if (h = handlers[ev.event]) {\n            try {\n                h(ev.payload);\n            } catch (e) {\n                $log.error('Problem handling event:', ev, e);\n                return null;\n            }\n        } else {\n            $log.warn('Unhandled event:', ev);\n        }\n\n    }\n\n    function handleClose() {\n        var gsucc;\n\n        $log.warn('Web socket closed');\n        ls && ls.stop();\n        wsUp = false;\n\n        if (gsucc = findGuiSuccessor()) {\n            createWebSocket(webSockOpts, gsucc);\n        } else {\n            vs && vs.show([\n                'Oops!',\n                'Web-socket connection to server closed...',\n                'Try refreshing the page.',\n            ]);\n        }\n    }\n\n\n\n    function findGuiSuccessor() {\n        var ncn = clusterNodes.length,\n            ip, node;\n\n        while (connectRetries < ncn && !ip) {\n            connectRetries++;\n            clusterIndex = (clusterIndex + 1) % ncn;\n            node = clusterNodes[clusterIndex];\n            ip = node && node.ip;\n        }\n\n        return ip;\n    }\n\n    function informListeners(host, url) {\n        angular.forEach(openListeners, function (lsnr) {\n            lsnr.cb(host, url);\n        });\n    }\n\n    function _send(ev) {\n        if (fs.debugOn('txrx')) {\n            $log.debug(' *Tx* >> ', ev.event, ev.payload);\n        }\n        ws.send(JSON.stringify(ev));\n    }\n\n    function noHandlersWarn(handlers, caller) {\n        if (!handlers || fs.isEmptyObject(handlers)) {\n            $log.warn('WSS.' + caller + '(): no event handlers');\n            return true;\n        }\n        return false;\n    }\n\n\n    function resetState() {\n        webSockOpts = undefined;\n        ws = null;\n        wsUp = false;\n        host = undefined;\n        url = undefined;\n        pendingEvents = [];\n        handlers = {};\n        clusterNodes = [];\n        clusterIndex = -1;\n        glyphs = [];\n        connectRetries = 0;\n        openListeners = {};\n        nextListenerId = 1;\n    }\n\n    function createWebSocket(opts, _host_) {\n        var wsport = (opts && opts.wsport) || null;\n\n        webSockOpts = opts; \n\n        host = _host_ || $loc.host();\n        url = ufs.wsUrl('core', wsport, _host_);\n\n        $log.debug('Attempting to open websocket to: ' + url);\n        ws = wsock.newWebSocket(url);\n        if (ws) {\n            ws.onopen = handleOpen;\n            ws.onmessage = handleMessage;\n            ws.onclose = handleClose;\n\n            sendEvent('authentication', { token: onosAuth });\n        }\n        return url;\n    }\n\n    function bindHandlers(handlerMap) {\n        var m,\n            dups = [];\n\n        if (noHandlersWarn(handlerMap, 'bindHandlers')) {\n            return null;\n        }\n        m = d3.map(handlerMap);\n\n        m.forEach(function (eventId, api) {\n            var fn = fs.isF(api) || fs.isF(api[eventId]);\n            if (!fn) {\n                $log.warn(eventId + ' handler not a function');\n                return;\n            }\n\n            if (handlers[eventId]) {\n                dups.push(eventId);\n            } else {\n                handlers[eventId] = fn;\n            }\n        });\n        if (dups.length) {\n            $log.warn('duplicate bindings ignored:', dups);\n        }\n    }\n\n    function unbindHandlers(handlerMap) {\n        var m;\n\n        if (noHandlersWarn(handlerMap, 'unbindHandlers')) {\n            return null;\n        }\n        m = d3.map(handlerMap);\n\n        m.forEach(function (eventId) {\n            delete handlers[eventId];\n        });\n    }\n\n\n    function addOpenListener(callback) {\n        var id = nextListenerId++,\n            cb = fs.isF(callback),\n            o = { id: id, cb: cb };\n\n        if (cb) {\n            openListeners[id] = o;\n        } else {\n            $log.error('WSS.addOpenListener(): callback not a function');\n            o.error = 'No callback defined';\n        }\n        return o;\n    }\n\n    function removeOpenListener(lsnr) {\n        var id = fs.isO(lsnr) && lsnr.id,\n            o;\n        if (!id) {\n            $log.warn('WSS.removeOpenListener(): invalid listener', lsnr);\n            return null;\n        }\n        o = openListeners[id];\n\n        if (o) {\n            delete openListeners[id];\n        }\n    }\n\n    function sendEvent(evType, payload) {\n        var ev = {\n                event: evType,\n                payload: payload || {},\n            };\n\n        if (wsUp) {\n            _send(ev);\n        } else {\n            pendingEvents.push(ev);\n        }\n    }\n\n    function setVeilDelegate(vd) {\n        vs = vd;\n    }\n\n    function setLoadingDelegate(ld) {\n        ls = ld;\n    }\n\n\n    angular.module('onosRemote')\n    .factory('WebSocketService',\n        ['$log', '$location', 'FnService', 'GlyphService', 'UrlFnService', 'WSock',\n\n        function (_$log_, _$loc_, _fs_, _gs_, _ufs_, _wsock_) {\n            $log = _$log_;\n            $loc = _$loc_;\n            fs = _fs_;\n            gs = _gs_;\n            ufs = _ufs_;\n            wsock = _wsock_;\n\n            bindHandlers(builtinHandlers);\n\n            return {\n                resetState: resetState,\n                createWebSocket: createWebSocket,\n                bindHandlers: bindHandlers,\n                unbindHandlers: unbindHandlers,\n                addOpenListener: addOpenListener,\n                removeOpenListener: removeOpenListener,\n                sendEvent: sendEvent,\n                isConnected: function () { return wsUp; },\n                loggedInUser: function () { return loggedInUser || '(no-one)'; },\n\n                _setVeilDelegate: setVeilDelegate,\n                _setLoadingDelegate: setLoadingDelegate,\n            };\n        },\n    ]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    angular.module('onosRemote')\n        .factory('WSock', ['$log', function ($log) {\n\n            function newWebSocket(url) {\n                var ws = null;\n                try {\n                    ws = new WebSocket(url);\n                } catch (e) {\n                    $log.error('Unable to create web socket:', e);\n                }\n                return ws;\n            }\n\n            return {\n                newWebSocket: newWebSocket,\n            };\n        }]);\n}());\n","\n\n\n(function () {\n    'use strict';\n\n    var $log, $http, fs;\n\n    var cache = d3.map(),\n        bundledUrlPrefix = 'data/map/';\n\n    function getUrl(id) {\n        if (id[0] === '*') {\n            return bundledUrlPrefix + id.slice(1) + '.topojson';\n        }\n        return id + '.topojson';\n    }\n\n\n    function clearCache() {\n        cache = d3.map();\n    }\n\n\n    function fetchTopoData(id) {\n        if (!fs.isS(id)) {\n            return null;\n        }\n        var url = getUrl(id),\n            promise = cache.get(id);\n\n        if (!promise) {\n            promise = $http.get(url);\n\n            promise.meta = {\n                id: id,\n                url: url,\n                wasCached: false,\n            };\n\n            promise.then(function (response) {\n                promise.topodata = response.data;\n            }, function (response) {\n                $log.warn('Failed to retrieve map TopoJSON data: ' + url,\n                    response.status, response.data);\n            });\n\n            cache.set(id, promise);\n\n        } else {\n            promise.meta.wasCached = true;\n        }\n\n        return promise;\n    }\n\n    var defaultGenSettings = {\n        objectTag: 'states',\n        projection: d3.geo.mercator(),\n        logicalSize: 1000,\n        mapFillScale: .95,\n    };\n\n    function createPathGenerator(topoData, opts) {\n        var settings = angular.extend({}, defaultGenSettings, opts),\n            topoObject = topoData.objects[settings.objectTag],\n            geoData = topojson.feature(topoData, topoObject),\n            proj = settings.projection,\n            dim = settings.logicalSize,\n            mfs = settings.mapFillScale,\n            path = d3.geo.path().projection(proj);\n\n        rescaleProjection(proj, mfs, dim, path, geoData, opts.adjustScale);\n\n        return {\n            geodata: geoData,\n            pathgen: path,\n            settings: settings,\n        };\n    }\n\n    function rescaleProjection(proj, mfs, dim, path, geoData, adjustScale) {\n        var adj = adjustScale || 1;\n\n        proj.scale(1).translate([0, 0]);\n\n        var b = path.bounds(geoData),\n            x1 = b[0][0],\n            y1 = b[0][1],\n            x2 = b[1][0],\n            y2 = b[1][1],\n            dx = x2 - x1,\n            dy = y2 - y1,\n            x = (x1 + x2) / 2,\n            y = (y1 + y2) / 2;\n\n        var s = (mfs / Math.min(dx / dim, dy / dim)) * adj,\n            t = [dim / 2 - s * x, dim / 2 - s * y];\n\n        proj.scale(s).translate(t);\n    }\n\n    angular.module('onosSvg')\n        .factory('GeoDataService', ['$log', '$http', 'FnService',\n        function (_$log_, _$http_, _fs_) {\n            $log = _$log_;\n            $http = _$http_;\n            fs = _fs_;\n\n\n            return {\n                clearCache: clearCache,\n                fetchTopoData: fetchTopoData,\n                createPathGenerator: createPathGenerator,\n                rescaleProjection: rescaleProjection,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs, sus, gd;\n\n    var glyphs = d3.map(),\n        api;\n\n    var msgGS = 'GlyphService.',\n        rg = 'registerGlyphs(): ',\n        rgs = 'registerGlyphSet(): ';\n\n\n    function warn(msg) {\n        $log.warn(msgGS + msg);\n    }\n\n    function addToMap(key, value, vbox, overwrite, dups) {\n        if (!overwrite && glyphs.get(key)) {\n            dups.push(key);\n        } else {\n            glyphs.set(key, { id: key, vb: vbox, d: value });\n        }\n    }\n\n    function reportDups(dups, which) {\n        var ok = (dups.length == 0),\n            msg = 'ID collision: ';\n\n        if (!ok) {\n            dups.forEach(function (id) {\n                warn(which + msg + '\"' + id + '\"');\n            });\n        }\n        return ok;\n    }\n\n    function reportMissVb(missing, which) {\n        var ok = (missing.length == 0),\n            msg = 'Missing viewbox property: ';\n\n        if (!ok) {\n            missing.forEach(function (vbk) {\n                warn(which + msg + '\"' + vbk + '\"');\n            });\n        }\n        return ok;\n    }\n\n\n    function clear() {\n        glyphs = d3.map();\n    }\n\n    function init() {\n        gd.registerCoreGlyphs(api);\n    }\n\n    function registerGlyphs(data, overwrite) {\n        var dups = [],\n            missvb = [];\n\n        angular.forEach(data, function (value, key) {\n            var vbk = '_' + key,\n                vb = data[vbk];\n\n            if (key[0] !== '_') {\n                if (!vb) {\n                    missvb.push(vbk);\n                    return;\n                }\n                addToMap(key, value, vb, overwrite, dups);\n            }\n        });\n        return reportDups(dups, rg) && reportMissVb(missvb, rg);\n    }\n\n    function registerGlyphSet(data, overwrite) {\n        var dups = [],\n            vb = data._viewbox;\n\n        if (!vb) {\n            warn(rgs + 'no \"_viewbox\" property found');\n            return false;\n        }\n\n        angular.forEach(data, function (value, key) {\n            if (key[0] !== '_') {\n                addToMap(key, value, vb, overwrite, dups);\n            }\n        });\n        return reportDups(dups, rgs);\n    }\n\n    function ids() {\n        return glyphs.keys();\n    }\n\n    function glyph(id) {\n        return glyphs.get(id);\n    }\n\n    function glyphDefined(id) {\n        return glyphs.has(id);\n    }\n\n    function loadDefs(defs, glyphIds, noClear) {\n        var list = fs.isA(glyphIds) || ids(),\n            clearCache = !noClear;\n\n        if (clearCache) {\n            defs.html(null);\n        }\n\n        list.forEach(function (id) {\n            var g = glyph(id);\n            if (g) {\n                if (noClear) {\n                    if (defs.select('symbol#' + g.id).size() > 0) {\n                        return;\n                    }\n                }\n                defs.append('symbol')\n                    .attr({ id: g.id, viewBox: g.vb })\n                    .append('path').attr('d', g.d);\n            }\n        });\n    }\n\n    function addGlyph(elem, glyphId, size, overlay, trans) {\n        var sz = size || 40,\n            ovr = !!overlay,\n            xns = fs.isA(trans),\n            atr = {\n                width: sz,\n                height: sz,\n                'class': 'glyph',\n                'xlink:href': '#' + glyphId,\n            };\n\n        if (xns) {\n            atr.transform = sus.translate(trans);\n        }\n        return elem.append('use').attr(atr).classed('overlay', ovr);\n    }\n\n\n    angular.module('onosSvg')\n    .factory('GlyphService',\n        ['$log', 'FnService', 'SvgUtilService', 'GlyphDataService',\n\n        function (_$log_, _fs_, _sus_, _gd_) {\n            $log = _$log_;\n            fs = _fs_;\n            sus = _sus_;\n            gd = _gd_;\n\n            api = {\n                clear: clear,\n                init: init,\n                registerGlyphs: registerGlyphs,\n                registerGlyphSet: registerGlyphSet,\n                ids: ids,\n                glyph: glyph,\n                glyphDefined: glyphDefined,\n                loadDefs: loadDefs,\n                addGlyph: addGlyph,\n            };\n            return api;\n        }]\n    )\n    .run(['$log', function ($log) {\n        $log.debug('Clearing glyph cache');\n        clear();\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n\n    var logos = {\n            _bird: '352 224 113 112',\n            bird: 'M427.7,300.4 c-6.9,0.6-13.1,5-19.2,7.1c-18.1,6.2-33.9,' +\n            '9.1-56.5,4.7c24.6,17.2,36.6,13,63.7,0.1c-0.5,0.6-0.7,1.3-1.3,' +\n            '1.9c1.4-0.4,2.4-1.7,3.4-2.2c-0.4,0.7-0.9,1.5-1.4,1.9c2.2-0.6,' +\n            '3.7-2.3,5.9-3.9c-2.4,2.1-4.2,5-6,8c-1.5,2.5-3.1,4.8-5.1,6.9c-1,' +\n            '1-1.9,1.9-2.9,2.9c-1.4,1.3-2.9,2.5-5.1,2.9c1.7,0.1,3.6-0.3,6.5' +\n            '-1.9c-1.6,2.4-7.1,6.2-9.9,7.2c10.5-2.6,19.2-15.9,25.7-18c18.3' +\n            '-5.9,13.8-3.4,27-14.2c1.6-1.3,3-1,5.1-0.8c1.1,0.1,2.1,0.3,3.2,' +\n            '0.5c0.8,0.2,1.4,0.4,2.2,0.8l1.8,0.9c-1.9-4.5-2.3-4.1-5.9-6c-2.3' +\n            '-1.3-3.3-3.8-6.2-4.9c-7.1-2.6-11.9,11.7-11.7-5c0.1-8,4.2-14.4,' +\n            '6.4-22c1.1-3.8,2.3-7.6,2.4-11.5c0.1-2.3,0-4.7-0.4-7c-2-11.2-8.4' +\n            '-21.5-19.7-24.8c-1-0.3-1.1-0.3-0.9,0c9.6,17.1,7.2,38.3,3.1,54.2' +\n            'C429.9,285.5,426.7,293.2,427.7,300.4z',\n\n            _cord: '0 0 110 110',\n            cord: 'M92.5,62.3l-33,33,2.5,2.5c4.1,4.1,7.4,3.6,11.2-.1L95.9,75' +\n            'l-4.5-4.5,4.7-4.7-3.6-3.6Z' +\n            'm2.6,7L98.4,66l3.3,3.3-3.3,3.3-3.3-3.3Z' +\n            'M94.5,60l4.9-4.9,4.9,4.9-4.9,4.9Z' +\n            'M36.2,36.1L18.6,53.8c-7.8,7.8-5.8,17.4-2.4,22l-2.2-2.2' +\n            'c-10.6-10.6-11.2-20,0-31.2L28.2,28.1L31.3,25l8,8-3.1,3.1Z' +\n            'M55.5,55.4l3.6-3.6L66.9,44l-8-8l-2.5,2.5-5.2,5.2l-3.6,3.6' +\n            'L33.2,61.6C22,72.7,22.5,82.2,33.2,92.8L35.4,95' +\n            'c-3.4-4.5-5.4-14.1,2.4-22L55.5,55.4Z' +\n            'M50.7,21.7l-8-8L35,21.2l8,8,7.6-7.6Z' +\n            'M62.8,9.6L55.4,17l-8-8,7.4-7.4,8,8Z' +\n            'm0.7,18.3-7.6,7.6-8-8,7.6-7.6,8,8Z' +\n            'm26.1-6.6-8.1,8.1-8-8,8.1-8.1,8,8Z' +\n            'M79.3,31.5l-7.4,7.4-8-8,7.4-7.4,8,8Z' +\n            'M45.7,45.6L54.3,37l-8-8-8.6,8.6L23.4,51.8' +\n            'C12.2,63,12.8,72.4,23.4,83l2.2,2.2c-3.4-4.5-5.4-14.1,2.4-22Z' +\n            'M34.9,80.7l20.6,20.5c2,2,4.6,4.1,7.9,3.2-2.9,2.9-8.9,1.7-11.9-1.3' +\n            'L35.1,86.8,35,86.6H34.9l-0.8-.8' +\n            'a15,15,0,0,1,.1-1.9,14.7,14.7,0,0,1,.7-3.2Z' +\n            'm-0.6,7.4a21.3,21.3,0,0,0,5.9,11.7l5.7,5.7' +\n            'c3,3,9,4.1,11.9,1.3-3.3.9-5.9-1.2-7.9-3.2L34.3,88.1Z' +\n            'm3.5-12.4a16.6,16.6,0,0,0-2.3,3.6L57,100.8' +\n            'c3,3,9,4.1,11.9,1.3-3.3.9-5.9-1.2-7.9-3.2Z',\n        },\n\n\n\n\n        tableFrame = 'M6.3,5.3h8.5v14.2h-8.5z' +\n            'M95.3,5.3h8.5v14.2h-8.5z' +\n            'M18.5,5.3h15.6v14.2h-15.6z' +\n            'M37.9,5.3h15.6v14.2h-15.6z' +\n            'M57,5.3h15.6v14.2h-15.6z' +\n            'M76.1,5.3h15.6v14.2h-15.6z' +\n            'M6.3,23.9h97.5v80.75h-97.5z',\n\n        rSquare = 'M10,20a10,10,0,0,1,10-10h70a10,10,0,0,1,10,10v70a10,10,' +\n            '0,0,1-10,10h-70a10,10,0,0,1-10-10z',\n\n        octagon = 'M10,35l25-25h40l25,25v40l-25,25h-40l-25-25z',\n\n        circle = 'M10,55A45,45,0,0,1,100,55A45,45,0,0,1,10,55',\n\n        arrowsLR = 'M58,26l12,0,0-8,18,13-18,13,0-8-12,0z' +\n            'M58,60l12,0,0-8,18,13-18,13,0-8-12,0z' +\n            'M52,40l-12,0,0-8-18,13,18,13,0-8,12,0z' +\n            'M52,74l-12,0,0-8-18,13,18,13,0-8,12,0z',\n\n        arrowsInHOutV = 'M20,50l12,0,0-8,18,13-18,13,0-8-12,0z' +\n            'M90,50l-12,0,0-8-18,13,18,13,0-8,12,0z' +\n            'M50,47l0-12-8,0,13-18,13,18-8,0,0,12z' +\n            'M50,63l0,12-8,0,13,18,13-18-8,0,0-12z',\n\n        laser = 'M47.2,68.4L31.1,84.5,25.6,79,41.7,62.9Z' +\n            'M76.3,30.6A3.4,3.4,0,0,0,72.9,34a3.3,3.3,0,0,0,.3,1.3L44.7,63.7' +\n            'l1.7,1.7L74.8,37a3.2,3.2,0,0,0,1.5.4A3.4,3.4,0,1,0,76.3,30.6Z' +\n            'm0.9-2.9V23.8a0.8,0.8,0,0,0-.8-0.8H76.1a0.8,0.8,0,0,0-.8.8v3.9' +\n            'a0.8,0.8,0,0,0,.8.8h0.3A0.8,0.8,0,0,0,77.2,27.7Z' +\n            'm3.5,3.2,3.6-3.6a0.9,0.9,0,0,0,0-1.2H84.3a0.9,0.9,0,0,0-1.2,0' +\n            'l-3.6,3.6a0.9,0.9,0,0,0,0,1.2h0.1A0.9,0.9,0,0,0,80.7,30.9Z' +\n            'm1.8,4h3.9a0.8,0.8,0,0,0,.8-0.8V33.7a0.8,0.8,0,0,0-.8-0.8H82.6' +\n            'a0.8,0.8,0,0,0-.8.8V34A0.8,0.8,0,0,0,82.6,34.8Z' +\n            'm-16.3.1h3.9a0.8,0.8,0,0,0,.8-0.8V33.8a0.8,0.8,0,0,0-.8-0.8' +\n            'H66.2a0.8,0.8,0,0,0-.8.8v0.3A0.8,0.8,0,0,0,66.2,34.9Z' +\n            'm6.8-5.2-3.8-3.8a0.9,0.9,0,0,0-1.3,0a0.9,0.9,0,0,0,0,1.3' +\n            'L71.8,31A0.9,0.9,0,0,0,73,31A0.9,0.9,0,0,0,73.1,29.7Z' +\n            'M84.8,40.9L80.9,37a0.9,0.9,0,0,0-1.3,0a0.9,0.9,0,0,0,0,1.3' +\n            'l3.9,3.9a0.9,0.9,0,0,0,1.3,0A0.9,0.9,0,0,0,84.8,40.9Z' +\n            'm-7.6,3.2V40.2a0.8,0.8,0,0,0-.8-0.8H76.2a0.8,0.8,0,0,0-.8.8' +\n            'v3.9a0.8,0.8,0,0,0,.8.8h0.3A0.8,0.8,0,0,0,77.3,44.1Z',\n\n        fiberStar = 'M89,60V57H70.6a15,15,0,0,1-3.2,7.6l13,12.9L82.8,75v7.5' +\n            'H75.2l2.2-2.2-12.8-13A14.9,14.9,0,0,1,57,70.6V89h3.1l-5.3,5.4' +\n            'L49.4,89H53V70.6a13.2,13.2,0,0,1-8-3.2l-13.1,13,2.3,2.3H26.5' +\n            'V75.1l2.3,2.3,13-12.8A15,15,0,0,1,38.7,57H21v3l-5.4-5.4L21,49.3' +\n            'V53H38.7a13.1,13.1,0,0,1,3.2-8l-13-13.1-2.2,2.1V26.4h7.5l-2.4,2.4' +\n            'L45,41.8a13.2,13.2,0,0,1,8-3.2V21H49.4l5.4-5.4L60.1,21H57V38.6' +\n            'a14.9,14.9,0,0,1,7.6,3.2l12.9-13-2.4-2.3h7.5v7.6l-2.3-2.3L67.4,45' +\n            'a13.1,13.1,0,0,1,3.2,8H89V49.3l5.4,5.3Z',\n\n        glyphDataSet = {\n            _viewbox: '0 0 110 110',\n\n            uiAttached: 'M91.9,16.7H18.1A5.3,5.3,0,0,0,12.8,22V68' +\n            'a5.3,5.3,0,0,0,5.3,5.3H91.9A5.3,5.3,0,0,0,97.2,68V22' +\n            'A5.3,5.3,0,0,0,91.9,16.7ZM91.6,65.2H18.4V22.3H91.6V65.2Z' +\n            'M71.5,87.5h3.8v5.9h-40.6v-5.9h3.8v-1.7h5.4v-9.7h22.3v9.7h5.3v1.7z',\n\n            unknown: 'M35,40a5,5,0,0,1,5-5h30a5,5,0,0,1,5,5v30a5,5,0,0,1-5,5' +\n            'h-30a5,5,0,0,1-5-5z',\n\n            query: 'M51.4,69.9c0-0.9,0-1.6,0-2.1c0-2.7,0.4-5.1,1.2-7.1' +\n            'c0.6-1.5,1.5-3,2.8-4.5c0.9-1.1,2.6-2.7,5.1-4.8c2.4-2.1,4-3.8,' +\n            '4.8-5.1 c0.7-1.3,1.1-2.6,1.1-4.1c0-2.7-1.1-5.1-3.2-7.1c-2.1-2' +\n            '-4.8-3.1-7.9-3.1c-3,0-5.5,0.9-7.5,2.8c-2,1.9-3.3,4.8-4,8.7l-7.2' +\n            '-0.8 c0.7-5.3,2.6-9.3,5.8-12.1c3.2-2.8,7.5-4.2,12.8-4.2c5.6,0,' +\n            '10.1,1.5,13.4,4.5c3.3,3,5,6.7,5,10.9c0,2.5-0.6,4.8-1.8,6.8 ' +\n            's-3.5,4.6-6.9,7.6c-2.3,2-3.8,3.5-4.5,4.4c-0.7,1-1.2,2-1.6,3.3' +\n            'c-0.3,1.2-0.5,3.2-0.6,6H51.4z M51,83.8v-7.9h8v7.9H51z',\n\n\n            node: 'M15,100a5,5,0,0,1-5-5v-65a5,5,0,0,1,5-5h80a5,5,0,0,1,5,5' +\n            'v65a5,5,0,0,1-5,5zM14,22.5l11-11a10,3,0,0,1,10-2h40a10,3,0,0,1,' +\n            '10,2l11,11zM16,35a5,5,0,0,1,10,0a5,5,0,0,1-10,0z',\n\n\n\n\n            switch: rSquare + arrowsLR,\n\n            router: circle + arrowsInHOutV,\n\n            roadm: octagon + arrowsLR,\n\n            otn: rSquare + laser,\n\n            roadm_otn: octagon + laser,\n\n            fiber_switch: rSquare + fiberStar,\n\n            microwave: 'M85,71.2c-8.9,10.5-29.6,8.7-45.3-3.5C23.9,55.4,19.8,' +\n            '37,28.6,26.5C29.9,38.6,71.5,69.9,85,71.2z M92.7,76.2M16.2,15 ' +\n            'M69.5,100.7v-4c0-1.4-1.2-2.2-2.6-2.2H19.3c-1.4,0-2.8,0.7-2.8,2.2' +\n            'v3.9c0,0.7,0.8,1,1.5,1h50.3C69,101.5,69.5,101.3,69.5,100.7z ' +\n            'M77.3,7.5l0,3.7c9,0.1,16.3,7.1,16.2,15.7l3.9,0C97.5,16.3,88.5,' +\n            '7.6,77.3,7.5z M77.6,14.7l0,2.5c5.3,0,9.7,4.2,9.6,9.3l2.6,0C89.9' +\n            ',20,84.4,14.7,77.6,14.7z M82.3,22.2c-1.3-1.2-2.9-1.9-4.7-1.9' +\n            'l0,1.2c1.4,0,2.8,0.6,3.8,1.5c1,1,1.6,2.3,1.6,3.7l1.3,0C84.3,25.1,' +\n            '83.6,23.4,82.3,22.2z M38.9,69.5l-5.1,23h16.5l-2.5-17.2C44.1,73.3,' +\n            '38.9,69.5,38.9,69.5zM58.1,54.1c13.7,10.1,26.5,16.8,29.2,13.7' +\n            'c2.7-3.1-5.6-13-19.3-24.4 M62.9,34.2 M62,37.9C47.7,27.3,33.7,20,' +\n            '31,23.1c-2.7,3.2,7,14.2,20.6,26 M73.9,25.7c-2.9,0.1-5.2,2.3-5.1,' +\n            '4.8c0,0.7,0.2,1.4,0.6,2l0,0L53.8,49.7l3.3,2.5L72.7,35l-0.4-0.3' +\n            'c0.6,0.2,1.3,0.3,1.9,0.3c2.9-0.1,5.2-2.3,5.1-4.9C79.3,27.6,76.8,' +\n            '25.6,73.9,25.7z',\n\n\n\n\n            endstation: 'M10,15a5,5,0,0,1,5-5h65a5,5,0,0,1,5,5v80a5,5,0,0,1' +\n            '-5,5h-65a5,5,0,0,1-5-5zM87.5,14l11,11a3,10,0,0,1,2,10v40a3,10,' +\n            '0,0,1,-2,10l-11,11zM17,19a2,2,0,0,1,2-2h56a2,2,0,0,1,2,2v26a2,' +\n            '2,0,0,1-2,2h-56a2,2,0,0,1-2-2zM20,20h54v10h-54zM20,33h54v10h' +\n            '-54zM42,70a5,5,0,0,1,10,0a5,5,0,0,1-10,0z',\n\n            bgpSpeaker: 'M10,40a45,35,0,0,1,90,0Q100,77,55,100Q10,77,10,40z' +\n            'M50,29l12,0,0-8,18,13-18,13,0-8-12,0zM60,57l-12,0,0-8-18,13,' +\n            '18,13,0-8,12,0z',\n\n\n\n            chain: 'M60.4,77.6c-4.9,5.2-9.6,11.3-15.3,16.3c-8.6,7.5-20.4,6.8' +\n            '-28-0.8c-7.7-7.7-8.4-19.6-0.8-28.4c6.5-7.4,13.5-14.4,20.9-20.9' +\n            'c7.5-6.7,19.2-6.7,26.5-0.8c3.5,2.8,4.4,6.1,2.2,8.7c-2.7,3.1' +\n            '-5.5,2.5-8.5,0.3c-4.7-3.4-9.7-3.2-14,0.9C37.1,58.7,31,64.8,' +\n            '25.2,71c-4.2,4.4-4.2,10.6-0.6,14.3c3.7,3.7,9.7,3.7,14.3-0.4' +\n            'c2.9-2.5,5.3-5.5,8.3-8c1-0.9,3-1.1,4.4-0.9C54.8,76.3,57.9,77.1,' +\n            '60.4,77.6zM49.2,32.2c5-5.2,9.7-10.9,15.2-15.7c12.8-11,31.2' +\n            '-4.9,34.3,11.2C100,34.2,98.3,40.2,94,45c-6.7,7.4-13.7,14.6' +\n            '-21.2,21.2C65.1,73,53.2,72.7,46,66.5c-3.2-2.8-3.9-5.8-1.6-8.4' +\n            'c2.6-2.9,5.3-2.4,8.2-0.3c5.2,3.7,10,3.3,14.7-1.1c5.8-5.6,11.6' +\n            '-11.3,17.2-17.2c4.6-4.8,4.9-11.1,0.9-15c-3.9-3.9-10.1-3.4-15,' +\n            '1.2c-3.1,2.9-5.7,7.4-9.3,8.5C57.6,35.3,53,33,49.2,32.2z',\n\n            crown: 'M99.5,21.6c0,3-2.3,5.4-5.1,5.4c-0.3,0-0.7,0-1-0.1c-1.8,' +\n            '4-4.8,10-7.2,17.3c-3.4,10.6-0.9,26.2,2.7,27.3C90.4,72,91.3,' +\n            '75,88,75H22.7c-3.3,0-2.4-3-0.9-3.5c3.6-1.1,6.1-16.7,2.7-27.3' +\n            'c-2.4-7.4-5.4-13.5-7.2-17.5c-0.5,0.2-1,0.3-1.6,0.3c-2.8,0' +\n            '-5.1-2.4-5.1-5.4c0-3,2.3-5.4,5.1-5.4c2.8,0,5.1,2.4,5.1,5.4c0,' +\n            '1-0.2,1.9-0.7,2.7c0.7,0.8,1.4,1.6,2.4,2.6c8.8,8.9,11.9,12.7,' +\n            '18.1,11.7c6.5-1,11-8.2,13.3-14.1c-2-0.8-3.3-2.7-3.3-5.1c0-3,' +\n            '2.3-5.4,5.1-5.4c2.8,0,5.1,2.4,5.1,5.4c0,2.5-1.6,4.5-3.7,5.2' +\n            'c2.3,5.9,6.8,13,13.2,14c6.2,1,9.3-2.7,18.1-11.7c0.7-0.7,1.4' +\n            '-1.5,2-2.1c-0.6-0.9-1-2-1-3.1c0-3,2.3-5.4,5.1-5.4C97.2,16.2,' +\n            '99.5,18.6,99.5,21.6zM92,87.9c0,2.2-1.7,4.1-3.8,4.1H22.4c' +\n            '-2.1,0-4.4-1.9-4.4-4.1v-3.3c0-2.2,2.3-4.5,4.4-4.5h65.8c2.1,' +\n            '0,3.8,2.3,3.8,4.5V87.9z',\n\n            lock: 'M79.4,48.6h-2.7c0.2-5.7-0.2-20.4-7.9-28.8c-3.6-3.9-8.3' +\n            '-5.9-13.7-5.9c-5.4,0-10.2,2-13.8,5.9c-7.8,8.4-8.3,23.2-8.1,28.8' +\n            'h-2.7c-4.4,0-8,2.6-8,5.9v35.7c0,3.3,3.6,5.9,8,5.9h48.9c4.4,0,' +\n            '8-2.6,8-5.9V54.5C87.5,51.3,83.9,48.6,79.4,48.6z M48.1,26.1c1.9' +\n            '-2,4.1-2.9,7-2.9c2.9,0,5.1,0.9,6.9,2.9c5,5.4,5.6,17.1,5.4,22.6' +\n            'h-25C42.3,43.1,43.1,31.5,48.1,26.1z',\n\n            topo: 'M97.2,76.3H86.6l-7.7-21.9H82c1,0,1.9-0.8,1.9-1.9V35.7c' +\n            '0-1-0.8-1.9-1.9-1.9H65.2c-1,0-1.9,0.8-1.9,1.9v2.6L33.4,26.1v-11' +\n            'c0-1-0.8-1.9-1.9-1.9H14.7c-1,0-1.9,0.8-1.9,1.9v16.8c0,1,0.8,' +\n            '1.9,1.9,1.9h16.8c1,0,1.9-0.8,1.9-1.9v-2.6l29.9,12.2v9L30.5,76.9' +\n            'c-0.3-0.3-0.8-0.5-1.3-0.5H12.4c-1,0-1.9,0.8-1.9,1.9V95c0,1,0.8,' +\n            '1.9,1.9,1.9h16.8c1,0,1.9-0.8,1.9-1.9v-6.9h47.4V95c0,1,0.8,1.9,' +\n            '1.9,1.9h16.8c1,0,1.9-0.8,1.9-1.9V78.2C99.1,77.2,98.2,76.3,97.2,' +\n            '76.3z M31.1,85.1v-4.9l32.8-26.4c0.3,0.3,0.8,0.5,1.3,0.5h10.5l' +\n            '7.7,21.9h-3c-1,0-1.9,0.8-1.9,1.9v6.9H31.1z',\n\n            refresh:\n           'M99.7,53.8l-10,13.3L85,73.5,78,64,70.4,53.7h9' +\n           'A28.5,28.5,0,1,0,68.3,77.6l10.6,6.9A40.7,40.7,0,1,1,91.6,53.8h8.2Z',\n\n            garbage: 'M55.1,31.1c9.4,0,18.7.1,28.1-.1,3.2-.1,4.2,1,3.7,4.1' +\n            'q-4.1,28.6-8,57.3c-0.3,2.3-1.3,3.4-3.5,3.4h-41' +\n            'c-2.2,0-2.9-1.2-3.2-3.2Q27,63.5,22.7,34.4c-0.4-2.8.6-3.4,3.1-3.4' +\n            'H55.1Z' +\n            'M44.3,81.9c0.4-1.1-2.5-27.4-3.8-40.5a3.2,3.2,0,0,0-3.7-3.2' +\n            'c-2.5.1-2.5,1.9-2.4,3.7,0.5,4.9,1,9.8,1.5,14.7,0.8,8.1,1.6,16.2,' +\n            '2.4,24.2,0.2,2.2,1.1,4.1,3.6,3.4A3.6,3.6,0,0,0,44.3,81.9Z' +\n            'm21.2,0a2.8,2.8,0,0,0,2.2,2.3' +\n            'c2.3,0.8,3.7-.7,4-3.1,1.3-12.9,2.6-25.7,3.8-38.6,0.2-2,.3-4.1-2.6-4.4' +\n            's-3.3,1.7-3.5,3.7C68.1,54.8,65.5,81.1,65.5,81.9Z' +\n            'M57.9,61.3q0-9.8,0-19.6c0-2.2-.8-3.6-3.2-3.5s-2.6,1.7-2.6,3.6' +\n            'q0,19.4,0,38.8c0,1.9,0,3.8,2.8,3.9s3-1.8,3-3.9Q57.9,70.9,57.9,61.3Z' +\n            'M19,24.7c0.3-2,.5-5.7,1.5-8a5.1,5.1,0,0,1,3.6-2.3' +\n            'c5.5-.5,17.3-0.8,17.3-0.8l4.3-3.3H62.9l5.6,3.5S84.5,14.6,87,15' +\n            's2.5,0.7,3.2,1.9,0.9,7.4.9,7.4Z',\n\n            cog: 'M100.2,46.4L87.1,44.8l-2.1-5L93.1,29a2.3,2.3,0,0,0-.2-3' +\n            'l-8.7-8.8a2.4,2.4,0,0,0-3.1-.2l-11,7.9L66,23.1,63.1,9.5' +\n            'A2.1,2.1,0,0,0,60.8,8H49.3A2.1,2.1,0,0,0,47,9.5L44.2,22.7l-5,2.2' +\n            'L28.8,16.8a2.3,2.3,0,0,0-3.1.2l-9.2,9.2a2.4,2.4,0,0,0-.2,3.2' +\n            'l8.1,10.4-1.7,4.1L9.8,46.4A2.3,2.3,0,0,0,8,48.7V61.9' +\n            'a2.3,2.3,0,0,0,2,2.4L22.6,66l1.7,5.2-7.7,10a2.4,2.4,0,0,0,.2,3.2' +\n            'l9.1,9a2.4,2.4,0,0,0,3.3.1l9-8.2,4.8,2.2,2.6,12.7' +\n            'a2.3,2.3,0,0,0,2.4,1.9l13.9-.2a2.5,2.5,0,0,0,2.3-2.4' +\n            'l0.7-11.4,5.5-2.3,9.8,8.1a2.4,2.4,0,0,0,3.2-.1L93,83.9' +\n            'a2.4,2.4,0,0,0,.1-3.3L84.7,71,87,66l13.2-2.5a2.3,2.3,0,0,0,1.9-2.3' +\n            'l0.2-12.5A2.4,2.4,0,0,0,100.2,46.4ZM54.4,73' +\n            'A18.2,18.2,0,1,1,72.6,54.8,18.2,18.2,0,0,1,54.4,73Z',\n\n            delta: 'M55,19.2L13.7,90.8h82.7L55,19.2z ' +\n            'M55,31.2l30.9,53.5H24.1L55,31.2z',\n\n            nonzero: 'M76.7,25.1l7.8-13.5l-7.6-0.3l-5.7,9.9' +\n            'c-4.8-2.9-10.4-4.5-16.2-4.5c-19.1,0-34.7,17.2-34.7,38.4' +\n            'c0,12.5,5.4,23.6,13.7,30.6l-7.6,13.2l7.6,0.1l5.5-9.6' +\n            'c4.7,2.6,9.9,4,15.5,4c19.1,0,34.7-17.2,34.7-38.4' +\n            'C89.7,42.9,84.6,32.1,76.7,25.1z M27.9,55C27.9,38.4,40,25,55,25' +\n            'c4.4,0,8.5,1.2,12.2,3.2l-29,50.3C31.9,73,27.9,64.5,27.9,55z' +\n            'M55,85c-4.1,0-7.9-1-11.4-2.8l29-50.1c5.8,5.5,9.5,13.7,9.5,22.8' +\n            'C82.1,71.6,70,85,55,85z',\n\n            download: 'M90.3,94.5H19.7V79.2H90.3V94.5Z' +\n            'm-49.1-79V44H26.2L55,72.3,83.8,44H68.9V15.5H41.1Z',\n\n            upload: 'M90.3,79.4H19.7V94.6H90.3V79.4Z' +\n            'M41.1,71.8V43.5H26.2L55,15.4,83.8,43.5H68.9V71.8H41.1Z',\n\n\n            flowTable: tableFrame +\n            'M86,63.2c0,3.3-2.7,6-6,6c-2.8,0-5.1-1.9-5.8-' +\n            '4.5H63.3v5.1c0,0.9-0.7,1.5-1.5,1.5h-5.2v10.6c2.6,0.7,4.5,3,4.5,' +\n            '5.8c0,3.3-2.7,6-6,6c-3.3,0-6-2.7-6-6c0-2.8,1.9-5.1,4.4-5.8V71.3' +\n            'H48c-0.9,0-1.5-0.7-1.5-1.5v-5.1H36c-0.7,2.6-3,4.4-5.8,4.4c-3.3,' +\n            '0-6-2.7-6-6s2.7-6,6-6c2.8,0,5.2,1.9,5.8,4.5h10.5V56c0-0.9,0.7-' +\n            '1.5,1.5-1.5h5.5V43.8c-2.6-0.7-4.5-3-4.5-5.8c0-3.3,2.7-6,6-6s6,' +\n            '2.7,6,6c0,2.8-1.9,5.1-4.5,5.8v10.6h5.2c0.9,0,1.5,0.7,1.5,1.5v' +\n            '5.6h10.8c0.7-2.6,3-4.5,5.8-4.5C83.3,57.1,86,59.8,86,63.2z ' +\n            'M55.1,42.3c2.3,0,4.3-1.9,4.3-4.3c0-2.3-1.9-4.3-4.3-4.3' +\n            's-4.3,1.9-4.3,4.3C50.8,40.4,52.7,42.3,55.1,42.3z ' +\n            'M34.4,63.1c0-2.3-1.9-4.3-4.3-4.3s-4.3,1.9-4.3,4.3' +\n            's1.9,4.3,4.3,4.3S34.4,65.5,34.4,63.1z ' +\n            'M55.1,83.5c-2.3,0-4.3,1.9-4.3,4.3s1.9,4.3,4.3,4.3' +\n            's4.3-1.9,4.3-4.3S57.5,83.5,55.1,83.5z' +\n            'M84.2,63.2c0-2.3-1.9-4.3-4.3-4.3s-4.3,' +\n            '1.9-4.3,4.3s1.9,4.3,4.3,4.3S84.2,65.5,84.2,63.2z',\n\n            portTable: tableFrame +\n            'M85.5,37.7c0-0.7-0.4-1.3-0.9-1.3H26.2c-0.5,0-' +\n            '0.9,0.6-0.9,1.3v34.6c0,0.7,0.4,1.3,0.9,1.3h11v9.6c0,1.1,0.5,2,' +\n            '1.2,2h9.1c0,0.2,0,0.3,0,0.5v3c0,1.1,0.5,2,1.2,2h13.5c0.6,0,1.2-' +\n            '0.9,1.2-2v-3c0-0.2,0-0.3,0-0.5h9.1c0.6,0,1.2-0.9,1.2-2v-9.6h11' +\n            'c0.5,0,0.9-0.6,0.9-1.3V37.7z M30.2,40h-1v8h1V40zM75.2,40h-2.1v8' +\n            'h2.1V40z M67.7,40h-2.1v8h2.1V40z M60.2,40h-2.1v8h2.1V40z M52.7,' +\n            '40h-2.1v8h2.1V40z M45.2,40h-2.1v8h2.1V40zM37.7,40h-2.1v8h2.1V40' +\n            'z M81.6,40h-1v8h1V40z',\n\n            groupTable: tableFrame +\n            'M45.7,52.7c0.2-5.6,2.6-10.7,6.2-14.4c-2.6-1.5-5.7-2.5-8.9-2.5' +\n            'c-9.8,0-17.7,7.9-17.7,17.7c0,6.3,3.3,11.9,8.3,15' +\n            'C34.8,61.5,39.4,55.6,45.7,52.7z ' +\n            'M51.9,68.8c-3.1-3.1-5.2-7.2-6-11.7c-4.7,2.8-7.9,7.6-8.6,13.2' +\n            'c1.8,0.6,3.6,0.9,5.6,0.9C46.2,71.2,49.3,70.3,51.9,68.8z ' +\n            'M55.2,71.5c-3.5,2.4-7.7,3.7-12.2,3.7c-1.9,0-3.8-0.3-5.6-0.7' +\n            'C38.5,83.2,45.9,90,54.9,90c9,0,16.4-6.7,17.5-15.4' +\n            'c-1.6,0.4-3.4,0.6-5.1,0.6C62.8,75.2,58.6,73.8,55.2,71.5z ' +\n            'M54.9,50.6c1.9,0,3.8,0.3,5.6,0.7c-0.5-4.1-2.5-7.9-5.4-10.6' +\n            'c-2.9,2.7-4.8,6.4-5.3,10.5C51.5,50.8,53.2,50.6,54.9,50.6z ' +\n            'M49.7,55.4c0.5,4.3,2.4,8.1,5.4,10.9c2.9-2.8,4.9-6.6,5.4-10.8' +\n            'c-1.8-0.6-3.6-0.9-5.6-0.9C53.1,54.6,51.4,54.9,49.7,55.4z ' +\n            'M89,53.5c0-12-9.7-21.7-21.7-21.7c-4.5,0-8.7,1.4-12.2,3.7' +\n            'c-3.5-2.4-7.7-3.7-12.2-3.7c-12,0-21.7,9.7-21.7,21.7' +\n            'c0,8.5,4.9,15.9,12,19.4C33.6,84.6,43.2,94,54.9,94' +\n            'c11.7,0,21.2-9.3,21.7-20.9C84,69.7,89,62.2,89,53.5z ' +\n            'M64.3,57.3c-0.8,4.4-2.9,8.4-5.9,11.5c2.6,1.5,5.7,2.5,8.9,2.5' +\n            'c1.8,0,3.6-0.3,5.2-0.8C72,64.9,68.8,60.1,64.3,57.3z ' +\n            'M67.3,35.8c-3.3,0-6.3,0.9-8.9,2.5c3.7,3.8,6.1,8.9,6.2,14.6' +\n            'c6.1,3.1,10.6,8.9,11.7,15.8C81.5,65.6,85,60,85,53.5' +\n            'C85,43.8,77.1,35.8,67.3,35.8z',\n\n            meterTable: tableFrame +\n            'M96.3,79.2c0-19.1-22.1-34.6-41.3-34.6S13.7,60.1,13.7,79.2' +\n            'H39.4c0-7.2,8.4-13.1,15.7-13.1S70.6,72,70.6,79.2H96.3z' +\n            'M48,65.6L36.8,53c0-.5-1.5.5-1.4,0.7l5.3,16.6z',\n\n            pipeconfTable: tableFrame +\n            'M10,66h13v3h-13z' +\n            'M23,62.5L28,67.5L23,72.5z' +\n            'M30,55h12.5v25h-12.5z' +\n            'M45,66h13v3h-13z' +\n            'M58,62.5L63,67.5L58,72.5z' +\n            'M65,55h12.5v25h-12.5z' +\n            'M79,66h15v3h-15z' +\n            'M94,62.5L99,67.5L94,72.5z',\n\n\n            summary: 'M95.8,9.2H14.2c-2.8,0-5,2.2-5,5v81.5c0,2.8,2.2,5,5,' +\n            '5h81.5c2.8,0,5-2.2,5-5V14.2C100.8,11.5,98.5,9.2,95.8,9.2z ' +\n            'M16.7,22.2c0-1.1,0.9-2,2-2h20.1c1.1,0,2,0.9,2,2v20.1c0,1.1-0.9,' +\n            '2-2,2H18.7c-1.1,0-2-0.9-2-2V22.2z M93,87c0,1.1-0.9,2-2,2H18.9' +\n            'c-1.1,0-2-0.9-2-2v-7c0-1.1,0.9-2,2-2H91c1.1,0,2,0.9,2,2V87z ' +\n            'M93,65c0,1.1-0.9,2-2,2H18.9c-1.1,0-2-0.9-2-2v-7c0-1.1,0.9-2,' +\n            '2-2H91c1.1,0,2,0.9,2,2V65z',\n\n            details: 'M95.8,9.2H14.2c-2.8,0-5,2.2-5,5v81.5c0,2.8,2.2,5,5,' +\n            '5h81.5c2.8,0,5-2.2,5-5V14.2C100.8,11.5,98.5,9.2,95.8,9.2z M16.9,' +\n            '22.2c0-1.1,0.9-2,2-2H91c1.1,0,2,0.9,2,2v7c0,1.1-0.9,2-2,2H18.9c' +\n            '-1.1,0-2-0.9-2-2V22.2z M93,87.8c0,1.1-0.9,2-2,2H18.9c-1.1,' +\n            '0-2-0.9-2-2v-7c0-1.1,0.9-2,2-2H91c1.1,0,2,0.9,2,2V87.8z M93,68.2' +\n            'c0,1.1-0.9,2-2,2H18.9c-1.1,0-2-0.9-2-2v-7c0-1.1,0.9-2,2-2H91' +\n            'c1.1,0,2,0.9,2,2V68.2z M93,48.8c0,1.1-0.9,2-2,2H19c-1.1,0-2-' +\n            '0.9-2-2v-7c0-1.1,0.9-2,2-2H91c1.1,0,2,0.9,2,2V48.8z',\n\n            ports: 'M98,9.2H79.6c-1.1,0-2.1,0.9-2.1,2.1v17.6l-5.4,5.4c-1.7' +\n            '-1.1-3.8-1.8-6-1.8c-6,0-10.9,4.9-10.9,10.9c0,2.2,0.7,4.3,1.8,6' +\n            'l-7.5,7.5c-1.8-1.2-3.9-1.9-6.2-1.9c-6,0-10.9,4.9-10.9,10.9c0,' +\n            '2.3,0.7,4.4,1.9,6.2l-6.2,6.2H11.3c-1.1,0-2.1,0.9-2.1,2.1v18.4' +\n            'c0,1.1,0.9,2.1,2.1,2.1h18.4c1.1,0,2.1-0.9,2.1-2.1v-16l7-6.9' +\n            'c1.4,0.7,3,1.1,4.7,1.1c6,0,10.9-4.9,10.9-10.9c0-1.7-0.4-3.3-' +\n            '1.1-4.7l8-8c1.5,0.7,3.1,1.1,4.8,1.1c6,0,10.9-4.9,10.9-10.9c0' +\n            '-1.7-0.4-3.4-1.1-4.8l6.9-6.9H98c1.1,0,2.1-0.9,2.1-2.1V11.3' +\n            'C100.1,10.2,99.2,9.2,98,9.2z M43.4,72c-3.3,0-6-2.7-6-6s2.7-6,' +\n            '6-6s6,2.7,6,6S46.7,72,43.4,72z M66.1,49.5c-3.3,0-6-2.7-6-6' +\n            'c0-3.3,2.7-6,6-6s6,2.7,6,6C72.2,46.8,69.5,49.5,66.1,49.5z',\n\n            map: 'M95.8,9.2H14.2c-2.8,0-5,2.2-5,5v66c0.3-1.4,0.7-2.8,' +\n            '1.1-4.1l1.6,0.5c-0.9,2.4-1.6,4.8-2.2,7.3l-0.5-0.1v12c0,2.8,2.2,' +\n            '5,5,5h81.5c2.8,0,5-2.2,5-5V14.2C100.8,11.5,98.5,9.2,95.8,9.2z ' +\n            'M16.5,67.5c-0.4,0.5-0.7,1-1,1.5c-0.3,0.5-0.6,1-0.9,1.6l-1.9-0.9' +\n            'c0.3-0.6,0.6-1.2,0.9-1.8c0.3-0.6,0.6-1.2,1-1.7c0.7-1.1,1.5-2.2,' +\n            '2.5-3.2l1.8,1.8C18,65.6,17.2,66.5,16.5,67.5z M29.7,64.1' +\n            'c-0.4-0.4-0.8-0.8-1.2-1.1c-0.1-0.1-0.2-0.1-0.2-0.1c0,0-0.1,' +\n            '0-0.1-0.1l-0.1,0l0,0l-0.1,0c-0.3-0.1-0.5-0.2-0.8-0.2c-0.5-0.1' +\n            '-1.1-0.2-1.6-0.3c-0.6,0-1.1,0-1.6,0l-0.4-2.8c0.7-0.1,1.5-0.2,2.2' +\n            '-0.1c0.7,0,1.4,0.1,2.2,0.3c0.4,0.1,0.7,0.2,1,0.3l0.1,0l0,0l0.1,' +\n            '0l0.1,0c0.1,0,0.1,0,0.3,0.1c0.3,0.1,0.5,0.2,0.7,0.4c0.7,0.5,' +\n            '1.2,0.9,1.7,1.4L29.7,64.1z M39.4,74.7c-1.8-1.8-3.6-3.8-5.3-5.7' +\n            'l2.6-2.4c0.9,0.9,1.8,1.8,2.7,2.7c0.9,0.9,1.8,1.7,2.7,2.6L39.4,' +\n            '74.7z M50.8,84.2c-1.1-0.7-2.2-1.5-3.3-2.3c-0.5-0.4-1.1-0.8-1.6' +\n            '-1.2c-0.5-0.4-1-0.8-1.5-1.2l2.7-3.4c0.5,0.4,1,0.8,1.5,1.1c0.5,' +\n            '0.3,1,0.7,1.5,1c1,0.7,2.1,1.3,3.1,1.9L50.8,84.2z M61.3,' +\n            '88.7c-0.7-0.1-1.4-0.3-2.1-0.5c-0.7-0.2-1.4-0.5-2-0.7l1.8' +\n            '-4.8c0.6,0.2,1.1,0.4,1.6,0.5c0.5,0.2,1.1,0.3,1.6,0.4c1,0.2,2.1,' +\n            '0.2,3,0.1l0.7,5.1C64.3,89.1,62.7,88.9,61.3,88.7z M75.1,80.4c' +\n            '-0.2,0.7-0.5,1.4-0.9,2c-0.2,0.3-0.3,0.7-0.5,1l-0.3,0.5l-0.3,' +\n            '0.4l-3.9-2.8l0.3-0.4l0.2-0.3c0.1-0.2,0.3-0.4,0.4-0.7c0.3-0.5,' +\n            '0.5-0.9,0.7-1.5c0.4-1,0.8-2.1,1.1-3.3l4.2,0.9C75.9,77.7,75.6,' +\n            '79,75.1,80.4z M73,69.2l0.2-1.9l0.1-1.9c0.1-1.2,0.1-2.5,0.1-' +\n            '3.8l2.5-0.2c0.2,1.3,0.4,2.6,0.5,3.9l0.1,2l0.1,2L73,69.2z ' +\n            'M73,51l0.5-0.1c0.4,1.3,0.8,2.6,1.1,3.9L73.2,55C73.1,53.7,73.1,' +\n            '52.3,73,51z M91.9,20.4c-0.7,1.4-3.6,3.6-4.2,3.9c-1.5,0.8-5,' +\n            '2.8-10.1,7.7c3,2.9,5.8,5.4,7.3,6.4c2.6,1.8,3.4,4.3,3.6,6.1c0.1,' +\n            '1.1-0.1,2.5-0.4,3c-0.5,0.9-1.6,2-3,1.4c-2-0.8-11.5-9.6-13-11c' +\n            '-3.5,3.9-7.4,8.9-11.7,15.1c0,0-3.1,3.4-5.2,0.9C52.9,51.5,61,' +\n            '39.3,61,39.3s2.2-3.1,5.6-7c-2.9-3-5.9-6.3-6.6-7.3c0,0-3.7-5-1.3' +\n            '-6.6c3.2-2.1,6.3,0.8,6.3,0.8s3.1,3.3,7,7.2c4.7-4.7,10.1-9.2,' +\n            '14.7-10c0,0,3.3-1,5.2,1.7C92.5,18.8,92.4,19.6,91.9,20.4z',\n\n            cycleLabels: 'M72.5,33.9c0,0.6-0.2,1-0.5,1H40c-0.3,0-0.5-0.4' +\n            '-0.5-1V20.7c0-0.6,0.2-1,0.5-1h32c0.3,0,0.5,0.4,0.5,1V33.9z ' +\n            'M41.2,61.8c0-0.6-0.2-1-0.5-1h-32c-0.3,0-0.5,0.4-0.5,1V75c0,0.6,' +\n            '0.2,1,0.5,1h32c0.3,0,0.5-0.4,0.5-1V61.8z M101.8,61.8c0-0.6-0.2' +\n            '-1-0.5-1h-32c-0.3,0-0.5,0.4-0.5,1V75c0,0.6,0.2,1,0.5,1h32c0.3,' +\n            '0,0.5-0.4,0.5-1V61.8z M17.2,52.9c0-0.1-0.3-7.1,4.6-13.6l-2.4-1.8' +\n            'c-5.4,7.3-5.2,15.2-5.1,15.5L17.2,52.9z M12.7,36.8l7.4,2.5l1.5,' +\n            '7.6L29.5,31L12.7,36.8z M94.2,42.3c-2.1-8.9-8.3-13.7-8.6-13.9l' +\n            '-1.8,2.4c0.1,0,5.6,4.3,7.5,12.2L94.2,42.3z M99,37.8l-6.6,4.1l' +\n            '-6.8-3.7l7.1,16.2L99,37.8z M69,90.2l-1.2-2.8c-0.1,0-6.6,2.8' +\n            '-14.3,0.6l-0.8,2.9c2.5,0.7,4.9,1,7,1C65,91.8,68.7,90.2,69,90.2z ' +\n            'M54.3,97.3L54,89.5l6.6-4.1l-17.6-1.7L54.3,97.3z',\n\n            oblique: 'M80.9,30.2h4.3l15-16.9H24.8l-15,16.9h19v48.5h-4l-15,' +\n            '16.9h75.3l15-16.9H80.9V30.2z M78.6,78.7H56.1V30.2h22.5V78.7z' +\n            'M79.7,17.4c2.4,0,4.3,1.9,4.3,4.3c0,2.4-1.9,4.3-4.3,4.3s-4.3' +\n            '-1.9-4.3-4.3C75.4,19.3,77.4,17.4,79.7,17.4z M55,17.4c2.4,0,' +\n            '4.3,1.9,4.3,4.3c0,2.4-1.9,4.3-4.3,4.3s-4.3-1.9-4.3-4.3C50.7,' +\n            '19.3,52.6,17.4,55,17.4z M26.1,21.7c0-2.4,1.9-4.3,4.3-4.3c2.4,' +\n            '0,4.3,1.9,4.3,4.3c0,2.4-1.9,4.3-4.3,4.3C28,26,26.1,24.1,26.1,' +\n            '21.7z M31.1,30.2h22.6v48.5H31.1V30.2z M30.3,91.4c-2.4,0-4.3' +\n            '-1.9-4.3-4.3c0-2.4,1.9-4.3,4.3-4.3c2.4,0,4.3,1.9,4.3,4.3C34.6,' +\n            '89.5,32.7,91.4,30.3,91.4z M54.9,91.4c-2.4,0-4.3-1.9-4.3-4.3c0' +\n            '-2.4,1.9-4.3,4.3-4.3c2.4,0,4.3,1.9,4.3,4.3C59.2,89.5,57.3,' +\n            '91.4,54.9,91.4z M84,87.1c0,2.4-1.9,4.3-4.3,4.3c-2.4,0-4.3-1.9' +\n            '-4.3-4.3c0-2.4,1.9-4.3,4.3-4.3C82.1,82.8,84,84.7,84,87.1z',\n\n            filters: 'M24.8,13.3L9.8,40.5h75.3l15.0-27.2H24.8z M72.8,32.1l-' +\n            '9.7-8.9l-19.3,8.9l-6.0-7.4L24.1,30.9l-1.2-2.7l15.7-7.1l6.0,7.4' +\n            'l19.0-8.8l9.7,8.8l11.5-5.6l1.3,2.7L72.8,32.1zM24.3,68.3L9.3,' +\n            '95.5h75.3l15.0-27.2H24.3z M84.3,85.9L70.7,79.8l-6.0,7.4l-19.3' +\n            '-8.9l-9.7,8.9l-13.3-6.5l1.3-2.7l11.5,5.6l9.7-8.8l19.0,8.8l6.0' +\n            '-7.4l15.7,7.1L84.3,85.9z M15.3,57h-6v-4h6V57zM88.1,57H76.0v-4h' +\n            '12.1V57z M69.9,57H57.8v-4h12.1V57z M51.7,57H39.6v-4H51.7V57z ' +\n            'M33.5,57H21.4v-4h12.1V57zM100.2,57h-6v-4h6V57z',\n\n            resetZoom: 'M86,79.8L61.7,54.3c1.8-2.9,2.8-6.3,2.9-10c0.3-11.2' +\n            '-8.6-20.5-19.8-20.8C33.7,23.2,24.3,32,24.1,43.2c-0.3,11.2,8.6,' +\n            '20.5,19.8,20.8c4,0.1,8.9-0.8,11.9-3.6l23.7,25c1.5,1.6,4,2.3,' +\n            '5.3,1l1.6-1.6C87.7,83.7,87.5,81.4,86,79.8z M31.4,43.4c0.2-7.1,' +\n            '6.1-12.8,13.2-12.6C51.8,31,57.5,37,57.3,44.1c-0.2,7.1-6.1,12.8' +\n            '-13.2,12.6C36.9,56.5,31.3,50.6,31.4,43.4zM22.6,104H6V86.4c0' +\n            '-1.7,1.4-3.1,3.1-3.1s3.1,1.4,3.1,3.1v11.4h10.4c1.7,0,3.1,1.4,' +\n            '3.1,3.1S24.3,104,22.6,104z M25.7,9.1c0,1.7-1.4,3.1-3.1,3.1' +\n            'H12.2v11.4c0,1.7-1.4,3.1-3.1,3.1S6,25.3,6,23.6V6h16.6C24.3,6,' +\n            '25.7,7.4,25.7,9.1z M84.3,100.9c0-1.7,1.4-3.1,3.1-3.1h10.4V86.4' +\n            'c0-1.7,1.4-3.1,3.1-3.1s3.1,1.4,3.1,3.1V104H87.4C85.7,104,84.3,' +\n            '102.6,84.3,100.9z M87.4,6H104v17.6c0,1.7-1.4,3.1-3.1,3.1s-3.1' +\n            '-1.4-3.1-3.1V12.2H87.4c-1.7,0-3.1-1.4-3.1-3.1S85.7,6,87.4,6z',\n\n            relatedIntents: 'M99.9,43.7v22.6c0,1.9-1.5,3.4-3.4,3.4H73.9c' +\n            '-1.9,0-3.4-1.5-3.4-3.4V43.7c0-1.9,1.5-3.4,3.4-3.4h22.6C98.4,' +\n            '40.3,99.9,41.8,99.9,43.7z M48.4,46.3l6.2,6.7h-4.6L38.5,38v9.7' +\n            'l4.7,5.3H10.1V57h33.2l-4.8,5.3v9.5L49.8,57h5.1v0l-6.5,7v11.5' +\n            'L64.1,55L48.4,34.4V46.3z',\n\n            nextIntent: 'M88.1,55.7L34.6,13.1c0,0-1.6-0.5-2.1-0.2c-1.9,1.2' +\n            '-6.5,13.8-3.1,17.2c7,6.9,30.6,24.5,32.4,25.9c-1.8,1.4-25.4,19' +\n            '-32.4,25.9c-3.4,3.4,1.2,16,3.1,17.2c0.6,0.4,2.1-0.2,2.1-0.2' +\n            's53.1-42.4,53.5-42.7C88.5,56,88.1,55.7,88.1,55.7z',\n\n            prevIntent: 'M22.5,55.6L76,12.9c0,0,1.6-0.5,2.2-0.2c1.9,1.2,' +\n            '6.5,13.8,3.1,17.2c-7,6.9-30.6,24.5-32.4,25.9c1.8,1.4,25.4,19,' +\n            '32.4,25.9c3.4,3.4-1.2,16-3.1,17.2c-0.6,0.4-2.2-0.2-2.2-0.2' +\n            'S22.9,56.3,22.5,56C22.2,55.8,22.5,55.6,22.5,55.6z',\n\n            intentTraffic: 'M14.7,71.5h-6v-33h6V71.5z M88.5,38.5H76.9v33' +\n            'h11.7V38.5z M70.1,38.5H58.4v33h11.7V38.5z M51.6,38.5H39.9v33' +\n            'h11.7V38.5z M33.1,38.5H21.5v33h11.7V38.5z M101.3,38.5h-6v33h6' +\n            'V38.5z',\n\n            allTraffic: 'M15.7,64.5h-7v-19h7V64.5z M78.6,45.5H62.9v19h15.7' +\n            'V45.5z M47.1,45.5H31.4v19h15.7V45.5z M101.3,45.5h-7v19h7V45.5z' +\n            'M14.7,14.1h-6v19h6V14.1z M88.5,14.1H76.9v19h11.7V14.1z M70.1,' +\n            '14.1H58.4v19h11.7V14.1z M51.6,14.1H39.9v19h11.7V14.1z M33.1,14.1' +\n            'H21.5v19h11.7V14.1z M101.3,14.1h-6v19h6V14.1z M14.7,76.9h-6v19' +\n            'h6V76.9z M88.5,76.9H76.9v19h11.7V76.9z M70.1,76.9H58.4v19h11.7' +\n            'V76.9z M51.6,76.9H39.9v19h11.7V76.9z M33.1,76.9H21.5v19h11.7' +\n            'V76.9z M101.3,76.9h-6v19h6V76.9z',\n\n            flows: 'M93.8,46.1c-4.3,0-8,3-9,7H67.9v-8.8c0-1.3-1.1-2.4-2.4' +\n            '-2.4h-8.1V25.3c4-1,7-4.7,7-9.1c0-5.2-4.2-9.4-9.4-9.4c-5.2,0' +\n            '-9.4,4.2-9.4,9.4c0,4.3,3,8,7,9v16.5H44c-1.3,0-2.4,1.1-2.4,2.4' +\n            'v8.8H25.3c-1-4.1-4.7-7.1-9.1-7.1c-5.2,0-9.4,4.2-9.4,9.4s4.2,' +\n            '9.4,9.4,9.4c4.3,0,8-2.9,9-6.9h16.4v7.9c0,1.3,1.1,2.4,2.4,2.4' +\n            'h8.6v16.6c-4,1.1-6.9,4.7-6.9,9c0,5.2,4.2,9.4,9.4,9.4c5.2,0,' +\n            '9.4-4.2,9.4-9.4c0-4.4-3-8-7.1-9.1V68.2h8.1c1.3,0,2.4-1.1,2.4' +\n            '-2.4v-7.9h16.8c1.1,4,4.7,7,9,7c5.2,0,9.4-4.2,9.4-9.4S99,46.1,' +\n            '93.8,46.1z M48.7,16.3c0-3.5,2.9-6.4,6.4-6.4c3.5,0,6.4,2.9,6.4,' +\n            '6.4s-2.9,6.4-6.4,6.4C51.5,22.6,48.7,19.8,48.7,16.3zM16.2,61.7c' +\n            '-3.5,0-6.4-2.9-6.4-6.4c0-3.5,2.9-6.4,6.4-6.4s6.4,2.9,6.4,6.4' +\n            'C22.6,58.9,19.7,61.7,16.2,61.7z M61.4,93.7c0,3.5-2.9,6.4-6.4,' +\n            '6.4c-3.5,0-6.4-2.9-6.4-6.4c0-3.5,2.9-6.4,6.4-6.4C58.6,87.4,' +\n            '61.4,90.2,61.4,93.7z M93.8,61.8c-3.5,0-6.4-2.9-6.4-6.4c0-3.5,' +\n            '2.9-6.4,6.4-6.4s6.4,2.9,6.4,6.4C100.1,58.9,97.3,61.8,93.8,61.8z',\n\n            eqMaster: 'M100.1,46.9l-10.8-25h0.2c0.5,0,0.8-0.5,0.8-1.1v-3.2' +\n            'c0-0.6-0.4-1.1-0.8-1.1H59.2v-5.1c0-0.5-0.8-1-1.7-1h-5.1c-0.9,0' +\n            '-1.7,0.4-1.7,1v5.1l-30.2,0c-0.5,0-0.8,0.5-0.8,1.1v3.2c0,0.6,' +\n            '0.4,1.1,0.8,1.1h0.1l-10.8,25C9,47.3,8.4,48,8.4,48.8v1.6l0,0h0' +\n            'v6.4c0,1.3,1.4,2.3,3.2,2.3h21.7c1.8,0,3.2-1,3.2-2.3v-8c0-0.9' +\n            '-0.7-1.6-1.7-2L22.9,21.9h27.9v59.6l-29,15.9c0,1.2,1.8,2.2,4.1,' +\n            '2.2h58.3c2.3,0,4.1-1,4.1-2.2l-29-15.9V21.9h27.8L75.2,46.8c-1,' +\n            '0.4-1.7,1.1-1.7,2v8c0,1.3,1.4,2.3,3.2,2.3h21.7c1.8,0,3.2-1,3.2' +\n            '-2.3v-8C101.6,48,101,47.3,100.1,46.9z M22,23.7l10.8,22.8H12.1' +\n            'L22,23.7z M97.9,46.5H77.2L88,23.7L97.9,46.5z',\n\n            xClose: 'M20,8l35,35,35-35,12,12-35,35,35,35-12,12-35-35-35,35' +\n            '-12-12,35-35-35-35,12-12Z',\n        },\n\n        badgeDataSet = {\n            _viewbox: '0 0 10 10',\n\n            checkMark: 'M8.6,3.4L4.4,7.7L1.4,4.7L2.5,3.6L4.4,5.5L7.5,2.3L8.6,3.4Z',\n\n            xMark: 'M7.8,6.7L6.7,7.8,5,6.1,3.3,7.8,2.2,6.7,3.9,5,2.2,3.3,3.3,' +\n            '2.2,5,3.9,6.7,2.2,7.8,3.3,6.1,5Z',\n\n            triangleUp: 'M0.5,6.2c0,0,3.8-3.8,4.2-4.2C5,1.7,5.3,2,5.3,2l4.3,' +\n            '4.3c0,0,0.4,0.4-0.1,0.4c-1.7,0-8.2,0-8.8,0C0,6.6,0.5,6.2,0.5,6.2z',\n\n            triangleDown: 'M9.5,4.2c0,0-3.8,3.8-4.2,4.2c-0.3,0.3-0.5,0-0.5,' +\n            '0L0.5,4.2c0,0-0.4-0.4,0.1-0.4c1.7,0,8.2,0,8.8,0C10,3.8,9.5,4.2,' +\n            '9.5,4.2z',\n\n            plus: 'M4,2h2v2h2v2h-2v2h-2v-2h-2v-2h2z',\n\n            minus: 'M2,4h6v2h-6z',\n\n            play: 'M3,1.5l3.5,3.5l-3.5,3.5z',\n\n            stop: 'M2.5,2.5h5v5h-5z',\n        },\n\n        spriteData = {\n            _cloud: '0 0 110 110',\n            cloud: 'M37.6,79.5c-6.9,8.7-20.4,8.6-22.2-2.7' +\n            'M16.3,41.2c-0.8-13.9,19.4-19.2,23.5-7.8' +\n            'M38.9,30.9c5.1-9.4,15.1-8.5,16.9-1.3' +\n            'M54.4,32.9c4-12.9,14.8-9.6,18.6-3.8' +\n            'M95.8,58.5c10-4.1,11.7-17.8-0.9-19.8' +\n            'M18.1,76.4C5.6,80.3,3.8,66,13.8,61.5' +\n            'M16.2,62.4C2.1,58.4,3.5,36,16.8,36.6' +\n            'M93.6,74.7c10.2-2,10.7-14,5.8-18.3' +\n            'M71.1,79.3c11.2,7.6,24.6,6.4,22.1-11.7' +\n            'M36.4,76.8c3.4,13.3,35.4,11.6,36.1-1.4' +\n            'M70.4,31c11.8-10.4,26.2-5.2,24.7,10.1',\n        },\n\n\n\n        m_octagon = 'M33.5,91.9a1.8,1.8,0,0,1-1.3-.5L8.7,68a1.8,1.8,0,0,' +\n            '1-.5-1.3V33.5a1.8,1.8,0,0,1,.5-1.3L32,8.7a1.8,1.8,0,0,1,1.3-.5' +\n            'H66.5a1.8,1.8,0,0,1,1.3.5L91.3,32a1.8,1.8,0,0,1,.5,1.3V66.5' +\n            'a1.8,1.8,0,0,1-.5,1.3L68,91.3a1.8,1.8,0,0,1-1.3.5H33.5Z' +\n            'm-21.7-26L34.3,88.2H65.9L88.2,65.7V34.1L65.7,11.8H34.1' +\n            'L11.8,34.3V65.9Z',\n\n        m_switch_arrows = 'M60,42.1l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V33.8' +\n            'a1.8,1.8,0,0,1,3.7,0v3.3l13-7.1L61.9,23v3.3' +\n            'A1.8,1.8,0,0,1,60,28.2h-7v3.7h1.7a1.8,1.8,0,0,1,0,3.7H51.2' +\n            'a1.8,1.8,0,0,1-1.8-1.8V26.4a1.8,1.8,0,0,1,1.8-1.8h7V20' +\n            'a1.8,1.8,0,0,1,2.7-1.6l18.7,10a1.8,1.8,0,0,1,0,3.2L60.9,41.8Z' +\n            'M60,69.2l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V60.9a1.8,1.8,0,0,1,3.7,0' +\n            'v3.3l13-7.1-13-6.9v3.3A1.8,1.8,0,0,1,60,55.3h-7V59h1.7' +\n            'a1.8,1.8,0,0,1,0,3.7H51.2a1.8,1.8,0,0,1-1.8-1.8V53.5' +\n            'a1.8,1.8,0,0,1,1.8-1.8h7V47.1a1.8,1.8,0,0,1,2.7-1.6l18.7,10' +\n            'a1.8,1.8,0,0,1,0,3.2L60.9,69ZM40,54.8l-0.9-.2L20.4,44.2' +\n            'a1.8,1.8,0,0,1,0-3.2L39.1,31a1.8,1.8,0,0,1,2.7,1.6v4.5h7' +\n            'A1.8,1.8,0,0,1,50.6,39v7.4a1.8,1.8,0,0,1-1.8,1.8H45.2' +\n            'a1.8,1.8,0,0,1,0-3.7h1.7V40.9H40A1.8,1.8,0,0,1,38.1,39' +\n            'V35.7l-13,6.9,13,7.1V46.4a1.8,1.8,0,0,1,3.7,0v6.5' +\n            'a1.8,1.8,0,0,1-.9,1.6ZM40,81.9l-0.9-.2L20.4,71.4' +\n            'a1.8,1.8,0,0,1,0-3.2l18.7-10a1.8,1.8,0,0,1,2.7,1.6v4.5h7' +\n            'a1.8,1.8,0,0,1,1.8,1.8v7.4a1.8,1.8,0,0,1-1.8,1.8H45.2' +\n            'a1.8,1.8,0,0,1,0-3.7h1.7V68H40a1.8,1.8,0,0,1-1.8-1.8V62.9' +\n            'l-13,6.9,13,7.1V73.6a1.8,1.8,0,0,1,3.7,0V80a1.8,1.8,0,0,1-.9,1.6Z',\n\n        m_diamond = 'M50,87a16.1,16.1,0,0,1-11.5-4.7L17.7,61.5a16.3,16.3,0,0,' +\n            '1,0-22.9L38.5,17.7a16.3,16.3,0,0,1,22.9,0L82.3,38.5' +\n            'a16.3,16.3,0,0,1,0,22.9L61.5,82.3A16.1,16.1,0,0,1,50,87Z' +\n            'm0-70.3a12.4,12.4,0,0,0-8.9,3.7L20.3,41.1a12.6,12.6,0,0,0,0,' +\n            '17.7L41.1,79.7a12.6,12.6,0,0,0,17.7,0L79.7,58.9a12.6,12.6,0,0,' +\n            '0,0-17.7L58.9,20.3A12.4,12.4,0,0,0,50,16.7Z',\n\n        m_trafficArrows = 'M41,66.7l-0.9-.2-16.8-9a1.8,1.8,0,0,1,0-3.2' +\n            'L40.1,45a1.8,1.8,0,0,1,2.7,1.6v5.8a1.8,1.8,0,0,1-3.7,0V49.7' +\n            'L28,55.8l11.1,5.9V59.1A1.8,1.8,0,0,1,41,57.2H47v-3H45.7' +\n            'a1.8,1.8,0,0,1,0-3.7h3.2a1.8,1.8,0,0,1,1.8,1.8v6.7' +\n            'a1.8,1.8,0,0,1-1.8,1.8H42.8v3.9a1.8,1.8,0,0,1-.9,1.6ZM59,55.3' +\n            'l-1-.3a1.8,1.8,0,0,1-.9-1.6V49.5H51.1a1.8,1.8,0,0,1-1.8-1.8' +\n            'V41a1.8,1.8,0,0,1,1.8-1.8h3.2a1.8,1.8,0,0,1,0,3.7H53v3H59' +\n            'a1.8,1.8,0,0,1,1.8,1.8v2.7L72,44.4,60.9,38.3V41' +\n            'a1.8,1.8,0,0,1-3.7,0V35.2a1.8,1.8,0,0,1,2.7-1.6l16.8,9.3' +\n            'a1.8,1.8,0,0,1,0,3.2L59.9,55Z',\n\n        m_otn_base = 'M63.1,79.8a7.5,7.5,0,0,1-5.3-12.8,7.7,7.7,0,0,1,10.7,0' +\n            'A7.5,7.5,0,0,1,63.1,79.8Zm0-11.3A3.8,3.8,0,0,0,60.4,75h0' +\n            'a3.9,3.9,0,0,0,5.4,0A3.8,3.8,0,0,0,63.1,68.4Z' +\n            'M63.1,35.2A7.5,7.5,0,1,1,68.5,33h0A7.5,7.5,0,0,1,63.1,35.2Z' +\n            'm4-3.5h0Zm-4-7.8A3.8,3.8,0,1,0,65.8,25,3.8,3.8,0,0,0,63.1,23.9Z' +\n            'M73.3,57.3a7.5,7.5,0,1,1,7.5-7.5A7.5,7.5,0,0,1,73.3,57.3Z' +\n            'm0-11.3a3.8,3.8,0,1,0,3.8,3.8A3.8,3.8,0,0,0,73.3,46Z' +\n            'M61.9,48.7H51.5V41.9l5-5a1.9,1.9,0,0,0-2.6-2.6l-4.2,4.2L38,48.7' +\n            'H34.1A7.3,7.3,0,0,0,32,45a7.6,7.6,0,0,0-10.7,0,7.5,7.5,0,0,0,0,' +\n            '10.6,7.6,7.6,0,0,0,10.7,0,7.4,7.4,0,0,0,1.9-3.2h5.2' +\n            'l11.4,9.9,3.4,3.4a1.8,1.8,0,0,0,2.6,0,1.8,1.8,0,0,0,0-2.6l-5-5' +\n            'V52.4H61.9A1.9,1.9,0,0,0,61.9,48.7ZM29.4,53a3.8,3.8,0,0,1-6.5-2.7' +\n            'A3.9,3.9,0,0,1,24,47.6a3.9,3.9,0,0,1,5.4,0A3.8,3.8,0,0,1,29.4,53Z',\n\n        mojoDataSet = {\n            _viewbox: '0 0 100 100',\n\n            m_cloud: 'M62,48.8H61.5a1.8,1.8,0,0,1-1.3-2.3,11,11,0,0,' +\n            '0-21.1-6.1,1.8,1.8,0,1,1-3.5-1,14.7,14.7,0,0,1,28.2,8.1' +\n            'A1.8,1.8,0,0,1,62,48.8ZM70.6,71.2H28.3' +\n            'A14.7,14.7,0,1,1,38.4,45.2,1.8,1.8,0,1,1,36,48' +\n            'a11,11,0,1,0-7.5,19.4H71.8A11,11,0,0,0,71,45.5' +\n            'a10.9,10.9,0,0,0-3.2.5,1.8,1.8,0,1,1-1.1-3.5,14.7,14.7,0,0,1,19,14' +\n            'A14.8,14.8,0,0,1,72.2,71.1H70.6Z',\n\n            m_map: 'M50,17.6A32.4,32.4,0,1,0,82.4,50,32.4,32.4,0,0,0,50,17.6Z' +\n            'm0,61.1A28.7,28.7,0,1,1,78.7,50,28.7,28.7,0,0,1,50,78.7Z' +\n            'M75.9,48.8a1.8,1.8,0,0,1-1.8,1.8H65' +\n            'a38.3,38.3,0,0,1-8.4,22.9,1.8,1.8,0,0,1-1.4.7,1.8,1.8,0,0,' +\n            '1-1.2-.4,1.8,1.8,0,0,1-.3-2.6,34.6,34.6,0,0,0,7.5-20.5H39.2' +\n            'a34.5,34.5,0,0,0,7.6,20.7,1.8,1.8,0,0,1-1.4,3,1.8,1.8,0,0,' +\n            '1-1.4-.7,38.2,38.2,0,0,1-8.5-23H26.2a1.8,1.8,0,1,1,0-3.7' +\n            'h9.4a38.1,38.1,0,0,1,8.4-21.6,1.8,1.8,0,0,1,2.9,2.3,34.4,34.4,0,0,' +\n            '0-7.6,19.3h22a34.3,34.3,0,0,0-8-19.7,1.8,1.8,0,1,1,2.8-2.4,38,38,' +\n            '0,0,1,8.8,22.1h9.1A1.8,1.8,0,0,1,75.9,48.8Z',\n\n            m_selectMap: 'M51.36,8.74A32.45,32.45,0,0,0,19,41.15' +\n            'a32.12,32.12,0,0,0,9.22,22.62L17,72.07a1.84,1.84,0,0,0,1,3.32' +\n            'L35.52,76h0l10,14.42a1.84,1.84,0,0,0,1.52.79,2.05,2.05,0,0,' +\n            '0,.49-0.06,1.84,1.84,0,0,0,1.35-1.66l2.68-39.19' +\n            'a1.73,1.73,0,0,0-.06-0.6,0.85,0.85,0,0,0-.09-0.24,1.7,1.7,0,0,' +\n            '0-.81-0.9l-0.18-.1a1.69,1.69,0,0,0-.94-0.16H49.33l-0.16,0' +\n            'a1,1,0,0,0-.31.12,1.52,1.52,0,0,0-.33.18L42.73,53' +\n            'a34.6,34.6,0,0,1-2.22-11.21H62.68a34.55,34.55,0,0,1-7.55,20.54' +\n            'A1.85,1.85,0,1,0,58,64.63a38.26,38.26,0,0,0,8.37-22.86h9.08' +\n            'a1.85,1.85,0,0,0,0-3.7H66.3a38.06,38.06,0,0,0-8.83-22.14,' +\n            '1.85,1.85,0,1,0-2.82,2.38,34.37,34.37,0,0,1,8,19.76h-22' +\n            'a34.38,34.38,0,0,1,7.58-19.3,1.85,1.85,0,1,0-2.87-2.33,' +\n            '38.11,38.11,0,0,0-8.41,21.63H27.53a1.85,1.85,0,0,0,0,3.7' +\n            'h9.28a38.43,38.43,0,0,0,2.85,13.48l-8.5,6.31a28.71,28.71,0,1,' +\n            '1,23.21,8.16,1.85,1.85,0,0,0,.19,3.68h0.19A32.41,32.41,0,0,' +\n            '0,51.36,8.74Zm-4,49.75L45.57,84l-6.85-9.87,2.64-4.92,0.56-1,2.8-5' +\n            'C45.61,61.58,46.49,60,47.31,58.49ZM44,56.63' +\n            'c-0.81,1.5-1.69,3.11-2.56,4.73l-3.3,6.11-0.19.35' +\n            'C37,69.4,36.19,70.93,35.4,72.34l-12-.44Z',\n\n            thatsNoMoon: 'M50,83.4A33.2,33.2,0,1,1,83.2,50.2,33.2,33.2,0,0,' +\n            '1,50,83.4ZM79.3,50.1A29.3,29.3,0,1,0,50.1,79.4,29.3,29.3,0,0,0,' +\n            '79.3,50.1ZM65.4,46.9h9.1A1.9,1.9,0,0,1,76.4,48a1.9,1.9,0,0,' +\n            '1-.3,2.1,2.1,2.1,0,0,1-1.8.7H65.4c-0.1.6-.1,1.2-0.2,1.8' +\n            'A38.5,38.5,0,0,1,57,73.9a2.1,2.1,0,0,1-2.2.9,2,2,0,0,' +\n            '1-1.4-1.6,2.3,2.3,0,0,1,.6-1.7,33.6,33.6,0,0,0,4.9-8.5,34.6,34.6,' +\n            '0,0,0,2.5-11c0-.3,0-0.7,0-1.1H38.9c0.2,1.3.3,2.6,0.5,3.9' +\n            'a34.2,34.2,0,0,0,7.3,17,2,2,0,1,1-3,2.4A37.1,37.1,0,0,1,39.1,67' +\n            'a40.8,40.8,0,0,1-4-15.5V50.8H25.8a2,2,0,0,1-2.2-1.9,1.9,1.9,0,0,' +\n            '1,2.1-2H35l0.3-1.8-0.8-.2a7.5,7.5,0,0,1-5.5-8.5,12.4,12.4,0,0,' +\n            '1,10-10.3,15.5,15.5,0,0,1,3.4,0,0.6,0.6,0,0,0,.7-0.3l0.8-1.1' +\n            'a1.9,1.9,0,0,1,2.5-.4,1.8,1.8,0,0,1,.7,2.4,13.6,13.6,0,0,' +\n            '1-.8,1.4,7.7,7.7,0,0,1,2.1,6.3A11,11,0,0,1,46,40.2a12.6,12.6,0,0,' +\n            '1-6.3,4.5,0.5,0.5,0,0,0-.5.6c0,0.5-.1,1-0.1,1.6H61.5l-0.7-4' +\n            'A33.6,33.6,0,0,0,53.5,27c-0.8-1-.9-1.7-0.4-2.5a1.7,1.7,0,0,' +\n            '1,2.4-.7,3.6,3.6,0,0,1,1.1.9,37,37,0,0,1,8,17.1' +\n            'c0.3,1.5.4,3,.7,4.4v0.7Zm-28.8-4A10.1,10.1,0,0,0,46,34.1' +\n            'a5.3,5.3,0,0,0-6-5.8A10.2,10.2,0,0,0,31.3,36' +\n            'C30.4,39.9,32.8,42.9,36.6,42.9ZM34.9,35.1a4,4,0,0,' +\n            '1,2.7-3.2,2.7,2.7,0,0,1,3.8,2.6,4.4,4.4,0,0,1-2.5,4' +\n            'C36.8,39.5,34.7,38,34.9,35.1Zm2,0.7c0,0.7.3,1,.9,0.9' +\n            'a2.3,2.3,0,0,0,1.5-2.3,0.7,0.7,0,0,0-1.1-.6' +\n            'A2.2,2.2,0,0,0,36.9,35.8Z',\n\n            m_ports: 'M83.2,20L80,16.8a4.8,4.8,0,0,0-6.8,0l-1.4,1.4' +\n            'a4.8,4.8,0,0,0-1.4,3.4l-4.5,5.9a3.8,3.8,0,0,0,.4,5l1.2,1.2' +\n            'a3.8,3.8,0,0,0,5,.4l5.4-3.9,0.5-.6h0a4.8,4.8,0,0,0,3.4-1.4' +\n            'l1.4-1.4A4.8,4.8,0,0,0,83.2,20ZM70.3,31.1H70.1l-1.2-1.2' +\n            'a0.2,0.2,0,0,1,0-.2l3.3-4.4,2.6,2.6Zm10.3-6.9-1.4,1.4' +\n            'a1.1,1.1,0,0,1-1.6,0l-3.2-3.2a1.1,1.1,0,0,1,0-1.6l1.4-1.4' +\n            'a1.1,1.1,0,0,1,1.6,0l3.2,3.2A1.1,1.1,0,0,1,80.6,24.2Z' +\n            'M33.7,67.5l-1.2-1.2a3.8,3.8,0,0,0-5-.4l-5.9,4.5' +\n            'a4.8,4.8,0,0,0-3.4,1.4l-1.4,1.4a4.8,4.8,0,0,0,0,6.8L20,83.2' +\n            'a4.8,4.8,0,0,0,6.8,0l1.4-1.4a4.8,4.8,0,0,0,1.4-3.5l4.5-5.9' +\n            'A3.8,3.8,0,0,0,33.7,67.5ZM25.6,79.3l-1.4,1.4' +\n            'a1.2,1.2,0,0,1-1.6,0l-3.2-3.2a1.1,1.1,0,0,1,0-1.6l1.4-1.4' +\n            'a1.1,1.1,0,0,1,.8-0.3,1.1,1.1,0,0,1,.8.3l3.2,3.2' +\n            'A1.1,1.1,0,0,1,25.6,79.3Zm5.6-9-3.3,4.4-2.5-2.5,4.3-3.3h0.2' +\n            'l1.2,1.2A0.2,0.2,0,0,1,31.1,70.3ZM65.4,61.9a6.2,6.2,0,0,1-8.8,0' +\n            'L37.2,42.5A2.5,2.5,0,1,0,33.7,46l7,7a6.2,6.2,0,0,1,.4,8.3h0' +\n            'l-0.2.2-0.2.2-3.6,3.6a1.8,1.8,0,0,1-2.6-2.6l3.6-3.6h0.1' +\n            'a2.5,2.5,0,0,0-.1-3.4l-7-7a6.2,6.2,0,0,1,8.8-8.8L59.3,59.3' +\n            'a2.5,2.5,0,0,0,3.5-3.5l-6.2-6.2a6.2,6.2,0,0,1,0-8.8l6.1-6.1' +\n            'a1.8,1.8,0,0,1,2.6,2.6l-6.1,6.1a2.5,2.5,0,0,0,0,3.5l6.2,6.2' +\n            'A6.2,6.2,0,0,1,65.4,61.9Z',\n\n            m_switch: m_switch_arrows,\n\n            m_roadm: m_switch_arrows + m_octagon,\n\n            m_router: 'M29.3,60.9l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V55.2H21.4' +\n            'a1.8,1.8,0,0,1-1.8-1.8V46.7a1.8,1.8,0,0,1,1.8-1.8h3.2' +\n            'a1.8,1.8,0,0,1,0,3.7H23.2v3h6.1a1.8,1.8,0,0,1,1.8,1.8V56' +\n            'l11.1-5.9L31.1,44v2.7a1.8,1.8,0,0,1-3.7,0V40.8' +\n            'a1.8,1.8,0,0,1,2.7-1.6L47,48.5a1.8,1.8,0,0,1,0,3.2l-16.8,9Z' +\n            'M70.6,60.9l-0.9-.2L52.9,51.4a1.8,1.8,0,0,1,0-3.2l16.8-9' +\n            'a1.8,1.8,0,0,1,2.7,1.6v3.9h6.1a1.8,1.8,0,0,1,1.8,1.8v6.7' +\n            'a1.8,1.8,0,0,1-1.8,1.8H75.4a1.8,1.8,0,0,1,0-3.7h1.3v-3H70.6' +\n            'a1.8,1.8,0,0,1-1.8-1.8V43.9L57.7,49.8l11.1,6.1V53.2' +\n            'a1.8,1.8,0,0,1,3.7,0v5.8a1.8,1.8,0,0,1-.9,1.6Z' +\n            'M49.8,82.5h0a1.8,1.8,0,0,1-1.6-1l-9-16.8A1.8,1.8,0,0,1,40.8,62' +\n            'h3.9V55.9a1.8,1.8,0,0,1,1.8-1.8h6.7a1.8,1.8,0,0,1,1.8,1.8v3.2' +\n            'a1.8,1.8,0,0,1-3.7,0V57.8h-3v6.1a1.8,1.8,0,0,1-1.8,1.8H43.9' +\n            'l5.9,11.1,6.1-11.1H53.2a1.8,1.8,0,0,1,0-3.7h5.8' +\n            'a1.8,1.8,0,0,1,1.6,2.7L51.4,81.5A1.8,1.8,0,0,1,49.8,82.5Z' +\n            'M53.3,45.8H46.7A1.8,1.8,0,0,1,44.8,44V40.8a1.8,1.8,0,0,1,3.7,0' +\n            'v1.3h3V36a1.8,1.8,0,0,1,1.8-1.8H56L50.1,23.1,44,34.2h2.7' +\n            'a1.8,1.8,0,0,1,0,3.7H40.8a1.8,1.8,0,0,1-1.6-2.7l9.2-16.8' +\n            'a1.8,1.8,0,0,1,1.6-1h0a1.8,1.8,0,0,1,1.6,1l9,16.8' +\n            'a1.8,1.8,0,0,1-1.6,2.7H55.2V44A1.8,1.8,0,0,1,53.3,45.8Z' +\n            'M50,91.2A41.3,41.3,0,1,1,91.2,50,41.3,41.3,0,0,1,50,91.2Z' +\n            'm0-78.9A37.6,37.6,0,1,0,87.6,50,37.6,37.6,0,0,0,50,12.4Z',\n\n            m_uiAttached: 'M73.6,61.3H26.4a4.9,4.9,0,0,1-4.9-4.9V27.7' +\n            'a4.9,4.9,0,0,1,4.9-4.9H73.6a4.9,4.9,0,0,1,4.9,4.9V56.5' +\n            'A4.9,4.9,0,0,1,73.6,61.3ZM26.4,26.5a1.2,1.2,0,0,0-1.2,1.2' +\n            'V56.5a1.2,1.2,0,0,0,1.2,1.2H73.6a1.2,1.2,0,0,0,1.2-1.2V27.7' +\n            'a1.2,1.2,0,0,0-1.2-1.2H26.4ZM63.5,75.3a1.8,1.8,0,0,1-1.8,1.8' +\n            'H38.4a1.8,1.8,0,0,1,0-3.7h9.8V65.7a1.8,1.8,0,0,1,3.7,0v7.8' +\n            'h9.8A1.8,1.8,0,0,1,63.5,75.3Z',\n\n            m_office: 'M31.7,28.6h-6a1.8,1.8,0,1,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,31.7,28.6ZM45,28.6h-6a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,1,' +\n            '1,45,28.6ZM31.7,38.3h-6a1.8,1.8,0,1,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,31.7,38.3ZM45,38.3h-6a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,1,' +\n            '1,45,38.3ZM31.7,48.1h-6a1.8,1.8,0,1,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,31.7,48.1ZM45,48.1h-6a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,1,' +\n            '1,45,48.1ZM63.7,51.1h-6a1.8,1.8,0,1,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,63.7,51.1ZM77,51.1H71a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,77,51.1ZM63.7,60.9h-6a1.8,1.8,0,1,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,63.7,60.9ZM77,60.9H71a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,0,' +\n            '1,77,60.9ZM45,57.9h-6a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,1,1,' +\n            '45,57.9ZM45,67.6h-6a1.8,1.8,0,0,1,0-3.7h6A1.8,1.8,0,1,1,45,67.6Z' +\n            'M82.3,37.9H52.6V18a1.8,1.8,0,0,0-1.8-1.8H19.2A1.8,1.8,0,0,' +\n            '0,17.3,18V50.1a1.8,1.8,0,0,0,3.7,0V19.8H48.9V80.2H27.2V75.4' +\n            'c4-1.2,6.5-3.3,7.3-6.3,2-7.2-6.8-16.2-7.8-17.2a1.9,1.9,0,0,' +\n            '0-2.6,0c-1,1-9.9,10-7.9,17.2,0.8,3,3.3,5.1,7.3,6.3v4.7H21V77.9' +\n            'a1.8,1.8,0,0,0-3.7,0V82a1.8,1.8,0,0,0,1.9,1.8H82.3A1.8,1.8,0,0,' +\n            '0,84.1,82V39.7A1.8,1.8,0,0,0,82.3,37.9ZM25.4,62.5a1.9,1.9,0,0,' +\n            '0-1.9,1.8v7.2c-2.1-.8-3.4-1.9-3.8-3.4-1-3.7,3-9.2,5.6-12.2,2.6,' +\n            '3,6.6,8.5,5.6,12.2-0.4,1.5-1.7,2.6-3.8,3.4V64.4A1.8,1.8,0,0,' +\n            '0,25.4,62.5ZM71.5,80.2H63.3V70h8.2V80.2Zm8.9,0H75.2V68.1' +\n            'a1.8,1.8,0,0,0-1.8-1.8H61.5a1.8,1.8,0,0,0-1.8,1.8V80.2H52.6' +\n            'V41.6H80.4V80.2Z',\n\n            m_home: 'M79.2,52.2a1.7,1.7,0,0,1-2.3,0l-5.8-5.8V77a1.7,1.7,0,0,' +\n            '1-1.7,1.7H30.6A1.7,1.7,0,0,1,28.9,77V52.1a1.7,1.7,0,1,1,3.3,0' +\n            'V75.3H67.8V43.8a1.7,1.7,0,0,1,.1-0.7L50.1,25.4l-26.9,27' +\n            'a1.7,1.7,0,0,1-1.2.5A1.7,1.7,0,0,1,20.8,50L48.9,21.8' +\n            'a1.7,1.7,0,0,1,2.4,0l28,28A1.7,1.7,0,0,1,79.2,52.2ZM57.1,61.6' +\n            'H42.9a1.7,1.7,0,0,1-1.7-1.7V45.6A1.7,1.7,0,0,1,42.9,44H57.1' +\n            'a1.7,1.7,0,0,1,1.7,1.7V59.9A1.7,1.7,0,0,1,57.1,61.6ZM44.5,58.2' +\n            'H55.5V47.3H44.5V58.2Z',\n\n            m_summary: 'M73.9,79.9H26.1A4.9,4.9,0,0,1,21.2,75V25' +\n            'a4.9,4.9,0,0,1,4.9-4.9H73.9A4.9,4.9,0,0,1,78.8,25V75' +\n            'A4.9,4.9,0,0,1,73.9,79.9Zm-47.8-56A1.2,1.2,0,0,0,24.9,25V75' +\n            'a1.2,1.2,0,0,0,1.2,1.2H73.9A1.2,1.2,0,0,0,75.1,75V25' +\n            'a1.2,1.2,0,0,0-1.2-1.2H26.1ZM42.4,46.7h-8a4.9,4.9,0,0,1-4.9-4.9' +\n            'v-8A4.9,4.9,0,0,1,34.4,29h8a4.9,4.9,0,0,1,4.9,4.9v8' +\n            'A4.9,4.9,0,0,1,42.4,46.7Zm-8-14.1a1.2,1.2,0,0,0-1.2,1.2v8' +\n            'A1.2,1.2,0,0,0,34.4,43h8a1.2,1.2,0,0,0,1.2-1.2v-8' +\n            'a1.2,1.2,0,0,0-1.2-1.2h-8ZM68.7,57.3H31.3a1.8,1.8,0,0,1,0-3.7' +\n            'H68.7A1.8,1.8,0,0,1,68.7,57.3ZM68.7,66.5H31.3a1.8,1.8,0,0,1,0-3.7' +\n            'H68.7A1.8,1.8,0,0,1,68.7,66.5Z',\n\n            m_details: 'M68.7,33.2H31.3a1.8,1.8,0,0,1,0-3.7H68.7' +\n            'A1.8,1.8,0,1,1,68.7,33.2ZM73.9,17.5H26.1a4.9,4.9,0,0,0-4.9,4.9' +\n            'V72.4a4.9,4.9,0,0,0,4.9,4.9h8.2l-4.1,6.6a1.9,1.9,0,0,0,.6,2.5' +\n            'l1,0.3a1.8,1.8,0,0,0,1.6-.9L46.1,64.9a15.1,15.1,0,0,' +\n            '0,4,.5,15.6,15.6,0,0,0,3.7-.4A15.9,15.9,0,0,0,57,63.9H68.7' +\n            'a1.8,1.8,0,0,0,0-3.7H61.9a16.6,16.6,0,0,0,1.6-2.2,15.5,15.5,0,0,' +\n            '0,2.2-9.4h2.9a1.8,1.8,0,0,0,0-3.7H65a15.7,15.7,0,0,0-29.8,0' +\n            'H31.3a1.8,1.8,0,1,0,0,3.7h3.2a15.7,15.7,0,0,0,.4,4.9,15.5,15.5,' +\n            '0,0,0,3.5,6.7H31.3a1.8,1.8,0,1,0,0,3.7H42.4l-6,9.8H26.1' +\n            'a1.2,1.2,0,0,1-1.2-1.2V22.4a1.2,1.2,0,0,1,1.2-1.2H73.9' +\n            'a1.2,1.2,0,0,1,1.2,1.2V72.4a1.2,1.2,0,0,1-1.2,1.2H44.5' +\n            'a1.8,1.8,0,0,0,0,3.7H73.9a4.9,4.9,0,0,0,4.9-4.9V22.4' +\n            'A4.9,4.9,0,0,0,73.9,17.5ZM38.5,52.6A12,12,0,0,1,50.2,37.8,12,12,' +\n            '0,0,1,61.8,47a10.7,10.7,0,0,1,.3,1.6,12,12,0,0,1-5.9,11.6,12,12,' +\n            '0,0,1-12,0L43.9,60A12,12,0,0,1,38.5,52.6Z',\n\n            m_oblique: 'M82.1,30.5a1.8,1.8,0,0,0-1.7-1.1H30.2' +\n            'a1.8,1.8,0,0,0-1.4.7L18.2,42.8a1.8,1.8,0,0,0,1.4,3H40.9V62.2' +\n            'a1.8,1.8,0,1,0,3.7,0V45.8H55.4V62.2a1.9,1.9,0,1,0,3.7,0V45.8' +\n            'H69.8a1.9,1.9,0,0,0,1.4-.7L81.8,32.5A1.8,1.8,0,0,0,82.1,30.5Z' +\n            'M69,42.2H23.5l7.5-9H76.5ZM69.8,70.5H19.6a1.8,1.8,0,0,1-1.4-3' +\n            'L28.7,54.8a1.8,1.8,0,0,1,1.4-.7h7a1.8,1.8,0,0,1,0,3.7H31l-7.5,9' +\n            'H69l7.5-9H62.4a1.8,1.8,0,0,1,0-3.7H80.4a1.8,1.8,0,0,1,1.4,3' +\n            'L71.3,69.9A1.8,1.8,0,0,1,69.8,70.5ZM52.3,57.8H47.6' +\n            'a1.8,1.8,0,0,1,0-3.7h4.8A1.8,1.8,0,0,1,52.3,57.8Z',\n\n            m_filters: 'M69.9,45.8H19.5a1.9,1.9,0,0,1-1.4-3L28.7,30' +\n            'a1.8,1.8,0,0,1,1.4-.7H80.5a1.8,1.8,0,0,1,1.4,3L71.3,45.1' +\n            'A1.8,1.8,0,0,1,69.9,45.8ZM23.5,42.1H69l7.5-9H31ZM69.9,58.2' +\n            'H19.5a1.8,1.8,0,0,1-1.4-3l6.1-7.3a1.8,1.8,0,0,1,2.8,2.4l-3.6,4.3' +\n            'H69l7.6-9.1a1.8,1.8,0,0,1,.5-3.6h3.4a1.8,1.8,0,0,1,1.4,3' +\n            'L71.3,57.5A1.8,1.8,0,0,1,69.9,58.2ZM69.9,70.7H19.5' +\n            'a1.9,1.9,0,0,1-1.4-3l5.6-6.7a1.8,1.8,0,0,1,2.8,2.4L23.5,67H69' +\n            'l7.5-9H76.3a1.8,1.8,0,0,1,0-3.7h4.1a1.9,1.9,0,0,1,1.4,3L71.3,70' +\n            'A1.8,1.8,0,0,1,69.9,70.7Z',\n\n            m_cycleLabels: 'M78.5,74.7a34.2,34.2,0,0,1-47.7,6.8l-0.3-.3' +\n            'L30.4,81V80.8a1.8,1.8,0,0,1,.8-2.5l0.7-.3-5.2-3.4v6.2l0.7-.3' +\n            'a1.8,1.8,0,1,1,1.7,3.3l-3.4,1.8-0.9.2-1-.3a1.9,1.9,0,0,1-.9-1.6' +\n            'V71.1a1.8,1.8,0,0,1,2.8-1.5l10.7,7a1.9,1.9,0,0,1,.8,1.6,1.9,1.9,' +\n            '0,0,1-1,1.5l-0.7.4a30.5,30.5,0,0,0,40.1-7.7A1.8,1.8,0,0,' +\n            '1,78.5,74.7ZM30.8,25.7L29.5,38.4a1.8,1.8,0,0,1-1.1,1.5l-0.8.2' +\n            'a1.9,1.9,0,0,1-1.1-.3l-1.7-1.2a30.1,30.1,0,0,0-2.7,6,1.9,1.9,0,0,' +\n            '1-1.8,1.3H19.9a1.8,1.8,0,0,1-1.2-2.3A33.9,33.9,0,0,1,22.8,35' +\n            'a1.8,1.8,0,0,1,1.6-.8,1.9,1.9,0,0,1,1.2.3L26.2,35l0.7-6.2-5.5,2.8' +\n            'L21.9,32a1.8,1.8,0,1,1-2.1,3l-3.1-2.2a1.8,1.8,0,0,1,.2-3.2' +\n            'l11.3-5.8A1.8,1.8,0,0,1,30.8,25.7ZM85.2,30.8L84.7,43.4' +\n            'a1.8,1.8,0,0,1-1,1.6l-0.8.2a1.8,1.8,0,0,1-1.1-.4L71.4,37.4' +\n            'a1.8,1.8,0,0,1,.3-3.2l1.9-.9a30.5,30.5,0,0,0-3.9-5.3,1.8,1.8,0,0,' +\n            '1,2.7-2.5,34.3,34.3,0,0,1,5.3,7.7,2,2,0,0,1-.9,2.6' +\n            'l-0.7.3,5.1,3.6,0.3-6.2-0.7.3a1.8,1.8,0,0,1-1.6-3.3L82.6,29' +\n            'a1.8,1.8,0,0,1,1.8.1A1.9,1.9,0,0,1,85.2,30.8ZM62.4,32.2H40.2' +\n            'a4.9,4.9,0,0,1-4.9-4.9V16.6a4.9,4.9,0,0,1,4.9-4.9H62.4' +\n            'a4.9,4.9,0,0,1,4.9,4.9V27.3A4.9,4.9,0,0,1,62.4,32.2ZM40.2,15.4' +\n            'A1.2,1.2,0,0,0,39,16.6V27.3a1.2,1.2,0,0,0,1.2,1.2H62.4' +\n            'a1.2,1.2,0,0,0,1.2-1.2V16.6a1.2,1.2,0,0,0-1.2-1.2H40.2Z' +\n            'M88.4,68.1H66.2a4.9,4.9,0,0,1-4.9-4.9V52.6a4.9,4.9,0,0,1,4.9-4.9' +\n            'H88.4a4.9,4.9,0,0,1,4.9,4.9V63.2A4.9,4.9,0,0,1,88.4,68.1Z' +\n            'M66.2,51.4A1.2,1.2,0,0,0,65,52.6V63.2a1.2,1.2,0,0,0,1.2,1.2H88.4' +\n            'a1.2,1.2,0,0,0,1.2-1.2V52.6a1.2,1.2,0,0,0-1.2-1.2H66.2Z' +\n            'M33.8,68.1H11.6a4.9,4.9,0,0,1-4.9-4.9V52.6a4.9,4.9,0,0,1,4.9-4.9' +\n            'H33.8a4.9,4.9,0,0,1,4.9,4.9V63.2A4.9,4.9,0,0,1,33.8,68.1Z' +\n            'M11.6,51.4a1.2,1.2,0,0,0-1.2,1.2V63.2a1.2,1.2,0,0,0,1.2,1.2' +\n            'H33.8A1.2,1.2,0,0,0,35,63.2V52.6a1.2,1.2,0,0,0-1.2-1.2H11.6Z',\n\n            m_prev: 'M59.8,72l-0.9-.2L21.8,51.3a1.8,1.8,0,0,1,0-3.2L58.9,28.2' +\n            'a1.8,1.8,0,0,1,2.7,1.6V40.7H77.3a1.8,1.8,0,0,1,1.8,1.8V57.3' +\n            'a1.8,1.8,0,0,1-1.8,1.8h-7a1.8,1.8,0,1,1,0-3.7h5.2v-11H59.8' +\n            'A1.8,1.8,0,0,1,58,42.6V33L26.6,49.7,58,67V57.3' +\n            'a1.8,1.8,0,0,1,3.7,0V70.1a1.8,1.8,0,0,1-.9,1.6Z',\n\n            m_next: 'M40.2,72l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V57.3' +\n            'a1.8,1.8,0,0,1,3.7,0V67L73.5,49.7,42,32.9v9.6' +\n            'a1.8,1.8,0,0,1-1.8,1.8H24.5v11h5.2a1.8,1.8,0,1,1,0,3.7h-7' +\n            'a1.8,1.8,0,0,1-1.8-1.8V42.6a1.8,1.8,0,0,1,1.8-1.8H38.3V29.9' +\n            'a1.8,1.8,0,0,1,2.7-1.6L78.2,48.1a1.8,1.8,0,0,1,0,3.2L41.1,71.8Z',\n\n            m_flows: 'M50.1,26.2a7.4,7.4,0,1,1,7.4-7.4A7.4,7.4,0,0,1,50.1,26.2Z' +\n            'm0-11.2a3.8,3.8,0,1,0,3.8,3.8A3.8,3.8,0,0,0,50.1,15Z' +\n            'M50.1,88.6a7.4,7.4,0,1,1,7.4-7.4A7.4,7.4,0,0,1,50.1,88.6Z' +\n            'm0-11.2a3.8,3.8,0,1,0,3.8,3.8A3.8,3.8,0,0,0,50.1,77.4Z' +\n            'M72,50.1a1.8,1.8,0,0,1-1.8,1.8H58.1V55a3,3,0,0,1-3,3H51.9V70.2' +\n            'a1.8,1.8,0,0,1-3.6,0V58.1h-3a3,3,0,0,1-3-3V51.9H29.8' +\n            'a1.8,1.8,0,1,1,0-3.6H42.3v-3a3,3,0,0,1,3-3h3a1.7,1.7,0,0,1,0-.3' +\n            'V29.8a1.8,1.8,0,0,1,3.6,0V41.9a1.7,1.7,0,0,1,0,.3h3.2' +\n            'a3,3,0,0,1,3,3v3H70.2A1.8,1.8,0,0,1,72,50.1ZM18.8,57.5' +\n            'a7.4,7.4,0,1,1,7.4-7.4A7.4,7.4,0,0,1,18.8,57.5Zm0-11.2' +\n            'a3.8,3.8,0,1,0,3.8,3.8A3.8,3.8,0,0,0,18.8,46.3ZM81.2,57.5' +\n            'a7.4,7.4,0,1,1,7.4-7.4A7.4,7.4,0,0,1,81.2,57.5Zm0-11.2' +\n            'A3.8,3.8,0,1,0,85,50.1,3.8,3.8,0,0,0,81.2,46.3Z',\n\n            m_allTraffic: m_diamond + m_trafficArrows,\n\n            m_xMark: 'M76.8,73.7a2.2,2.2,0,0,1-3.1,3.1L50,53.1,26.3,76.7' +\n            'a2.2,2.2,0,1,1-3.1-3.1L46.9,50,23.2,26.3a2.2,2.2,0,0,1,3.1-3.1' +\n            'L50,46.9,73.7,23.2a2.2,2.2,0,1,1,3.1,3.1L53.1,50Z',\n\n            m_resetZoom: 'M73.9,76.8H64.2a1.8,1.8,0,1,1,0-3.7h9.7' +\n            'a1.2,1.2,0,0,0,1.2-1.2V62.6a1.8,1.8,0,0,1,3.7,0v9.3' +\n            'A4.9,4.9,0,0,1,73.9,76.8ZM77,33.3a1.8,1.8,0,0,1-1.8-1.8V22' +\n            'a1.2,1.2,0,0,0-1.2-1.2H64.2a1.8,1.8,0,1,1,0-3.7h9.7' +\n            'A4.9,4.9,0,0,1,78.8,22v9.5A1.8,1.8,0,0,1,77,33.3ZM23,33.6' +\n            'a1.8,1.8,0,0,1-1.8-1.8V22a4.9,4.9,0,0,1,4.9-4.9h9.8' +\n            'a1.8,1.8,0,0,1,0,3.7H26.1A1.2,1.2,0,0,0,24.9,22v9.7' +\n            'A1.8,1.8,0,0,1,23,33.6ZM65.3,42.3A15.7,15.7,0,1,0,42.6,59.8' +\n            'L34.4,73.1H26.1a1.2,1.2,0,0,1-1.2-1.2V62.1a1.9,1.9,0,0,0-3.7,0' +\n            'v9.8a4.9,4.9,0,0,0,4.9,4.9h6.1l-2,3.3' +\n            'a1.8,1.8,0,0,0,.6,2.5,1.8,1.8,0,0,0,1,.3,1.8,1.8,0,0,0,1.6-.9' +\n            'L46,61.2a15.7,15.7,0,0,0,7.7.1A15.7,15.7,0,0,0,65.3,42.3Z' +\n            'm-5,9.9A12,12,0,1,1,50.1,34a12,12,0,0,1,11.7,9.2' +\n            'A11.9,11.9,0,0,1,60.3,52.3Z',\n\n            m_eqMaster: 'M63,79.9H37.4a1.8,1.8,0,0,1-1.2-3.2L48.8,65.1' +\n            'a1.8,1.8,0,0,1,2.5,0L64.2,76.7A1.8,1.8,0,0,1,63,79.9Z' +\n            'M42.1,76.2H58.2l-8.1-7.3ZM19.7,65.8a1.8,1.8,0,0,1-.3-3.7' +\n            'l61-11.3a1.8,1.8,0,1,1,.7,3.6L20,65.8H19.7ZM34.2,53.5' +\n            'A16.7,16.7,0,1,1,50.9,36.8,16.7,16.7,0,0,1,34.2,53.5Zm0-29.7' +\n            'a13,13,0,1,0,13,13A13,13,0,0,0,34.2,23.8ZM70.7,45.7' +\n            'a8.6,8.6,0,1,1,8.6-8.6A8.6,8.6,0,0,1,70.7,45.7Zm0-13.6' +\n            'a4.9,4.9,0,1,0,4.9,4.9A4.9,4.9,0,0,0,70.7,32.2Z',\n\n            m_unknown: 'M63.2,20.6H36.8A16.2,16.2,0,0,0,20.6,36.8V63.2' +\n            'A16.2,16.2,0,0,0,36.8,79.4H63.2A16.2,16.2,0,0,0,79.4,63.2V36.8' +\n            'A16.2,16.2,0,0,0,63.2,20.6ZM75.7,63.2A12.5,12.5,0,0,1,63.2,75.7' +\n            'H36.8A12.5,12.5,0,0,1,24.3,63.2V36.8A12.5,12.5,0,0,1,36.8,24.3' +\n            'H63.2A12.5,12.5,0,0,1,75.7,36.8V63.2ZM67.3,64.7' +\n            'a1.8,1.8,0,0,1-2.6,2.6L50,52.6,35.3,67.3a1.8,1.8,0,0,1-2.6-2.6' +\n            'L47.4,50,32.7,35.3a1.8,1.8,0,0,1,2.6-2.6L50,47.4,64.7,32.7' +\n            'a1.8,1.8,0,0,1,2.6,2.6L52.6,50Z',\n\n            m_controller: 'M73.9,20.1H26.1A4.9,4.9,0,0,0,21.2,25V75' +\n            'a4.9,4.9,0,0,0,4.9,4.9H73.9A4.9,4.9,0,0,0,78.8,75V25' +\n            'A4.9,4.9,0,0,0,73.9,20.1ZM75.1,75a1.2,1.2,0,0,1-1.2,1.2H26.1' +\n            'A1.2,1.2,0,0,1,24.9,75V25a1.2,1.2,0,0,1,1.2-1.2H73.9' +\n            'A1.2,1.2,0,0,1,75.1,25V75ZM70.5,63a1.8,1.8,0,0,1-1.9,1.8H38.3' +\n            'v2.4a1.8,1.8,0,0,1-3.7,0V64.9H31.3a1.8,1.8,0,1,1,0-3.7h3.3V58.3' +\n            'a1.8,1.8,0,0,1,3.7,0v2.9H68.7A1.9,1.9,0,0,1,70.5,63ZM70.5,36.6' +\n            'a1.9,1.9,0,0,1-1.9,1.9H44.5v2.3a1.8,1.8,0,0,1-3.7,0V38.5H31.3' +\n            'a1.8,1.8,0,1,1,0-3.7h9.5v-3a1.8,1.8,0,0,1,3.7,0v3H68.7' +\n            'A1.8,1.8,0,0,1,70.5,36.6ZM70.5,49.8a1.9,1.9,0,0,1-1.9,1.8H60.9' +\n            'v2.1a1.8,1.8,0,1,1-3.7,0V51.7H31.3a1.8,1.8,0,1,1,0-3.7H57.2' +\n            'V44.8a1.8,1.8,0,1,1,3.7,0V48h7.8A1.9,1.9,0,0,1,70.5,49.8Z',\n\n            m_virtual: 'M56.6,53.5l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V45.8' +\n            'a1.8,1.8,0,1,1,3.7,0v2.7l11.1-6.1L58.4,36.5v2.7' +\n            'A1.8,1.8,0,0,1,56.6,41H50.5v3h1.3a1.8,1.8,0,0,1,0,3.7H48.6' +\n            'a1.8,1.8,0,0,1-1.8-1.8V39.2a1.8,1.8,0,0,1,1.8-1.8h6.1V33.4' +\n            'a1.8,1.8,0,0,1,2.7-1.6l16.8,9a1.8,1.8,0,0,1,0,3.2L57.5,53.3Z' +\n            'M56.6,77.9l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V70.2a1.8,1.8,0,1,1,3.7,0' +\n            'v2.7l11.1-6.1L58.4,60.9v2.7a1.8,1.8,0,0,1-1.8,1.8H50.5v3h1.3' +\n            'a1.8,1.8,0,0,1,0,3.7H48.6a1.8,1.8,0,0,1-1.8-1.8V63.6' +\n            'a1.8,1.8,0,0,1,1.8-1.8h6.1V57.8a1.8,1.8,0,0,1,2.7-1.6l16.8,9' +\n            'a1.8,1.8,0,0,1,0,3.2L57.5,77.7ZM38.5,64.9l-0.9-.2L20.8,55.4' +\n            'a1.8,1.8,0,0,1,0-3.2l16.8-9a1.8,1.8,0,0,1,2.7,1.6v3.9h6.1' +\n            'a1.8,1.8,0,0,1,1.8,1.8v6.7a1.8,1.8,0,0,1-1.8,1.8H43.2' +\n            'a1.8,1.8,0,1,1,0-3.7h1.3v-3H38.5a1.8,1.8,0,0,1-1.8-1.8V47.9' +\n            'L25.6,53.8l11.1,6.1V57.2a1.8,1.8,0,0,1,3.7,0v5.8' +\n            'a1.8,1.8,0,0,1-.9,1.6ZM38.5,89.3l-0.9-.2L20.8,79.8' +\n            'a1.8,1.8,0,0,1,0-3.2l16.8-9a1.8,1.8,0,0,1,2.7,1.6v3.9h6.1' +\n            'A1.8,1.8,0,0,1,48.3,75v6.7a1.8,1.8,0,0,1-1.8,1.8H43.2' +\n            'a1.8,1.8,0,1,1,0-3.7h1.3v-3H38.5A1.8,1.8,0,0,1,36.6,75V72.3' +\n            'L25.6,78.2l11.1,6.1V81.6a1.8,1.8,0,1,1,3.7,0v5.8' +\n            'a1.8,1.8,0,0,1-.9,1.6ZM60.8,29.1H60.3A1.8,1.8,0,0,1,59,26.8' +\n            'a9.7,9.7,0,0,0-18.7-5.4,1.8,1.8,0,1,1-3.5-1,13.4,13.4,0,0,' +\n            '1,25.8,7.4A1.8,1.8,0,0,1,60.8,29.1ZM77.4,45.7a1.8,1.8,0,0,' +\n            '1-1.3-3.1,9.7,9.7,0,0,0-9.9-16A1.8,1.8,0,1,1,65,23.1,13.4,13.4,' +\n            '0,0,1,78.7,45.1,1.8,1.8,0,0,1,77.4,45.7ZM22.7,45.8a1.8,1.8,0,0,' +\n            '1-1.3-.6A13.4,13.4,0,0,1,39.6,25.6a1.8,1.8,0,1,1-2.4,2.8' +\n            'A9.7,9.7,0,0,0,24,42.6,1.8,1.8,0,0,1,22.7,45.8Z',\n\n\n            m_other: 'M78.9,64.9H21.1A4.9,4.9,0,0,1,16.2,60V24.3a4.9,4.9,0,0,' +\n            '1,4.9-4.9H78.9a4.9,4.9,0,0,1,4.9,4.9V60A4.9,4.9,0,0,1,78.9,64.9Z' +\n            'M21.1,23.1a1.2,1.2,0,0,0-1.2,1.2V60a1.2,1.2,0,0,0,1.2,1.2H78.9' +\n            'A1.2,1.2,0,0,0,80.1,60V24.3a1.2,1.2,0,0,0-1.2-1.2H21.1Z' +\n            'M65.8,78.8a1.9,1.9,0,0,1-1.8,1.8H36.1a1.9,1.9,0,1,1,0-3.7H48.2' +\n            'V70.4a1.8,1.8,0,1,1,3.7,0v6.5H63.9A1.9,1.9,0,0,1,65.8,78.8Z' +\n            'M47.2,49.3V48.1c-0.3-2.3.5-4.9,2.7-7.5s3-4,3-5.9-1.4-3.7-4.1-3.7' +\n            'a7.7,7.7,0,0,0-4.4,1.3l-1-2.7A11.3,11.3,0,0,1,49.5,28' +\n            'c5,0,7.2,3.1,7.2,6.3s-1.6,5-3.7,7.5-2.6,4.1-2.5,6.3v1.1H47.2Z' +\n            'm-1,6a2.5,2.5,0,0,1,2.6-2.7A2.7,2.7,0,1,1,46.3,55.3Z',\n\n            m_endstation: 'M75,49.5H25a1.8,1.8,0,0,1-1.8-1.8V27.1' +\n            'A1.8,1.8,0,0,1,25,25.3H75a1.8,1.8,0,0,1,1.8,1.8V47.7' +\n            'A1.8,1.8,0,0,1,75,49.5ZM26.9,45.8H73.1V28.9H26.9V45.8Z' +\n            'M35.5,43.2H30.7a1.8,1.8,0,1,1,0-3.7h4.8A1.8,1.8,0,1,1,35.5,43.2Z' +\n            'M72.1,72.9a1.8,1.8,0,0,1-1.8,1.8H29.7a1.8,1.8,0,1,1,0-3.7' +\n            'H48.2V53.5a1.8,1.8,0,1,1,3.7,0V71.1H70.3A1.9,1.9,0,0,1,72.1,72.9Z',\n\n            m_bgpSpeaker: 'M59.2,49.6l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V43.3' +\n            'a1.8,1.8,0,1,1,3.7,0v1.3l7-3.9L61,37v1.3a1.8,1.8,0,0,1-1.8,1.8' +\n            'H47.5a1.8,1.8,0,1,1,0-3.7h9.8V33.9A1.8,1.8,0,0,1,60,32.3' +\n            'l12.8,6.8a1.8,1.8,0,0,1,0,3.2l-12.8,7Z' +\n            'M40,58.8l-0.9-.2-12.8-7a1.8,1.8,0,0,1,0-3.2l12.8-6.8' +\n            'a1.8,1.8,0,0,1,2.7,1.6v2.5h9.8a1.8,1.8,0,0,1,0,3.7H40' +\n            'a1.8,1.8,0,0,1-1.8-1.8V46.2l-7,3.8,7,3.9V52.5' +\n            'a1.8,1.8,0,0,1,3.7,0v4.4a1.8,1.8,0,0,1-.9,1.6Z' +\n            'M83.6,45.8c0,13.8-15.1,25-33.6,25a43.8,43.8,0,0,1-6.1-.4' +\n            'c-2.5,2.7-7.2,6.1-15.6,8.7H27.8a1.8,1.8,0,0,1-1.2-3.2' +\n            's5.4-5,5.8-10.2a1.8,1.8,0,0,1,2-1.7A1.8,1.8,0,0,1,36,66' +\n            'a16.2,16.2,0,0,1-2.5,7.2,24.4,24.4,0,0,0,8.3-5.9L42,67l0.2-.2' +\n            'h0l0.6-.2h0.6a41.4,41.4,0,0,0,6.5.5c16.5,0,29.9-9.5,29.9-21.3' +\n            'S66.5,24.5,50,24.5,20.1,34.1,20.1,45.8c0,5.4,2.9,10.6,8.2,14.6' +\n            'a1.8,1.8,0,0,1-2.2,2.9' +\n            'c-6.2-4.7-9.7-10.9-9.7-17.5,0-13.8,15.1-25,33.6-25' +\n            'S83.6,32,83.6,45.8Z',\n\n            m_otn: m_otn_base,\n\n            m_roadm_otn: m_otn_base + m_octagon,\n\n            m_fiberSwitch: 'M47.5,37.2a1.8,1.8,0,0,1-1.8-1.8V25.6H43.4' +\n            'a1.8,1.8,0,0,1-1.6-2.7l6.4-12a1.8,1.8,0,0,1,1.6-1h0' +\n            'a1.8,1.8,0,0,1,1.6,1l6.6,12a1.8,1.8,0,0,1-1.6,2.7H53.2' +\n            'a1.8,1.8,0,0,1,0-3.7h0.1l-3.5-6.3L46.5,22h1a1.8,1.8,0,0,1,1.8,1.8' +\n            'V35.3A1.8,1.8,0,0,1,47.5,37.2Z' +\n            'M75.9,46.9H75.8a1.8,1.8,0,0,1-1.5-1l-1.8-3.4' +\n            'a1.8,1.8,0,1,1,3.2-1.7l0.4,0.8,4.2-6-7.1-.3,0.5,0.9' +\n            'a1.8,1.8,0,0,1-.8,2.5l-10.4,5a1.8,1.8,0,0,1-1.6-3.3l8.7-4.2-1-2' +\n            'a1.8,1.8,0,0,1,.1-1.8,1.8,1.8,0,0,1,1.6-.8l13.6,0.5' +\n            'A1.8,1.8,0,0,1,85.3,35L77.4,46.1A1.8,1.8,0,0,1,75.9,46.9Z' +\n            'M81.2,72.5H81.1l-13.6-.8A1.8,1.8,0,0,1,66,69l1.7-3.1' +\n            'a1.8,1.8,0,1,1,3.2,1.8l-0.3.5,7.3,0.4-3.5-6.2-0.5.9' +\n            'a1.8,1.8,0,0,1-2.5.6l-9.8-6.1a1.8,1.8,0,0,1,1.9-3.1' +\n            'l8.2,5.1,1.2-1.9a1.9,1.9,0,0,1,1.6-.9,1.8,1.8,0,0,1,1.6.9' +\n            'l6.8,11.8A1.8,1.8,0,0,1,81.2,72.5Z' +\n            'M48.8,89.7a1.8,1.8,0,0,1-1.6-1l-6.6-12a1.8,1.8,0,0,1,1.6-2.7h3.3' +\n            'a1.8,1.8,0,0,1,0,3.7H45.3L48.7,84l3.4-6.3h-1' +\n            'a1.8,1.8,0,0,1-1.8-1.8V64.4a1.8,1.8,0,0,1,1.8-1.8h0' +\n            'a1.8,1.8,0,0,1,1.8,1.8v9.7h2.3a1.8,1.8,0,0,1,1.6,2.7l-6.4,12' +\n            'a1.8,1.8,0,0,1-1.6,1h0Z' +\n            'M16.9,71.3a1.8,1.8,0,0,1-1.6-2.7l6.7-12' +\n            'a1.8,1.8,0,0,1,1.6-.9,1.9,1.9,0,0,1,1.6.9l1.7,2.8' +\n            'a1.8,1.8,0,1,1-3.1,1.9H23.7l-3.5,6.3,7.1-.5L26.8,66' +\n            'a1.8,1.8,0,0,1,.6-2.5l9.8-6.1a1.8,1.8,0,0,1,1.9,3.1l-8.2,5.1' +\n            'L32,67.6a1.8,1.8,0,0,1-1.4,2.8l-13.5.9H16.9Z' +\n            'M35.8,46.9L35,46.7l-8.7-4.3-1,2a1.8,1.8,0,0,1-3.1.3l-8-11' +\n            'a1.8,1.8,0,0,1,1.4-2.9l13.6-.7' +\n            'a1.8,1.8,0,0,1,1.6.8,1.8,1.8,0,0,1,.1,1.8l-1.6,3' +\n            'a1.8,1.8,0,1,1-3.3-1.7h0.1l-7.1.4,4.2,5.8,0.5-.9' +\n            'a1.8,1.8,0,0,1,2.5-.8l10.4,5.1A1.8,1.8,0,0,1,35.8,46.9Z' +\n            'M60.5,49.9a11.3,11.3,0,1,1-3.3-8A11.2,11.2,0,0,1,60.5,49.9Z',\n\n            m_microwave: 'M63.5,38.9a2.8,2.8,0,0,0-2.1,1H49.6V15.1' +\n            'a1.8,1.8,0,0,0-.5-1.3,1.8,1.8,0,0,0-1.3-.5h0' +\n            'a28.4,28.4,0,0,0-15.7,52V82.5H22.8a1.8,1.8,0,0,0,0,3.7H45' +\n            'a1.8,1.8,0,1,0,0-3.7H35.8V67.4a28.4,28.4,0,0,0,12,2.8h0' +\n            'a1.9,1.9,0,0,0,1.8-1.8V43.6H61.3a2.8,2.8,0,0,0,2.1,1' +\n            'A2.8,2.8,0,1,0,63.5,38.9ZM46,66.4a24.8,24.8,0,0,1,0-49.4V66.4Z' +\n            'M41.7,64H41.2a24.3,24.3,0,0,1-12.9-9.7L28,53.9' +\n            'a1.8,1.8,0,0,1,3.1-2l0.2,0.3a20.3,20.3,0,0,0,10.9,8.2' +\n            'A1.8,1.8,0,0,1,41.7,64Z' +\n            'M66.4,53.1a1.8,1.8,0,0,1-.5-3.6A8.1,8.1,0,0,0,66,34' +\n            'a1.8,1.8,0,0,1,1.1-3.5A11.8,11.8,0,0,1,67,53H66.4Z' +\n            'M66.5,58.2a1.8,1.8,0,0,1-.4-3.6,13.1,13.1,0,0,0,0-25.7,' +\n            '1.8,1.8,0,1,1,.7-3.6,16.8,16.8,0,0,1,0,32.9H66.5Z',\n\n            m_relatedIntents: 'M34.5,73.1A7.5,7.5,0,1,1,42,65.6,7.5,7.5,' +\n            '0,0,1,34.5,73.1Zm0-11.3a3.8,3.8,0,1,0,3.8,3.8' +\n            'A3.8,3.8,0,0,0,34.5,61.8Z' +\n            'M56.7,34.3a1.8,1.8,0,0,1-1.8,1.9H42.6v3.1a3.1,3.1,0,0,1-3,3' +\n            'H36.4V54.5a1.9,1.9,0,0,1-3.7,0V42.3h-3a3.1,3.1,0,0,1-3-3' +\n            'V29.5a3,3,0,0,1,3-3h9.8a3,3,0,0,1,3,3v3H54.8' +\n            'A1.8,1.8,0,0,1,56.7,34.3Z' +\n            'M66,41.8a7.5,7.5,0,1,1,7.5-7.5A7.5,7.5,0,0,1,66,41.8Z' +\n            'm0-11.3a3.8,3.8,0,1,0,3.8,3.8A3.8,3.8,0,0,0,66,30.5Z',\n\n            m_intentTraffic: 'M28.9,77.6H28.5a1.8,1.8,0,0,1-1.4-2.2L39,23.3' +\n            'a1.8,1.8,0,0,1,3.6.8l-12,52.1A1.8,1.8,0,0,1,28.9,77.6Z' +\n            'M71.1,77.6a1.8,1.8,0,0,1-1.8-1.4l-12-52.1a1.8,1.8,0,0,1,3.6-.8' +\n            'l12,52.1a1.8,1.8,0,0,1-1.4,2.2H71.1Z' +\n            'M49.9,26.2A1.8,1.8,0,0,1,48,24.4V23.7a1.8,1.8,0,0,1,3.7,0' +\n            'v0.7A1.8,1.8,0,0,1,49.9,26.2Z' +\n            'M49.9,43.6A1.8,1.8,0,0,1,48,41.8V40.2a1.8,1.8,0,0,1,3.7,0' +\n            'v1.6A1.8,1.8,0,0,1,49.9,43.6Zm0-8.7A1.8,1.8,0,0,1,48,33.1' +\n            'V31.5a1.8,1.8,0,0,1,3.7,0v1.6A1.8,1.8,0,0,1,49.9,34.9Z' +\n            'M49.9,69.8A1.8,1.8,0,0,1,48,67.9V66.3a1.8,1.8,0,0,1,3.7,0' +\n            'v1.6A1.8,1.8,0,0,1,49.9,69.8Zm0-8.7A1.8,1.8,0,0,1,48,59.2' +\n            'V57.6a1.8,1.8,0,0,1,3.7,0v1.6A1.8,1.8,0,0,1,49.9,61.1Zm0-8.7' +\n            'A1.8,1.8,0,0,1,48,50.5V48.9a1.8,1.8,0,0,1,3.7,0v1.6' +\n            'A1.8,1.8,0,0,1,49.9,52.3Z' +\n            'M49.9,77.6A1.8,1.8,0,0,1,48,75.7V75a1.8,1.8,0,0,1,3.7,0v0.7' +\n            'A1.8,1.8,0,0,1,49.9,77.6Z',\n\n            m_firewall: 'M75.3,88.8H65.6a4.9,4.9,0,0,1-4.9-4.9V79.1' +\n            'a4.9,4.9,0,0,1,4.9-4.9h9.7a4.9,4.9,0,0,1,4.9,4.9v4.8' +\n            'A4.9,4.9,0,0,1,75.3,88.8ZM65.6,77.9a1.2,1.2,0,0,0-1.2,1.2v4.8' +\n            'a1.2,1.2,0,0,0,1.2,1.2h9.7a1.2,1.2,0,0,0,1.2-1.2V79.1' +\n            'a1.2,1.2,0,0,0-1.2-1.2H65.6Z' +\n            'M53.9,88.8H24.7a4.9,4.9,0,0,1-4.9-4.9V79.1a4.9,4.9,0,0,1,4.9-4.9' +\n            'H53.9a4.9,4.9,0,0,1,4.9,4.9v4.8A4.9,4.9,0,0,1,53.9,88.8Z' +\n            'M24.7,77.9a1.2,1.2,0,0,0-1.2,1.2v4.8a1.2,1.2,0,0,0,1.2,1.2' +\n            'H53.9a1.2,1.2,0,0,0,1.2-1.2V79.1a1.2,1.2,0,0,0-1.2-1.2H24.7Z' +\n            'M34.4,72.1H24.7a4.9,4.9,0,0,1-4.9-4.9V62.4a4.9,4.9,0,0,1,4.9-4.9' +\n            'h9.7a4.9,4.9,0,0,1,4.9,4.9v4.8A4.9,4.9,0,0,1,34.4,72.1Z' +\n            'M24.7,61.2a1.2,1.2,0,0,0-1.2,1.2v4.8a1.2,1.2,0,0,0,1.2,1.2h9.7' +\n            'a1.2,1.2,0,0,0,1.2-1.2V62.4a1.2,1.2,0,0,0-1.2-1.2H24.7Z' +\n            'M75.3,72.1H46.1a4.9,4.9,0,0,1-4.9-4.9V62.4a4.9,4.9,0,0,1,4.9-4.9' +\n            'H75.3a4.9,4.9,0,0,1,4.9,4.9v4.8A4.9,4.9,0,0,1,75.3,72.1Z' +\n            'M46.1,61.2a1.2,1.2,0,0,0-1.2,1.2v4.8a1.2,1.2,0,0,0,1.2,1.2H75.3' +\n            'a1.2,1.2,0,0,0,1.2-1.2V62.4a1.2,1.2,0,0,0-1.2-1.2H46.1Z' +\n            'M67.7,40.7c-0.2-4.8-3.6-8.8-6.3-12s-3-3.6-3.3-4.8' +\n            'a13.1,13.1,0,0,1,1-9.7,2.2,2.2,0,0,0,.3-1.1,1.9,1.9,0,0,' +\n            '0-.8-1.5,1.8,1.8,0,0,0-1.7-.2c-0.3.1-8.1,3-10.4,14.7-1.4-2.3' +\n            '-3.4-4.6-5.9-5.4a1.8,1.8,0,0,0-2,.6,1.9,1.9,0,0,0-.2,2.1,6.8,6.8,' +\n            '0,0,1-.6,7.1c-1.4,1.8-5.9,8.3-4.1,14.9,1.2,4.1,4.6,7.3,10.2,9.4' +\n            'h1.6l0.2-.2h0.1l0.2-.3,0.2-.3h0V53.2a1.6,1.6,0,0,0,0-.4,1.7,1.7,' +\n            '0,0,0,0-.3h0V52.2h0V51.8L46,51.6H45.9c-0.3-.4-2.4-3-2.1-5.9' +\n            'a5,5,0,0,1,.7-2.1c1,2,2.7,4.4,5.5,4.6a5.1,5.1,0,0,0,3.9-1.3' +\n            'A8.2,8.2,0,0,0,56,43.5a7.3,7.3,0,0,1,.3,2.6,7.6,7.6,0,0,' +\n            '1-3.1,5.3,1.8,1.8,0,0,0,1.2,3.3h0c0.3,0,6.3-.1,10.1-4.3' +\n            'C66.9,47.9,67.9,44.6,67.7,40.7Zm-5.8,7.1a9,9,0,0,1-2.7,2,9.9,9.9,' +\n            '0,0,0,.9-3.5c0.3-5.1-3.4-9.2-3.5-9.4a1.8,1.8,0,0,0-3.2,1.2' +\n            'c0,1.4-.5,4.8-1.8,5.9a1.4,1.4,0,0,1-1.2.4c-1.7-.1-2.9-3.3-3.3-4.8' +\n            'a1.8,1.8,0,0,0-1.2-1.4,1.8,1.8,0,0,0-1.8.3,9.7,9.7,0,0,' +\n            '0-4,6.8,9.4,9.4,0,0,0,.3,3.1,8.4,8.4,0,0,1-3.1-4.4' +\n            'c-1.4-5,2.6-10.5,3.5-11.7A10,10,0,0,0,42.8,27,27.2,27.2,0,0,' +\n            '1,46,33.7a1.8,1.8,0,0,0,3.6-.6,33.2,33.2,0,0,1,.4-5.4,19.3,19.3,' +\n            '0,0,1,4-9.7,19.1,19.1,0,0,0,.5,6.7c0.5,2.1,2.2,4,4.1,6.3' +\n            's5.3,6.2,5.5,9.8A9.1,9.1,0,0,1,61.9,47.8Z',\n\n            m_balancer: 'M33.4,56.6H26.7a3.1,3.1,0,0,1-3-3V46.9a3.1,3.1,0,0,1,3-3' +\n            'h6.7a3.1,3.1,0,0,1,3,3v6.7A3.1,3.1,0,0,1,33.4,56.6Z' +\n            'M73.3,36.5H66.6a3.1,3.1,0,0,1-3-3V26.7a3.1,3.1,0,0,1,3-3' +\n            'h6.7a3.1,3.1,0,0,1,3,3v6.7A3.1,3.1,0,0,1,73.3,36.5Z' +\n            'M73.3,56.1H66.6a3.1,3.1,0,0,1-3-3V46.4a3.1,3.1,0,0,1,3-3' +\n            'h6.7a3.1,3.1,0,0,1,3,3v6.7A3.1,3.1,0,0,1,73.3,56.1Z' +\n            'M73.3,76.3H66.6a3.1,3.1,0,0,1-3-3V66.6a3.1,3.1,0,0,1,3-3' +\n            'h6.7a3.1,3.1,0,0,1,3,3v6.7A3.1,3.1,0,0,1,73.3,76.3Z' +\n            'M62.7,70.4a1.9,1.9,0,0,1-1.8,1.5H60.5a15.2,15.2,0,0,1-10.9-9.1' +\n            'c-3.9-8.6-4.7-9.8-10.8-10.4a1.8,1.8,0,0,1-1.6-1.7,0.3,0.3,0,0,1,0-.1' +\n            'h0V50.1h0a1.8,1.8,0,0,1,1.7-2c6.2-.5,7-1.7,10.9-10.4' +\n            'a15.2,15.2,0,0,1,10.7-9.1,1.8,1.8,0,1,1,.8,3.6,11.5,11.5,0,0,0-8.2,7' +\n            'c-2,4.4-3.4,7.3-5.3,9.2H60.8a1.8,1.8,0,1,1,0,3.7h-13' +\n            'c1.8,1.9,3.2,4.8,5.2,9.1a11.5,11.5,0,0,0,8.3,7' +\n            'A1.9,1.9,0,0,1,62.7,70.4Z',\n\n            m_ips: 'M79.4,26.8a0.9,0.9,0,0,0-.1-0.3V26.1l-0.3-.4-0.2-.2' +\n            'H78.6c-1.3-1-11-8-28.3-8H49.7c-18.7,0-28.1,7.8-28.5,8.1' +\n            'a2,2,0,0,0-.7,1.3c-1.1,22.8,6.7,36.8,13.4,44.4S48.3,82.4,49.1,82.7' +\n            'h1.6c0.3-.1,7.9-3.1,15.3-11.4S80.5,49.7,79.4,26.8ZM50,79' +\n            'c-3.9-1.7-27.3-13.4-25.8-51.1,2.3-1.6,10.7-6.8,25.5-6.8h0.5' +\n            'c14.4,0,23.2,5.2,25.5,6.8C77.2,65.6,53.9,77.3,50,79Z' +\n            'M41.7,41.9a1.8,1.8,0,0,1-1.8-1.9V37.3a9.8,9.8,0,0,1,9.8-9.8h0.6' +\n            'a9.8,9.8,0,0,1,9.8,9.8v2.6a1.8,1.8,0,1,1-3.7,0V37.3' +\n            'a6.1,6.1,0,0,0-6.1-6.1H49.6a6.1,6.1,0,0,0-6.1,6.1v2.8' +\n            'A1.8,1.8,0,0,1,41.7,41.9Z' +\n            'M58.6,63.1H41.3a3.7,3.7,0,0,1-3.6-3.7V47.3a3.7,3.7,0,0,1,3.6-3.7' +\n            'H58.6a3.8,3.8,0,0,1,3.6,3.7V59.4A3.7,3.7,0,0,1,58.6,63.1Z',\n\n            m_ids: 'M69.7,41.5c-2.9,3.6-9.1,5-18.6,4.2a18.4,18.4,0,0,0-8.9,1.4' +\n            'H41.5a1.8,1.8,0,0,1-.7-3.5A22.2,22.2,0,0,1,51.5,42' +\n            'c7.4,0.6,12.5-.2,14.8-2.3L63.2,22.6c-5,2.9-12.5,2.4-15.9,1.9' +\n            'a18.7,18.7,0,0,0-12.7,3.4H34.3l9.5,52.4a1.9,1.9,0,0,1-1.5,2.1' +\n            'H42a1.8,1.8,0,0,1-1.8-1.5L29.9,24.3a1.8,1.8,0,1,1,3.6-.6v0.4' +\n            'a22.3,22.3,0,0,1,14.1-3.2C55,21.8,60.9,20.7,63,18' +\n            'a1.8,1.8,0,0,1,1.9-.6,1.8,1.8,0,0,1,1.4,1.5L70.1,40' +\n            'A1.9,1.9,0,0,1,69.7,41.5Z',\n\n            m_olt: 'M83,47.6H64.5a1.8,1.8,0,0,0-1.9,1.9V74.3' +\n            'a1.8,1.8,0,0,0,1.9,1.8H83a1.8,1.8,0,0,0,1.8-1.8V49.5' +\n            'A1.8,1.8,0,0,0,83,47.6ZM81.1,72.5H77.7v-5a1.4,1.4,0,0,0-1.4-1.4' +\n            'H72.1a1.4,1.4,0,0,0-1.4,1.4v5H66.3V51.3H81.1V72.5Z' +\n            'M70.9,56.9H69.5a1.8,1.8,0,0,1,0-3.7h1.3A1.8,1.8,0,1,1,70.9,56.9Z' +\n            'M77.5,56.9H76.1a1.8,1.8,0,0,1,0-3.7h1.3A1.8,1.8,0,1,1,77.5,56.9Z' +\n            'M70.9,62.5H69.5a1.8,1.8,0,0,1,0-3.7h1.3A1.8,1.8,0,1,1,70.9,62.5Z' +\n            'M77.5,62.5H76.1a1.8,1.8,0,0,1,0-3.7h1.3A1.8,1.8,0,1,1,77.5,62.5Z' +\n            'M40.9,56.2H36.1a1.8,1.8,0,1,1,0-3.7h4.8A1.8,1.8,0,0,1,40.9,56.2Z' +\n            'M82.2,25.7V43.9a1.8,1.8,0,0,1-3.7,0V27.5H32.3V59.8H58.4' +\n            'a1.8,1.8,0,0,1,0,3.7h-28a1.9,1.9,0,0,1-1.8-1.9V45.5H17' +\n            'a1.8,1.8,0,0,1,0-3.7H28.6V25.7a1.8,1.8,0,0,1,1.8-1.8h50' +\n            'A1.8,1.8,0,0,1,82.2,25.7Z',\n\n            m_onu: 'M39.8,58.7H35a1.8,1.8,0,1,1,0-3.7h4.9' +\n            'A1.8,1.8,0,1,1,39.8,58.7Z' +\n            'M81.4,28.3V46.5a1.9,1.9,0,0,1-3.7,0V30.2H31.2V62.4H57.4' +\n            'a1.8,1.8,0,1,1,0,3.7H29.3a1.8,1.8,0,0,1-1.8-1.9V48.1H15.9' +\n            'a1.8,1.8,0,1,1,0-3.7H27.5V28.3a1.8,1.8,0,0,1,1.8-1.8H79.5' +\n            'A1.8,1.8,0,0,1,81.4,28.3Z' +\n            'M85.8,60.3L75.1,49.6a1.8,1.8,0,0,0-2.6,0L61.6,60.3' +\n            'a1.8,1.8,0,0,0,0,2.6,1.8,1.8,0,0,0,2.6,0l0.2-.2v8.8' +\n            'a1.8,1.8,0,0,0,1.8,1.8H81.2a1.8,1.8,0,0,0,1.8-1.8V62.7l0.2,0.2' +\n            'A1.8,1.8,0,0,0,85.8,60.3Zm-6.5,9.4H68.1V59.1l5.6-5.6L79.4,59V69.7Z',\n\n            m_swap: 'M62.2,54.7l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V47.1' +\n            'a1.8,1.8,0,1,1,3.7,0v2.6l10.8-6L64,38v2.6a1.8,1.8,0,0,1-1.8,1.8' +\n            'H47.1a1.8,1.8,0,0,1,0-3.7H60.3V34.9a1.8,1.8,0,0,1,2.7-1.6' +\n            'l16.5,8.8a1.8,1.8,0,0,1,0,3.2L63.1,54.5Z' +\n                'M37.4,66.6l-0.9-.2L20,57.2a1.8,1.8,0,0,1,0-3.2l16.5-8.8' +\n            'a1.8,1.8,0,0,1,2.7,1.6v3.8H52.5a1.8,1.8,0,0,1,0,3.7H37.4' +\n            'a1.8,1.8,0,0,1-1.8-1.8V49.9L24.8,55.7l10.8,6V59' +\n            'a1.8,1.8,0,1,1,3.7,0v5.7a1.8,1.8,0,0,1-.9,1.6Z',\n\n            m_shortestGeoPath: 'M49.7,17.5A32.3,32.3,0,1,0,81.9,49.8,32.3,32.3,0,' +\n            '0,0,49.7,17.5Zm0,60.9A28.6,28.6,0,1,1,78.2,49.8,28.6,28.6,0,0,1,' +\n            '49.7,78.4Z M60.9,49a1.5,1.5,0,0,1-.1-0.4,0.8,0.8,0,0,1,0-.3' +\n            'C60.9,48.5,60.9,48.8,60.9,49Z' +\n            'M75.4,48.6a1.8,1.8,0,0,1-1.8,1.8h-9' +\n            'a38.2,38.2,0,0,1-8.3,22.8,1.8,1.8,0,0,1-1.4.7,1.8,1.8,0,0,' +\n            '1-1.1-.4,1.8,1.8,0,0,1-.3-2.6,34.6,34.6,0,0,0,7.5-21.6V49' +\n            'c0-.3,0-0.5,0-0.7a0.1,0.1,0,0,1,0-.1,33.2,33.2,0,0,0-.7-6.1H60' +\n            'a5.1,5.1,0,0,1-3.1-9.1A33,33,0,0,0,52.9,27' +\n            'a1.8,1.8,0,1,1,2.8-2.4,36.2,36.2,0,0,1,4.7,7.2,5.1,5.1,0,0,' +\n            '1,3.1,8.7,38.3,38.3,0,0,1,.9,6.2h9.1A1.8,1.8,0,0,1,75.4,48.6Z' +\n            'M46.5,71a1.8,1.8,0,0,1-1.4,3,1.8,1.8,0,0,1-1.4-.7,36.3,36.3,' +\n            '0,0,1-4.3-6.7H39a5.1,5.1,0,0,1-2.9-9.3,40.3,40.3,0,0,1-.8-6.9H26' +\n            'a1.8,1.8,0,0,1,0-3.7h9.3a38,38,0,0,1,8.3-21.5,1.8,1.8,0,1,1,2.8,' +\n            '2.3,34.5,34.5,0,0,0-7.6,21.8,36,36,0,0,0,.7,7.2,5.1,5.1,0,0,' +\n            '1,4.5,5.1,5,5,0,0,1-1.4,3.5A33.4,33.4,0,0,0,46.5,71Z' +\n            'M44.9,56.9a1.8,1.8,0,0,1-1.1-.4,1.8,1.8,0,0,1-.3-2.6l0.6-.8' +\n            'A1.8,1.8,0,1,1,47,55.3l-0.6.8A1.8,1.8,0,0,1,44.9,56.9Zm3.9-5' +\n            'a1.8,1.8,0,0,1-1.1-.4,1.8,1.8,0,0,1-.3-2.6l0.6-.8' +\n            'a1.8,1.8,0,1,1,2.9,2.3l-0.6.8A1.8,1.8,0,0,1,48.8,51.9Zm3.9-5' +\n            'a1.8,1.8,0,0,1-1.1-.4,1.8,1.8,0,0,1-.3-2.6l0.6-.8' +\n            'a1.8,1.8,0,1,1,2.9,2.3l-0.6.8A1.8,1.8,0,0,1,52.7,46.9Z',\n\n            m_source: 'M71,63.8l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V57.1' +\n            'a1.8,1.8,0,0,1,3.7,0v1.7l8.2-4.5-8.2-4.4v1.7A1.8,1.8,0,0,1,71,53.4' +\n            'H58.2a1.8,1.8,0,0,1,0-3.7H69.2V46.8a1.8,1.8,0,0,1,2.7-1.6l14,7.5' +\n            'a1.8,1.8,0,0,1,0,3.2l-14,7.7Z' +\n            'M32.7,77.7a3.6,3.6,0,0,1-3.1-1.8L16.1,52.1l-0.9-1.6' +\n            'a19.3,19.3,0,0,1-2.1-8.7,19.6,19.6,0,0,1,6.1-14.2' +\n            'A19.5,19.5,0,0,1,52.1,40.5h0a19.5,19.5,0,0,1-2,9.9l-1,1.8' +\n            'L35.8,75.9A3.6,3.6,0,0,1,32.7,77.7Zm0-51.7' +\n            'A15.8,15.8,0,0,0,18.5,48.8l0.8,1.4L32.7,73.9,46,50.3l0.8-1.4' +\n            'a15.9,15.9,0,0,0,1.6-8.1h0A15.8,15.8,0,0,0,33.6,26h-1Z' +\n            'm0,21.1A8.2,8.2,0,1,1,40.8,39,8.2,8.2,0,0,1,32.7,47.1Z' +\n            'm0-12.6A4.5,4.5,0,1,0,37.1,39,4.5,4.5,0,0,0,32.7,34.5Z',\n\n            m_destination: 'M30.3,63.8l-0.9-.3a1.8,1.8,0,0,1-.9-1.6V57.1' +\n            'a1.8,1.8,0,0,1,3.7,0v1.7l8.2-4.5-8.2-4.4v1.7a1.8,1.8,0,0,1-1.8,1.8' +\n            'H17.5a1.8,1.8,0,1,1,0-3.7H28.4V46.8a1.8,1.8,0,0,1,2.7-1.6l14,7.5' +\n            'a1.8,1.8,0,0,1,0,3.2l-14,7.7Z' +\n            'M64.9,77.7a3.6,3.6,0,0,1-3.1-1.8L48.3,52.1l-0.9-1.6' +\n            'a19.3,19.3,0,0,1-2-8.6,19.6,19.6,0,0,1,6.1-14.2' +\n            'A19.5,19.5,0,0,1,84.3,40.5a19.5,19.5,0,0,1-1.9,9.8v0.2l-0.9,1.7' +\n            'L68,75.9A3.6,3.6,0,0,1,64.9,77.7ZM50.7,48.8l0.8,1.4' +\n            'L64.9,73.9,78.2,50.3,79,48.8h0a15.8,15.8,0,0,0,1.6-8' +\n            'a15.8,15.8,0,1,0-29.9,8h0Zm14.1-1.7' +\n            'A8.2,8.2,0,1,1,73,39,8.2,8.2,0,0,1,64.9,47.1Z' +\n            'm0-12.6A4.5,4.5,0,1,0,69.3,39,4.5,4.5,0,0,0,64.9,34.5Z',\n\n            m_topo: 'M31.3,73H21.5a3.1,3.1,0,0,1-3-3V60.1a3.1,3.1,0,0,1,3-3' +\n            'h9.8a3.2,3.2,0,0,1,3,3V70A3.1,3.1,0,0,1,31.3,73Z' +\n            'M78.5,46.7H68.7a3.1,3.1,0,0,1-3-3V33.8a3.1,3.1,0,0,1,3-3h9.8' +\n            'a3.1,3.1,0,0,1,3,3v9.8A3.1,3.1,0,0,1,78.5,46.7Z' +\n            'M40.8,42.9H31a3.1,3.1,0,0,1-3-3V30a3.1,3.1,0,0,1,3-3' +\n            'h9.9a2.9,2.9,0,0,1,2.9,3v9.8A3.1,3.1,0,0,1,40.8,42.9Z' +\n            'M37.4,66.1a1.8,1.8,0,0,1-1.2-3.3L61.1,42a1.8,1.8,0,1,1,2.4,2.8' +\n            'L38.6,65.7A1.8,1.8,0,0,1,37.4,66.1Z' +\n            'M27.4,55.5a1.8,1.8,0,0,1-1.5-3l5.8-7.7a1.8,1.8,0,1,1,2.9,2.2' +\n            'l-5.8,7.7A1.8,1.8,0,0,1,27.4,55.5Z' +\n            'M62.5,39.7H62.2L46.6,36.5a1.8,1.8,0,1,1,.7-3.6L62.9,36' +\n            'A1.8,1.8,0,0,1,62.5,39.7Z',\n\n            m_shortestPath: 'M28.2,31.2H19.5a3,3,0,0,1-3-3V19.5a3,3,0,0,1,3-3' +\n            'h8.6c1.8,0.4,3,1.4,3,3v8.6A3,3,0,0,1,28.2,31.2Z' +\n            'M80.2,83.2H71.6a3,3,0,0,1-3-3V71.5a3,3,0,0,1,3-3h8.6' +\n            'c1.7,0.4,3,1.4,3,3v8.6A3,3,0,0,1,80.2,83.2Z' +\n            'M67.6,67.4a1.8,1.8,0,0,1-1.3.5,1.9,1.9,0,0,1-1.3-.5L54.7,57.1' +\n            'H45.6a3,3,0,0,1-3-3V45.5a2.1,2.1,0,0,1,.1-0.5L32.3,34.7' +\n            'a1.8,1.8,0,0,1,0-2.6,1.9,1.9,0,0,1,2.6,0L45.3,42.5h8.9' +\n            'a3,3,0,0,1,3,3v8.6a0.9,0.9,0,0,1,0,.2L67.6,64.8' +\n            'A1.8,1.8,0,0,1,67.6,67.4Z',\n\n            m_disjointPaths: 'M67.7,59.8h9.4a2.9,2.9,0,0,1,3,3v9.4' +\n            'a3.1,3.1,0,0,1-3,3H67.7a3.1,3.1,0,0,1-3-3V62.9' +\n            'A3.1,3.1,0,0,1,67.7,59.8Z' +\n            'M22.9,59.8h9.4a2.9,2.9,0,0,1,3,3v9.4a3.1,3.1,0,0,1-3,3H22.9' +\n            'a3.1,3.1,0,0,1-3-3V62.9A3.1,3.1,0,0,1,22.9,59.8Z' +\n            'M45.3,24.7h9.4a2.9,2.9,0,0,1,3,3v9.4a3.1,3.1,0,0,1-3,3H45.3' +\n            'a3.1,3.1,0,0,1-3-3V27.7A3.1,3.1,0,0,1,45.3,24.7Z' +\n            'M65.9,58.5a1.8,1.8,0,0,1-1.5-.8L55.3,44.3a1.8,1.8,0,0,1,3.1-2.1' +\n            'l9.1,13.4A1.8,1.8,0,0,1,65.9,58.5Z' +\n            'M61.1,68.8H39.1a1.8,1.8,0,1,1,0-3.7H61.1A1.8,1.8,0,0,1,61.1,68.8Z' +\n            'M35.5,59.9l-1-.3a1.8,1.8,0,0,1-.6-2.5l8.8-14.3' +\n            'a1.8,1.8,0,0,1,3.1,1.9L37.1,59A1.8,1.8,0,0,1,35.5,59.9Z',\n\n            m_region: 'M49.8,70.9a3.4,3.4,0,0,1-3-1.8L34.3,47l-0.8-1.5' +\n            'a18.2,18.2,0,0,1-1.9-8.2,18.4,18.4,0,0,1,5.8-13.3' +\n            'A18.3,18.3,0,0,1,68.1,36.1h0a18.4,18.4,0,0,1-1.9,9.3' +\n            'L65.3,47,52.8,69.2A3.4,3.4,0,0,1,49.8,70.9Zm0-48.3' +\n            'A14.6,14.6,0,0,0,36.7,43.8l0.7,1.3L49.8,67,62.2,45.2l0.8-1.3' +\n            'a14.7,14.7,0,0,0,1.5-7.5h0A14.8,14.8,0,0,0,50.7,22.7H49.8Z' +\n            'm0,19.7a7.7,7.7,0,1,1,7.7-7.7A7.7,7.7,0,0,1,49.8,42.4Zm0-11.8' +\n            'a4.1,4.1,0,1,0,4.1,4.1A4.1,4.1,0,0,0,49.8,30.6Z' +\n            'M81.7,80.8H17.9a1.8,1.8,0,0,1-1.6-2.7l9.2-16.8' +\n            'a1.8,1.8,0,0,1,1.6-1h9.5a1.8,1.8,0,1,1,0,3.7H28.2L21,77.1H78.6' +\n            'L71.4,64H61.9a1.8,1.8,0,1,1,0-3.7H72.5a1.8,1.8,0,0,1,1.6,1' +\n            'l9.2,16.8A1.8,1.8,0,0,1,81.7,80.8Z',\n        },\n\n        extraGlyphs = {\n            _yang: '0 0 400 400',\n            yang: 'M323.3,199.2a33.2,33.2,0,1,1-66.4,0' +\n            'c0-18.4,14.9-34.1,33.2-33.3S323.3,180.8,323.3,199.2Z' +\n            'M286.5,289.9c-78.2-.3-86.6-72.2-86.9-89.1s-14.6-91.8-88.3-88.3' +\n            'c-7.5.3-34.6,1.2-56.9,20.1-25.8,21.8-29,53.9-30.5,68.2-0.2,' +\n            '2.2-.4,4.4-0.5,6.5h0a175.5,175.5,0,0,0,171,172.9H199' +\n            'a175.5,175.5,0,0,0,58.6-10l3.9-1.4,3.9-1.5,3.9-1.7h0' +\n            'l3.9-1.7,2.8-1.3,2.7-1.4a175.6,175.6,0,0,0,95.9-155.1' +\n            'C372.4,226.7,358,290.1,286.5,289.9ZM110.1,237.7' +\n            'A33.6,33.6,0,1,1,143.7,204,33.6,33.6,0,0,1,110.1,237.7Z',\n        };\n\n\n\n    function registerCoreGlyphs(gsApi) {\n        gsApi.registerGlyphs(logos);\n        gsApi.registerGlyphSet(glyphDataSet);\n        gsApi.registerGlyphSet(badgeDataSet);\n        gsApi.registerGlyphs(spriteData);\n        gsApi.registerGlyphSet(mojoDataSet);\n        gsApi.registerGlyphs(extraGlyphs);\n    }\n\n\n    angular.module('onosSvg')\n    .factory('GlyphDataService',\n        [function () {\n            return {\n                registerCoreGlyphs: registerCoreGlyphs,\n            };\n        }]\n    );\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, gs, sus;\n\n    var vboxSize = 50,\n        cornerSize = vboxSize / 10,\n        viewBox = '0 0 ' + vboxSize + ' ' + vboxSize;\n\n    var glyphMapping = {\n        active: 'checkMark',\n        inactive: 'xMark',\n\n        plus: 'plus',\n        minus: 'minus',\n        play: 'play',\n        stop: 'stop',\n\n        upload: 'upload',\n        download: 'download',\n        delta: 'delta',\n        nonzero: 'nonzero',\n        close: 'xClose',\n\n        topo: 'topo',\n\n        refresh: 'refresh',\n        query: 'query',\n        garbage: 'garbage',\n\n        upArrow: 'triangleUp',\n        downArrow: 'triangleDown',\n\n        appInactive: 'unknown',\n\n        node: 'node',\n        devIcon_SWITCH: 'switch',\n        devIcon_ROADM: 'roadm',\n        devIcon_OTN: 'otn',\n\n        portIcon_DEFAULT: 'm_ports',\n\n        meter: 'meterTable', \n\n        deviceTable: 'switch',\n        flowTable: 'flowTable',\n        portTable: 'portTable',\n        groupTable: 'groupTable',\n        meterTable: 'meterTable',\n        pipeconfTable: 'pipeconfTable',\n\n        hostIcon_endstation: 'endstation',\n        hostIcon_router: 'router',\n        hostIcon_bgpSpeaker: 'bgpSpeaker',\n\n        nav_apps: 'bird',\n        nav_settings: 'cog',\n        nav_cluster: 'node',\n        nav_processors: 'allTraffic',\n\n        nav_topo: 'topo',\n        nav_topo2: 'm_cloud',\n        nav_devs: 'switch',\n        nav_links: 'ports',\n        nav_hosts: 'endstation',\n        nav_intents: 'relatedIntents',\n        nav_tunnels: 'ports', \n        nav_yang: 'yang',\n    };\n\n    function ensureIconLibDefs() {\n        var body = d3.select('body'),\n            svg = body.select('svg#IconLibDefs');\n\n        if (svg.empty()) {\n            svg = body.append('svg').attr('id', 'IconLibDefs');\n            svg.append('defs');\n        }\n        return svg.select('defs');\n    }\n\n    function loadIcon(div, glyphId, size, installGlyph, svgClass) {\n        var dim = size || 20,\n            svgCls = svgClass || 'embeddedIcon',\n            gid = glyphId || 'unknown',\n            svg, g;\n\n        if (installGlyph) {\n            gs.loadDefs(ensureIconLibDefs(), [gid], true);\n        }\n\n        svg = div.append('svg').attr({\n            'class': svgCls,\n            width: dim,\n            height: dim,\n            viewBox: viewBox,\n        });\n\n        g = svg.append('g').attr({\n            'class': 'icon',\n        });\n\n        g.append('rect').attr({\n            width: vboxSize,\n            height: vboxSize,\n            rx: cornerSize,\n        });\n\n        g.append('use').attr({\n            width: vboxSize,\n            height: vboxSize,\n            'class': 'glyph',\n            'xlink:href': '#' + gid,\n        });\n    }\n\n    function loadIconByClass(div, iconCls, size, installGlyph, svgClass) {\n        loadIcon(div, glyphMapping[iconCls], size, installGlyph, svgClass);\n        div.select('svg g').classed(iconCls, true);\n    }\n\n    function loadEmbeddedIcon(div, iconCls, size) {\n        loadIconByClass(div, iconCls, size, true);\n    }\n\n    function addDeviceIcon(elem, glyphId, iconDim) {\n        var gid = gs.glyphDefined(glyphId) ? glyphId : 'query';\n        return elem.append('use').attr({\n            'xlink:href': '#' + gid,\n            width: iconDim,\n            height: iconDim,\n        });\n    }\n\n    function addHostIcon(elem, radius, glyphId) {\n        var dim = radius * 1.5,\n            xlate = -dim / 2,\n            g = elem.append('g')\n                .attr('class', 'svgIcon hostIcon');\n\n        g.append('circle').attr('r', radius);\n\n        g.append('use').attr({\n            'xlink:href': '#' + glyphId,\n            width: dim,\n            height: dim,\n            transform: sus.translate(xlate, xlate),\n        });\n        return g;\n    }\n\n    function sortIcons() {\n        function _s(div, gid) {\n            div.style('display', 'inline-block');\n            loadEmbeddedIcon(div, gid, 10);\n            div.classed('tableColSort', true);\n        }\n\n        return {\n            asc: function (div) { _s(div, 'upArrow'); },\n            desc: function (div) { _s(div, 'downArrow'); },\n            none: function (div) { div.remove(); },\n        };\n    }\n\n    function registerIconMapping(iconId, glyphId) {\n        if (glyphMapping[iconId]) {\n            $log.warn('Icon with id', iconId, 'already mapped. Ignoring.');\n        } else {\n            glyphMapping[iconId] = glyphId;\n            gs.loadDefs(ensureIconLibDefs(), [glyphId], true);\n        }\n    }\n\n\n    angular.module('onosSvg')\n        .directive('icon', ['IconService', function (is) {\n            return {\n                restrict: 'A',\n                link: function (scope, element, attrs) {\n                    attrs.$observe('iconId', function () {\n                        var div = d3.select(element[0]);\n                        div.selectAll('*').remove();\n                        is.loadEmbeddedIcon(div, attrs.iconId, attrs.iconSize);\n                    });\n                },\n            };\n        }])\n\n        .factory('IconService', ['$log', 'GlyphService',\n            'SvgUtilService',\n\n        function (_$log_, _gs_, _sus_) {\n            $log = _$log_;\n            gs = _gs_;\n            sus = _sus_;\n\n            return {\n                loadIcon: loadIcon,\n                loadIconByClass: loadIconByClass,\n                loadEmbeddedIcon: loadEmbeddedIcon,\n                addDeviceIcon: addDeviceIcon,\n                addHostIcon: addHostIcon,\n                sortIcons: sortIcons,\n                registerIconMapping: registerIconMapping,\n            };\n        }]);\n\n}());\n","\n\n\n(function () {\n    'use strict';\n\n    var $log, $q, gds;\n\n\n    function loadMapInto(mapLayer, mapPath, id, opts) {\n        var promise = gds.fetchTopoData(mapPath),\n            deferredProjection = $q.defer();\n\n        if (!promise) {\n            $log.warn('Failed to load map: ' + mapPath);\n            return false;\n        }\n\n        promise.then(function () {\n\n            var topoObjects = promise.topodata.objects;\n\n                if (topoObjects.hasOwnProperty(id)) {\n                    opts.objectTag = id;\n                }\n\n            var gen = gds.createPathGenerator(promise.topodata, opts);\n\n            deferredProjection.resolve(gen.settings.projection);\n\n            mapLayer.selectAll('path')\n                .data(gen.geodata.features)\n                .enter()\n                .append('path')\n                .attr('d', gen.pathgen);\n\n            reshade(opts.shading);\n        });\n        return deferredProjection.promise;\n    }\n\n\n\n    function loadMapRegionInto(mapLayer, opts) {\n        var promise = gds.fetchTopoData('*countries'),\n            deferredProjection = $q.defer();\n\n        if (!promise) {\n            $log.warn('Failed to load countries TopoJSON data');\n            return false;\n        }\n\n        promise.then(function () {\n            var width = 1000,\n                height = 1000,\n                proj = d3.geo.mercator().translate([width/2, height/2]),\n                pathGen = d3.geo.path().projection(proj),\n                data = promise.topodata,\n                features = topojson.feature(data, data.objects.countries).features,\n                country = features.filter(opts.countryFilter),\n                countryFeature = {\n                    type: 'FeatureCollection',\n                    features: country,\n                },\n                path = d3.geo.path().projection(proj);\n\n            gds.rescaleProjection(proj, 0.95, 1000, path, countryFeature, opts.adjustScale);\n\n            deferredProjection.resolve(proj);\n\n            mapLayer.selectAll('path.country')\n                .data([countryFeature])\n                .enter()\n                .append('path').classed('country', true)\n                .attr('d', pathGen);\n\n            reshade(opts.shading);\n        });\n        return deferredProjection.promise;\n    }\n\n    function reshade(sh) {\n        var p = sh && sh.palette,\n            paths, stroke, fill, bg,\n            svg = d3.select('#ov-topo').select('svg');\n        if (sh) {\n            stroke = p.outline;\n            fill = sh.flip ? p.sea : p.land;\n            bg = sh.flip ? p.land : p.sea;\n\n            paths = d3.select('#topo-map').selectAll('path');\n            svg.style('background-color', bg);\n            paths.attr({\n                stroke: stroke,\n                fill: fill,\n            });\n        } else {\n            svg.style('background-color', null);\n        }\n    }\n\n    angular.module('onosSvg')\n        .factory('MapService', ['$log', '$q', 'GeoDataService',\n        function (_$log_, _$q_, _gds_) {\n            $log = _$log_;\n            $q = _$q_;\n            gds = _gds_;\n\n            return {\n                loadMapRegionInto: loadMapRegionInto,\n                loadMapInto: loadMapInto,\n                reshade: reshade,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs, sds;\n\n    var optDefaults = {\n        sprite: {\n            builder: {\n            },\n            addRect: {\n                fill: 'gray1',\n                stroke: 'none',\n            },\n            addPath: {\n                fill: 'none',\n                stroke: 'gray1',\n            },\n        },\n        layout: {\n            builder: {\n                grid: 10, \n            },\n            addSprite: {\n                anchor: 'topleft', \n            },\n            addLabel: {\n                anchor: 'center', \n                fontStyle: 'normal', \n            },\n        },\n    };\n\n    var sprites, \n        layouts, \n        api;\n\n\n\n    function spriteBuilder(id, w, h, opts) {\n        var o = angular.extend({}, optDefaults.sprite.builder, opts),\n            builder,\n            paths = [],\n            rects = [];\n\n\n        function addRect(x, y, w, h, opts) {\n            var o = angular.extend({}, optDefaults.sprite.addRect, opts);\n\n            rects.push({\n                x: x, y: y, w: w, h: h, o: o,\n            });\n            return builder;\n        }\n\n        function addPath(d, opts) {\n            var o = angular.extend({}, optDefaults.sprite.addPath, opts);\n\n            if (fs.isS(d)) {\n                paths.push({ d: d, o: o });\n            } else if (fs.isA(d)) {\n                paths.push({ d: d.join(''), o: o });\n            } else {\n                $log.warn('addPath: path not a string or array', d);\n            }\n            return builder;\n        }\n\n        function register() {\n            sprites.set(id, builder);\n        }\n\n        builder = {\n            type: 'sprite',\n            data: {\n                id: id,\n                w: w,\n                h: h,\n                opts: o,\n            },\n            paths: paths,\n            rects: rects,\n\n            addRect: addRect,\n            addPath: addPath,\n            register: register,\n        };\n\n        return builder;\n    }\n\n\n\n    function layoutBuilder(id, w, h, opts) {\n        var o = angular.extend({}, optDefaults.layout.builder, opts),\n            builder,\n            sprs = [],\n            labs = [];\n\n\n        function addSprite(id, x, y, w, opts) {\n            var o = angular.extend({}, optDefaults.layout.addSprite, opts),\n                s = sprites.get(id);\n\n            if (!s) {\n                $log.warn('no such sprite:', id);\n                return builder;\n            }\n\n            sprs.push({\n                sprite: s, x: x, y: y, w: w, anchor: o.anchor,\n            });\n            return builder;\n        }\n\n        function addLabel(text, x, y, opts) {\n            var o = angular.extend({}, optDefaults.layout.addLabel, opts);\n\n            labs.push({\n                text: text, x: x, y: y, anchor: o.anchor, style: o.fontStyle,\n            });\n            return builder;\n        }\n\n        function register() {\n            layouts.set(id, builder);\n        }\n\n        builder = {\n            type: 'layout',\n            data: {\n                id: id,\n                w: w,\n                h: h,\n                opts: o,\n            },\n            sprites: sprs,\n            labels: labs,\n\n            addSprite: addSprite,\n            addLabel: addLabel,\n            register: register,\n        };\n\n        return builder;\n    }\n\n\n    function clear() {\n        sprites = d3.map();\n        layouts = d3.map();\n    }\n\n    function init() {\n        sds.registerCoreSprites(api);\n    }\n\n    function createSprite(id, w, h) {\n        $log.debug('createSprite:', id, w, 'x', h);\n        return spriteBuilder(id, w, h);\n    }\n\n    function createLayout(id, w, h, opts) {\n        $log.debug('createLayout:', id, w, 'x', h, '(opts:', opts, ')');\n        return layoutBuilder(id, w, h, opts);\n    }\n\n    function registerSprite(json) {\n        $log.debug('registerSprite:', json);\n    }\n\n    function registerLayout(json) {\n        $log.debug('registerLayout:', json);\n    }\n\n    function sprite(id) {\n        return sprites.get(id);\n    }\n\n    function layout(id) {\n        return layouts.get(id);\n    }\n\n    function count() {\n        return {\n            sprites: sprites.size(),\n            layouts: layouts.size(),\n        };\n    }\n\n    function dump() {\n        $log.debug('Dumping Caches...');\n        $log.debug('sprites:', sprites);\n        $log.debug('layouts:', layouts);\n    }\n\n\n    angular.module('onosSvg')\n    .factory('SpriteService',\n        ['$log', 'FnService', 'SpriteDataService',\n\n        function (_$log_, _fs_, _sds_) {\n            $log = _$log_;\n            fs = _fs_;\n            sds = _sds_;\n\n            api = {\n                clear: clear,\n                init: init,\n                createSprite: createSprite,\n                createLayout: createLayout,\n                registerSprite: registerSprite,\n                registerLayout: registerLayout,\n                sprite: sprite,\n                layout: layout,\n                count: count,\n                dump: dump,\n            };\n            return api;\n        }]\n    )\n    .run(['$log', function ($log) {\n        $log.debug('Clearing sprite and layout caches');\n        clear();\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n\n    var cloud = {\n        vbox: '0 0 305 186',\n        d: [\n            'M91.2,48.4C121.2,6.3,187.9-13.4,219,45.6',\n            'M43.1,139.6C21.8,142.9-15.6,108.4,26.1,79',\n            'M103.7,150C89,205.2-11.2,167.4,30.5,138',\n            'M192.3,147.3c-33.5,48-82.1,32.3-94.5-8.2',\n            'M267.1,115c27.9,67.8-77.6,74.3-83.1,41',\n            'M34.3,89.9C10.8,79,59.5,10.7,97.2,39.6',\n            'M211.9,34.2c51.9-38.8,118,57.4,59,94.5',\n        ],\n        style: {\n            fill: 'none',\n            'stroke-miterlimit': 10,\n        },\n    };\n\n\n\n    function registerCoreSprites(ssApi) {\n        ssApi.registerSprite(cloud);\n\n\n        ssApi.createSprite('rack', 40, 50)\n            .addRect(0, 0, 40, 50, { fill: 'gold1' })\n            .addPath([\n                'M5,20h30v5h-30z',\n                'M5,30h30v5h-30z',\n                'M5,40h30v5h-30z',\n            ], { stroke: 'gray1' })\n            .register();\n\n        ssApi.createLayout('segmentRouting', 130, 75)\n            .addSprite('rack', 10, 40, 20)\n            .addSprite('rack', 40, 40, 20)\n            .addSprite('rack', 70, 40, 20)\n            .addSprite('rack', 100, 40, 20)\n            .addLabel('Segment Routing', 120, 10, { anchor: 'right' })\n            .register();\n\n        ssApi.createLayout('segmentRoutingTwo', 70, 75)\n            .addSprite('rack', 10, 40, 20)\n            .addSprite('rack', 40, 40, 20)\n            .addLabel('Segment Routing 2', 120, 10, { anchor: 'right' })\n            .register();\n\n        ssApi.createLayout('plain', 80, 60)\n            .register();\n\n        ssApi.dump();\n    }\n\n\n    angular.module('onosSvg')\n        .factory('SpriteDataService', [\n            function () {\n                return {\n                    registerCoreSprites: registerCoreSprites,\n                };\n            },\n        ]);\n\n}());\n","\n\n\n(function () {\n    'use strict';\n\n    var $log, fs;\n\n    function createDragBehavior(force, selectCb, atDragEnd,\n                                dragEnabled, clickEnabled, zs) {\n        var draggedThreshold = d3.scale.linear()\n            .domain([0, 0.1])\n            .range([5, 20])\n            .clamp(true),\n            drag,\n            fSel = fs.isF(selectCb),\n            fEnd = fs.isF(atDragEnd),\n            fDEn = fs.isF(dragEnabled),\n            fCEn = fs.isF(clickEnabled),\n            bad = [];\n\n        function naf(what) {\n            return 'SvgUtilService: createDragBehavior(): ' + what +\n                ' is not a function';\n        }\n\n        if (!force) {\n            bad.push('SvgUtilService: createDragBehavior(): ' +\n                'Bad force reference');\n        }\n        if (!fSel) {\n            bad.push(naf('selectCb'));\n        }\n        if (!fEnd) {\n            bad.push(naf('atDragEnd'));\n        }\n        if (!fDEn) {\n            bad.push(naf('dragEnabled'));\n        }\n        if (!fCEn) {\n            bad.push(naf('clickEnabled'));\n        }\n\n        if (bad.length) {\n            $log.error(bad.join('\\n'));\n            return null;\n        }\n\n        function dragged(d) {\n            var scale = zs ? zs.scale() : 1,\n                threshold = draggedThreshold(force.alpha()) / scale,\n                dx = d.oldX - d.px,\n                dy = d.oldY - d.py;\n\n            if (Math.abs(dx) >= threshold || Math.abs(dy) >= threshold) {\n                d.dragged = true;\n            }\n            return d.dragged;\n        }\n\n        drag = d3.behavior.drag()\n            .origin(function (d) { return d; })\n            .on('dragstart', function (d) {\n                if (clickEnabled() || dragEnabled()) {\n                    d.oldX = d.x;\n                    d.oldY = d.y;\n                    d.dragged = false;\n                    d.fixed |= 2;\n                    d.dragStarted = true;\n                }\n            })\n            .on('drag', function (d) {\n                if (dragEnabled()) {\n                    d.px = d3.event.x;\n                    d.py = d3.event.y;\n                    if (dragged(d)) {\n                        if (!force.alpha()) {\n                            force.alpha(.025);\n                        }\n                    }\n                }\n            })\n            .on('dragend', function (d) {\n                d3.event.sourceEvent.stopPropagation();\n\n                if (d.dragStarted) {\n                    d.dragStarted = false;\n                    if (!dragged(d)) {\n                        if (clickEnabled()) {\n                            selectCb.call(this, d);\n                        }\n                    }\n                    d.fixed &= ~6;\n\n                    if (dragEnabled()) {\n                        atDragEnd.call(this, d);\n                    }\n                }\n            });\n\n        return drag;\n    }\n\n\n    function loadGlow(defs, r, g, b, id) {\n        var glow = defs.append('filter')\n            .attr('x', '-50%')\n            .attr('y', '-50%')\n            .attr('width', '200%')\n            .attr('height', '200%')\n            .attr('id', id);\n\n        glow.append('feColorMatrix')\n            .attr('type', 'matrix')\n            .attr('values',\n                '0 0 0 0  ' + r + ' ' +\n                '0 0 0 0  ' + g + ' ' +\n                '0 0 0 0  ' + b + ' ' +\n                '0 0 0 1  0 ');\n\n        glow.append('feGaussianBlur')\n            .attr('stdDeviation', 3)\n            .attr('result', 'coloredBlur');\n\n        glow.append('feMerge').selectAll('feMergeNode')\n            .data(['coloredBlur', 'SourceGraphic'])\n            .enter().append('feMergeNode')\n            .attr('in', String);\n    }\n\n    function loadGlowDefs(defs) {\n        loadGlow(defs, 0.0, 0.0, 0.7, 'blue-glow');\n        loadGlow(defs, 1.0, 1.0, 0.3, 'yellow-glow');\n    }\n\n\n\n    var lightNorm = ['#5b99d2', '#66cef6', '#d05a55', '#0f9d58', '#ba7941', '#3dc0bf', '#56af00'],\n        lightMute = ['#9ebedf', '#abdef5', '#d79a96', '#7cbe99', '#cdab8d', '#96d5d5', '#a0c96d'],\n\n        darkNorm = ['#5b99d2', '#66cef6', '#d05a55', '#0f9d58', '#ba7941', '#3dc0bf', '#56af00'],\n        darkMute = ['#9ebedf', '#abdef5', '#d79a96', '#7cbe99', '#cdab8d', '#96d5d5', '#a0c96d'];\n\n\n    var colors= {\n        light: {\n            norm: d3.scale.ordinal().range(lightNorm),\n            mute: d3.scale.ordinal().range(lightMute),\n        },\n        dark: {\n            norm: d3.scale.ordinal().range(darkNorm),\n            mute: d3.scale.ordinal().range(darkMute),\n        },\n    };\n\n    function cat7() {\n        var tcid = 'd3utilTestCard';\n\n        function getColor(id, muted, theme) {\n            var ln = colors.light.norm(id),\n                lm = colors.light.mute(id),\n                dn = colors.dark.norm(id),\n                dm = colors.dark.mute(id);\n            if (theme === 'dark') {\n                return muted ? dm : dn;\n            } else {\n                return muted ? lm : ln;\n            }\n        }\n\n        function testCard(svg) {\n            var g = svg.select('g#' + tcid),\n                dom = d3.range(7),\n                k, muted, theme, what;\n\n            if (!g.empty()) {\n                g.remove();\n\n            } else {\n                g = svg.append('g')\n                    .attr('id', tcid)\n                    .attr('transform', 'scale(4)translate(20,20)');\n\n                for (k=0; k<4; k++) {\n                    muted = k%2;\n                    what = muted ? ' muted' : ' normal';\n                    theme = k < 2 ? 'light' : 'dark';\n                    dom.forEach(function (id, i) {\n                        var x = i * 20,\n                            y = k * 20,\n                            f = getColor(id, muted, theme);\n                        g.append('circle').attr({\n                            cx: x,\n                            cy: y,\n                            r: 5,\n                            fill: f,\n                        });\n                    });\n                    g.append('rect').attr({\n                        x: 140,\n                        y: k * 20 - 5,\n                        width: 32,\n                        height: 10,\n                        rx: 2,\n                        fill: '#888',\n                    });\n                    g.append('text').text(theme + what)\n                        .attr({\n                            x: 142,\n                            y: k * 20 + 2,\n                            fill: 'white',\n                        })\n                        .style('font-size', '4pt');\n                }\n            }\n        }\n\n        return {\n            testCard: testCard,\n            getColor: getColor,\n        };\n    }\n\n    function translate(x, y) {\n        if (fs.isA(x) && x.length === 2 && !y) {\n            return 'translate(' + x[0] + ',' + x[1] + ')';\n        }\n        return 'translate(' + x + ',' + y + ')';\n    }\n\n    function scale(x, y) {\n        return 'scale(' + x + ',' + y + ')';\n    }\n\n    function skewX(x) {\n        return 'skewX(' + x + ')';\n    }\n\n    function rotate(deg) {\n        return 'rotate(' + deg + ')';\n    }\n\n    function stripPx(s) {\n        return s.replace(/px$/, '');\n    }\n\n    function safeId(s) {\n        return s.replace(/[^a-z0-9]/gi, '-');\n    }\n\n    function makeVisible(el, b) {\n        el.style('visibility', (b ? 'visible' : 'hidden'));\n    }\n\n    function isVisible(el) {\n        return el.style('visibility') === 'visible';\n    }\n\n    function visible(el, x) {\n        if (x === undefined) {\n            return isVisible(el);\n        } else {\n            makeVisible(el, x);\n        }\n    }\n\n    angular.module('onosSvg')\n    .factory('SvgUtilService', ['$log', 'FnService',\n        function (_$log_, _fs_) {\n            $log = _$log_;\n            fs = _fs_;\n\n            return {\n                createDragBehavior: createDragBehavior,\n                loadGlowDefs: loadGlowDefs,\n                cat7: cat7,\n                translate: translate,\n                scale: scale,\n                skewX: skewX,\n                rotate: rotate,\n                stripPx: stripPx,\n                safeId: safeId,\n                visible: visible,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var defaultSettings = {\n        zoomMin: 0.05,\n        zoomMax: 50,\n        zoomEnabled: function (ev) { return true; },\n        zoomCallback: function () {},\n    };\n\n    var $log;\n\n    angular.module('onosSvg')\n        .factory('ZoomService', ['$log',\n\n        function (_$log_) {\n            $log = _$log_;\n\n            function createZoomer(opts) {\n                var cz = 'ZoomService.createZoomer(): ',\n                    d3s = ' (D3 selection) property defined',\n                    settings = angular.extend({}, defaultSettings, opts),\n                    zoom = d3.behavior.zoom()\n                        .translate([0, 0])\n                        .scale(1)\n                        .scaleExtent([settings.zoomMin, settings.zoomMax])\n                        .on('zoom', zoomed),\n                    fail = false,\n                    zoomer;\n\n\n                if (!settings.svg) {\n                    $log.error(cz + 'No \"svg\" (svg tag)' + d3s);\n                    fail = true;\n                }\n                if (!settings.zoomLayer) {\n                    $log.error(cz + 'No \"zoomLayer\" (g tag)' + d3s);\n                    fail = true;\n                }\n\n                if (fail) {\n                    return null;\n                }\n\n                function zoomed() {\n                    var ev = d3.event.sourceEvent;\n                    if (settings.zoomEnabled(ev)) {\n                        adjustZoomLayer(d3.event.translate, d3.event.scale);\n                    }\n                }\n\n                function adjustZoomLayer(translate, scale, transition) {\n\n                    settings.zoomLayer.transition()\n                        .duration(transition || 0)\n                        .attr('transform',\n                            'translate(' + translate + ')scale(' + scale + ')');\n\n                    settings.zoomCallback(translate, scale);\n                }\n\n                zoomer = {\n                    panZoom: function (translate, scale, transition) {\n\n                        zoom.translate(translate).scale(scale);\n                        adjustZoomLayer(translate, scale, transition);\n                    },\n\n                    reset: function () {\n                        zoomer.panZoom([0, 0], 1);\n                    },\n\n                    translate: function () {\n                        return zoom.translate();\n                    },\n\n                    scale: function () {\n                        return zoom.scale();\n                    },\n\n                    scaleExtent: function () {\n                        return zoom.scaleExtent();\n                    },\n                };\n\n                settings.svg && settings.svg.call(zoom);\n\n                settings.svg.on('dblclick.zoom', null);\n                return zoomer;\n            }\n\n            return {\n                createZoomer: createZoomer,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs, flash;\n\n    var fcc = String.fromCharCode;\n\n    var beans = [\n        'umpxwnwcw',\n        'eufdvexoc',\n        'egpdytgv',\n        'xcjvte',\n        'bgvest',\n        'sevlr',\n        'ias',\n        'jweeidkpizn',\n        'fmfv',\n        'hwdoc',\n        'acxefcsdgt',\n        'pmmn',\n        'ugaryc',\n        'xcedrcxekzg',\n        'qit'\n    ];\n\n    function pickBean() {\n        return beans[Math.floor(Math.random() * beans.length)] + '.foo';\n    }\n\n    function computeTransform(x) {\n        var m = x.split(':'),\n            h = Number(m[0]),\n            d = m[1],\n            n = d.length,\n            w = [],\n            i;\n\n        for (i = 0; i<n; i+=2)\n            { w.push(fcc(Number(d.slice(i, i+2)))); }\n\n        return fs.eecode(h, w.join(''));\n    }\n\n    function genMap(data) {\n        var map = {};\n\n        data.forEach(function (x) {\n            var r = computeTransform(x);\n            map[r.e] = r.o.toLowerCase() + '.foo';\n        });\n        return map;\n    }\n\n    function cluck(foo) {\n        var f = fs.isF(foo),\n            s = fs.isS(foo);\n\n        $log.debug('>>> CLUCK! <<<', foo);\n\n        if (s === 'fgfb.foo') {\n            s = pickBean();\n            $log.debug('bean picked:', s);\n        }\n\n        if (s && fs.endsWith(s, '.foo')) {\n            flash.tempDiv().append('img').attr('src', 'raw/'+s);\n        }\n\n        f && f();\n    }\n\n    angular.module('onosUtil')\n    .factory('EeService', ['$log', 'FnService', 'FlashService',\n        function (_$log_, _fs_, _flash_) {\n            $log = _$log_;\n            fs = _fs_;\n            flash = _flash_;\n\n            return {\n                genMap: genMap,\n                cluck: cluck,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $window, $log;\n\n    var debugFlags = {};\n\n    var fcc = String.fromCharCode,\n        cca = String.prototype.charCodeAt;\n\n    function _parseDebugFlags(dbgstr) {\n        var bits = dbgstr ? dbgstr.split(',') : [];\n        bits.forEach(function (key) {\n            debugFlags[key] = true;\n        });\n        $log.debug('Debug flags:', dbgstr);\n    }\n\n    function isF(f) {\n        return typeof f === 'function' ? f : null;\n    }\n\n    function isA(a) {\n        return Array.isArray(a) ? a : null;\n    }\n\n    function isS(s) {\n        return typeof s === 'string' ? s : null;\n    }\n\n    function isO(o) {\n        return (o && typeof o === 'object' && o.constructor === Object) ? o : null;\n    }\n\n    function contains(a, x) {\n        return isA(a) && a.indexOf(x) > -1;\n    }\n\n    function areFunctions(api, fnNames) {\n        var fnLookup = {},\n            extraFound = false;\n\n        if (!isA(fnNames)) {\n            return false;\n        }\n        var n = fnNames.length,\n            i, name;\n        for (i=0; i<n; i++) {\n            name = fnNames[i];\n            if (!isF(api[name])) {\n                return false;\n            }\n            fnLookup[name] = true;\n        }\n\n        angular.forEach(api, function (value, key) {\n            if (!fnLookup[key]) {\n                extraFound = true;\n            }\n        });\n        return !extraFound;\n    }\n\n    function areFunctionsNonStrict(api, fnNames) {\n        if (!isA(fnNames)) {\n            return false;\n        }\n        var n = fnNames.length,\n            i, name;\n        for (i=0; i<n; i++) {\n            name = fnNames[i];\n            if (!isF(api[name])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function windowSize(offH, offW) {\n        var oh = offH || 0,\n            ow = offW || 0;\n        return {\n            height: $window.innerHeight - oh,\n            width: $window.innerWidth - ow,\n        };\n    }\n\n    function isMobile() {\n        var ua = $window.navigator.userAgent,\n            patt = /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/;\n        return patt.test(ua);\n    }\n\n    function isChrome() {\n        var isChromium = $window.chrome,\n            vendorName = $window.navigator.vendor,\n            isOpera = $window.navigator.userAgent.indexOf('OPR') > -1;\n        return (isChromium !== null &&\n        isChromium !== undefined &&\n        vendorName === 'Google Inc.' &&\n        isOpera == false);\n    }\n\n    function isSafari() {\n        return ($window.navigator.userAgent.indexOf('Safari') !== -1 &&\n        $window.navigator.userAgent.indexOf('Chrome') === -1);\n    }\n\n    function isFirefox() {\n        return typeof InstallTrigger !== 'undefined';\n    }\n\n    function find(key, array, tag) {\n        var _tag = tag || 'id',\n            idx, n, d;\n        for (idx = 0, n = array.length; idx < n; idx++) {\n            d = array[idx];\n            if (d[_tag] === key) {\n                return idx;\n            }\n        }\n        return -1;\n    }\n\n    function inArray(item, array) {\n        var i;\n        if (isA(array)) {\n            for (i=0; i<array.length; i++) {\n                if (array[i] === item) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n\n    function removeFromArray(item, array) {\n        var found = false,\n            i = inArray(item, array);\n        if (i >= 0) {\n            array.splice(i, 1);\n            found = true;\n        }\n        return found;\n    }\n\n    function isEmptyObject(obj) {\n        var key;\n        for (key in obj) {\n            return false;\n        }\n        return true;\n    }\n\n    function sameObjProps(obj1, obj2) {\n        var key;\n        for (key in obj1) {\n            if (obj1.hasOwnProperty(key)) {\n                if (!(obj1[key] === obj2[key])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    function containsObj(arr, obj) {\n        var i,\n            len = arr.length;\n        for (i = 0; i < len; i++) {\n            if (sameObjProps(arr[i], obj)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    function cap(s) {\n        return s ? s[0].toUpperCase() + s.slice(1).toLowerCase() : s;\n    }\n\n    function eecode(h, w) {\n        var m = 65,\n            x = 90,\n            d = x - m + 1,\n            s = x + m,\n            o = [],\n            n, i, c, e;\n\n        for (i = 0, n = w.length; i<n; i++) {\n            c = cca.call(w, i);\n            e = s - c + h;\n            e = e > x ? e - d : e;\n            o.push(e);\n        }\n        return {\n            o: w,\n            d: o.join(''),\n            e: fcc.apply(o, o),\n        };\n    }\n\n    function noPx(num) {\n        return Number(num.replace(/px$/, ''));\n    }\n\n    function noPxStyle(elem, prop) {\n        return Number(elem.style(prop).replace(/px$/, ''));\n    }\n\n    function endsWith(str, suffix) {\n        return str.indexOf(suffix, str.length - suffix.length) !== -1;\n    }\n\n    function debugOn(tag) {\n        return debugFlags[tag];\n    }\n\n    function debug(tag) {\n        var args;\n        if (debugOn(tag)) {\n            args = Array.prototype.slice.call(arguments, 1);\n            args.unshift('['+tag+']');\n            $log.debug.apply(this, args);\n        }\n    }\n\n    function _trieOp(op, trie, word, data) {\n        var p = trie,\n            w = word.toUpperCase(),\n            s = w.split(''),\n            c = { p: p, s: s },\n            t = [],\n            x = 0,\n            f1 = op === '+' ? add : probe,\n            f2 = op === '+' ? insert : remove;\n\n        function add(c) {\n            var q = c.s.shift(),\n                np = c.p[q];\n\n            if (!np) {\n                c.p[q] = {};\n                np = c.p[q];\n                x = 1;\n            }\n            return { p: np, s: c.s };\n        }\n\n        function probe(c) {\n            var q = c.s.shift(),\n                k = Object.keys(c.p).length,\n                np = c.p[q];\n\n            t.push({ q: q, k: k, p: c.p });\n            if (!np) {\n                t = [];\n                return { s: [] };\n            }\n            return { p: np, s: c.s };\n        }\n\n        function insert() {\n            c.p._data = data;\n            return x ? 'added' : 'updated';\n        }\n\n        function remove() {\n            if (t.length) {\n                t = t.reverse();\n                while (t.length) {\n                    c = t.shift();\n                    delete c.p[c.q];\n                    if (c.k > 1) {\n                        t = [];\n                    }\n                }\n                return 'removed';\n            }\n            return 'absent';\n        }\n\n        while (c.s.length) {\n            c = f1(c);\n        }\n        return f2();\n    }\n\n    function addToTrie(trie, word, data) {\n        return _trieOp('+', trie, word, data);\n    }\n\n    function removeFromTrie(trie, word) {\n        return _trieOp('-', trie, word);\n    }\n\n    function trieLookup(trie, word) {\n        var s = word.toUpperCase().split(''),\n            p = trie,\n            n;\n\n        while (s.length) {\n            n = s.shift();\n            p = p[n];\n            if (!p) {\n                return undefined;\n            }\n        }\n        if (p._data) {\n            return p._data;\n        }\n        return -1;\n    }\n\n\n    var hasOwn = {}.hasOwnProperty;\n\n    function classNames() {\n        var classes = [];\n\n        for (var i = 0; i < arguments.length; i++) {\n            var arg = arguments[i];\n            if (!arg) continue;\n\n            var argType = typeof arg;\n\n            if (argType === 'string' || argType === 'number') {\n                classes.push(arg);\n            } else if (Array.isArray(arg)) {\n                classes.push(classNames.apply(null, arg));\n            } else if (argType === 'object') {\n                for (var key in arg) {\n                    if (hasOwn.call(arg, key) && arg[key]) {\n                        classes.push(key);\n                    }\n                }\n            }\n        }\n\n        return classes.join(' ');\n    }\n\n    function extend(protoProps, staticProps) {\n\n        var parent = this,\n            child;\n\n        child = function () {\n        return parent.apply(this, arguments);\n        };\n\n        angular.extend(child, parent, staticProps);\n\n        child.prototype = angular.extend({}, parent.prototype, protoProps);\n        child.prototype.constructor = child;\n\n        child.__super__ = parent.prototype;\n\n        return child;\n    }\n\n\n    var matcher = /<\\/?([a-zA-Z0-9]+)*(.*?)\\/?>/igm,\n        whitelist = ['b', 'i', 'p', 'em', 'strong', 'br'],\n        evillist = ['script', 'style', 'iframe'];\n\n    function inEvilList(tag) {\n        return (evillist.indexOf(tag.name) !== -1 && tag.full.indexOf('/') === -1);\n    }\n\n    function analyze(html) {\n        html = String(html) || '';\n\n        var matches = [],\n            match;\n\n        while ((match = matcher.exec(html)) !== null) {\n            matches.push({\n                full: match[0],\n                name: match[1],\n            });\n        }\n\n        return matches;\n    }\n\n    function sanitize(html) {\n        html = String(html) || '';\n\n        var matches = analyze(html);\n\n        evillist.forEach(function (tag) {\n            var re = new RegExp('<' + tag + '(.*?)>(.*?[\\r\\n])*?(.*?)(.*?[\\r\\n])*?<\\/' + tag + '>', 'gim');\n            html = html.replace(re, '');\n        });\n\n        matches.forEach(function (tag) {\n            if (whitelist.indexOf(tag.name) === -1) {\n                html = html.replace(tag.full, '');\n                if (inEvilList(tag)) {\n                    $log.warn('Unsanitary HTML input -- ' + tag.full + ' detected!');\n                }\n            }\n        });\n\n\n        return html;\n    }\n\n\n    angular.module('onosUtil')\n        .factory('FnService',\n        ['$window', '$location', '$log', function (_$window_, $loc, _$log_) {\n            $window = _$window_;\n            $log = _$log_;\n\n            _parseDebugFlags($loc.search().debug);\n\n            return {\n                isF: isF,\n                isA: isA,\n                isS: isS,\n                isO: isO,\n                contains: contains,\n                areFunctions: areFunctions,\n                areFunctionsNonStrict: areFunctionsNonStrict,\n                windowSize: windowSize,\n                isMobile: isMobile,\n                isChrome: isChrome,\n                isSafari: isSafari,\n                isFirefox: isFirefox,\n                debugOn: debugOn,\n                debug: debug,\n                find: find,\n                inArray: inArray,\n                removeFromArray: removeFromArray,\n                isEmptyObject: isEmptyObject,\n                sameObjProps: sameObjProps,\n                containsObj: containsObj,\n                cap: cap,\n                eecode: eecode,\n                noPx: noPx,\n                noPxStyle: noPxStyle,\n                endsWith: endsWith,\n                addToTrie: addToTrie,\n                removeFromTrie: removeFromTrie,\n                trieLookup: trieLookup,\n                classNames: classNames,\n                extend: extend,\n                sanitize: sanitize,\n            };\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs, ts, ns, ee, qhs, ls;\n\n    var enabled = true,\n        globalEnabled = true,\n        keyHandler = {\n            globalKeys: {},\n            maskedKeys: {},\n            dialogKeys: {},\n            viewKeys: {},\n            viewFn: null,\n            viewGestures: [],\n        },\n        seq = {},\n        matching = false,\n        matched = '',\n        lookup;\n\n    function matchSeq(key) {\n        if (!matching && key === 'shift-shift') {\n            matching = true;\n            return true;\n        }\n        if (matching) {\n            matched += key;\n            lookup = fs.trieLookup(seq, matched);\n            if (lookup === -1) {\n                return true;\n            }\n            matching = false;\n            matched = '';\n            if (!lookup) {\n                return;\n            }\n            ee.cluck(lookup);\n            return true;\n        }\n    }\n\n    function whatKey(code) {\n        switch (code) {\n            case 8: return 'delete';\n            case 9: return 'tab';\n            case 13: return 'enter';\n            case 16: return 'shift';\n            case 27: return 'esc';\n            case 32: return 'space';\n            case 37: return 'leftArrow';\n            case 38: return 'upArrow';\n            case 39: return 'rightArrow';\n            case 40: return 'downArrow';\n            case 186: return 'semicolon';\n            case 187: return 'equals';\n            case 188: return 'comma';\n            case 189: return 'dash';\n            case 190: return 'dot';\n            case 191: return 'slash';\n            case 192: return 'backQuote';\n            case 219: return 'openBracket';\n            case 220: return 'backSlash';\n            case 221: return 'closeBracket';\n            case 222: return 'quote';\n            default:\n                if ((code >= 48 && code <= 57) ||\n                    (code >= 65 && code <= 90)) {\n                    return String.fromCharCode(code);\n                } else if (code >= 112 && code <= 123) {\n                    return 'F' + (code - 111);\n                }\n                return null;\n        }\n    }\n\n    var textFieldDoesNotBlock = {\n        enter: 1,\n        esc: 1,\n    };\n\n    function textFieldInput() {\n        var t = d3.event.target.tagName.toLowerCase();\n        return t === 'input' || t === 'textarea';\n    }\n\n    function keyIn() {\n        var event = d3.event,\n            keyCode = event.keyCode,\n            key = whatKey(keyCode),\n            textBlockable = !textFieldDoesNotBlock[key],\n            modifiers = [];\n\n        event.metaKey && modifiers.push('cmd');\n        event.altKey && modifiers.push('alt');\n        event.shiftKey && modifiers.push('shift');\n\n        if (!key) {\n            return;\n        }\n\n        modifiers.push(key);\n        key = modifiers.join('-');\n\n        if (textBlockable && textFieldInput()) {\n            return;\n        }\n\n        var kh = keyHandler,\n            gk = kh.globalKeys[key],\n            gcb = fs.isF(gk) || (fs.isA(gk) && fs.isF(gk[0])),\n            dk = kh.dialogKeys[key],\n            dcb = fs.isF(dk),\n            vk = kh.viewKeys[key],\n            kl = fs.isF(kh.viewKeys._keyListener),\n            vcb = fs.isF(vk) || (fs.isA(vk) && fs.isF(vk[0])) || fs.isF(kh.viewFn),\n            token = 'keyev'; \n\n        event.stopPropagation();\n\n        if (enabled) {\n            if (matchSeq(key)) return;\n\n            if (gcb && gcb(token, key, keyCode, event)) {\n                return;\n            }\n            if (dcb) {\n                dcb(token, key, keyCode, event);\n                return;\n            }\n            if (vcb) {\n                vcb(token, key, keyCode, event);\n            }\n            if (kl) {\n                kl(key);\n            }\n        }\n    }\n\n    function qhlion() {\n        return ls.bundle('core.fw.QuickHelp');\n    }\n    function qhlionShowHide() {\n        return qhlion()('qh_hint_show_hide_qh');\n    }\n\n    function qhlionHintEsc() {\n        return qhlion()('qh_hint_esc');\n    }\n\n    function qhlionHintT() {\n        return qhlion()('qh_hint_t');\n    }\n\n    function setupGlobalKeys() {\n        angular.extend(keyHandler, {\n            globalKeys: {\n                backSlash: [quickHelp, qhlionShowHide],\n                slash: [quickHelp, qhlionShowHide],\n                esc: [escapeKey, qhlionHintEsc],\n                T: [toggleTheme, qhlionHintT],\n            },\n            globalFormat: ['backSlash', 'slash', 'esc', 'T'],\n\n            maskedKeys: {\n                slash: 1,\n                backSlash: 1,\n                T: 1,\n            },\n        });\n    }\n\n    function quickHelp(view, key, code, ev) {\n        if (!globalEnabled) {\n            return false;\n        }\n        qhs.showQuickHelp(keyHandler);\n        return true;\n    }\n\n    function escapeKey(view, key, code, ev) {\n        return ns.hideIfShown() || qhs.hideQuickHelp();\n    }\n\n    function toggleTheme(view, key, code, ev) {\n        if (!globalEnabled) {\n            return false;\n        }\n        ts.toggleTheme();\n        return true;\n    }\n\n    function filterMaskedKeys(map, caller, remove) {\n        var masked = [],\n            msgs = [];\n\n        d3.map(map).keys().forEach(function (key) {\n            if (keyHandler.maskedKeys[key]) {\n                masked.push(key);\n                msgs.push(caller, ': Key \"' + key + '\" is reserved');\n            }\n        });\n\n        if (msgs.length) {\n            $log.warn(msgs.join('\\n'));\n        }\n\n        if (remove) {\n            masked.forEach(function (k) {\n                delete map[k];\n            });\n        }\n        return masked;\n    }\n\n    function unexParam(fname, x) {\n        $log.warn(fname, ': unexpected parameter-- ', x);\n    }\n\n    function setKeyBindings(keyArg) {\n        var fname = 'setKeyBindings()',\n            kFunc = fs.isF(keyArg),\n            kMap = fs.isO(keyArg);\n\n        if (kFunc) {\n            keyHandler.viewFn = kFunc;\n        } else if (kMap) {\n            filterMaskedKeys(kMap, fname, true);\n            keyHandler.viewKeys = kMap;\n        } else {\n            unexParam(fname, keyArg);\n        }\n    }\n\n    function getKeyBindings() {\n        var gkeys = d3.map(keyHandler.globalKeys).keys(),\n            masked = d3.map(keyHandler.maskedKeys).keys(),\n            vkeys = d3.map(keyHandler.viewKeys).keys(),\n            vfn = !!fs.isF(keyHandler.viewFn);\n\n        return {\n            globalKeys: gkeys,\n            maskedKeys: masked,\n            viewKeys: vkeys,\n            viewFunction: vfn,\n        };\n    }\n\n    function unbindKeys() {\n        keyHandler.viewKeys = {};\n        keyHandler.viewFn = null;\n        keyHandler.viewGestures = [];\n    }\n\n    function bindDialogKeys(map) {\n        var fname = 'bindDialogKeys()',\n            kMap = fs.isO(map);\n\n        if (kMap) {\n            filterMaskedKeys(map, fname, true);\n            keyHandler.dialogKeys = kMap;\n        } else {\n            unexParam(fname, map);\n        }\n    }\n\n    function unbindDialogKeys() {\n        keyHandler.dialogKeys = {};\n    }\n\n    function checkNotGlobal(o) {\n        var oops = [];\n        if (fs.isO(o)) {\n            angular.forEach(o, function (val, key) {\n                if (keyHandler.globalKeys[key]) {\n                    oops.push(key);\n                }\n            });\n            if (oops.length) {\n                $log.warn('Ignoring reserved global key(s):', oops.join(','));\n                oops.forEach(function (key) {\n                    delete o[key];\n                });\n            }\n        }\n    }\n\n    angular.module('onosUtil')\n    .factory('KeyService',\n        ['$log', 'FnService', 'ThemeService', 'NavService',\n            'EeService', 'LionService',\n\n        function (_$log_, _fs_, _ts_, _ns_, _ee_, _ls_) {\n            $log = _$log_;\n            fs = _fs_;\n            ts = _ts_;\n            ns = _ns_;\n            ee = _ee_;\n            ls = _ls_;\n\n            return {\n                bindQhs: function (_qhs_) {\n                    qhs = _qhs_;\n                },\n                installOn: function (elem) {\n                    elem.on('keydown', keyIn);\n                    setupGlobalKeys();\n                },\n                keyBindings: function (x) {\n                    if (x === undefined) {\n                        return getKeyBindings();\n                    } else {\n                        setKeyBindings(x);\n                    }\n                },\n                unbindKeys: unbindKeys,\n                dialogKeys: function (x) {\n                    if (x === undefined) {\n                        unbindDialogKeys();\n                    } else {\n                        bindDialogKeys(x);\n                    }\n                },\n                addSeq: function (word, data) {\n                    fs.addToTrie(seq, word, data);\n                },\n                remSeq: function (word) {\n                    fs.removeFromTrie(seq, word);\n                },\n                gestureNotes: function (g) {\n                    if (g === undefined) {\n                        return keyHandler.viewGestures;\n                    } else {\n                        keyHandler.viewGestures = fs.isA(g) || [];\n                    }\n                },\n                enableKeys: function (b) {\n                    enabled = b;\n                },\n                enableGlobalKeys: function (b) {\n                    globalEnabled = b;\n                },\n                checkNotGlobal: checkNotGlobal,\n            };\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, wss;\n\n    var handlers = {\n            uberlion: uberlion,\n        },\n        ubercache = {};\n\n    function uberlion(data) {\n        ubercache = data.lion;\n\n        $log.info('LION service: Locale... [' + data.locale + ']');\n        $log.info('LION service: Bundles installed...');\n\n        for (var p in ubercache) {\n            if (ubercache.hasOwnProperty(p)) {\n                $log.info('            :=> ', p);\n            }\n        }\n\n        $log.debug('LION service: uber-lion bundle received:', data);\n    }\n\n    function init() {\n        wss.bindHandlers(handlers);\n    }\n\n    function bundle(bundleId) {\n        var bundle = ubercache[bundleId];\n\n        if (!bundle) {\n            $log.warn('No lion bundle registered:', bundleId);\n            bundle = {};\n        }\n\n        return function (key) {\n            return bundle[key] || '%' + key + '%';\n        };\n    }\n\n    angular.module('onosUtil')\n        .factory('LionService', ['$log', 'WebSocketService',\n\n        function (_$log_, _wss_) {\n            $log = _$log_;\n            wss = _wss_;\n\n            return {\n                init: init,\n                bundle: bundle,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var fs, wss;\n\n    var cache = {},\n        listeners = [];\n\n    function getPrefs(name, defaults, qparams) {\n        var obj = angular.extend({}, defaults || {}, cache[name] || {});\n\n        if (fs.isO(qparams)) {\n            angular.forEach(obj, function (v, k) {\n                if (qparams.hasOwnProperty(k)) {\n                    obj[k] = qparams[k];\n                }\n            });\n        }\n        return obj;\n    }\n\n\n    function asNumbers(obj, keys, not) {\n        if (!obj) return null;\n\n        var skip = {};\n        if (not) {\n            keys.forEach(function (k) {\n                skip[k] = 1;\n            });\n        }\n\n        if (!keys || not) {\n            angular.forEach(obj, function (v, k) {\n                if (!not || !skip[k]) {\n                    obj[k] = Number(obj[k]);\n                }\n            });\n        } else {\n            keys.forEach(function (k) {\n                obj[k] = Number(obj[k]);\n            });\n        }\n        return obj;\n    }\n\n    function setPrefs(name, obj) {\n        cache[name] = obj;\n        wss.sendEvent('updatePrefReq', { key: name, value: obj });\n    }\n\n    function mergePrefs(name, obj) {\n        var merged = cache[name] || {};\n        setPrefs(name, angular.extend(merged, obj));\n    }\n\n    function updatePrefs(data) {\n        cache = data;\n        listeners.forEach(function (lsnr) { lsnr(); });\n    }\n\n    function addListener(listener) {\n        listeners.push(listener);\n    }\n\n    function removeListener(listener) {\n        listeners = listeners.filter(function (obj) { return obj === listener; });\n    }\n\n    angular.module('onosUtil')\n    .factory('PrefsService', ['FnService', 'WebSocketService',\n        function (_fs_, _wss_) {\n            fs = _fs_;\n            wss = _wss_;\n\n            try {\n                cache = angular.isDefined(userPrefs) ? userPrefs : {};\n            }\n            catch (e) {\n                cache = {};\n            }\n\n            wss.bindHandlers({\n                updatePrefs: updatePrefs,\n            });\n\n            return {\n                getPrefs: getPrefs,\n                asNumbers: asNumbers,\n                setPrefs: setPrefs,\n                mergePrefs: mergePrefs,\n                addListener: addListener,\n                removeListener: removeListener,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var halfRoot2 = 0.7071;\n\n    function spread(s) {\n        return Math.floor((Math.random() * s) - s / 2);\n    }\n\n    function randDim(d) {\n        return d / 2 + spread(d * halfRoot2);\n    }\n\n    angular.module('onosUtil')\n        .factory('RandomService', ['$log', 'FnService',\n\n        function () {\n            return {\n                spread: spread,\n                randDim: randDim,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, ps;\n\n    var themes = ['light', 'dark'],\n        themeStr = themes.join(' ');\n\n    var listeners = [],\n        thidx;\n\n    var spriteColors = {\n        gray1: {\n            fill: {\n                light: '#eeeeee',\n                dark: '#222222',\n            },\n            stroke: {\n                light: '#cccccc',\n                dark: '#333333',\n            },\n        },\n        gold1: {\n            fill: {\n                light: '#eeddaa',\n                dark: '#544714',\n            },\n            stroke: {\n                light: '#ffddaa',\n                dark: '#645724',\n            },\n        },\n        blue1: {\n            fill: {\n                light: '#a2b9ee',\n                dark: '#273059',\n            },\n            stroke: {\n                light: '#92a9de',\n                dark: '#273a63',\n            },\n        },\n    };\n\n    function init() {\n        thidx = ps.getPrefs('theme', { idx: 0 }).idx;\n        updateBodyClass();\n    }\n\n    function getTheme() {\n        return themes[thidx];\n    }\n\n    function setTheme(t) {\n        var idx = themes.indexOf(t);\n        if (idx > -1 && idx !== thidx) {\n            thidx = idx;\n            ps.setPrefs('theme', { idx: thidx });\n            applyTheme();\n        }\n    }\n\n    function toggleTheme() {\n        var i = thidx + 1;\n        thidx = (i===themes.length) ? 0 : i;\n        ps.setPrefs('theme', { idx: thidx });\n        applyTheme('toggle');\n        return getTheme();\n    }\n\n    function applyTheme(evt) {\n        thidx = ps.getPrefs('theme', { idx: thidx }).idx;\n        $log.info('Applying theme:', thidx);\n        updateBodyClass();\n        themeEvent(evt || 'set');\n    }\n\n    function updateBodyClass() {\n        var body = d3.select('body');\n        body.classed(themeStr, false);\n        body.classed(getTheme(), true);\n    }\n\n    function themeEvent(w) {\n        var t = getTheme(),\n            m = 'Theme-Change-(' + w + '): ' + t;\n        $log.debug(m);\n\n        listeners.forEach(function (lsnr) {\n            lsnr({ event: 'themeChange', value: t });\n        });\n    }\n\n    function addListener(lsnr) {\n        listeners.push(lsnr);\n    }\n\n    function removeListener(lsnr) {\n        listeners = listeners.filter(function (obj) { return obj !== lsnr; });\n    }\n\n    function spriteColor(color, what) {\n        var c = color || 'none',\n            w = what || 'stroke',\n            t = getTheme();\n\n        return c === 'none' ? c : spriteColors[c][w][t];\n    }\n\n    angular.module('onosUtil')\n        .factory('ThemeService', ['$log', 'PrefsService',\n        function (_$log_, _ps_) {\n            $log = _$log_;\n            ps = _ps_;\n\n            ps.addListener(applyTheme);\n\n            return {\n                init: init,\n                theme: function (x) {\n                    if (x === undefined) {\n                        return getTheme();\n                    } else {\n                        setTheme(x);\n                    }\n                },\n                toggleTheme: toggleTheme,\n                addListener: addListener,\n                removeListener: removeListener,\n                spriteColor: spriteColor,\n            };\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs, is, tts;\n\n    var btnSize = 25,\n        btnPadding = 4;\n\n\n\n    function divExists(div, msg) {\n        if (!div) {\n            $log.warn('div undefined (' + msg + ')');\n        }\n        return !!div;\n    }\n\n    function createDiv(div, cls, id) {\n        return div.append('div')\n            .classed(cls, true)\n            .attr('id', id);\n    }\n\n    function noop() {}\n\n    function buttonWidth() {\n        return btnSize + 2 * btnPadding;\n    }\n\n\n    function button(div, id, gid, cb, tooltip) {\n        if (!divExists(div, 'button')) return null;\n\n        var btnDiv = createDiv(div, 'button', id),\n            cbFnc = fs.isF(cb) || noop;\n\n        is.loadIcon(btnDiv, gid, btnSize, true);\n        if (tooltip) { tts.addTooltip(btnDiv, tooltip); }\n\n        btnDiv.on('click', cbFnc);\n\n        return {\n            id: id,\n            width: buttonWidth,\n        };\n    }\n\n\n\n    function toggle(div, id, gid, initState, cb, tooltip) {\n        if (!divExists(div, 'toggle button')) return null;\n\n        var sel = !!initState,\n            togDiv = createDiv(div, 'toggleButton', id),\n            cbFnc = fs.isF(cb) || noop;\n\n        is.loadIcon(togDiv, gid, btnSize, true);\n        togDiv.classed('selected', sel);\n        if (tooltip) { tts.addTooltip(togDiv, tooltip); }\n\n        function _toggle(b, nocb) {\n            sel = (b === undefined) ? !sel : !!b;\n            togDiv.classed('selected', sel);\n            nocb || cbFnc(sel);\n        }\n\n        function toggleNoCb() {\n            _toggle(undefined, true);\n        }\n\n        togDiv.on('click', _toggle);\n\n        return {\n            id: id,\n            width: buttonWidth,\n            selected: function () { return sel; },\n            toggle: _toggle,\n            toggleNoCb: toggleNoCb,\n        };\n    }\n\n\n\n\n    function radioSet(div, id, rset) {\n        if (!divExists(div, 'radio button set')) return null;\n\n        if (!fs.isA(rset) || !rset.length) {\n            $log.warn('invalid array (radio button set)');\n            return null;\n        }\n\n        var rDiv = createDiv(div, 'radioSet', id),\n            rads = [],\n            idxByKey = {},\n            currIdx = 0;\n\n        function rsetWidth() {\n            return ((btnSize + btnPadding) * rads.length) + btnPadding;\n        }\n\n        function rbclick() {\n            var id = d3.select(this).attr('id'),\n                m = /^.*-(\\d+)$/.exec(id),\n                idx = Number(m[1]);\n\n            if (idx !== currIdx) {\n                rads[currIdx].el.classed('selected', false);\n                currIdx = idx;\n                rads[currIdx].el.classed('selected', true);\n                invokeCurrent();\n            }\n        }\n\n\n        rset.forEach(function (btn, index) {\n\n            if (!fs.isO(btn)) {\n                $log.warn('radio button descriptor at index ' + index +\n                            ' not an object');\n                return;\n            }\n\n            var rid = id + '-' + index,\n                initSel = (index === 0),\n                rbdiv = createDiv(rDiv, 'radioButton', rid);\n\n            rbdiv.classed('selected', initSel);\n            rbdiv.on('click', rbclick);\n            is.loadIcon(rbdiv, btn.gid, btnSize, true);\n            if (btn.tooltip) { tts.addTooltip(rbdiv, btn.tooltip); }\n            angular.extend(btn, {\n                el: rbdiv,\n                id: rid,\n                cb: fs.isF(btn.cb) || noop,\n                index: index,\n            });\n\n            if (btn.key) {\n                idxByKey[btn.key] = index;\n            }\n\n            rads.push(btn);\n        });\n\n\n        function invokeCurrent() {\n            var curr = rads[currIdx];\n            curr.cb(curr.index, curr.key);\n        }\n\n        function selected(x) {\n            var curr = rads[currIdx],\n                idx;\n\n            if (x === undefined) {\n                return curr.key || curr.index;\n            } else {\n                idx = idxByKey[x];\n                if (idx === undefined) {\n                    $log.warn('no radio button with key:', x);\n                } else {\n                    selectedIndex(idx);\n                }\n            }\n        }\n\n        function selectedIndex(x) {\n            if (x === undefined) {\n                return currIdx;\n            } else {\n                if (x >= 0 && x < rads.length) {\n                    if (currIdx !== x) {\n                        rads[currIdx].el.classed('selected', false);\n                        currIdx = x;\n                        rads[currIdx].el.classed('selected', true);\n                        invokeCurrent();\n                    } else {\n                        $log.warn('current index already selected:', x);\n                    }\n                } else {\n                    $log.warn('invalid radio button index:', x);\n                }\n            }\n        }\n\n        return {\n            width: rsetWidth,\n            selected: selected,\n            selectedIndex: selectedIndex,\n            size: function () { return rads.length; },\n        };\n    }\n\n\n    angular.module('onosWidget')\n    .factory('ButtonService',\n        ['$log', 'FnService', 'IconService', 'TooltipService',\n\n        function (_$log_, _fs_, _is_, _tts_) {\n            $log = _$log_;\n            fs = _fs_;\n            is = _is_;\n            tts = _tts_;\n\n            return {\n                button: button,\n                toggle: toggle,\n                radioSet: radioSet,\n            };\n        }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $interval, fs, wss, ls;\n\n    var refreshInterval = 2000;\n\n    function buildChart(o) {\n        var handlers = {},\n            root = o.tag + 's',\n            req = o.tag + 'DataRequest',\n            resp = o.tag + 'DataResponse',\n            onResp = fs.isF(o.respCb),\n            oldChartData = [],\n            refreshPromise;\n\n        o.scope.chartData = [];\n        o.scope.changedData = [];\n        o.scope.reqParams = o.reqParams || {};\n        o.scope.autoRefresh = true;\n        o.scope.autoRefreshTip = o.lion_toggle_auto_refresh || 'Toggle auto refresh';\n\n        function respCb(data) {\n            ls.stop();\n            o.scope.chartData = data[root];\n            o.scope.annots = data.annots;\n            onResp && onResp();\n\n            if (!angular.equals(o.scope.chartData, oldChartData)) {\n                o.scope.changedData = [];\n                if (oldChartData.length) {\n                    angular.forEach(o.scope.chartData, function (item) {\n                        if (!fs.containsObj(oldChartData, item)) {\n                            o.scope.changedData.push(item);\n                        }\n                    });\n                }\n                angular.copy(o.scope.chartData, oldChartData);\n            }\n            o.scope.$apply();\n        }\n        handlers[resp] = respCb;\n        wss.bindHandlers(handlers);\n\n        function requestCb(params) {\n            var p = angular.extend({}, params, o.query);\n            if (wss.isConnected()) {\n                wss.sendEvent(req, p);\n                ls.start();\n            }\n        }\n        o.scope.requestCallback = requestCb;\n\n        function fetchDataIfNotWaiting() {\n            if (!ls.waiting()) {\n                if (fs.debugOn('widget')) {\n                    $log.debug('Refreshing ' + root + ' page');\n                }\n                requestCb(o.scope.reqParams);\n            }\n        }\n\n        function startRefresh() {\n            refreshPromise = $interval(fetchDataIfNotWaiting, refreshInterval);\n        }\n\n        function stopRefresh() {\n            if (refreshPromise) {\n                $interval.cancel(refreshPromise);\n                refreshPromise = null;\n            }\n        }\n\n        function toggleRefresh() {\n            o.scope.autoRefresh = !o.scope.autoRefresh;\n            o.scope.autoRefresh ? startRefresh() : stopRefresh();\n        }\n        o.scope.toggleRefresh = toggleRefresh;\n\n        o.scope.$on('$destroy', function () {\n            wss.unbindHandlers(handlers);\n            stopRefresh();\n            ls.stop();\n        });\n\n        requestCb(o.scope.reqParams);\n        startRefresh();\n    }\n\n    angular.module('onosWidget')\n        .factory('ChartBuilderService',\n        ['$log', '$interval', 'FnService', 'WebSocketService',\n            'LoadingService',\n\n            function (_$log_, _$interval_, _fs_, _wss_, _ls_) {\n                $log = _$log_;\n                $interval = _$interval_;\n                fs = _fs_;\n                wss = _wss_;\n                ls = _ls_;\n\n                return {\n                    buildChart: buildChart,\n                };\n            }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    function addProp(el, label, value) {\n        var tr = el.append('tr'),\n            lab;\n        if (typeof label === 'string') {\n            lab = label.replace(/_/g, ' ');\n        } else {\n            lab = label;\n        }\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n\n        addCell('label', lab + ' :');\n        addCell('value', value);\n    }\n\n    function addSep(el) {\n        el.append('tr').append('td').attr('colspan', 2).append('hr');\n    }\n\n    function listProps(el, data) {\n        var sepLast = false;\n\n        data.propOrder.forEach(function (p) {\n            if (p === '-') {\n                addSep(el);\n                sepLast = true;\n            } else {\n                addProp(el, data.propLabels[p], data.propValues[p]);\n                sepLast = false;\n            }\n        });\n        return sepLast;\n    }\n\n    angular.module('onosWidget')\n    .factory('ListService', [\n        function () {\n            return {\n                listProps: listProps,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $window, fs, mast, is;\n\n    var tableIconTdSize = 40,\n        pdg = 22,\n        flashTime = 1500,\n        colWidth = 'col-width',\n        tableIcon = 'table-icon';\n\n    var cstmWidths = {},\n        api;\n\n\n    function _width(elem, width) {\n        elem.style('width', width);\n    }\n\n    function findCstmWidths(table) {\n        var headers = table.select('.table-header').selectAll('td');\n\n        headers.each(function (d, i) {\n            var h = d3.select(this),\n                index = i.toString();\n            if (h.classed(tableIcon)) {\n                cstmWidths[index] = tableIconTdSize + 'px';\n            }\n            if (h.attr(colWidth)) {\n                cstmWidths[index] = h.attr(colWidth);\n            }\n        });\n        if (fs.debugOn('widget')) {\n            $log.debug('Headers with custom widths: ', cstmWidths);\n        }\n    }\n\n    function setTdWidths(elem, width) {\n        var tds = elem.select('tr:first-child').selectAll('td');\n        _width(elem, width + 'px');\n\n        tds.each(function (d, i) {\n            var td = d3.select(this),\n                index = i.toString();\n            if (cstmWidths.hasOwnProperty(index)) {\n                _width(td, cstmWidths[index]);\n            }\n        });\n    }\n\n    function setHeight(thead, body, height) {\n        var h = height - (mast.mastHeight() +\n            fs.noPxStyle(d3.select('.tabular-header'), 'height') +\n            fs.noPxStyle(thead, 'height') + pdg);\n        body.style('height', h + 'px');\n    }\n\n    function adjustTable(haveItems, tableElems, width, height) {\n        if (haveItems) {\n            setTdWidths(tableElems.thead, width);\n            setTdWidths(tableElems.tbody, width);\n        } else {\n            setTdWidths(tableElems.thead, width);\n            _width(tableElems.tbody, width + 'px');\n        }\n        setHeight(tableElems.thead, tableElems.table.select('.table-body'), height);\n    }\n\n    var sortState = {\n        s: {\n            first: null,\n            second: null,\n            touched: null,\n        },\n\n        reset: function () {\n            var s = sortState.s;\n            s.first && api.none(s.first.adiv);\n            s.second && api.none(s.second.adiv);\n            sortState.s = { first: null, second: null, touched: null };\n        },\n\n        touch: function (id, adiv) {\n            var s = sortState.s,\n                s1 = s.first,\n                d;\n\n            if (!s.touched) {\n                s.first = { id: id, dir: 'asc', adiv: adiv };\n                s.touched = id;\n            } else {\n                if (id === s.touched) {\n                    d = s1.dir === 'asc' ? 'desc' : 'asc';\n                    s1.dir = d;\n                    s1.adiv = adiv;\n\n                } else {\n                    s.second = s.first;\n                    s.first = { id: id, dir: 'asc', adiv: adiv };\n                    s.touched = id;\n                }\n            }\n        },\n\n        update: function () {\n            var s = sortState.s,\n                s1 = s.first,\n                s2 = s.second;\n            api[s1.dir](s1.adiv);\n            s2 && api.none(s2.adiv);\n        },\n    };\n\n\n    function updateSortDirection(thElem) {\n        var adiv = thElem.select('div'),\n            id = thElem.attr('colId');\n\n        api.none(adiv);\n        adiv = thElem.append('div');\n        sortState.touch(id, adiv);\n        sortState.update();\n    }\n\n    function sortRequestParams() {\n        var s = sortState.s,\n            s1 = s.first,\n            s2 = s.second,\n            id2 = s2 && s2.id,\n            dir2 = s2 && s2.dir;\n        return {\n            firstCol: s1.id,\n            firstDir: s1.dir,\n            secondCol: id2,\n            secondDir: dir2,\n        };\n    }\n\n    angular.module('onosWidget')\n    .directive('onosTableResize', ['$log', '$window', 'FnService', 'MastService',\n\n        function (_$log_, _$window_, _fs_, _mast_) {\n        return function (scope, element) {\n            $log = _$log_;\n            $window = _$window_;\n            fs = _fs_;\n            mast = _mast_;\n\n            var table = d3.select(element[0]),\n                tableElems = {\n                    table: table,\n                    thead: table.select('.table-header').select('table'),\n                    tbody: table.select('.table-body').select('table'),\n                },\n                wsz;\n\n            findCstmWidths(table);\n\n            scope.$watchCollection(function () {\n                return {\n                    h: $window.innerHeight,\n                    w: $window.innerWidth,\n                };\n            }, function () {\n                wsz = fs.windowSize(0, 30);\n                adjustTable(\n                    scope.tableData.length,\n                    tableElems,\n                    wsz.width, wsz.height\n                );\n            });\n\n            scope.$watchCollection('tableData', function () {\n                adjustTable(\n                    scope.tableData.length,\n                    tableElems,\n                    wsz.width, wsz.height\n                );\n            });\n\n            scope.$on('$destroy', function () {\n                cstmWidths = {};\n            });\n        };\n    }])\n\n    .directive('onosSortableHeader', ['$log', 'IconService',\n        function (_$log_, _is_) {\n        return function (scope, element) {\n            $log = _$log_;\n            is = _is_;\n            var header = d3.select(element[0]);\n\n            api = is.sortIcons();\n\n            header.selectAll('td').on('click', function () {\n                var col = d3.select(this);\n\n                if (col.attr('sortable') === '') {\n                    updateSortDirection(col);\n                    scope.sortParams = sortRequestParams();\n                    scope.sortCallback(scope.sortParams);\n                }\n            });\n\n            scope.$on('$destroy', function () {\n                sortState.reset();\n            });\n        };\n    }])\n\n    .directive('onosFlashChanges',\n        ['$log', '$parse', '$timeout', 'FnService',\n        function ($log, $parse, $timeout, fs) {\n\n        return function (scope, element, attrs) {\n            var idProp = attrs.idProp,\n                table = d3.select(element[0]),\n                trs, promise;\n\n            function highlightRows() {\n                var changedRows = [];\n                function classRows(b) {\n                    if (changedRows.length) {\n                        angular.forEach(changedRows, function (tr) {\n                            tr.classed('data-change', b);\n                        });\n                    }\n                }\n                $timeout(function () {\n                    if (scope.tableData.length) {\n                        trs = table.selectAll('tr');\n                    }\n\n                    if (trs && !trs.empty()) {\n                        trs.each(function () {\n                            var tr = d3.select(this);\n                            if (fs.find(tr.attr('row-id'),\n                                    scope.changedData,\n                                    idProp) > -1) {\n                                changedRows.push(tr);\n                            }\n                        });\n                        classRows(true);\n                        promise = $timeout(function () {\n                            classRows(false);\n                        }, flashTime);\n                        trs = undefined;\n                    }\n                });\n            }\n\n            scope.$on('ngRepeatComplete', highlightRows);\n            scope.$watchCollection('changedData', highlightRows);\n\n            scope.$on('$destroy', function () {\n                if (promise) {\n                    $timeout.cancel(promise);\n                }\n            });\n        };\n    }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $interval, fs, wss, ls;\n\n    var refreshInterval = 2000;\n\n\n\n    function buildTable(o) {\n        var handlers = {},\n            root = o.tag + 's',\n            req = o.tag + 'DataRequest',\n            resp = o.tag + 'DataResponse',\n            onSel = fs.isF(o.selCb),\n            onResp = fs.isF(o.respCb),\n            idKey = o.idKey || 'id',\n            oldTableData = [],\n            refreshPromise;\n\n        o.scope.tableData = [];\n        o.scope.changedData = [];\n        o.scope.sortParams = o.sortParams || {};\n        o.scope.autoRefresh = true;\n        o.scope.autoRefreshTip = o.lion_toggle_auto_refresh || 'Toggle auto refresh';\n\n\n        function tableDataResponseCb(data) {\n            ls.stop();\n            o.scope.tableData = data[root];\n            o.scope.annots = data.annots;\n            onResp && onResp();\n\n            if (!angular.equals(o.scope.tableData, oldTableData)) {\n                o.scope.changedData = [];\n                if (oldTableData.length) {\n                    angular.forEach(o.scope.tableData, function (item) {\n                        if (!fs.containsObj(oldTableData, item)) {\n                            o.scope.changedData.push(item);\n                        }\n                    });\n                }\n                angular.copy(o.scope.tableData, oldTableData);\n            }\n            o.scope.$apply();\n        }\n        handlers[resp] = tableDataResponseCb;\n        wss.bindHandlers(handlers);\n\n        function requestTableData() {\n            var sortParams = o.scope.sortParams,\n                pp = fs.isO(o.scope.payloadParams),\n                payloadParams = pp || {},\n                p = angular.extend({}, sortParams, payloadParams, o.query);\n\n            if (wss.isConnected()) {\n                if (fs.debugOn('table')) {\n                    $log.debug('Table data REQUEST:', req, p);\n                }\n                wss.sendEvent(req, p);\n                ls.start();\n            }\n        }\n        o.scope.sortCallback = requestTableData;\n\n\n        function rowSelectionCb($event, selRow) {\n            var selId = selRow[idKey];\n            o.scope.selId = (o.scope.selId === selId) ? null : selId;\n            onSel && onSel($event, selRow);\n        }\n        o.scope.selectCallback = rowSelectionCb;\n\n        function fetchDataIfNotWaiting() {\n            if (!ls.waiting()) {\n                if (fs.debugOn('widget')) {\n                    $log.debug('Refreshing ' + root + ' page');\n                }\n                requestTableData();\n            }\n        }\n\n        function startRefresh() {\n            refreshPromise = $interval(fetchDataIfNotWaiting, refreshInterval);\n        }\n\n        function stopRefresh() {\n            if (refreshPromise) {\n                $interval.cancel(refreshPromise);\n                refreshPromise = null;\n            }\n        }\n\n        function toggleRefresh() {\n            o.scope.autoRefresh = !o.scope.autoRefresh;\n            o.scope.autoRefresh ? startRefresh() : stopRefresh();\n        }\n        o.scope.toggleRefresh = toggleRefresh;\n\n        o.scope.$on('$destroy', function () {\n            wss.unbindHandlers(handlers);\n            stopRefresh();\n            ls.stop();\n        });\n\n        requestTableData();\n        startRefresh();\n\n        return {\n            forceRefesh: requestTableData,\n        };\n    }\n\n    angular.module('onosWidget')\n        .factory('TableBuilderService',\n        ['$log', '$interval', 'FnService', 'WebSocketService',\n            'LoadingService',\n\n            function (_$log_, _$interval_, _fs_, _wss_, _ls_) {\n                $log = _$log_;\n                $interval = _$interval_;\n                fs = _fs_;\n                wss = _wss_;\n                ls = _ls_;\n\n                return {\n                    buildTable: buildTable,\n                };\n            }]);\n\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, fs;\n\n\n\n    function noop() {}\n\n    function buildBasePanel(opts) {\n        var popTopF = fs.isF(opts.popTop) || noop,\n            popMidF = fs.isF(opts.popMid) || noop,\n            popBotF = fs.isF(opts.popBot) || noop;\n\n        $log.debug('options are', opts);\n\n\n    }\n\n\n    angular.module('onosWidget')\n    .factory('TableDetailService',\n    ['$log', 'FnService',\n\n    function (_$log_, _fs_) {\n        $log = _$log_;\n        fs = _fs_;\n\n        return {\n            buildBasePanel: buildBasePanel,\n        };\n    }]);\n}());\n","\n\n\n(function () {\n    'use strict';\n\n    var $log, fs, ps, bns, is;\n\n    var arrowSize = 10,\n        sepWidth = 6,\n        defaultSettings = {\n            edge: 'left',\n            width: 20,\n            margin: 0,\n            hideMargin: -20,\n            top: 'auto',\n            bottom: '10px',\n            fade: false,\n            shown: false,\n        };\n\n    var tbars = {};\n\n\n\n    function rotateArrowLeft(adiv) {\n        adiv.select('g')\n            .attr('transform', 'translate(0 50) rotate(-90)');\n    }\n    function rotateArrowRight(adiv) {\n        adiv.select('g')\n            .attr('transform', 'translate(50 0) rotate(90)');\n    }\n\n    function createArrow(panel) {\n        var arrowDiv = panel.append('div')\n            .classed('tbar-arrow', true);\n        is.loadIcon(arrowDiv, 'triangleUp', arrowSize, true);\n        return arrowDiv;\n    }\n\n    function warn(msg, id) {\n        $log.warn('createToolbar: ' + msg + ': [' + id + ']');\n        return null;\n    }\n\n\n    function createToolbar(id, opts) {\n        if (!id) return warn('no ID given');\n        if (tbars[id]) return warn('duplicate ID given', id);\n\n        var settings = angular.extend({}, defaultSettings, fs.isO(opts)),\n            items = {},\n            tbid = 'toolbar-' + id,\n            panel = ps.createPanel(tbid, settings),\n            arrowDiv = createArrow(panel),\n            currentRow = panel.append('div').classed('tbar-row', true),\n            rowButtonIds = [], \n            tbWidth = arrowSize + 2, \n            maxWidth = panel.width();\n\n        arrowDiv.on('click', toggle);\n\n        tbars[id] = {\n            settings: settings,\n            items: items,\n            panel: panel,\n            panelId: tbid,\n        };\n\n        panel.classed('toolbar', true)\n            .style('top', settings.top)\n            .style('bottom', settings.bottom);\n\n\n        function dupId(id, caller) {\n            if (items[id]) {\n                $log.warn(caller + ': duplicate ID:', id);\n                return true;\n            }\n            return false;\n        }\n\n        function adjustWidth(btnWidth) {\n            if (fs.noPxStyle(currentRow, 'width') + 0.1 >= maxWidth) {\n                tbWidth += btnWidth;\n                maxWidth = tbWidth;\n            }\n            panel.width(tbWidth);\n        }\n\n\n        function addButton(id, gid, cb, tooltip) {\n            if (dupId(id, 'addButton')) return null;\n\n            var bid = tbid + '-' + id,\n                btn = bns.button(currentRow, bid, gid, cb, tooltip);\n\n            items[id] = btn;\n            adjustWidth(btn.width());\n            return btn;\n        }\n\n        function addToggle(id, gid, initState, cb, tooltip) {\n            if (dupId(id, 'addToggle')) return null;\n\n            var tid = tbid + '-' + id,\n                tog = bns.toggle(currentRow, tid, gid, initState, cb, tooltip);\n\n            items[id] = tog;\n            adjustWidth(tog.width());\n            return tog;\n        }\n\n        function addRadioSet(id, rset) {\n            if (dupId(id, 'addRadioSet')) return null;\n\n            var rid = tbid + '-' + id,\n                rad = bns.radioSet(currentRow, rid, rset);\n\n            items[id] = rad;\n            adjustWidth(rad.width());\n            return rad;\n        }\n\n        function addSeparator() {\n            currentRow.append('div')\n                .classed('separator', true);\n            tbWidth += sepWidth;\n        }\n\n        function addRow() {\n            if (currentRow.select('div').empty()) {\n                return null;\n            } else {\n                panel.append('br');\n                currentRow = panel.append('div').classed('tbar-row', true);\n\n                return {\n                    clear: rowClear,\n                    setText: rowSetText,\n                    addButton: rowAddButton,\n                    classed: rowClassed,\n                };\n            }\n        }\n\n        function rowClear() {\n            currentRow.selectAll('*').remove();\n            rowButtonIds.forEach(function (bid) {\n                delete items[bid];\n            });\n            rowButtonIds = [];\n        }\n\n        function rowSetText(text) {\n            rowClear();\n            currentRow.append('div').classed('tbar-row-text', true)\n                .text(text);\n        }\n\n        function rowAddButton(id, gid, cb, tooltip) {\n            var b = addButton(id, gid, cb, tooltip);\n            if (b) {\n                rowButtonIds.push(id);\n            }\n        }\n\n        function rowClassed(classes, bool) {\n            currentRow.classed(classes, bool);\n        }\n\n        function show(cb) {\n            rotateArrowLeft(arrowDiv);\n            panel.show(cb);\n        }\n\n        function hide(cb) {\n            rotateArrowRight(arrowDiv);\n            panel.hide(cb);\n        }\n\n        function toggle(cb) {\n            if (panel.isVisible()) {\n                hide(cb);\n            } else {\n                show(cb);\n            }\n        }\n\n        function isVisible() {\n            return panel.isVisible();\n        }\n\n        return {\n            addButton: addButton,\n            addToggle: addToggle,\n            addRadioSet: addRadioSet,\n            addSeparator: addSeparator,\n            addRow: addRow,\n\n            show: show,\n            hide: hide,\n            toggle: toggle,\n            isVisible: isVisible,\n        };\n    }\n\n    function destroyToolbar(id) {\n        var tb = tbars[id];\n        delete tbars[id];\n\n        if (tb) {\n            ps.destroyPanel(tb.panelId);\n        }\n    }\n\n\n    angular.module('onosWidget')\n    .factory('ToolbarService',\n        ['$log', 'FnService', 'PanelService', 'ButtonService', 'IconService',\n\n        function (_$log_, _fs_, _ps_, _bns_, _is_) {\n            $log = _$log_;\n            fs = _fs_;\n            ps = _ps_;\n            bns = _bns_;\n            is = _is_;\n\n            function init() {\n                tbars = {};\n            }\n\n            return {\n                init: init,\n                createToolbar: createToolbar,\n                destroyToolbar: destroyToolbar,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $rootScope, fs;\n\n    var hoverHeight = 35,\n        hoverDelay = 150,\n        exitDelay = 150;\n\n    var tooltip, currElemId;\n\n\n    function init() {\n        tooltip = d3.select('#tooltip');\n        tooltip.text('');\n    }\n\n    function tipStyle(mouseX, mouseY) {\n        var winWidth = fs.windowSize().width,\n            winHeight = fs.windowSize().height,\n            style = {\n                display: 'inline-block',\n                left: 'auto',\n                right: 'auto',\n            };\n\n        if (mouseX <= (winWidth / 2)) {\n            style.left = mouseX + 'px';\n        } else {\n            style.right = (winWidth - mouseX) + 'px';\n        }\n\n        if (mouseY <= (winHeight / 2)) {\n            style.top = (mouseY + (hoverHeight - 10)) + 'px';\n        } else {\n            style.top = (mouseY - hoverHeight) + 'px';\n        }\n\n        return style;\n    }\n\n\n    function addTooltip(elem, tooltip) {\n        elem.on('mouseover', function () { showTooltip(this, tooltip); });\n        elem.on('mouseout', function () { cancelTooltip(this); });\n        $rootScope.$on('$routeChangeStart', function () {\n            cancelTooltip(elem.node());\n        });\n    }\n\n    function showTooltip(el, msg) {\n        if (!el || !msg || fs.isMobile()) {\n            return;\n        }\n\n        var elem = d3.select(el),\n            mouseX = d3.event.pageX,\n            mouseY = d3.event.pageY,\n            style = tipStyle(mouseX, mouseY),\n            ttMsg = fs.isF(msg) ? msg() : msg;\n\n        currElemId = elem.attr('id');\n\n        tooltip.transition()\n            .delay(hoverDelay)\n            .each('start', function () {\n                d3.select(this).style('display', 'none');\n            })\n            .each('end', function () {\n                d3.select(this).style(style)\n                    .text(ttMsg);\n            });\n    }\n\n    function cancelTooltip(el) {\n        if (!el) {\n            return;\n        }\n        var elem = d3.select(el);\n\n        if (elem.attr('id') === currElemId) {\n            tooltip.transition()\n                .delay(exitDelay)\n                .style({\n                    display: 'none',\n                })\n                .text('');\n        }\n    }\n\n    angular.module('onosWidget')\n\n        .directive('tooltip', ['$rootScope', 'FnService',\n            function (_$rootScope_, _fs_) {\n                $rootScope = _$rootScope_;\n                fs = _fs_;\n\n                init();\n\n                return {\n                    restrict: 'A',\n                    link: function (scope, elem, attrs) {\n                        addTooltip(d3.select(elem[0]), scope[attrs.ttMsg]);\n                    },\n                };\n        }])\n\n        .factory('TooltipService', ['$rootScope', 'FnService',\n            function (_$rootScope_, _fs_) {\n                $rootScope = _$rootScope_;\n                fs = _fs_;\n\n                init();\n\n                return {\n                    addTooltip: addTooltip,\n                    showTooltip: showTooltip,\n                    cancelTooltip: cancelTooltip,\n                };\n            }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, wss, fs, ks, ps, is, ls;\n\n    var detailsPanel,\n        pStartY,\n        pHeight,\n        top,\n        middle,\n        bottom,\n        wSize = false,\n        activateImmediately = '';\n\n    var INSTALLED = 'INSTALLED',\n        ACTIVE = 'ACTIVE',\n        appMgmtReq = 'appManagementRequest',\n        topPdg = 60,\n        panelWidth = 540,\n        pName = 'application-details-panel',\n        detailsReq = 'appDetailsRequest',\n        detailsResp = 'appDetailsResponse',\n        fileUploadUrl = 'applications/upload',\n        activateOption = '?activate=true',\n        appUrlPrefix = 'rs/applications/',\n        iconUrlSuffix = '/icon',\n        downloadSuffix = '/download',\n        dialogId = 'app-dialog',\n        dialogOpts = {\n            edge: 'right',\n            width: 400,\n        },\n        strongWarning = {\n            'org.onosproject.drivers': true,\n        },\n        propOrder = ['id', 'state', 'category', 'version', 'origin', 'role'];\n\n    var warnDeactivate,\n        warnOwnRisk,\n        friendlyProps,\n        lion;\n\n    function doLion() {\n        lion = ls.bundle('core.view.App');\n\n        warnDeactivate = lion('dlg_warn_deactivate');\n        warnOwnRisk = lion('dlg_warn_own_risk');\n\n        friendlyProps = [\n            lion('app_id'), lion('state'), lion('category'), lion('version'),\n            lion('origin'), lion('role'),\n        ];\n    }\n\n    function createDetailsPane() {\n        detailsPanel = ps.createPanel(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n        });\n        detailsPanel.el().style({\n            position: 'absolute',\n            top: pStartY + 'px',\n        });\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n        detailsPanel.hide();\n    }\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    function addCloseBtn(div) {\n        is.loadEmbeddedIcon(div, 'close', 26);\n        div.on('click', closePanel);\n    }\n\n    function setUpPanel() {\n        var container, closeBtn, div;\n\n        detailsPanel.empty();\n        detailsPanel.width(panelWidth);\n\n        container = detailsPanel.append('div').classed('container', true);\n\n        top = container.append('div').classed('top', true);\n        closeBtn = top.append('div').classed('close-btn', true);\n        addCloseBtn(closeBtn);\n\n        div = top.append('div').classed('top-content', true);\n\n        function ndiv(cls, tcls) {\n            var d = div.append('div').classed(cls, true);\n            if (tcls) {\n                d.append('table').classed(tcls, true);\n            }\n        }\n\n        ndiv('app-title');\n        ndiv('left app-icon');\n        ndiv('right', 'app-props');\n        ndiv('app-url');\n\n        container.append('hr');\n\n        middle = container.append('div').classed('middle', true);\n        middle.append('div').classed('app-readme', true);\n\n        container.append('hr');\n\n        bottom = container.append('div').classed('bottom', true);\n\n        function nTable(hdr, cls) {\n            bottom.append('h2').text(hdr);\n            bottom.append('div').classed(cls, true).append('table');\n        }\n\n        nTable(lion('dp_features'), 'features');\n        nTable(lion('dp_required_apps'), 'required-apps');\n        nTable(lion('dp_permissions'), 'permissions');\n    }\n\n    function addProp(tbody, index, value) {\n        var tr = tbody.append('tr');\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n\n        addCell('label', friendlyProps[index] + ':');\n        addCell('value', value);\n    }\n\n    function urlize(u) {\n        u = fs.sanitize(u);\n        return '<a href=\"' + u + '\" target=\"_blank\">' + u + '</a>';\n    }\n\n    function addIcon(elem, value) {\n        elem.append('img').attr('src', appUrlPrefix + value + iconUrlSuffix);\n    }\n\n    function populateTop(details) {\n        var propsBody = top.select('.app-props').append('tbody'),\n            url = details.url;\n\n        top.select('.app-title').text(details.title);\n\n        addIcon(top.select('.app-icon'), details.id);\n\n        propOrder.forEach(function (prop, i) {\n            addProp(propsBody, i, details[prop]);\n        });\n\n        if (url) {\n            top.select('.app-url').html(urlize(url));\n        }\n    }\n\n    function populateMiddle(details) {\n        middle.select('.app-readme').text(details.readme);\n    }\n\n    function populateBottom(details) {\n\n        function addItems(cls, items) {\n            var table = bottom.select('.' + cls).select('table'),\n                tbody = table.append('tbody');\n\n            items.forEach(function (item) {\n                tbody.append('tr').append('td').text(item);\n            });\n        }\n\n        addItems('features', details.features);\n        addItems('required-apps', details.required_apps);\n        addItems('permissions', details.permissions);\n    }\n\n    function populateDetails(details) {\n        setUpPanel();\n        populateTop(details);\n        populateMiddle(details);\n        populateBottom(details);\n        detailsPanel.height(pHeight);\n    }\n\n    function respDetailsCb(data) {\n        $scope.panelData = data.details;\n        $scope.selId = data.details.id;\n        $scope.ctrlBtnState.selection = data.details.id;\n        $scope.$apply();\n    }\n\n    angular.module('ovApp', [])\n    .controller('OvAppCtrl',\n        ['$log', '$scope', '$http', '$timeout',\n         'WebSocketService', 'FnService', 'KeyService', 'PanelService',\n         'IconService', 'UrlFnService', 'DialogService', 'TableBuilderService',\n         'LionService',\n\n    function (_$log_, _$scope_, $http, $timeout, _wss_, _fs_, _ks_, _ps_, _is_,\n              ufs, ds, tbs, _ls_) {\n        $log = _$log_;\n        $scope = _$scope_;\n        wss = _wss_;\n        fs = _fs_;\n        ks = _ks_;\n        ps = _ps_;\n        is = _is_;\n        ls = _ls_;\n\n        doLion();\n\n        $scope.lion = lion;\n\n        $scope.panelData = {};\n        $scope.ctrlBtnState = {};\n        $scope.uploadTip = lion('tt_ctl_upload');\n        $scope.activateTip = lion('tt_ctl_activate');\n        $scope.deactivateTip = lion('tt_ctl_deactivate');\n        $scope.uninstallTip = lion('tt_ctl_uninstall');\n        $scope.downloadTip = lion('tt_ctl_download');\n\n\n        var handlers = {};\n\n        handlers[detailsResp] = respDetailsCb;\n        wss.bindHandlers(handlers);\n\n        function selCb($event, row) {\n            $scope.ctrlBtnState.selection = !!$scope.selId;\n            refreshCtrls();\n            ds.closeDialog(); \n\n            if ($scope.selId) {\n                wss.sendEvent(detailsReq, { id: row.id });\n            } else {\n                $scope.hidePanel();\n            }\n        }\n\n        function refreshCtrls() {\n            var row, rowIdx;\n            if ($scope.ctrlBtnState.selection) {\n                rowIdx = fs.find($scope.selId, $scope.tableData);\n                row = rowIdx >= 0 ? $scope.tableData[rowIdx] : null;\n\n                $scope.ctrlBtnState.installed = row && row.state === INSTALLED;\n                $scope.ctrlBtnState.active = row && row.state === ACTIVE;\n            } else {\n                $scope.ctrlBtnState.installed = false;\n                $scope.ctrlBtnState.active = false;\n            }\n        }\n\n        tbs.buildTable({\n            scope: $scope,\n            tag: 'app',\n            selCb: selCb,\n            respCb: refreshCtrls,\n            sortParams: {\n                firstCol: 'state',\n                firstDir: 'desc',\n                secondCol: 'title',\n                secondDir: 'asc',\n            },\n            lion_toggle_auto_refresh: lion('tt_ctl_auto_refresh'),\n        });\n\n        ks.keyBindings({\n            esc: [$scope.selectCallback, lion('qh_hint_esc')],\n            _helpFormat: ['esc'],\n        });\n        ks.gestureNotes([\n            [lion('click_row'), lion('qh_hint_click_row')],\n            [lion('scroll_down'), lion('qh_hint_scroll_down')],\n        ]);\n\n        function createConfirmationText(action, itemId) {\n            var content = ds.createDiv();\n            content.append('p').text(lion(action) + ' ' + itemId);\n            if (strongWarning[itemId]) {\n                content.append('p').html(\n                    fs.sanitize(warnDeactivate) +\n                    '<br>' +\n                    fs.sanitize(warnOwnRisk)\n                ).classed('strong', true);\n            }\n            return content;\n        }\n\n        function confirmAction(action) {\n            var itemId = $scope.selId,\n                spar = $scope.sortParams;\n\n            function dOk() {\n                $log.debug('Initiating', action, 'of', itemId);\n                wss.sendEvent(appMgmtReq, {\n                    action: action,\n                    name: itemId,\n                    sortCol: spar.sortCol,\n                    sortDir: spar.sortDir,\n                });\n                if (action === 'uninstall') {\n                    detailsPanel.hide();\n                } else {\n                    wss.sendEvent(detailsReq, { id: itemId });\n                }\n            }\n\n            function dCancel() {\n                $log.debug('Canceling', action, 'of', itemId);\n            }\n\n            ds.openDialog(dialogId, dialogOpts)\n                .setTitle(lion('dlg_confirm_action'))\n                .addContent(createConfirmationText(action, itemId))\n                .addOk(dOk)\n                .addCancel(dCancel)\n                .bindKeys();\n        }\n\n        $scope.appAction = function (action) {\n            if ($scope.ctrlBtnState.selection) {\n                confirmAction(action);\n            }\n        };\n\n        $scope.downloadApp = function () {\n            if ($scope.ctrlBtnState.selection) {\n                window.location = appUrlPrefix + $scope.selId + downloadSuffix;\n            }\n        };\n\n        $scope.$on('FileChanged', function () {\n            var formData = new FormData(),\n                url;\n\n            if ($scope.appFile) {\n                formData.append('file', $scope.appFile);\n                url = fileUploadUrl + activateImmediately;\n\n                $http.post(ufs.rsUrl(url), formData, {\n                    transformRequest: angular.identity,\n                    headers: {\n                        'Content-Type': undefined,\n                    },\n                })\n                .finally(function () {\n                    activateImmediately = '';\n                    $scope.sortCallback($scope.sortParams);\n                    document.getElementById('inputFileForm').reset();\n                    $timeout(function () { wss.sendEvent(detailsReq); }, 250);\n                });\n            }\n        });\n\n        $scope.appDropped = function () {\n            activateImmediately = activateOption;\n            $scope.$emit('FileChanged');\n            $scope.appFile = null;\n        };\n\n        $scope.$on('$destroy', function () {\n            ks.unbindKeys();\n            wss.unbindHandlers(handlers);\n            ds.closeDialog();\n        });\n\n        Object.defineProperty($scope, 'queryFilter', {\n            get: function () {\n                var out = {};\n                out[$scope.queryBy || '$'] = $scope.queryTxt;\n                return out;\n            },\n        });\n\n\n        $log.log('OvAppCtrl has been created');\n    }])\n\n    .directive('triggerForm', function () {\n        return {\n            restrict: 'A',\n            link: function (scope, elem) {\n                elem.bind('click', function () {\n                    document.getElementById('uploadFile')\n                        .dispatchEvent(new MouseEvent('click'));\n                });\n            },\n        };\n    })\n\n    .directive('fileModel', ['$parse',\n        function ($parse) {\n            return {\n                restrict: 'A',\n                link: function (scope, elem, attrs) {\n                    var model = $parse(attrs.fileModel),\n                        modelSetter = model.assign;\n\n                    elem.bind('change', function () {\n                        scope.$apply(function () {\n                            modelSetter(scope, elem[0].files[0]);\n                        });\n                        scope.$emit('FileChanged');\n                    });\n                },\n            };\n        }])\n\n    .directive('filedrop', ['$parse', '$document', function ($parse, $document) {\n        return {\n            restrict: 'A',\n            link: function (scope, element, attrs) {\n                var onAppDrop = $parse(attrs.onFileDrop);\n\n                var onDragOver = function (e) {\n                    d3.select('#frame').classed('dropping', true);\n                    e.preventDefault();\n                };\n\n                var onDragEnd = function (e) {\n                    d3.select('#frame').classed('dropping', false);\n                    e.preventDefault();\n                };\n\n                var loadFile = function (file) {\n                    scope.appFile = file;\n                    scope.$apply(onAppDrop(scope));\n                };\n\n                $document.bind('dragover', onDragOver);\n\n                element.bind('dragleave', onDragEnd)\n                    .bind('drop', function (e) {\n                        $log.info('Drag leave', e);\n                        loadFile(e.dataTransfer.files[0]);\n                        onDragEnd(e);\n                    });\n            },\n        };\n    }])\n\n    .directive('applicationDetailsPanel',\n        ['$rootScope', '$window', '$timeout', 'KeyService',\n        function ($rootScope, $window, $timeout, ks) {\n            return function (scope) {\n                var unbindWatch;\n\n                function heightCalc() {\n                    pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                                           + topPdg;\n                    wSize = fs.windowSize(pStartY);\n                    pHeight = wSize.height;\n                }\n\n                function initPanel() {\n                    heightCalc();\n                    createDetailsPane();\n                    $log.debug('start to initialize panel!');\n                }\n\n                if (scope.onos.browser === 'safari') {\n                    $timeout(initPanel);\n                } else {\n                    initPanel();\n                }\n                ks.keyBindings({\n                    esc: [closePanel, lion('qh_hint_close_detail')],\n                    _helpFormat: ['esc'],\n                });\n\n                ks.gestureNotes([\n                    [lion('click_row'), lion('qh_hint_click_row')],\n                    [lion('scroll_down'), lion('qh_hint_scroll_down')],\n                ]);\n\n                scope.$watch('panelData', function () {\n                    if (!fs.isEmptyObject(scope.panelData)) {\n                        populateDetails(scope.panelData);\n                        detailsPanel.show();\n                    }\n                });\n\n                unbindWatch = $rootScope.$watchCollection(\n                    function () {\n                        return {\n                            h: $window.innerHeight,\n                            w: $window.innerWidth,\n                        };\n                    }, function () {\n                        if (!fs.isEmptyObject(scope.panelData)) {\n                            heightCalc();\n                            populateDetails(scope.panelData);\n                        }\n                    }\n                );\n\n                scope.$on('$destroy', function () {\n                    unbindWatch();\n                    ks.unbindKeys();\n                    ps.destroyPanel(pName);\n                });\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, fs, mast, ps, is, wss;\n\n    var detailsPanel,\n        pStartY,\n        pHeight,\n        top,\n        topTable,\n        bottom,\n        iconDiv,\n        wSize;\n\n\n    var topPdg = 28,\n        ctnrPdg = 24,\n        scrollSize = 17,\n        portsTblPdg = 50,\n        pName = 'cluster-details-panel',\n        detailsReq = 'clusterDetailsRequest',\n        detailsResp = 'clusterDetailsResponse',\n        propOrder = [\n            'id', 'ip',\n        ],\n        deviceCols = [\n            'id', 'type', 'chassisid', 'mfr',\n            'hw', 'sw', 'protocol', 'serial',\n        ];\n\n    function getLionProps() {\n        var l = $scope.lion;\n        return [\n            l('node_id'),\n            l('ip_address'),\n        ];\n    }\n\n    function getLionDeviceCols() {\n        var l = $scope.lion;\n        return [\n            l('uri'),\n            l('type'),\n            l('chassis_id'),\n            l('vendor'),\n            l('hw_version'),\n            l('sw_version'),\n            l('protocol'),\n            l('serial_number'),\n        ];\n    }\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    function addCloseBtn(div) {\n        is.loadEmbeddedIcon(div, 'close', 20);\n        div.on('click', closePanel);\n    }\n\n    function handleEscape() {\n        return closePanel();\n    }\n\n    function setUpPanel() {\n        var container, closeBtn;\n        detailsPanel.empty();\n\n        container = detailsPanel.append('div').classed('container', true);\n\n        top = container.append('div').classed('top', true);\n        closeBtn = top.append('div').classed('close-btn', true);\n        addCloseBtn(closeBtn);\n        iconDiv = top.append('div').classed('dev-icon', true);\n        top.append('h2');\n        topTable = top.append('div').classed('top-content', true)\n            .append('table');\n        top.append('hr');\n\n        bottom = container.append('div').classed('bottom', true);\n        bottom.append('h2').classed('devices-title', true).text('Devices');\n        bottom.append('table');\n    }\n\n    function addProp(tbody, label, value) {\n        var tr = tbody.append('tr');\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n        addCell('label', label + ' :');\n        addCell('value', value);\n    }\n\n    function populateTop(details) {\n        var propLabels = getLionProps();\n\n        is.loadEmbeddedIcon(iconDiv, 'node', 40);\n        top.select('h2').text(details.id);\n\n        var tbody = topTable.append('tbody');\n\n        propOrder.forEach(function (prop, i) {\n            addProp(tbody, propLabels[i], details[prop]);\n        });\n    }\n\n    function addDeviceRow(tbody, device) {\n        var tr = tbody.append('tr');\n\n        deviceCols.forEach(function (col) {\n            tr.append('td').text(device[col]);\n        });\n    }\n\n    function populateBottom(devices) {\n        var table = bottom.select('table'),\n            theader = table.append('thead').append('tr'),\n            tbody = table.append('tbody'),\n            tbWidth, tbHeight;\n\n        getLionDeviceCols().forEach(function (col) {\n            theader.append('th').text(col);\n        });\n        devices.forEach(function (device) {\n            addDeviceRow(tbody, device);\n        });\n\n        tbWidth = fs.noPxStyle(tbody, 'width') + scrollSize;\n        tbHeight = pHeight\n                    - (fs.noPxStyle(detailsPanel.el()\n                                        .select('.top'), 'height')\n                    + fs.noPxStyle(detailsPanel.el()\n                                        .select('.devices-title'), 'height')\n                    + portsTblPdg);\n\n        table.style({\n            height: tbHeight + 'px',\n            width: tbWidth + 'px',\n            overflow: 'auto',\n            display: 'block',\n        });\n\n        detailsPanel.width(tbWidth + ctnrPdg);\n    }\n\n    function createDetailsPane() {\n        detailsPanel = ps.createPanel(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n        });\n        detailsPanel.el().style({\n            position: 'absolute',\n            top: pStartY + 'px',\n        });\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n        detailsPanel.hide();\n    }\n\n    function populateDetails(details) {\n        setUpPanel();\n\n        populateTop(details);\n        populateBottom(details.devices);\n        detailsPanel.height(pHeight);\n    }\n\n    function respDetailsCb(data) {\n        $scope.panelData = data.details;\n        $scope.$apply();\n    }\n\n\n    angular.module('ovCluster', [])\n        .controller('OvClusterCtrl',\n        ['$log', '$scope', 'FnService', 'MastService',\n        'PanelService', 'IconService', 'WebSocketService',\n        'LionService', 'TableBuilderService',\n\n    function (_$log_, _$scope_, _fs_, _mast_, _ps_, _is_, _wss_, lion, tbs) {\n            var handlers = {};\n\n            $log = _$log_;\n            $scope = _$scope_;\n            fs = _fs_;\n            mast = _mast_;\n            ps = _ps_;\n            is = _is_;\n            wss = _wss_;\n\n            $scope.lion = lion.bundle('core.view.Cluster');\n            $scope.panelData = {};\n\n            tbs.buildTable({\n                scope: $scope,\n                selCb: selCb,\n                tag: 'cluster',\n            });\n\n        handlers[detailsResp] = respDetailsCb;\n        wss.bindHandlers(handlers);\n\n        function selCb($event, row) {\n            if ($scope.selId) {\n                wss.sendEvent(detailsReq, { id: row.id });\n            } else {\n                $scope.hidePanel();\n            }\n            $log.debug('Got a click on:', row);\n        }\n\n        $scope.$on('$destroy', function () {\n            wss.unbindHandlers(handlers);\n        });\n\n        $log.log('OvClusterCtrl has been created');\n    }])\n\n    .directive('clusterDetailsPanel',\n    ['$rootScope', '$window', '$timeout', 'KeyService',\n    function ($rootScope, $window, $timeout, ks) {\n        return function (scope) {\n            var unbindWatch,\n                lion = scope.lion;\n\n            function heightCalc() {\n                pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                                        + mast.mastHeight() + topPdg;\n                wSize = fs.windowSize(pStartY);\n                pHeight = wSize.height;\n            }\n\n            function initPanel() {\n                heightCalc();\n                createDetailsPane();\n            }\n\n            if (scope.onos.browser === 'safari') {\n                $timeout(initPanel);\n            } else {\n                initPanel();\n            }\n            ks.keyBindings({\n                esc: [handleEscape, lion('qh_hint_close_detail')],\n                _helpFormat: ['esc'],\n            });\n            ks.gestureNotes([\n                [lion('click'), lion('qh_hint_click')],\n                [lion('scroll_down'), lion('qh_hint_scroll_down')],\n            ]);\n            scope.$watch('panelData', function () {\n                if (!fs.isEmptyObject(scope.panelData)) {\n                    populateDetails(scope.panelData);\n                    detailsPanel.show();\n                }\n            });\n\n            unbindWatch = $rootScope.$watchCollection(\n                function () {\n                    return {\n                        h: $window.innerHeight,\n                        w: $window.innerWidth,\n                    };\n                }, function () {\n                    if (!fs.isEmptyObject(scope.panelData)) {\n                        heightCalc();\n                        populateDetails(scope.panelData);\n                    }\n                }\n            );\n\n            scope.$on('$destroy', function () {\n                unbindWatch();\n                ps.destroyPanel(pName);\n            });\n        };\n    }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $loc, fs, mast, ps, wss, is, ns, ks, dps;\n\n    var detailsPanel,\n        pStartY,\n        pHeight,\n        top,\n        wSize,\n        device;\n\n    var topPdg = 28,\n        ctnrPdg = 24,\n        scrollSize = 17,\n        portsTblPdg = 50,\n\n        pName = 'device-details-panel',\n        detailsReq = 'deviceDetailsRequest',\n        detailsResp = 'deviceDetailsResponse',\n        nameChangeReq = 'deviceNameChangeRequest',\n        nameChangeResp = 'deviceNameChangeResponse',\n        portCols = [\n            'enabled', 'id', 'speed', 'type', 'elinks_dest', 'name',\n        ],\n        friendlyPortCols = [\n            'Enabled', 'ID', 'Speed', 'Type', 'Egress Links', 'Name',\n        ];\n\n    var keyBindings = {\n        esc: [closePanel, 'Close the details panel'],\n        _helpFormat: ['esc'],\n    };\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    function setUpPanel() {\n\n        dps.empty();\n        dps.addContainers();\n        dps.addCloseButton(closePanel);\n\n        var top = dps.top();\n        var bottom = dps.bottom();\n\n        dps.addHeading('dev-icon', true);\n        top.append('div').classed('top-content', true);\n\n        top.append('hr');\n\n        bottom.append('h2').classed('ports-title', true).text('Ports');\n        bottom.append('table');\n    }\n\n    function friendlyPropsList(details) {\n        return {\n            'URI': device.id,\n            'Type': device.type,\n            'Master ID': details['masterid'],\n            'Chassis ID': details['chassisid'],\n            'Vendor': device.mfr,\n            'H/W Version': device.hw,\n            'S/W Version': device.sw,\n            'Protocol': details['protocol'],\n            'Serial #': device.serial,\n            'Pipeconf': details['pipeconf'],\n        };\n    }\n\n    function populateTop(tblDiv, details) {\n        is.loadEmbeddedIcon(dps.select('.iconDiv'), details._iconid_type, 40);\n        dps.top().select('h2').text(details.name);\n        dps.addPropsList(tblDiv, friendlyPropsList(details));\n    }\n\n    function addPortRow(tbody, port) {\n        var tr = tbody.append('tr');\n\n        portCols.forEach(function (col) {\n            tr.append('td').text(port[col]);\n        });\n    }\n\n    function populateBottom(table, ports) {\n\n        var theader = table.append('thead').append('tr'),\n            tbody = table.append('tbody'),\n            tbWidth, tbHeight;\n\n        friendlyPortCols.forEach(function (col) {\n            theader.append('th').text(col);\n        });\n\n        ports.forEach(function (port) {\n            addPortRow(tbody, port);\n        });\n\n        tbWidth = fs.noPxStyle(tbody, 'width') + scrollSize;\n        tbHeight = pHeight\n                    - (fs.noPxStyle(detailsPanel.el().select('.top'), 'height')\n                    + fs.noPxStyle(detailsPanel.el().select('.ports-title'), 'height')\n                    + portsTblPdg);\n\n        table.style({\n            height: tbHeight + 'px',\n            width: tbWidth + 'px',\n            overflow: 'auto',\n            display: 'block',\n        });\n\n        detailsPanel.width(tbWidth + ctnrPdg);\n    }\n\n    function populateDetails(details) {\n        var btmTbl, ports;\n\n        setUpPanel();\n\n        btmTbl = dps.bottom().select('table');\n        ports = details.ports;\n\n        populateTop(dps.select('.top-content'), details);\n        populateBottom(btmTbl, ports);\n\n        detailsPanel.height(pHeight);\n    }\n\n    function respDetailsCb(data) {\n        $scope.panelData = data.details;\n        device = data.device;\n        $scope.$apply();\n    }\n\n    function respNameCb(data) {\n        if (data.warn) {\n            $log.warn(data.warn, data.id);\n            top.select('h2').text(data.id);\n        }\n    }\n\n    function createDetailsPanel() {\n        detailsPanel = dps.create(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n            scope: $scope,\n            keyBindings: keyBindings,\n            nameChangeRequest: nameChangeReq,\n        });\n\n        dps.setResponse(detailsResp, respDetailsCb);\n\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n    }\n\n    function popTop(div) {\n        $log.debug('populateTop');\n    }\n\n    function popMid(div) {\n        $log.debug('populateMiddle');\n    }\n\n    angular.module('ovDevice', [])\n    .controller('OvDeviceCtrl',\n        ['$log', '$scope', '$location', 'TableBuilderService',\n            'TableDetailService', 'FnService',\n            'MastService', 'PanelService', 'WebSocketService', 'IconService',\n            'NavService', 'KeyService', 'DetailsPanelService',\n\n        function (_$log_, _$scope_, _$location_,\n                  tbs, tds, _fs_, _mast_, _ps_, _wss_, _is_, _ns_, _ks_, _dps_) {\n            var params,\n                handlers = {};\n\n            $log = _$log_;\n            $scope = _$scope_;\n            $loc = _$location_;\n            fs = _fs_;\n            mast = _mast_;\n            ps = _ps_;\n            wss = _wss_;\n            is = _is_;\n            ns = _ns_;\n            ks = _ks_;\n            dps = _dps_;\n\n            params = $loc.search();\n\n            $scope.panelData = {};\n            $scope.flowTip = 'Show flow view for selected device';\n            $scope.portTip = 'Show port view for selected device';\n            $scope.groupTip = 'Show group view for selected device';\n            $scope.meterTip = 'Show meter view for selected device';\n            $scope.pipeconfTip = 'Show pipeconf view for selected device';\n\n            handlers[nameChangeResp] = respNameCb;\n            wss.bindHandlers(handlers);\n\n            if (params.hasOwnProperty('devId')) {\n                $scope.selId = params['devId'];\n                wss.sendEvent(detailsReq, { id: $scope.selId });\n            }\n\n            function selCb($event, row) {\n                if ($scope.selId) {\n                    wss.sendEvent(detailsReq, { id: row.id });\n                } else {\n                    $scope.hidePanel();\n                }\n                $log.debug('Got a click on:', row);\n            }\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'device',\n                selCb: selCb,\n            });\n\n\n            tds.buildBasePanel({\n                popTop: popTop,\n                popMid: popMid,\n            });\n\n\n            $scope.nav = function (path) {\n                if ($scope.selId) {\n                    ns.navTo(path, { devId: $scope.selId });\n                }\n            };\n\n            $scope.$on('$destroy', function () {\n                dps.destroy();\n                wss.unbindHandlers(handlers);\n            });\n\n            $log.log('OvDeviceCtrl has been created');\n        }])\n\n    .directive('deviceDetailsPanel',\n    ['$rootScope', '$window', '$timeout', 'KeyService',\n    function ($rootScope, $window, $timeout, ks) {\n        return function (scope) {\n            var unbindWatch;\n\n            function heightCalc() {\n                pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                                        + mast.mastHeight() + topPdg;\n                wSize = fs.windowSize(pStartY);\n                pHeight = wSize.height;\n            }\n\n            function initPanel() {\n                heightCalc();\n                createDetailsPanel();\n            }\n\n            if (scope.onos.browser === 'safari') {\n                $timeout(initPanel);\n            } else {\n                initPanel();\n            }\n            ks.keyBindings(keyBindings);\n\n            ks.gestureNotes([\n                ['click', 'Select a row to show device details'],\n                ['scroll down', 'See more devices'],\n            ]);\n\n            scope.$watch('panelData', function () {\n                if (!fs.isEmptyObject(scope.panelData)) {\n                    populateDetails(scope.panelData);\n                    detailsPanel.show();\n                }\n            });\n\n            unbindWatch = $rootScope.$watchCollection(\n                function () {\n                    return {\n                        h: $window.innerHeight,\n                        w: $window.innerWidth,\n                    };\n                }, function () {\n                    if (!fs.isEmptyObject(scope.panelData)) {\n                        heightCalc();\n                        populateDetails(scope.panelData);\n                    }\n                }\n            );\n\n            scope.$on('$destroy', function () {\n                unbindWatch();\n                ks.unbindKeys();\n                ps.destroyPanel(pName);\n            });\n        };\n    }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $location, fs, tbs, ns, mast, ps, wss, is, ls;\n\n    var detailsPanel,\n        pStartY,\n        pHeight,\n        top,\n        topTable,\n        topSelTable,\n        topTrtTable,\n        iconDiv,\n        wSize;\n\n    var topPdg = 28,\n        wtPdg = 400,\n\n        pName = 'flow-details-panel',\n        detailsReq = 'flowDetailsRequest',\n        detailsResp = 'flowDetailsResponse',\n\n        propOrder = [\n            'flowId',\n            'state',\n\n            'bytes',\n            'packets',\n            'duration',\n\n            'priority',\n            'tableName',\n            'appName',\n            'appId',\n\n            'groupId',\n            'idleTimeout',\n            'hardTimeout',\n            'permanent',\n        ];\n\n    var warnDeactivate,\n        warnOwnRisk,\n        friendlyProps,\n        lion;\n\n    function doLion() {\n        lion = ls.bundle('core.view.Flow');\n\n        warnDeactivate = lion('dlg_warn_deactivate');\n        warnOwnRisk = lion('dlg_warn_own_risk');\n\n        friendlyProps = [\n            lion('flowId'), lion('state'), lion('bytes'), lion('packets'),\n            lion('duration'), lion('priority'),lion('tableName'),lion('appName'),lion('appId'),\n            lion('groupId'),lion('idleTimeout'),lion('hardTimeout'),lion('permanent')\n        ];\n    }\n\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    function addCloseBtn(div) {\n        is.loadEmbeddedIcon(div, 'close', 20);\n        div.on('click', closePanel);\n    }\n\n    function handleEscape() {\n        return closePanel();\n    }\n\n    function setUpPanel() {\n        var container, closeBtn;\n        detailsPanel.empty();\n        container = detailsPanel.append('div').classed('container', true);\n\n        top = container.append('div').classed('top', true);\n        closeBtn = top.append('div').classed('close-btn', true);\n        addCloseBtn(closeBtn);\n        iconDiv = top.append('div').classed('dev-icon', true);\n        top.append('h2');\n        topTable = top.append('div').classed('top-content', true)\n            .append('table');\n        top.append('hr');\n\n        top.append('h3').text('Selector');\n        topSelTable = top.append('div').classed('top-content', true).append('table');\n        top.append('hr');\n\n        top.append('h3').text('Treatment');\n        topTrtTable = top.append('div').classed('top-content', true).append('table');\n    }\n\n    function addProp(tbody, label, value) {\n        var tr = tbody.append('tr');\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n        addCell('label', label + ' :');\n        addCell('value', value);\n    }\n\n\n    function getLionClearDeferred() {\n        return 'Clear deferred';\n    }\n\n    function populateTop(details) {\n        is.loadEmbeddedIcon(iconDiv, 'flowTable', 40);\n        top.select('h2').text(details.flowId);\n\n        var tbody = topTable.append('tbody'),\n            tbodySel = topSelTable.append('tbody'),\n            tbodyTrt = topTrtTable.append('tbody'),\n            selArray = details.selector,\n            treat = details.treatment,\n            propLabels = getLionProps();\n\n        function addLabVal(tbody, lv) {\n            var bits = lv.match(/^([^:]*):(.*)/);\n            addProp(tbody, bits[1], bits[2]);\n        }\n\n        function popInstrList(items, tag) {\n            items.forEach(function (item) {\n                addLabVal(tbodyTrt, tag + item);\n            });\n        }\n\n        propOrder.forEach(function (prop, i) {\n            addProp(tbody, propLabels[i], details[prop]);\n        });\n\n        selArray.forEach(function (lv) {\n            addLabVal(tbodySel, lv);\n        });\n\n        treat.immed && popInstrList(treat.immed, '[imm]');\n        treat.defer && popInstrList(treat.defer, '[def]');\n        treat.meter && addLabVal(tbodyTrt, treat.meter);\n        treat.table && addLabVal(tbodyTrt, treat.table);\n        treat.meta && addLabVal(tbodyTrt, treat.meta);\n        addProp(tbodyTrt, getLionClearDeferred(), treat.clearDef);\n    }\n\n    function createDetailsPane() {\n        detailsPanel = ps.createPanel(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n        });\n        detailsPanel.el().style({\n            position: 'absolute',\n            top: pStartY + 'px',\n        });\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n        detailsPanel.hide();\n    }\n\n    function populateDetails(details) {\n        setUpPanel();\n        populateTop(details);\n\n        detailsPanel.height(pHeight);\n        detailsPanel.width(wtPdg);\n    }\n\n    function respDetailsCb(data) {\n        $log.debug('Got response from server :', data);\n        $scope.panelData = data.details;\n        $scope.$apply();\n    }\n\n    angular.module('ovFlow', [])\n        .controller('OvFlowCtrl',\n            ['$log', '$scope', '$location',\n                'FnService', 'TableBuilderService', 'NavService',\n                'MastService', 'PanelService', 'KeyService', 'IconService',\n                'WebSocketService','LionService',\n\n                function (_$log_, _$scope_, _$location_, _fs_, _tbs_, _ns_,\n                          _mast_, _ps_, _ks_, _is_, _wss_, _ls_) {\n                    var params,\n                        handlers = {};\n\n                    $log = _$log_;\n                    $scope = _$scope_;\n                    $location = _$location_;\n                    fs = _fs_;\n                    tbs = _tbs_;\n                    ns = _ns_;\n                    is = _is_;\n                    wss = _wss_;\n                    mast = _mast_;\n                    ps = _ps_;\n                    ls = _ls_;\n\n                    doLion();\n\n                    $scope.lion = lion;\n\n                    $scope.deviceTip = lion('tt_ctl_show_device');\n                    $scope.portTip = lion('tt_ctl_show_port');\n                    $scope.groupTip = lion('tt_ctl_show_group');\n                    $scope.meterTip = lion('tt_ctl_show_meter');\n                    $scope.pipeconfTip = lion('tt_ctl_show_pipeconf');\n                    $scope.briefTip = lion('tt_ctl_switcth_brief');\n                    $scope.detailTip = lion('tt_ctl_switcth_detailed');\n\n                    $scope.brief = true;\n                    params = $location.search();\n                    if (params.hasOwnProperty('devId')) {\n                        $scope.devId = params['devId'];\n                    }\n\n                    tbs.buildTable({\n                        scope: $scope,\n                        tag: 'flow',\n                        selCb: selCb,\n                        query: params,\n                    });\n\n                    $scope.nav = function (path) {\n                        if ($scope.devId) {\n                            ns.navTo(path, { devId: $scope.devId });\n                        }\n                    };\n\n                    handlers[detailsResp] = respDetailsCb;\n                    wss.bindHandlers(handlers);\n\n                    function selCb($event, row) {\n                        if ($scope.selId) {\n                            wss.sendEvent(detailsReq, {\n                                flowId: row.id,\n                                appId: row.appId\n                            });\n                        } else {\n                            $scope.hidePanel();\n                        }\n                        $log.debug('Got a click on:', row);\n                    }\n\n                    $scope.$on('$destroy', function () {\n                        wss.unbindHandlers(handlers);\n                    });\n\n                    $scope.briefToggle = function () {\n                        $scope.brief = !$scope.brief;\n                    };\n\n                    Object.defineProperty($scope, 'queryFilter', {\n                        get: function () {\n                            var out = {};\n                            out[$scope.queryBy || '$'] = $scope.queryTxt;\n                            return out;\n                        },\n                    });\n\n                    $log.log('OvFlowCtrl has been created');\n                }])\n\n        .directive('flowDetailsPanel',\n            ['$rootScope', '$window', '$timeout', 'KeyService',\n            function ($rootScope, $window, $timeout, ks) {\n                return function (scope) {\n                    var unbindWatch;\n\n                    function heightCalc() {\n                        var tabhead = d3.select('.tabular-header');\n\n                        pStartY = fs.noPxStyle(tabhead, 'height') +\n                            mast.mastHeight() + topPdg;\n                        wSize = fs.windowSize(pStartY);\n                        pHeight = wSize.height;\n                    }\n\n                    function initPanel() {\n                        heightCalc();\n                        createDetailsPane();\n                    }\n\n                    if (scope.onos.browser === 'safari') {\n                        $timeout(initPanel);\n                    } else {\n                        initPanel();\n                    }\n                    ks.keyBindings({\n                        esc: [handleEscape, 'Close the details panel'],\n                        _helpFormat: ['esc'],\n                    });\n                    ks.gestureNotes([\n                        ['click', 'Select a row to show cluster node details'],\n                        ['scroll down', 'See available cluster nodes'],\n                    ]);\n                    scope.$watch('panelData', function () {\n                        if (!fs.isEmptyObject(scope.panelData)) {\n                            populateDetails(scope.panelData);\n                            detailsPanel.show();\n                        }\n                    });\n                    unbindWatch = $rootScope.$watchCollection(\n                        function () {\n                            return {\n                                h: $window.innerHeight,\n                                w: $window.innerWidth,\n                            };\n                        }, function () {\n                            if (!fs.isEmptyObject(scope.panelData)) {\n                                heightCalc();\n                                populateDetails(scope.panelData);\n                            }\n                        }\n                    );\n\n                    scope.$on('$destroy', function () {\n                        unbindWatch();\n                        ps.destroyPanel(pName);\n                    });\n                };\n            }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $location, fs, tbs, ns;\n\n    angular.module('ovGroup', [])\n    .controller('OvGroupCtrl',\n        ['$log', '$scope', '$location', '$sce',\n            'FnService', 'TableBuilderService', 'NavService',\n\n        function (_$log_, _$scope_, _$location_, $sce, _fs_, _tbs_, _ns_) {\n            var params;\n            $log = _$log_;\n            $scope = _$scope_;\n            $location = _$location_;\n            fs = _fs_;\n            tbs = _tbs_;\n            ns = _ns_;\n            $scope.deviceTip = 'Show device table';\n            $scope.flowTip = 'Show flow view for this device';\n            $scope.portTip = 'Show port view for this device';\n            $scope.meterTip = 'Show meter view for selected device';\n            $scope.pipeconfTip = 'Show pipeconf view for selected device';\n            $scope.briefTip = 'Switch to brief view';\n            $scope.detailTip = 'Switch to detailed view';\n            $scope.brief = true;\n            params = $location.search();\n            if (params.hasOwnProperty('devId')) {\n                $scope.devId = params['devId'];\n            }\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'group',\n                query: params,\n            });\n\n            $scope.$watch('tableData', function () {\n                if (!fs.isEmptyObject($scope.tableData)) {\n                    $scope.tableData.forEach(function (group) {\n                        group.buckets = $sce.trustAsHtml(group.buckets);\n                    });\n                }\n            });\n\n            $scope.nav = function (path) {\n                if ($scope.devId) {\n                    ns.navTo(path, { devId: $scope.devId });\n                }\n            };\n            $scope.briefToggle = function () {\n                $scope.brief = !$scope.brief;\n            };\n\n            Object.defineProperty($scope, 'queryFilter', {\n                get: function () {\n                    var out = {};\n                    out[$scope.queryBy || '$'] = $scope.query;\n                    return out;\n                },\n            });\n\n\n            $log.log('OvGroupCtrl has been created');\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $loc, fs, mast, ps, wss, is, ns, ks, dps;\n\n    var detailsPanel,\n        pStartY,\n        pHeight,\n        top,\n        wSize;\n\n    var topPdg = 28,\n        pName = 'host-details-panel',\n        detailsReq = 'hostDetailsRequest',\n        detailsResp = 'hostDetailsResponse',\n        nameChangeReq = 'hostNameChangeRequest',\n        nameChangeResp = 'hostNameChangeResponse';\n\n    var keyBindings = {\n        esc: [closePanel, 'Close the details panel'],\n        _helpFormat: ['esc'],\n    };\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n\n    function setUpPanel() {\n\n        dps.empty();\n        dps.addContainers();\n        dps.addCloseButton(closePanel);\n\n        var top = dps.top();\n\n        dps.addHeading('host-icon', true);\n        top.append('div').classed('top-content', true);\n\n        top.append('hr');\n    }\n\n    function friendlyPropsList(details) {\n        return {\n            'Host ID': details.id,\n            'IP Address': details.ip[0],\n            'MAC Address': details.mac,\n            'VLAN': details.vlan,\n            'Configured': details.configured,\n            'Location': details.location,\n        };\n    }\n\n    function populateTop(tblDiv, details) {\n        is.loadEmbeddedIcon(dps.select('.iconDiv'), details._iconid_type, 40);\n        dps.top().select('h2').text(details.name);\n        dps.addPropsList(tblDiv, friendlyPropsList(details));\n    }\n\n    function populateDetails(details) {\n        setUpPanel();\n        populateTop(dps.select('.top-content'), details);\n        detailsPanel.height(pHeight);\n        detailsPanel.width(400);\n    }\n\n    function respDetailsCb(data) {\n        $scope.panelData = data.details;\n        $scope.$apply();\n    }\n\n    function respNameCb(data) {\n        if (data.warn) {\n            $log.warn(data.warn, data.id);\n            top.select('h2').text(data.id);\n        }\n    }\n\n    function createDetailsPanel() {\n        detailsPanel = dps.create(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n            scope: $scope,\n            keyBindings: keyBindings,\n            nameChangeRequest: nameChangeReq,\n        });\n\n        dps.setResponse(detailsResp, respDetailsCb);\n\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n    }\n\n\n    angular.module('ovHost', [])\n    .controller('OvHostCtrl',\n        ['$log', '$scope',\n            '$location',\n            'TableBuilderService',\n            'FnService', 'MastService', 'PanelService', 'WebSocketService',\n            'IconService', 'NavService', 'KeyService', 'DetailsPanelService',\n\n        function (_$log_, _$scope_, _$location_,\n                  tbs,\n                  _fs_, _mast_, _ps_, _wss_,\n                  _is_, _ns_, _ks_, _dps_) {\n\n            var params,\n                handlers = {};\n\n            $log = _$log_;\n            $scope = _$scope_;\n            $loc = _$location_;\n            fs = _fs_;\n            mast = _mast_;\n            ps = _ps_;\n            wss = _wss_;\n            is = _is_;\n            ns = _ns_;\n            ks = _ks_;\n            dps = _dps_;\n\n            params = $loc.search();\n\n            $scope.panelData = {};\n\n            handlers[nameChangeResp] = respNameCb;\n            wss.bindHandlers(handlers);\n\n            if (params.hasOwnProperty('hostId')) {\n                $scope.selId = params['hostId'];\n                wss.sendEvent(detailsReq, { id: $scope.selId });\n            }\n\n            function selCb($event, row) {\n                if ($scope.selId) {\n                    wss.sendEvent(detailsReq, { id: row.id });\n                } else {\n                    $scope.hidePanel();\n                }\n                $log.debug('Got a click on:', row);\n            }\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'host',\n                selCb: selCb,\n            });\n\n            $scope.nav = function (path) {\n                if ($scope.selId) {\n                    ns.navTo(path, { hostId: $scope.selId });\n                }\n            };\n\n            $scope.$on('$destroy', function () {\n                dps.destroy();\n                wss.unbindHandlers(handlers);\n            });\n\n            $log.log('OvHostCtrl has been created');\n        }])\n\n    .directive('hostDetailsPanel',\n    ['$rootScope', '$window', '$timeout', 'KeyService', 'DetailsPanelService',\n    function ($rootScope, $window, $timeout, ks) {\n        return function (scope) {\n            var unbindWatch;\n\n            function heightCalc() {\n                pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                    + mast.mastHeight() + topPdg;\n                wSize = fs.windowSize(pStartY);\n                pHeight = wSize.height;\n            }\n\n            function initPanel() {\n                heightCalc();\n                createDetailsPanel();\n            }\n\n            if (scope.onos.browser === 'safari') {\n                $timeout(initPanel);\n            } else {\n                initPanel();\n            }\n            ks.keyBindings(keyBindings);\n            ks.gestureNotes([\n                ['click', 'Select a row to show device details'],\n                ['scroll down', 'See more devices'],\n            ]);\n\n            scope.$watch('panelData', function () {\n                if (!fs.isEmptyObject(scope.panelData)) {\n                    populateDetails(scope.panelData);\n                    detailsPanel.show();\n                }\n            });\n\n            unbindWatch = $rootScope.$watchCollection(\n                function () {\n                    return {\n                        h: $window.innerHeight,\n                        w: $window.innerWidth,\n                    };\n                }, function () {\n                    if (!fs.isEmptyObject(scope.panelData)) {\n                        heightCalc();\n                        populateDetails(scope.panelData);\n                    }\n                }\n            );\n\n            scope.$on('$destroy', function () {\n                unbindWatch();\n                ks.unbindKeys();\n                ps.destroyPanel(pName);\n            });\n        };\n    }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var dialogId = 'remove-intent-dialog',\n        dialogOpts = {\n            edge: 'right',\n        };\n\n    var dropdown;\n\n    var $log, $scope, ns, tov, tts, ds;\n\n\n    function initScope() {\n        $scope.topoTip = 'Show selected intent on topology view';\n        $scope.resubmitTip = 'Resubmit selected intent';\n        $scope.deactivateTip = 'Remove selected intent';\n        $scope.purgeTip = 'Purge selected intent';\n        $scope.purgeAllTip = 'Purge withdrawn intents';\n\n        $scope.briefTip = 'Switch to brief view';\n        $scope.detailTip = 'Switch to detailed view';\n\n        $scope.brief = true;\n        $scope.intentState = 'NA';\n        $scope.fired = false;\n    }\n\n\n    function selCb($event, row) {\n        $log.debug('Got a click on:', row);\n        var m = /(\\d+)\\s:\\s(.*)/.exec(row.appId),\n            id = m ? m[1] : null,\n            name = m ? m[2] : null;\n\n        $scope.intentData = ($scope.selId && m) ? {\n                appId: id,\n                appName: name,\n                key: row.key,\n                intentType: row.type,\n            } : null;\n\n        $scope.intentState = row.state;\n        showDropdown(false);\n    }\n\n    function respCb() {\n        if ($scope.fired) {\n            if ($scope.changedData) {\n                $scope.intentState = $scope.changedData.state;\n            }\n            $scope.fired = false;\n        }\n    }\n\n\n\n    function showDropdown(b) {\n        dropdown.style('display', b ? 'block' : 'none');\n    }\n\n    function showIntent() {\n        var d = $scope.intentData,\n            handlers,\n            nh;\n\n        if (!d) {\n            return;\n        }\n\n        function setOvAndNavigate(info) {\n            d.overlayId = info.id;\n            ns.navTo('topo', d);\n        }\n\n        function clickMe(data) {\n            showDropdown(false);\n            setOvAndNavigate(data);\n        }\n\n        function setUpSelection(handlers) {\n            dropdown.text(null);\n\n            handlers.forEach(function (data) {\n                var div = dropdown.append('div');\n                div.classed('overlay-choice', true);\n                div.text(data.tt);\n                div.on('click', function () {\n                    clickMe(data);\n                });\n            });\n\n            showDropdown(true);\n        }\n\n        handlers = tov.overlaysAcceptingIntents(d.intentType);\n        nh = handlers.length;\n\n        if (nh === 1) {\n            setOvAndNavigate(handlers[0]);\n\n        } else if (nh > 1) {\n            setUpSelection(handlers);\n\n        } else {\n            $log.warn('Sorry - no overlay configured to show',\n                      'intents of type', d.intentType);\n        }\n    }\n\n\n\n\n\n\n    angular.module('ovIntent', [])\n        .controller('OvIntentCtrl',\n        ['$log', '$scope', 'TableBuilderService', 'NavService',\n            'TopoOverlayService', 'TopoTrafficService', 'DialogService',\n\n        function (_$log_, _$scope_, tbs, _ns_, _tov_, _tts_, _ds_) {\n            $log = _$log_;\n            $scope = _$scope_;\n            ns = _ns_;\n            tov = _tov_;\n            tts = _tts_;\n            ds = _ds_;\n\n            initScope();\n\n            dropdown = d3.select('div.show-intent-btn .dropdown');\n\n            $scope.showIntent = showIntent;\n\n            $scope.canShowIntent = function () {\n                var d = $scope.intentData;\n                return d && tov.overlaysAcceptingIntents(d.intentType).length > 0;\n            };\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'intent',\n                selCb: selCb,\n                respCb: respCb,\n                idKey: 'key',\n            });\n\n\n\n            $scope.isIntentInstalled = function () {\n                return $scope.intentState === 'Installed';\n            };\n\n            $scope.isIntentWithdrawn = function () {\n                return $scope.intentState === 'Withdrawn';\n            };\n\n            $scope.isHavingWithdrawn = function () {\n                var isWithdrawn = false;\n                $scope.tableData.forEach(function (intent) {\n                    if (intent.state ==='Withdrawn') {\n                        isWithdrawn = true;\n                    }\n                });\n                return isWithdrawn;\n            };\n\n            function executeAction(action) {\n                var content = ds.createDiv(),\n                    bPurge = action === 'purge';\n\n                $scope.intentData.intentPurge = bPurge;\n\n                content.append('p').\n                        text('Are you sure you want to '+ action +\n                        ' the selected intent?');\n\n                function dOk() {\n                    var d = $scope.intentData;\n                    $log.debug(d);\n                    d && (action === 'resubmit' ? tts.resubmitIntent(d) :\n                                    tts.removeIntent(d));\n                    $scope.fired = true;\n                }\n\n                function dCancel() {\n                    ds.closeDialog();\n                    $log.debug('Canceling remove-intent action');\n                }\n\n                ds.openDialog(dialogId, dialogOpts)\n                    .setTitle('Confirm Action')\n                    .addContent(content)\n                    .addOk(dOk)\n                    .addCancel(dCancel)\n                    .bindKeys();\n            }\n\n            function executeActions(action) {\n                 var content = ds.createDiv();\n\n                 content.append('p')\n                    .text('Are you sure you want to purge all the withdrawn intents?');\n\n                 function dOk() {\n                     tts.removeIntents();\n                     $scope.fired = true;\n                 }\n\n                 function dCancel() {\n                     ds.closeDialog();\n                     $log.debug('Canceling remove-intents action');\n                 }\n\n                 ds.openDialog(dialogId, dialogOpts)\n                 .setTitle('Confirm Action')\n                 .addContent(content)\n                 .addOk(dOk)\n                 .addCancel(dCancel)\n                 .bindKeys();\n            }\n\n            $scope.deactivateIntent = function () {\n                executeAction('withdraw');\n            };\n\n            $scope.resubmitIntent = function () {\n                executeAction('resubmit');\n            };\n\n            $scope.purgeIntent = function () {\n                executeAction('purge');\n            };\n\n            $scope.briefToggle = function () {\n                $scope.brief = !$scope.brief;\n            };\n\n            $scope.$on('$destroy', function () {\n                ds.closeDialog();\n                $log.debug('OvIntentCtrl has been destroyed');\n            });\n\n            $scope.purgeIntents = function () {\n                executeActions('purgeIntents');\n            };\n\n            $log.debug('OvIntentCtrl has been created');\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    angular.module('ovLink', [])\n    .controller('OvLinkCtrl',\n        ['$log', '$scope', '$sce', 'FnService', 'TableBuilderService',\n\n        function ($log, $scope, $sce, fs, tbs) {\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'link',\n            });\n\n            $scope.$watch('tableData', function () {\n                if (!fs.isEmptyObject($scope.tableData)) {\n                    $scope.tableData.forEach(function (link) {\n                        link.direction = $sce.trustAsHtml(link.direction);\n                    });\n                }\n            });\n\n            $log.log('OvLinkCtrl has been created');\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, $scope, $location, fs, tbs, ns, prefs,\n        fs, mast, wss, ns, dps, is, ps;\n\n    var detailsPanel,\n        pStartY,\n        pHeight,\n        wSize,\n        meter;\n\n    var topPdg = 28,\n        dPanelWidth = 480,\n\n        pName = 'meter-details-panel',\n        detailsReq = 'meterDetailsRequest',\n        detailsResp = 'meterDetailsResponse';\n\n\n    var keyBindings = {\n        esc: [closePanel, 'Close the details panel'],\n        _helpFormat: ['esc'],\n    };\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    function createDetailsPanel() {\n        detailsPanel = dps.create(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n            scope: $scope,\n            keyBindings: keyBindings,\n        });\n\n        dps.setResponse(detailsResp, respDetailsCb);\n\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n    }\n\n    function setUpPanel() {\n        dps.empty();\n        dps.addContainers();\n        dps.addCloseButton(closePanel);\n\n        var top = dps.top();\n\n        dps.addHeading('port-icon');\n        top.append('div').classed('top-content', true);\n\n        top.append('hr');\n    }\n\n    function friendlyPropsList(details) {\n        $log.debug(details);\n        return {\n            'ID': details['id'],\n            'Device': details['devId'],\n            'App Id': details['app_id'],\n            'Bytes': details['bytes'],\n            'Burst': details['isBurst'],\n            'Packets': details['packets'],\n            'State': details['state'],\n        };\n    }\n\n\n    function populateTop(tblDiv, details) {\n        is.loadEmbeddedIcon(dps.select('.iconDiv'), details._iconid_type, 40);\n        dps.top().select('h2').text(details.devId + ' Meter ' + details.id);\n        dps.addPropsList(tblDiv, friendlyPropsList(details));\n    }\n\n    function populateDetails(details) {\n        setUpPanel();\n        populateTop(dps.select('.top-content'), details);\n        detailsPanel.height(pHeight);\n        detailsPanel.width(dPanelWidth);\n\n    }\n\n    function respDetailsCb(data) {\n        $scope.panelData = data.details;\n        meter = data.meter;\n        $scope.$apply();\n    }\n\n    angular.module('ovMeter', [])\n    .controller('OvMeterCtrl',\n        ['$log', '$scope', '$location', '$sce',\n            'FnService', 'TableBuilderService', 'NavService', 'PrefsService',\n            'MastService', 'WebSocketService', 'DetailsPanelService', 'IconService',\n            'PanelService',\n\n        function (_$log_, _$scope_, _$location_, $sce,\n                  _fs_, _tbs_, _ns_, _prefs_,\n                  _mast_, _wss_, _dps_, _is_, _ps_) {\n            var params;\n            $log = _$log_;\n            $scope = _$scope_;\n            $location = _$location_;\n            fs = _fs_;\n            tbs = _tbs_;\n            ns = _ns_;\n            fs = _fs_;\n            mast = _mast_;\n            wss = _wss_;\n            prefs = _prefs_;\n            dps = _dps_;\n            is = _is_;\n\n            $scope.deviceTip = 'Show device table';\n            $scope.flowTip = 'Show flow view for this device';\n            $scope.portTip = 'Show port view for this device';\n            $scope.groupTip = 'Show group view for this device';\n            $scope.pipeconfTip = 'Show pipeconf view for selected device';\n\n            params = $location.search();\n            if (params.hasOwnProperty('devId')) {\n                $scope.devId = params['devId'];\n            }\n\n            function selCb($event, row) {\n                if ($scope.selId) {\n                    wss.sendEvent(detailsReq, {\n                        id: row.id,\n                        devId: $scope.devId,\n                    });\n                } else {\n                    $scope.hidePanel();\n                }\n                $log.debug('Got a click on:', row);\n            }\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'meter',\n                query: params,\n                selCb: selCb,\n            });\n\n            $scope.$watch('tableData', function () {\n                if (!fs.isEmptyObject($scope.tableData)) {\n                    $scope.tableData.forEach(function (meter) {\n                        meter.bands = $sce.trustAsHtml(meter.bands);\n                    });\n                }\n            });\n\n            $scope.nav = function (path) {\n                if ($scope.devId) {\n                    ns.navTo(path, { devId: $scope.devId });\n                }\n            };\n\n            Object.defineProperty($scope, 'queryFilter', {\n                get: function () {\n                    var out = {};\n                    out[$scope.queryBy || '$'] = $scope.query;\n                    return out;\n                },\n            });\n\n            $scope.$on('$destroy', function () {\n                dps.destroy();\n            });\n\n            $log.log('OvMeterCtrl has been created');\n        }])\n        .directive('meterDetailsPanel',\n            ['$rootScope', '$window', '$timeout', 'KeyService',\n                function ($rootScope, $window, $timeout, ks) {\n                    return function (scope) {\n                        var unbindWatch;\n\n                        function heightCalc() {\n                            pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                                + mast.mastHeight() + topPdg;\n                            wSize = fs.windowSize(pStartY);\n                            pHeight = wSize.height;\n                        }\n\n                        function initPanel() {\n                            heightCalc();\n                            createDetailsPanel();\n                        }\n\n                        if (scope.onos.browser === 'safari') {\n                            $timeout(initPanel);\n                        } else {\n                            initPanel();\n                        }\n                        ks.keyBindings(keyBindings);\n\n                        ks.gestureNotes([\n                            ['click', 'Select a row to show port details'],\n                            ['scroll down', 'See more ports'],\n                        ]);\n\n                        scope.$watch('panelData', function () {\n                            if (!fs.isEmptyObject(scope.panelData)) {\n                                populateDetails(scope.panelData);\n                                detailsPanel.show();\n                            }\n                        });\n\n                        unbindWatch = $rootScope.$watchCollection(\n                            function () {\n                                return {\n                                    h: $window.innerHeight,\n                                    w: $window.innerWidth,\n                                };\n                            }, function () {\n                                if (!fs.isEmptyObject(scope.panelData)) {\n                                    heightCalc();\n                                    populateDetails(scope.panelData);\n                                }\n                            }\n                        );\n\n                        scope.$on('$destroy', function () {\n                            unbindWatch();\n                            ks.unbindKeys();\n                            ps.destroyPanel(pName);\n                        });\n                    };\n                }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    angular.module('ovPartition', [])\n        .controller('OvPartitionCtrl',\n            ['$log', '$scope', '$sce', 'FnService', 'TableBuilderService',\n\n                function ($log, $scope, $sce, fs, tbs) {\n                    tbs.buildTable({\n                        scope: $scope,\n                        tag: 'partition',\n                    });\n\n                    $log.log('OvPartitionCtrl has been created');\n                }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $loc, $interval, $timeout, fs, ns, wss, ls, ps, mast, is, dps;\n\n    var pipeconfRequest = \"pipeconfRequest\",\n        pipeConfResponse = \"pipeConfResponse\",\n        noPipeconfResp = \"noPipeconfResp\",\n        invalidDevId = \"invalidDevId\",\n        pipeconf = \"pipeconf\",\n        pipelineModel = \"pipelineModel\",\n        devId = \"devId\",\n        topPdg = 28,\n        pName = 'pipeconf-detail-panel',\n        refreshRate = 5000;\n\n    var handlers,\n        refreshPromise;\n\n    var pWidth = 600,\n        pTopHeight = 111,\n        pStartY,\n        wSize,\n        pHeight,\n        detailsPanel;\n\n    var keyBindings = {\n        esc: [closePanel, 'Close the details panel'],\n        _helpFormat: ['esc'],\n    };\n\n    function fetchPipeconfData() {\n        if ($scope.autoRefresh && wss.isConnected() && !ls.waiting()) {\n            ls.start();\n            var requestData = {\n                devId: $scope.devId\n            };\n            wss.sendEvent(pipeconfRequest, requestData);\n        }\n    }\n\n    function pipeConfRespCb(data) {\n        ls.stop();\n        if (!data.hasOwnProperty(pipeconf)) {\n            $scope.pipeconf = null;\n            return;\n        }\n        $scope.pipeconf = data[pipeconf];\n        $scope.pipelineModel = data[pipelineModel];\n        $scope.$apply();\n    }\n\n    function noPipeconfRespCb(data) {\n        ls.stop();\n        $scope.pipeconf = null;\n        $scope.pipelineModel = null;\n        $scope.$apply();\n    }\n\n    function viewDestroy() {\n        wss.unbindHandlers(handlers);\n        $interval.cancel(refreshPromise);\n        refreshPromise = null;\n        ls.stop();\n    }\n\n    function headerSelectCb($event, header) {\n        if ($scope.selectedId !== null &&\n            $scope.selectedId.type === 'header' &&\n            $scope.selectedId.name === header.name) {\n\n            closePanel();\n            return;\n        }\n\n        $scope.selectedId = {\n            type: 'header',\n            name: header.name,\n        };\n\n        var subtitles = [\n            {\n                label: 'Header Type: ',\n                value: header.type.name,\n            },\n            {\n                label: 'Is metadata: ',\n                value: header.isMetadata,\n            },\n            {\n                label: 'Index: ',\n                value: header.index,\n            },\n        ];\n\n        var tables = [\n            {\n                title: 'Fields',\n                headers: ['Name', 'Bit width'],\n                data: header.type.fields,\n                noDataText: 'No header fields'\n            },\n        ];\n        populateDetailPanel(header.name, subtitles, tables);\n    }\n\n    function actionSelectCb($event, action) {\n        if ($scope.selectedId !== null &&\n            $scope.selectedId.type === 'action' &&\n            $scope.selectedId.name === action.name) {\n\n            closePanel();\n            return;\n        }\n\n        $scope.selectedId = {\n            type: 'action',\n            name: action.name,\n        };\n\n        var subtitles = [];\n        var tables = [\n            {\n                title: 'Parameters',\n                headers: ['Name', 'Bit width'],\n                data: action.params,\n                noDataText: 'No action parameters',\n            },\n        ];\n\n        populateDetailPanel(action.name, subtitles, tables);\n    }\n\n    function tableSelectCb($event, table) {\n        if ($scope.selectedId !== null &&\n            $scope.selectedId.type === 'table' &&\n            $scope.selectedId.name === table.name) {\n\n            closePanel();\n            return;\n        }\n\n        $scope.selectedId = {\n            type: 'table',\n            name: table.name,\n        };\n\n        var subtitles = [\n            {\n                label: 'Max Size: ',\n                value: table.maxSize,\n            },\n            {\n                label: 'Has counters: ',\n                value: table.hasCounters,\n            },\n            {\n                label: 'Support Aging: ',\n                value: table.supportAging,\n            },\n        ];\n\n        var matchFields = table.matchFields.map(function(mp) {\n            return {\n                name: mp.field,\n                bitWidth: mp.bitWidth,\n                matchType: mp.matchType,\n            }\n        });\n\n        var tables = [\n            {\n                title: 'Match fields',\n                headers: ['Name', 'Bit width', 'Match type'],\n                data: matchFields,\n                noDataText: 'No match fields'\n            },\n            {\n                title: 'Actions',\n                headers: ['Name'],\n                data: table.actions,\n                noDataText: 'No actions'\n            },\n        ];\n\n        populateDetailPanel(table.name, subtitles, tables);\n    }\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n\n            detailsPanel.hide();\n\n            $timeout(function() {\n                $scope.selectedId = null;\n            }, 0);\n            return true;\n        }\n        return false;\n    }\n\n    function populateDetailTable(tableContainer, table) {\n        var tableTitle = table.title;\n        var tableData = table.data;\n        var tableHeaders = table.headers;\n        var noDataText = table.noDataText;\n\n        tableContainer.append('h2').classed('detail-panel-bottom-title', true).text(tableTitle);\n\n        var detailPanelTable = tableContainer.append('table').classed('detail-panel-table', true);\n        var headerTr = detailPanelTable.append('tr').classed('detail-panel-table-header', true);\n\n        tableHeaders.forEach(function(h) {\n            headerTr.append('th').text(h);\n        });\n\n        if (tableData.length === 0) {\n            var row = detailPanelTable.append('tr').classed('detail-panel-table-row', true);\n            row.append('td')\n                .classed('detail-panel-table-col no-data', true)\n                .attr('colspan', tableHeaders.length)\n                .text(noDataText);\n        }\n\n        tableData.forEach(function(data) {\n            var row = detailPanelTable.append('tr').classed('detail-panel-table-row', true);\n            if (fs.isS(data)) {\n                row.append('td').classed('detail-panel-table-col', true).text(data);\n            } else {\n                Object.keys(data).forEach(function(k) {\n                    row.append('td').classed('detail-panel-table-col', true).text(data[k]);\n                });\n            }\n        });\n\n        tableContainer.append('hr');\n    }\n\n    function populateDetailTables(tableContainer, tables) {\n        tables.forEach(function(table) {\n            populateDetailTable(tableContainer, table);\n        })\n    }\n\n    function populateDetailPanel(topTitle, topSubtitles, tables) {\n        dps.empty();\n        dps.addContainers();\n        dps.addCloseButton(closePanel);\n\n        var top = dps.top();\n        top.append('h2').classed('detail-panel-header', true).text(topTitle);\n        topSubtitles.forEach(function(st) {\n            var typeText = top.append('div').classed('top-info', true);\n            typeText.append('p').classed('label', true).text(st.label);\n            typeText.append('p').classed('value', true).text(st.value);\n        });\n\n        var bottom = dps.bottom();\n        var bottomHeight = pHeight - pTopHeight - 60;\n        bottom.style('height', bottomHeight + 'px');\n        populateDetailTables(bottom, tables);\n\n        detailsPanel.width(pWidth);\n        detailsPanel.show();\n        resizeDetailPanel();\n    }\n\n    function heightCalc() {\n        pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n            + mast.mastHeight() + topPdg;\n        wSize = fs.windowSize(pStartY);\n        pHeight = wSize.height - 20;\n    }\n\n    function resizeDetailPanel() {\n        if (detailsPanel.isVisible()) {\n            heightCalc();\n            var bottomHeight = pHeight - pTopHeight - 60;\n            d3.select('.bottom').style('height', bottomHeight + 'px');\n            detailsPanel.height(pHeight);\n        }\n    }\n\n    angular.module('ovPipeconf', [])\n        .controller('OvPipeconfCtrl',\n            ['$log', '$scope', '$location', '$interval', '$timeout', 'FnService', 'NavService', 'WebSocketService',\n                'LoadingService', 'PanelService', 'MastService', 'IconService', 'DetailsPanelService',\n                function (_$log_, _$scope_, _$loc_, _$interval_, _$timeout_, _fs_,\n                          _ns_, _wss_, _ls_, _ps_, _mast_, _is_, _dps_) {\n                    $log = _$log_;\n                    $scope = _$scope_;\n                    $loc = _$loc_;\n                    $interval = _$interval_;\n                    $timeout = _$timeout_;\n                    fs = _fs_;\n                    ns = _ns_;\n                    wss = _wss_;\n                    ls = _ls_;\n                    ps = _ps_;\n                    mast = _mast_;\n                    is = _is_;\n                    dps = _dps_;\n\n                    $scope.deviceTip = 'Show device table';\n                    $scope.flowTip = 'Show flow view for this device';\n                    $scope.portTip = 'Show port view for this device';\n                    $scope.groupTip = 'Show group view for this device';\n                    $scope.meterTip = 'Show meter view for selected device';\n                    $scope.pipeconfTip = 'Show pipeconf view for selected device';\n\n                    var params = $loc.search();\n                    if (params.hasOwnProperty(devId)) {\n                        $scope.devId = params[devId];\n                    }\n                    $scope.nav = function (path) {\n                        if ($scope.devId) {\n                            ns.navTo(path, { devId: $scope.devId });\n                        }\n                    };\n                    handlers = {\n                        pipeConfResponse: pipeConfRespCb,\n                        noPipeconfResp: noPipeconfRespCb,\n                        invalidDevId: noPipeconfRespCb,\n                    };\n                    wss.bindHandlers(handlers);\n                    $scope.$on('$destroy', viewDestroy);\n\n                    $scope.autoRefresh = true;\n                    fetchPipeconfData();\n\n                    $scope.selectedId = null;\n                    $scope.headerSelectCb = headerSelectCb;\n                    $scope.actionSelectCb = actionSelectCb;\n                    $scope.tableSelectCb = tableSelectCb;\n\n                    $scope.collapsePipeconf = false;\n                    $scope.collapseHeaders = false;\n                    $scope.collapseActions = false;\n                    $scope.collapseTables = false;\n\n                    $scope.mapToNames = function(data) {\n                        return data.map(function(d) {\n                            return d.name;\n                        });\n                    };\n\n                    $scope.matMatchFields = function(matchFields) {\n                        return matchFields.map(function(mf) {\n                            return mf.field;\n                        });\n                    };\n\n                    refreshPromise = $interval(function() {\n                        fetchPipeconfData();\n                    }, refreshRate);\n\n                    $log.log('OvPipeconfCtrl has been created');\n                }])\n        .directive('autoHeight', ['$window', 'FnService',\n            function($window, fs) {\n                return function(scope, element) {\n                    var autoHeightElem = d3.select(element[0]);\n\n                    scope.$watchCollection(function() {\n                        return {\n                            h: $window.innerHeight\n                        };\n                    }, function() {\n                        var wsz = fs.windowSize(140, 0);\n                        autoHeightElem.style('height', wsz.height + 'px');\n                    });\n                };\n            }\n        ])\n        .directive('pipeconfViewDetailPanel', ['$rootScope', '$window', '$timeout', 'KeyService',\n            function($rootScope, $window, $timeout, ks) {\n                function createDetailsPanel() {\n                    detailsPanel = dps.create(pName, {\n                        width: wSize.width,\n                        margin: 0,\n                        hideMargin: 0,\n                        scope: $scope,\n                        keyBindings: keyBindings,\n                        nameChangeRequest: null,\n                    });\n                    $scope.hidePanel = function () { detailsPanel.hide(); };\n                    detailsPanel.hide();\n                }\n\n                function initPanel() {\n                    heightCalc();\n                    createDetailsPanel();\n                }\n\n                return function(scope) {\n                    var unbindWatch;\n                    if (scope.onos.browser === 'safari') {\n                        $timeout(initPanel);\n                    } else {\n                        initPanel();\n                    }\n\n                    scope.$watch('panelData', function () {\n                        if (!fs.isEmptyObject(scope.panelData)) {\n                            detailsPanel.show();\n                        }\n                    });\n\n                    unbindWatch = $rootScope.$watchCollection(\n                        function () {\n                            return {\n                                h: $window.innerHeight,\n                                w: $window.innerWidth,\n                            };\n                        }, function () {\n                            resizeDetailPanel();\n                        }\n                    );\n\n                    scope.$on('$destroy', function () {\n                        unbindWatch();\n                        ks.unbindKeys();\n                        ps.destroyPanel(pName);\n                    });\n                };\n            }\n        ]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $location, tbs, fs, mast, wss, ns, prefs, dps, is, ps;\n\n    var nz = 'nzFilter',\n        del = 'showDelta';\n\n    var nzFilter = true,\n        showDelta = false,\n        detailsPanel,\n        pStartY,\n        pHeight,\n        wSize,\n        port;\n\n    var topPdg = 28,\n        dPanelWidth = 480,\n\n        pName = 'port-details-panel',\n        detailsReq = 'portDetailsRequest',\n        detailsResp = 'portDetailsResponse';\n\n\n    var keyBindings = {\n        esc: [closePanel, 'Close the details panel'],\n        _helpFormat: ['esc'],\n    };\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    var defaultPortPrefsState = {\n        nzFilter: 1,\n        showDelta: 0,\n    };\n\n    var prefsState = {};\n\n    function updatePrefsState(what, b) {\n        prefsState[what] = b ? 1 : 0;\n        prefs.setPrefs('port_prefs', prefsState);\n    }\n\n    function toggleNZState(b) {\n        if (b === undefined) {\n            nzFilter = !nzFilter;\n        } else {\n            nzFilter = b;\n        }\n        updatePrefsState(nz, nzFilter);\n    }\n\n    function toggleDeltaState(b) {\n        if (b === undefined) {\n            showDelta = !showDelta;\n        } else {\n            showDelta = b;\n        }\n        updatePrefsState(del, b);\n    }\n\n    function restoreConfigFromPrefs() {\n        prefsState = prefs.asNumbers(\n            prefs.getPrefs('port_prefs', defaultPortPrefsState)\n        );\n\n        $log.debug('Port - Prefs State:', prefsState);\n        toggleDeltaState(prefsState.showDelta);\n        toggleNZState(prefsState.nzFilter);\n    }\n\n    function createDetailsPanel() {\n        detailsPanel = dps.create(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n            scope: $scope,\n            keyBindings: keyBindings,\n        });\n\n        dps.setResponse(detailsResp, respDetailsCb);\n\n        $scope.hidePanel = function () { detailsPanel.hide(); };\n    }\n\n    function setUpPanel() {\n        dps.empty();\n        dps.addContainers();\n        dps.addCloseButton(closePanel);\n\n        var top = dps.top();\n\n        dps.addHeading('port-icon');\n        top.append('div').classed('top-content', true);\n\n        top.append('hr');\n    }\n\n    function friendlyPropsList(details) {\n        return {\n            'ID': details['id'],\n            'Device': details['devId'],\n            'Type': details['type'],\n            'Speed': details['speed'],\n            'Enabled': details['enabled'],\n        };\n    }\n\n\n    function populateTop(tblDiv, details) {\n        is.loadEmbeddedIcon(dps.select('.iconDiv'), details._iconid_type, 40);\n        dps.top().select('h2').text(details.devId + ' port ' + details.id);\n        dps.addPropsList(tblDiv, friendlyPropsList(details));\n    }\n\n    function populateDetails(details) {\n        setUpPanel();\n        populateTop(dps.select('.top-content'), details);\n        detailsPanel.height(pHeight);\n        detailsPanel.width(dPanelWidth);\n\n    }\n\n    function respDetailsCb(data) {\n        $scope.panelData = data.details;\n        port = data.port;\n        $scope.$apply();\n    }\n\n    angular.module('ovPort', [])\n        .controller('OvPortCtrl', [\n            '$log', '$scope', '$location',\n            'TableBuilderService', 'FnService', 'MastService', 'WebSocketService',\n            'NavService', 'PrefsService', 'DetailsPanelService', 'IconService',\n            'PanelService',\n\n            function (_$log_, _$scope_, _$location_,\n                      _tbs_, _fs_, _mast_, _wss_,\n                      _ns_, _prefs_, _dps_, _is_, _ps_) {\n                var params;\n                var tableApi;\n                $log = _$log_;\n                $scope = _$scope_;\n                $location = _$location_;\n                tbs = _tbs_;\n                fs = _fs_;\n                mast = _mast_;\n                wss = _wss_;\n                ns = _ns_;\n                prefs = _prefs_;\n                dps = _dps_;\n                is = _is_;\n                ps = _ps_;\n\n                params = $location.search();\n\n                $scope.deviceTip = 'Show device table';\n                $scope.flowTip = 'Show flow view for this device';\n                $scope.groupTip = 'Show group view for this device';\n                $scope.meterTip = 'Show meter view for selected device';\n                $scope.pipeconfTip = 'Show pipeconf view for selected device';\n                $scope.toggleDeltaTip = 'Toggle port delta statistics';\n                $scope.toggleNZTip = 'Toggle non zero port statistics';\n\n                if (params.hasOwnProperty('devId')) {\n                    $scope.devId = params['devId'];\n                }\n\n                $scope.payloadParams = {\n                    nzFilter: nzFilter,\n                    showDelta: showDelta,\n                };\n\n                function selCb($event, row) {\n                    if ($scope.selId) {\n                        wss.sendEvent(detailsReq, {\n                            id: row.id,\n                            devId: $scope.devId,\n                        });\n                    } else {\n                        $scope.hidePanel();\n                    }\n                    $log.debug('Got a click on:', row);\n                }\n\n                tableApi = tbs.buildTable({\n                    scope: $scope,\n                    tag: 'port',\n                    query: params,\n                    selCb: selCb,\n                });\n\n                function filterToggleState() {\n                    return {\n                        nzFilter: nzFilter,\n                        showDelta: showDelta,\n                    };\n                }\n\n                $scope.nav = function (path) {\n                    if ($scope.devId) {\n                        ns.navTo(path, { devId: $scope.devId });\n                    }\n                };\n\n                $scope.toggleNZ = function () {\n                    toggleNZState();\n                    $scope.payloadParams = filterToggleState();\n                    tableApi.forceRefesh();\n                };\n\n                $scope.toggleDelta = function () {\n                    toggleDeltaState();\n                    $scope.payloadParams = filterToggleState();\n                    tableApi.forceRefesh();\n                };\n\n                $scope.isDelta = function () {\n                    return showDelta;\n                };\n\n                $scope.isNZ = function () {\n                    return nzFilter;\n                };\n\n                function getOperatorFromQuery(query) {\n\n                    var operator = query.split(' '),\n                        opFunc = null;\n\n                    if (operator[0] === '>') {\n                        opFunc = _.gt;\n                    } else if (operator[0] === '>=') {\n                        opFunc = _.gte;\n                    } else if (operator[0] === '<') {\n                        opFunc = _.lt;\n                    } else if (operator[0] === '<=') {\n                        opFunc = _.lte;\n                    } else {\n                        return {\n                            operator: opFunc,\n                            searchText: query,\n                        };\n                    }\n\n                    return {\n                        operator: opFunc,\n                        searchText: operator[1],\n                    };\n                }\n\n                $scope.customFilter = function (prop, val) {\n                    if (!val) {\n                        return;\n                    }\n\n                    var search = getOperatorFromQuery(val),\n                        operator = search.operator,\n                        searchText = search.searchText;\n\n                    if (operator) {\n                        return function (row) {\n                            var queryBy = $scope.queryBy || '$';\n\n                            if (queryBy !== '$') {\n                                var rowValue = parseInt(row[$scope.queryBy].replace(/,/g, ''));\n                                return operator(rowValue, parseInt(searchText)) ? row : null;\n                            } else {\n                                var keys = _.keysIn(row);\n\n                                for (var i = 0, l = keys.length; i < l; i++) {\n                                    var rowValue = parseInt(row[keys[i]].replace(/,/g, ''));\n                                    if (operator(rowValue, parseInt(searchText))) {\n                                        return row;\n                                    }\n                                }\n                            }\n                        };\n                    } else {\n                        var out = {};\n                        out[$scope.queryBy || '$'] = $scope.query;\n                        return out;\n                    }\n                };\n\n                restoreConfigFromPrefs();\n\n                $scope.$on('$destroy', function () {\n                    dps.destroy();\n                });\n\n                $log.log('OvPortCtrl has been created');\n            }])\n    .directive('portDetailsPanel',\n        ['$rootScope', '$window', '$timeout', 'KeyService',\n            function ($rootScope, $window, $timeout, ks) {\n                return function (scope) {\n                    var unbindWatch;\n\n                    function heightCalc() {\n                        pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                            + mast.mastHeight() + topPdg;\n                        wSize = fs.windowSize(pStartY);\n                        pHeight = wSize.height;\n                    }\n\n                    function initPanel() {\n                        heightCalc();\n                        createDetailsPanel();\n                    }\n\n                    if (scope.onos.browser === 'safari') {\n                        $timeout(initPanel);\n                    } else {\n                        initPanel();\n                    }\n                    ks.keyBindings(keyBindings);\n\n                    ks.gestureNotes([\n                        ['click', 'Select a row to show port details'],\n                        ['scroll down', 'See more ports'],\n                    ]);\n\n                    scope.$watch('panelData', function () {\n                        if (!fs.isEmptyObject(scope.panelData)) {\n                            populateDetails(scope.panelData);\n                            detailsPanel.show();\n                        }\n                    });\n\n                    unbindWatch = $rootScope.$watchCollection(\n                        function () {\n                            return {\n                                h: $window.innerHeight,\n                                w: $window.innerWidth,\n                            };\n                        }, function () {\n                            if (!fs.isEmptyObject(scope.panelData)) {\n                                heightCalc();\n                                populateDetails(scope.panelData);\n                            }\n                        }\n                    );\n\n                    scope.$on('$destroy', function () {\n                        unbindWatch();\n                        ks.unbindKeys();\n                        ps.destroyPanel(pName);\n                    });\n                };\n            }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, $location, tbs, ns;\n\n    angular.module('ovProcessor', [])\n    .controller('OvProcessorCtrl',\n        ['$log', '$scope', '$location', 'TableBuilderService', 'NavService',\n\n        function (_$log_, _$scope_, _$location_, _tbs_, _ns_) {\n            var params;\n            $log = _$log_;\n            $scope = _$scope_;\n            $location = _$location_;\n            tbs = _tbs_;\n            ns = _ns_;\n            $scope.requestTip = 'Show packet requests';\n\n            params = $location.search();\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'processor',\n                query: params,\n            });\n\n            $scope.nav = function (path) {\n                if ($scope.devId) {\n                    ns.navTo(path);\n                }\n            };\n\n            $log.log('OvProcessorCtrl has been created');\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $scope, fs, ks, ps, is;\n\n    var detailsPanel,\n        panelData,\n        top,\n        pStartY,\n        pHeight,\n        wSize = false;\n\n    var pName = 'settings-details-panel',\n        panelWidth = 540,\n        topPdg = 60,\n        propOrder = ['fqComponent', 'prop', 'type', 'value', 'defValue', 'desc'],\n        friendlyProps = [\n            'Component', 'Property', 'Type', 'Value', 'Default',\n            'Description',\n        ];\n\n    function createDetailsPanel() {\n        detailsPanel = ps.createPanel(pName, {\n            width: wSize.width,\n            margin: 0,\n            hideMargin: 0,\n        });\n\n        detailsPanel.el().style({\n            position: 'absolute',\n            top: pStartY + 'px',\n        });\n\n        detailsPanel.hide();\n    }\n\n    function closePanel() {\n        if (detailsPanel.isVisible()) {\n            $scope.selId = null;\n            panelData = null;\n            detailsPanel.hide();\n            return true;\n        }\n        return false;\n    }\n\n    function addCloseBtn(div) {\n        is.loadEmbeddedIcon(div, 'close', 20);\n        div.on('click', closePanel);\n    }\n\n    function setUpPanel() {\n        var container, closeBtn, div;\n\n        detailsPanel.empty();\n        detailsPanel.width(panelWidth);\n\n        container = detailsPanel.append('div').classed('container', true);\n\n        top = container.append('div').classed('top', true);\n        closeBtn = top.append('div').classed('close-btn', true);\n        addCloseBtn(closeBtn);\n\n        div = top.append('div').classed('top-content', true);\n\n        function ndiv(cls, addTable) {\n            var d = div.append('div').classed(cls, true);\n            if (addTable) {\n                d.append('table');\n            }\n        }\n\n        ndiv('settings-title-1');\n        ndiv('settings-title-2');\n        ndiv('settings-props', true);\n    }\n\n    function addProp(tbody, index, value) {\n        var tr = tbody.append('tr');\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n\n        addCell('label', friendlyProps[index] + ':');\n        addCell('value', value);\n    }\n\n    function populateTop(details) {\n        var propsBody = top.select('.settings-props table').append('tbody');\n\n        top.select('.settings-title-1').text(details.component);\n        top.select('.settings-title-2').text(details.prop);\n\n        propOrder.forEach(function (prop, i) {\n            addProp(propsBody, i, details[prop]);\n        });\n    }\n\n    function populateDetails() {\n        setUpPanel();\n        populateTop(panelData);\n        detailsPanel.height(pHeight);\n    }\n\n    angular.module('ovSettings', [])\n        .controller('OvSettingsCtrl',\n            ['$log', '$scope',\n            'FnService', 'KeyService', 'PanelService',\n            'IconService', 'TableBuilderService',\n\n        function (_$log_, _$scope_, _fs_, _ks_, _ps_, _is_, tbs) {\n            $log = _$log_;\n            $scope = _$scope_;\n            fs = _fs_;\n            ks = _ks_;\n            ps = _ps_;\n            is = _is_;\n            $scope.panelData = {};\n\n            function selCb($event, row) {\n                if ($scope.selId) {\n                    panelData = row;\n                    populateDetails();\n                    detailsPanel.show();\n                } else {\n                    panelData = null;\n                    detailsPanel.hide();\n                }\n            }\n\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'setting',\n                selCb: selCb,\n            });\n\n            ks.keyBindings({\n                esc: [$scope.selectCallback, 'Deselect property'],\n                _helpFormat: ['esc'],\n            });\n            ks.gestureNotes([\n                ['click row', 'Select / deselect settings property'],\n                ['scroll down', 'See more settings'],\n            ]);\n\n            $scope.$on('$destroy', function () {\n                ks.unbindKeys();\n            });\n\n            $log.log('OvSettingsCtrl has been created');\n        }])\n\n        .directive('settingsDetailsPanel',\n            ['$rootScope', '$window', '$timeout', 'KeyService',\n            function ($rootScope, $window, $timeout, ks) {\n                return function (scope) {\n                    var unbindWatch;\n\n                    function heightCalc() {\n                        pStartY = fs.noPxStyle(d3.select('.tabular-header'), 'height')\n                            + topPdg;\n                        wSize = fs.windowSize(pStartY);\n                        pHeight = wSize.height;\n                    }\n\n                    function initPanel() {\n                        heightCalc();\n                        createDetailsPanel();\n                        $log.debug('start to initialize panel!');\n                    }\n\n                    if (scope.onos.browser === 'safari') {\n                        $timeout(initPanel);\n                    } else {\n                        initPanel();\n                    }\n                    ks.keyBindings({\n                        esc: [closePanel, 'Close the details panel'],\n                        _helpFormat: ['esc'],\n                    });\n                    ks.gestureNotes([\n                        ['click', 'Select a row to show property details'],\n                        ['scroll down', 'See more properties'],\n                    ]);\n\n                    unbindWatch = $rootScope.$watchCollection(\n                        function () {\n                            return {\n                                h: $window.innerHeight,\n                                w: $window.innerWidth,\n                            };\n                        }, function () {\n                            if (panelData) {\n                                heightCalc();\n                                populateDetails();\n                            }\n                        }\n                    );\n\n                    scope.$on('$destroy', function () {\n                        panelData = null;\n                        unbindWatch();\n                        ks.unbindKeys();\n                        ps.destroyPanel(pName);\n                    });\n                };\n            }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var moduleDependencies = [\n        'ngCookies',\n        'onosUtil',\n        'onosSvg',\n        'onosRemote',\n    ];\n\n    var $scope, $log, $loc, $timeout,\n        fs, ks, zs, gs, ms, sus, flash, wss, ps, th, tds, t3s, tes, tfs, tps,\n        tis, tms, tss, tls, tos, fltr, ttbs, tspr, tov;\n\n    var ovtopo, svg, defs, zoomLayer, mapG, spriteG, forceG, noDevsLayer;\n\n    var zoomer,\n        actionMap,\n        topoLion = function (x) { return '#' + x + '#'; }; \n\n\n    function setUpKeys(overlayKeys) {\n\n        function togInst() { return topoLion('tbtt_tog_instances'); }\n        function togSumm() { return topoLion('tbtt_tog_summary'); }\n        function togUseDet() { return topoLion('tbtt_tog_use_detail'); }\n\n        function togHost() { return topoLion('tbtt_tog_host'); }\n        function togOff() { return topoLion('tbtt_tog_offline'); }\n        function togPortHi() { return topoLion('tbtt_tog_porthi'); }\n\n        function showBad() { return topoLion('tbtt_bad_links'); }\n        function togMap() { return topoLion('tbtt_tog_map'); }\n        function selMap() { return topoLion('tbtt_sel_map'); }\n        function togSpr() { return topoLion('tbtt_tog_sprite'); }\n\n        function rstLoc() { return topoLion('tbtt_reset_loc'); }\n        function togOb() { return topoLion('tbtt_tog_oblique'); }\n        function cycLayer() { return topoLion('tbtt_cyc_layers'); }\n        function cycDev() { return topoLion('tbtt_cyc_dev_labs'); }\n        function cycHost() { return topoLion('tbtt_cyc_host_labs'); }\n\n        function unpin() { return topoLion('tbtt_unpin_node'); }\n        function rzoom() { return topoLion('tbtt_reset_zoom'); }\n        function togtb() { return topoLion('tbtt_tog_toolbar'); }\n        function eqmaster() { return topoLion('tbtt_eq_master'); }\n\n        function uiClick() { return topoLion('click'); }\n        function uiShClick() { return topoLion('shift_click'); }\n        function uiDrag() { return topoLion('drag'); }\n        function uiCmdScr() { return topoLion('cmd_scroll'); }\n        function uiCmdDrag() { return topoLion('cmd_drag'); }\n\n        function uiClickTxt() { return topoLion('qh_gest_click'); }\n        function uiShClickTxt() { return topoLion('qh_gest_shift_click'); }\n        function uiDragTxt() { return topoLion('qh_gest_drag'); }\n        function uiCmdScrTxt() { return topoLion('qh_gest_cmd_scroll'); }\n        function uiCmdDragTxt() { return topoLion('qh_gest_cmd_drag'); }\n\n        actionMap = {\n            I: [toggleInstances, togInst],\n            O: [toggleSummary, togSumm],\n            D: [toggleUseDetailsFlag, togUseDet],\n\n            H: [toggleHosts, togHost],\n            M: [toggleOffline, togOff],\n            P: [togglePorts, togPortHi],\n\n            dash: [tfs.showBadLinks, showBad],\n            B: [toggleMap, togMap],\n            G: [openMapSelection, selMap],\n            S: [toggleSprites, togSpr],\n\n            X: [tfs.resetAllLocations, rstLoc],\n            Z: [tos.toggleOblique, togOb],\n            N: [fltr.clickAction, cycLayer],\n            L: [tfs.cycleDeviceLabels, cycDev],\n            'shift-L': [tfs.cycleHostLabels, cycHost],\n\n            U: [tfs.unpin, unpin],\n            R: [resetZoom, rzoom],\n            dot: [ttbs.toggleToolbar, togtb],\n            E: [equalizeMasters, eqmaster],\n\n\n            F1: function () { ttbs.fnkey(0); },\n            F2: function () { ttbs.fnkey(1); },\n            F3: function () { ttbs.fnkey(2); },\n            F4: function () { ttbs.fnkey(3); },\n            F5: function () { ttbs.fnkey(4); },\n\n            esc: handleEscape,\n\n            _keyListener: ttbs.keyListener,\n\n            _helpFormat: [\n                ['I', 'O', 'D', 'H', 'M', 'P', 'dash', 'B', 'G', 'S'],\n                ['X', 'Z', 'N', 'L', 'shift-L', 'U', 'R', '-', 'E', '-', 'dot'],\n                [], \n            ],\n        };\n\n        if (fs.isO(overlayKeys)) {\n            mergeKeys(overlayKeys);\n        }\n\n        ks.keyBindings(actionMap);\n\n        ks.gestureNotes([\n            [uiClick, uiClickTxt],\n            [uiShClick, uiShClickTxt],\n            [uiDrag, uiDragTxt],\n            [uiCmdScr, uiCmdScrTxt],\n            [uiCmdDrag, uiCmdDragTxt],\n        ]);\n    }\n\n    function mergeKeys(extra) {\n        var _hf = actionMap._helpFormat[2];\n\n        ks.checkNotGlobal(extra);\n\n        extra._keyOrder.forEach(function (k) {\n            var d = extra[k],\n                cb = d && d.cb,\n                tt = d && d.tt;\n            if (d && !actionMap[k]) {\n                actionMap[k] = [cb, tt];\n                _hf.push(k);\n            }\n        });\n    }\n\n\n    function toggleInstances(x) {\n        updatePrefsState('insts', tis.toggle(x));\n        tfs.updateDeviceColors();\n    }\n\n    function toggleSummary(x) {\n        updatePrefsState('summary', tps.toggleSummary(x));\n    }\n\n    function toggleUseDetailsFlag(x) {\n        updatePrefsState('detail', tps.toggleUseDetailsFlag(x));\n    }\n\n    function toggleHosts(x) {\n        updatePrefsState('hosts', tfs.toggleHosts(x));\n    }\n\n    function toggleOffline(x) {\n        updatePrefsState('offdev', tfs.toggleOffline(x));\n    }\n\n    function togglePorts(x) {\n        updatePrefsState('porthl', tfs.togglePorts(x));\n    }\n\n    function _togSvgLayer(x, G, tag, what) {\n        var on = (x === 'keyev') ? !sus.visible(G) : !!x,\n            verb = on ? topoLion('show') : topoLion('hide');\n        sus.visible(G, on);\n        updatePrefsState(tag, on);\n        flash.flash(verb + ' ' + what);\n    }\n\n    function toggleMap(x) {\n        _togSvgLayer(x, mapG, 'bg', topoLion('fl_background_map'));\n    }\n\n    function openMapSelection() {\n        tms.openMapSelection();\n    }\n\n    function toggleSprites(x) {\n        _togSvgLayer(x, spriteG, 'spr', topoLion('fl_sprite_layer'));\n    }\n\n    function resetZoom() {\n        zoomer.reset();\n        flash.flash(topoLion('fl_pan_zoom_reset'));\n    }\n\n    function equalizeMasters() {\n        wss.sendEvent('equalizeMasters');\n        flash.flash(topoLion('fl_eq_masters'));\n    }\n\n    function handleEscape() {\n        if (tis.showMaster()) {\n            tis.cancelAffinity();\n\n        } else if (tov.hooks.escape()) {\n\n        } else if (tss.deselectAll()) {\n\n        } else if (tls.deselectAllLinks()) {\n\n        } else if (tis.isVisible()) {\n            tis.hide();\n            tfs.updateDeviceColors();\n\n        } else if (tps.summaryVisible()) {\n            tps.hideSummary();\n        }\n    }\n\n\n    function notValid(what) {\n        $log.warn('topo.js getActionEntry(): Not a valid ' + what);\n    }\n\n    function getActionEntry(key) {\n        var entry;\n\n        if (!key) {\n            notValid('key');\n            return null;\n        }\n\n        entry = actionMap[key];\n\n        if (!entry) {\n            notValid('actionMap entry');\n            return null;\n        }\n        return fs.isA(entry) || [entry, ''];\n    }\n\n    function setUpToolbar() {\n        ttbs.init({\n            getActionEntry: getActionEntry,\n            setUpKeys: setUpKeys,\n        });\n        ttbs.createToolbar();\n    }\n\n\n    function setUpDefs() {\n        defs = svg.append('defs');\n        gs.loadDefs(defs);\n        sus.loadGlowDefs(defs);\n    }\n\n\n\n    function zoomEnabled(ev) {\n        return fs.isMobile() || (ev.metaKey || ev.altKey);\n    }\n\n    function zoomCallback() {\n        var sc = zoomer.scale(),\n            tr = zoomer.translate();\n\n        ps.setPrefs('topo_zoom', { tx: tr[0], ty: tr[1], sc: sc });\n\n        mapG.style('stroke-width', (2.0 / sc) + 'px');\n\n        tfs.setNodeScale(sc);\n    }\n\n    function setUpZoom() {\n        zoomLayer = svg.append('g').attr('id', 'topo-zoomlayer');\n        zoomer = zs.createZoomer({\n            svg: svg,\n            zoomLayer: zoomLayer,\n            zoomEnabled: zoomEnabled,\n            zoomCallback: zoomCallback,\n        });\n    }\n\n\n    function svgResized(s) {\n        tfs.newDim([s.width, s.height]);\n    }\n\n\n    function recenterLabel(g) {\n        var box = g.node().getBBox();\n\n        box.x -= box.width/2;\n        box.y -= box.height/2;\n        g.attr('transform', sus.translate(box.x, box.y));\n    }\n\n    function setUpNoDevs() {\n        var g;\n\n        noDevsLayer = svg.append('g').attr({\n            id: 'topo-noDevsLayer',\n            transform: sus.translate(500, 500),\n        });\n\n        g = noDevsLayer.append('g');\n        gs.addGlyph(g, 'bird', 100).attr('class', 'noDevsBird');\n        g.append('text').text('').attr({ x: 120, y: 80 });\n        recenterLabel(g);\n        showNoDevs(true);\n    }\n\n    function lionNoDevs() {\n        var g = d3.select('#topo-noDevsLayer g');\n\n        g.select('text').text(topoLion('no_devices_are_connected'));\n        recenterLabel(g);\n    }\n\n    function showNoDevs(b) {\n        sus.visible(noDevsLayer, b);\n    }\n\n\n    var countryFilters = {\n        s_america: function (c) {\n            return c.properties.continent === 'South America';\n        },\n\n        ns_america: function (c) {\n            return c.properties.custom === 'US-cont' ||\n                c.properties.subregion === 'Central America' ||\n                c.properties.continent === 'South America';\n        },\n\n        japan: function (c) {\n            return c.properties.geounit === 'Japan';\n        },\n\n        europe: function (c) {\n            return c.properties.continent === 'Europe';\n        },\n\n        italy: function (c) {\n            return c.properties.geounit === 'Italy';\n        },\n\n        uk: function (c) {\n            return c.properties.adm0_a3 === 'GBR' ||\n                c.properties.adm0_a3 === 'IRL';\n        },\n\n        s_korea: function (c) {\n            return c.properties.adm0_a3 === 'KOR';\n        },\n\n        australia: function (c) {\n            return c.properties.adm0_a3 === 'AUS';\n        },\n    };\n\n    var tintOn = 0,\n        shadeFlip = 0,\n        shadePalette = {\n        light: {\n            sea: 'aliceblue',\n            land: 'white',\n            outline: '#ddd',\n        },\n        dark: {\n            sea: '#001830',\n            land: '#232331',\n            outline: '#3a3a3a',\n        },\n    };\n\n    function shading() {\n        return tintOn ? {\n            palette: shadePalette[th.theme()],\n            flip: shadeFlip,\n        } : '';\n    }\n\n    function setMap(map) {\n        ps.setPrefs('topo_mapid', map);\n        setUpMap();\n        opacifyMap(true);\n    }\n\n    function currentMap() {\n        return ps.getPrefs(\n            'topo_mapid',\n            {\n                mapid: 'usa',\n                mapscale: 1,\n                mapfilepath: '*continental_us',\n                tint: 'off',\n            },\n            $loc.search()\n        );\n    }\n\n    function setUpMap() {\n        var prefs = currentMap(),\n            mapId = prefs.mapid,\n            mapFilePath = prefs.mapfilepath,\n            mapScale = prefs.mapscale,\n            tint = prefs.tint,\n            promise,\n            cfilter;\n\n        tintOn = tint === 'on' ? 1 : 0;\n\n        $log.debug('setUpMap() mapId:', mapId, ', mapScale:', mapScale,\n                   ', tint:', tint);\n\n        mapG = d3.select('#topo-map');\n        if (mapG.empty()) {\n            mapG = zoomLayer.append('g').attr('id', 'topo-map');\n        } else {\n            mapG.each(function (d, i) {\n                d3.selectAll(this.childNodes).remove();\n            });\n        }\n\n        if (mapFilePath === '*countries') {\n\n            cfilter = countryFilters[mapId] || countryFilters.uk;\n\n            promise = ms.loadMapRegionInto(mapG, {\n                countryFilter: cfilter,\n                adjustScale: mapScale,\n                shading: shading(),\n            });\n        } else {\n\n            promise = ms.loadMapInto(mapG, mapFilePath, mapId, {\n                adjustScale: mapScale,\n                shading: shading(),\n            });\n        }\n\n        ps.setPrefs('topo_mapid', prefs);\n        return promise;\n    }\n\n    function mapReshader() {\n        $log.debug('... Re-shading map ...');\n        ms.reshade(shading());\n    }\n\n    function mapShader(on) {\n        if (on) {\n            th.addListener(mapReshader);\n        } else {\n            th.removeListener(mapReshader);\n        }\n    }\n\n    function opacifyMap(b) {\n        mapG.transition()\n            .duration(1000)\n            .attr('opacity', b ? 1 : 0);\n    }\n\n    function setUpSprites() {\n        var prefs = ps.getPrefs('topo_sprites', { sprites: '' }, $loc.search()),\n            sprId = prefs.sprites;\n\n        spriteG = zoomLayer.append('g').attr('id', 'topo-sprites');\n        if (sprId) {\n            ps.setPrefs('topo_sprites', prefs);\n            tspr.loadSprites(spriteG, defs, sprId);\n        }\n    }\n\n\n    var prefsState = {};\n\n    function updatePrefsState(what, b) {\n        prefsState[what] = b ? 1 : 0;\n        ps.setPrefs('topo_prefs', prefsState);\n    }\n\n    function applyPreferences(evt) {\n    }\n\n    function restoreConfigFromPrefs() {\n        prefsState = ps.asNumbers(\n            ps.getPrefs('topo_prefs', ttbs.defaultPrefs), ['ovid'], true\n        );\n\n        $log.debug('TOPO- Prefs State:', prefsState);\n\n        flash.enable(false);\n        toggleInstances(prefsState.insts);\n        toggleSummary(prefsState.summary);\n        toggleUseDetailsFlag(prefsState.detail);\n        toggleHosts(prefsState.hosts);\n        toggleOffline(prefsState.offdev);\n        togglePorts(prefsState.porthl);\n        toggleMap(prefsState.bg);\n        toggleSprites(prefsState.spr);\n        ttbs.setToolbar(prefsState.toolbar);\n        t3s.setDevLabIndex(prefsState.dlbls);\n        t3s.setHostLabIndex(prefsState.hlbls);\n        flash.enable(true);\n    }\n\n\n    function restoreSummaryFromPrefs() {\n        prefsState = ps.asNumbers(\n            ps.getPrefs('topo_prefs', ttbs.defaultPrefs), ['ovid'], true\n        );\n        $log.debug('TOPO- Prefs SUMMARY State:', prefsState.summary);\n\n        flash.enable(false);\n        toggleSummary(prefsState.summary);\n        flash.enable(true);\n    }\n\n    function topoStartDone() {\n        $timeout(function () {\n            $log.debug('^^ topo.topoStartDone() ^^');\n\n            tss.reselect();\n\n            if ($scope.intentData) {\n                tov.hooks.showIntent($scope.intentData);\n            }\n\n        }, 200);\n    }\n\n\n    angular.module('ovTopo', moduleDependencies)\n        .controller('OvTopoCtrl',\n            ['$scope', '$log', '$location', '$timeout', '$cookies',\n            'FnService', 'MastService', 'KeyService', 'ZoomService',\n            'GlyphService', 'MapService', 'SvgUtilService', 'FlashService',\n            'WebSocketService', 'PrefsService', 'ThemeService',\n            'TopoDialogService', 'TopoD3Service', 'TopoEventService',\n            'TopoForceService', 'TopoPanelService', 'TopoInstService',\n            'TopoSelectService', 'TopoLinkService', 'TopoTrafficService',\n            'TopoObliqueService', 'TopoFilterService', 'TopoToolbarService',\n            'TopoMapService', 'TopoSpriteService', 'TooltipService',\n            'TopoOverlayService', 'LionService',\n\n                function (_$scope_, _$log_, _$loc_, _$timeout_, _$cookies_,\n                  _fs_, mast, _ks_, _zs_,\n                  _gs_, _ms_, _sus_, _flash_,\n                  _wss_, _ps_, _th_,\n                  _tds_, _t3s_, _tes_,\n                  _tfs_, _tps_, _tis_,\n                  _tss_, _tls_, _tts_,\n                  _tos_, _fltr_, _ttbs_,\n                  _tms_, _tspr_, _ttip_,\n                  _tov_, lion) {\n\n            var params = _$loc_.search(),\n                selOverlay = params.overlayId,\n                projection,\n                dim,\n                uplink = {\n                    showNoDevs: showNoDevs,\n                    projection: function () { return projection; },\n                    zoomLayer: function () { return zoomLayer; },\n                    zoomer: function () { return zoomer; },\n                    opacifyMap: opacifyMap,\n                    topoStartDone: topoStartDone,\n                };\n\n            $scope = _$scope_;\n            $log = _$log_;\n            $loc = _$loc_;\n            $timeout = _$timeout_;\n            fs = _fs_;\n            ks = _ks_;\n            zs = _zs_;\n            gs = _gs_;\n            ms = _ms_;\n            sus = _sus_;\n            flash = _flash_;\n            wss = _wss_;\n            ps = _ps_;\n            th = _th_;\n            tds = _tds_;\n            t3s = _t3s_;\n            tes = _tes_;\n            tfs = _tfs_;\n            tps = _tps_;\n            tis = _tis_;\n            tms = _tms_;\n            tls = _tls_;\n            tos = _tos_;\n            fltr = _fltr_;\n            ttbs = _ttbs_;\n            tspr = _tspr_;\n            tov = _tov_;\n            tss = _tss_;\n\n            tms.start({\n                toggleMap: toggleMap,\n                currentMap: currentMap,\n                setMap: setMap,\n            });\n\n            if (params.key && params.appId && params.appName) {\n                $scope.intentData = {\n                    key: params.key,\n                    appId: params.appId,\n                    appName: params.appName,\n                    intentType: params.intentType,\n                };\n            }\n\n            $scope.notifyResize = function () {\n                svgResized(fs.windowSize(mast.mastHeight()));\n            };\n\n            $scope.$on('$destroy', function () {\n                $log.log('OvTopoCtrl is saying Buh-Bye!');\n                tes.stop();\n                tms.stop();\n                ks.unbindKeys();\n                tps.destroyPanels();\n                tds.closeDialog();\n                tis.destroyInst();\n                tfs.destroyForce();\n                ttbs.destroyToolbar();\n                mapShader(false);\n            });\n\n            ovtopo = d3.select('#ov-topo');\n            svg = ovtopo.select('svg');\n            svg.attr(fs.windowSize(mast.mastHeight()));\n            dim = [svg.attr('width'), svg.attr('height')];\n\n            ps.addListener(applyPreferences);\n\n            setUpKeys();\n            setUpToolbar();\n            setUpDefs();\n            setUpZoom();\n            setUpNoDevs();\n            setUpMap().then(\n                function (proj) {\n                    var z = ps.getPrefs('topo_zoom', { tx: 0, ty: 0, sc: 1 });\n                    zoomer.panZoom([z.tx, z.ty], z.sc);\n                    $log.debug('** Zoom restored:', z);\n\n                    projection = proj;\n                    $log.debug('** We installed the projection:', proj);\n                    flash.enable(false);\n                    toggleMap(prefsState.bg);\n                    flash.enable(true);\n                    mapShader(true);\n\n                    $scope.lion = lion.bundle('core.view.Topo');\n                    topoLion = $scope.lion;\n                    $log.debug('Loaded Topo LION Bundle:', topoLion);\n\n                    lionNoDevs();\n\n                    tfs.setLionBundle(topoLion);\n                    tis.setLionBundle(topoLion);\n                    tms.setLionBundle(topoLion);\n                    tps.setLionBundle(topoLion);\n                    ttbs.setLionBundle(topoLion);\n\n                    tes.start();\n                    restoreSummaryFromPrefs();\n                }\n            );\n            tes.bindHandlers();\n            setUpSprites();\n\n            forceG = zoomLayer.append('g').attr('id', 'topo-force');\n            tfs.initForce(svg, forceG, uplink, dim);\n            tis.initInst({ showMastership: tfs.showMastership });\n            tps.initPanels();\n\n            restoreConfigFromPrefs();\n\n            ttbs.selectOverlay(selOverlay || prefsState.ovid);\n\n            $log.debug('registered overlays...', tov.list());\n            $log.log('OvTopoCtrl has been created');\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var sus, is, ts, ps, ttbs;\n\n    var topoLion = function (x) {\n        return '#tfs#' + x + '#';\n    };\n\n    var zoomer, api;\n\n    var devIconDim = 36,\n        devColorDim = 32,\n        labelPad = 4,\n        hostRadius = 14,\n        badgeConfig = {\n            radius: 12,\n            yoff: 5,\n            gdelta: 10,\n        },\n        halfDevIcon = devIconDim / 2,\n        devBadgeOff = { dx: -halfDevIcon, dy: -halfDevIcon },\n        hostBadgeOff = { dx: -hostRadius, dy: -hostRadius },\n        portLabelDim = 30,\n        status = {\n            i: 'badgeInfo',\n            w: 'badgeWarn',\n            e: 'badgeError',\n        };\n\n    var remappedDeviceTypes = {\n        virtual: 'cord',\n\n        'switch': 'm_switch',\n        roadm: 'm_roadm',\n        otn: 'm_otn',\n        roadm_otn: 'm_roadm_otn',\n        fiber_switch: 'm_fiberSwitch',\n        microwave: 'm_microwave',\n    };\n\n    var remappedHostTypes = {\n        router: 'm_router',\n        endstation: 'm_endstation',\n        bgpSpeaker: 'm_bgpSpeaker',\n    };\n\n    function mapDeviceTypeToGlyph(type) {\n        return remappedDeviceTypes[type] || type || 'unknown';\n    }\n\n    function mapHostTypeToGlyph(type) {\n        return remappedHostTypes[type] || type || 'unknown';\n    }\n\n    function badgeStatus(badge) {\n        return status[badge.status] || status.i;\n    }\n\n    var deviceLabelIndex = 0,\n        hostLabelIndex = 0;\n\n    var dColTheme = {\n        light: {\n            online: '#444444',\n            offline: '#cccccc',\n        },\n        dark: {\n            online: '#444444',\n            offline: '#cccccc',\n        },\n    };\n\n    function devGlyphColor(d) {\n        var o = d.online,\n            id = d.master,\n            otag = o ? 'online' : 'offline';\n        return o ? sus.cat7().getColor(id, 0, ts.theme())\n                 : dColTheme[ts.theme()][otag];\n    }\n\n    function setDeviceColor(d) {\n        d.el.selectAll('rect').filter(function (d, i) { return i === 1; })\n            .style('fill', devGlyphColor(d));\n    }\n\n    function incDevLabIndex() {\n        setDevLabIndex(deviceLabelIndex+1);\n        switch (deviceLabelIndex) {\n            case 0: return topoLion('fl_device_labels_hide');\n            case 1: return topoLion('fl_device_labels_show_friendly');\n            case 2: return topoLion('fl_device_labels_show_id');\n        }\n    }\n\n    function setDevLabIndex(mode) {\n        deviceLabelIndex = mode % 3;\n        var p = ps.getPrefs('topo_prefs', ttbs.defaultPrefs);\n        p.dlbls = deviceLabelIndex;\n        ps.setPrefs('topo_prefs', p);\n    }\n\n    function incHostLabIndex() {\n        setHostLabIndex(hostLabelIndex+1);\n        switch (hostLabelIndex) {\n            case 0: return topoLion('fl_host_labels_show_friendly');\n            case 1: return topoLion('fl_host_labels_show_ip');\n            case 2: return topoLion('fl_host_labels_show_mac');\n            case 3: return topoLion('fl_host_labels_hide');\n        }\n    }\n\n    function setHostLabIndex(mode) {\n        hostLabelIndex = mode % 4;\n        var p = ps.getPrefs('topo_prefs', ttbs.defaultPrefs);\n        p.hlbls = hostLabelIndex;\n        ps.setPrefs('topo_prefs', p);\n    }\n\n    function hostLabel(d) {\n        var idx = (hostLabelIndex < d.labels.length) ? hostLabelIndex : 0;\n        return d.labels[idx];\n    }\n\n    function deviceLabel(d) {\n        var idx = (deviceLabelIndex < d.labels.length) ? deviceLabelIndex : 0;\n        return d.labels[idx];\n    }\n\n    function trimLabel(label) {\n        return (label && label.trim()) || '';\n    }\n\n    function computeLabelWidth(n) {\n        var text = n.select('text'),\n            box = text.node().getBBox();\n        return box.width + labelPad * 2;\n    }\n\n    function iconBox(dim, labelWidth) {\n        return {\n            x: -dim/2,\n            y: -dim/2,\n            width: dim + labelWidth,\n            height: dim,\n        };\n    }\n\n    function updateDeviceRendering(d) {\n        var node = d.el,\n            bdg = d.badge,\n            label = trimLabel(deviceLabel(d)),\n            labelWidth;\n\n        node.select('text').text(label);\n        labelWidth = label ? computeLabelWidth(node) : 0;\n\n        node.select('rect')\n            .transition()\n            .attr(iconBox(devIconDim, labelWidth));\n\n        if (bdg) {\n            renderBadge(node, bdg, devBadgeOff);\n        }\n    }\n\n    function updateHostRendering(d) {\n        var node = d.el,\n            bdg = d.badge;\n\n        updateHostLabel(d);\n\n        if (bdg) {\n            renderBadge(node, bdg, hostBadgeOff);\n        }\n    }\n\n    function renderBadge(node, bdg, boff) {\n        var bsel,\n            bcr = badgeConfig.radius,\n            bcgd = badgeConfig.gdelta;\n\n        node.select('g.badge').remove();\n\n        bsel = node.append('g')\n            .classed('badge', true)\n            .classed(badgeStatus(bdg), true)\n            .attr('transform', sus.translate(boff.dx, boff.dy));\n\n        bsel.append('circle')\n            .attr('r', bcr);\n\n        if (bdg.txt) {\n            bsel.append('text')\n                .attr('dy', badgeConfig.yoff)\n                .attr('text-anchor', 'middle')\n                .text(bdg.txt);\n        } else if (bdg.gid) {\n            bsel.append('use')\n                .attr({\n                    width: bcgd * 2,\n                    height: bcgd * 2,\n                    transform: sus.translate(-bcgd, -bcgd),\n                    'xlink:href': '#' + bdg.gid,\n                });\n        }\n    }\n\n    function updateHostLabel(d) {\n        var label = trimLabel(hostLabel(d));\n        d.el.select('text').text(label);\n    }\n\n    function updateDeviceColors(d) {\n        if (d) {\n            setDeviceColor(d);\n        } else {\n            api.node().filter('.device').each(function (d) {\n                setDeviceColor(d);\n            });\n        }\n    }\n\n\n\n    function deviceExisting(d) {\n        var node = d.el;\n        node.classed('online', d.online);\n        updateDeviceRendering(d);\n        api.posNode(d, true);\n    }\n\n    function hostExisting(d) {\n        updateHostRendering(d);\n        api.posNode(d, true);\n    }\n\n    function deviceEnter(d) {\n        var node = d3.select(this),\n            glyphId = mapDeviceTypeToGlyph(d.type),\n            label = trimLabel(deviceLabel(d)),\n            rect, crect, glyph, labelWidth;\n\n        d.el = node;\n\n        rect = node.append('rect');\n        crect = node.append('rect');\n\n        node.append('text').text(label)\n            .attr('text-anchor', 'left')\n            .attr('y', '0.3em')\n            .attr('x', halfDevIcon + labelPad);\n\n        glyph = is.addDeviceIcon(node, glyphId, devIconDim);\n\n        labelWidth = label ? computeLabelWidth(node) : 0;\n\n        rect.attr(iconBox(devIconDim, labelWidth));\n        crect.attr(iconBox(devColorDim, 0));\n        glyph.attr(iconBox(devIconDim, 0));\n\n        node.attr('transform', sus.translate(-halfDevIcon, -halfDevIcon));\n\n        d.el.selectAll('*')\n            .style('transform', 'scale(' + api.deviceScale() + ')');\n    }\n\n    function hostEnter(d) {\n        var node = d3.select(this),\n            glyphId = mapHostTypeToGlyph(d.type),\n            textDy = hostRadius + 10;\n\n        d.el = node;\n        sus.visible(node, api.showHosts());\n\n        is.addHostIcon(node, hostRadius, glyphId);\n\n        node.append('text')\n            .text(hostLabel)\n            .attr('dy', textDy)\n            .attr('text-anchor', 'middle');\n\n        d.el.selectAll('g').style('transform', 'scale(' + api.deviceScale() + ')');\n        d.el.selectAll('text').style('transform', 'scale(' + api.deviceScale() + ')');\n    }\n\n    function hostExit(d) {\n        var node = d.el;\n        node.select('use')\n            .style('opacity', 0.5)\n            .transition()\n            .duration(800)\n            .style('opacity', 0);\n\n        node.select('text')\n            .style('opacity', 0.5)\n            .transition()\n            .duration(800)\n            .style('opacity', 0);\n\n        node.select('circle')\n            .style('stroke-fill', '#555')\n            .style('fill', '#888')\n            .style('opacity', 0.5)\n            .transition()\n            .duration(1500)\n            .attr('r', 0);\n    }\n\n    function deviceExit(d) {\n        var node = d.el;\n        node.select('use')\n            .style('opacity', 0.5)\n            .transition()\n            .duration(800)\n            .style('opacity', 0);\n\n        node.selectAll('rect')\n            .style('stroke-fill', '#555')\n            .style('fill', '#888')\n            .style('opacity', 0.5);\n    }\n\n\n\n    function linkEntering(d) {\n\n        var link = d3.select(this);\n        d.el = link;\n        d.el.style('stroke-width', api.linkWidthScale() + 'px');\n        api.restyleLinkElement(d);\n        if (d.type() === 'hostLink') {\n            sus.visible(link, api.showHosts());\n        }\n    }\n\n    var linkLabelOffset = '0.3em';\n\n    function applyLinkLabels() {\n        var entering;\n\n        api.updateLinkLabelModel();\n\n        api.linkLabel().each(function (d) {\n            var el = d3.select(this),\n                rect = el.select('rect'),\n                text = el.select('text');\n            text.text(d.label);\n            rect.attr(rectAroundText(el));\n        });\n\n        entering = api.linkLabel().enter().append('g')\n            .classed('linkLabel', true)\n            .attr('id', function (d) { return d.id; });\n\n        entering.each(function (d) {\n            var el = d3.select(this),\n                rect,\n                text;\n\n            if (d.ldata.type() === 'hostLink') {\n                el.classed('hostLinkLabel', true);\n                sus.visible(el, api.showHosts());\n            }\n\n            d.el = el;\n            rect = el.append('rect');\n            text = el.append('text').text(d.label);\n            rect.attr(rectAroundText(el));\n            text.attr('dy', linkLabelOffset);\n\n            el.attr('transform', transformLabel(d.ldata.position, d.key));\n        });\n\n        api.linkLabel().exit().remove();\n    }\n\n    function rectAroundText(el) {\n        var text = el.select('text'),\n            box = text.node().getBBox();\n\n        box.x = -box.width / 2;\n        box.y = -box.height / 2;\n\n        box.x -= 1;\n        box.width += 2;\n        return box;\n    }\n\n    function generateLabelFunction() {\n        var labels = [],\n            xGap = 15,\n            yGap = 17;\n\n        return function (newId, newX, newY) {\n            var idx = -1;\n\n            labels.forEach(function (lab, i) {\n                var minX, maxX, minY, maxY;\n\n                if (lab.id === newId) {\n                    idx = i;\n                    return;\n                }\n                minX = lab.x - xGap;\n                maxX = lab.x + xGap;\n                minY = lab.y - yGap;\n                maxY = lab.y + yGap;\n\n                if (newX > minX && newX < maxX && newY > minY && newY < maxY) {\n                    newX = newX - xGap;\n                    newY = newY - yGap;\n                }\n            });\n\n            if (idx === -1) {\n                labels.push({ id: newId, x: newX, y: newY });\n            } else {\n                labels[idx] = { id: newId, x: newX, y: newY };\n            }\n\n            return { x: newX, y: newY };\n        };\n    }\n\n    var getLabelPos = generateLabelFunction();\n\n    function transformLabel(p, id) {\n        var dx = p.x2 - p.x1,\n            dy = p.y2 - p.y1,\n            xMid = dx/2 + p.x1,\n            yMid = dy/2 + p.y1;\n\n        if (id) {\n            var pos = getLabelPos(id, xMid, yMid);\n            return sus.translate(pos.x, pos.y);\n        }\n\n        return sus.translate(xMid, yMid);\n    }\n\n    function applyPortLabels(data, portLabelG) {\n        var entering = portLabelG.selectAll('.portLabel')\n            .data(data).enter().append('g')\n            .classed('portLabel', true)\n            .attr('id', function (d) { return d.id; });\n\n        var labelScale = portLabelDim / (portLabelDim * zoomer.scale());\n\n        entering.each(function (d) {\n            var el = d3.select(this),\n                rect = el.append('rect'),\n                text = el.append('text').text(d.num);\n\n            rect.attr(rectAroundText(el))\n                .style('transform', 'scale(' + labelScale + ')');\n            text.attr('dy', linkLabelOffset)\n                .style('transform', 'scale(' + labelScale + ')');\n\n            el.attr('transform', sus.translate(d.x, d.y));\n        });\n    }\n\n    function labelPoint(linkPos) {\n        var lengthUpLine = 1 / 3,\n            dx = linkPos.x2 - linkPos.x1,\n            dy = linkPos.y2 - linkPos.y1,\n            movedX = dx * lengthUpLine,\n            movedY = dy * lengthUpLine;\n\n        return {\n            x: movedX,\n            y: movedY,\n        };\n    }\n\n    function calcGroupPos(linkPos) {\n        var moved = labelPoint(linkPos);\n        return sus.translate(linkPos.x1 + moved.x, linkPos.y1 + moved.y);\n    }\n\n    function hashAttrs(linkPos) {\n        var hashLength = 25,\n            halfLength = hashLength / 2,\n            dx = linkPos.x2 - linkPos.x1,\n            dy = linkPos.y2 - linkPos.y1,\n            length = Math.sqrt((dx * dx) + (dy * dy)),\n            moveAmtX = (dx / length) * halfLength,\n            moveAmtY = (dy / length) * halfLength,\n            mid = labelPoint(linkPos),\n            angle = Math.atan(dy / dx) + 45;\n\n        return {\n            x1: mid.x - moveAmtX,\n            y1: mid.y - moveAmtY,\n            x2: mid.x + moveAmtX,\n            y2: mid.y + moveAmtY,\n            stroke: api.linkConfig()[ts.theme()].baseColor,\n            transform: 'rotate(' + angle + ',' + mid.x + ',' + mid.y + ')',\n        };\n    }\n\n    function textLabelPos(linkPos) {\n        var point = labelPoint(linkPos),\n            dist = 20;\n        return {\n            x: point.x + dist,\n            y: point.y + dist,\n        };\n    }\n\n    function applyNumLinkLabels(data, lblsG) {\n        var labels = lblsG.selectAll('g.numLinkLabel')\n                .data(data, function (d) { return 'pair-' + d.id; }),\n            entering;\n\n        labels.each(function (d) {\n            var el = d3.select(this);\n\n            el.attr({\n                transform: function (d) { return calcGroupPos(d.linkCoords); },\n            });\n            el.select('line')\n                .attr(hashAttrs(d.linkCoords));\n            el.select('text')\n                .attr(textLabelPos(d.linkCoords))\n                .text(d.num);\n        });\n\n        entering = labels\n            .enter()\n            .append('g')\n            .attr({\n                transform: function (d) { return calcGroupPos(d.linkCoords); },\n                id: function (d) { return 'pair-' + d.id; },\n            })\n            .classed('numLinkLabel', true);\n\n        entering.each(function (d) {\n            var el = d3.select(this);\n\n            el.append('line')\n                .classed('numLinkHash', true)\n                .attr(hashAttrs(d.linkCoords));\n            el.append('text')\n                .classed('numLinkText', true)\n                .attr(textLabelPos(d.linkCoords))\n                .text(d.num);\n        });\n\n        labels.exit().remove();\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoD3Service',\n        ['SvgUtilService', 'IconService', 'ThemeService',\n            'PrefsService', 'TopoToolbarService',\n\n        function (_sus_, _is_, _ts_, _ps_, _ttbs_) {\n            sus = _sus_;\n            is = _is_;\n            ts = _ts_;\n            ps = _ps_;\n            ttbs = _ttbs_;\n\n            function initD3(_api_, _zoomer_) {\n                api = _api_;\n                zoomer = _zoomer_;\n            }\n\n            function destroyD3() { }\n\n            return {\n                initD3: initD3,\n                destroyD3: destroyD3,\n\n                incDevLabIndex: incDevLabIndex,\n                setDevLabIndex: setDevLabIndex,\n                incHostLabIndex: incHostLabIndex,\n                setHostLabIndex: setHostLabIndex,\n                hostLabel: hostLabel,\n                deviceLabel: deviceLabel,\n                trimLabel: trimLabel,\n\n                updateDeviceLabel: updateDeviceRendering,\n                updateHostLabel: updateHostLabel,\n                updateDeviceColors: updateDeviceColors,\n\n                deviceExisting: deviceExisting,\n                hostExisting: hostExisting,\n                deviceEnter: deviceEnter,\n                hostEnter: hostEnter,\n                hostExit: hostExit,\n                deviceExit: deviceExit,\n\n                linkEntering: linkEntering,\n                applyLinkLabels: applyLinkLabels,\n                transformLabel: transformLabel,\n                applyPortLabels: applyPortLabels,\n                applyNumLinkLabels: applyNumLinkLabels,\n\n                setLionBundle: setLionBundle,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var idDialog = 'topo-p-dialog',\n        opts = {\n            cssCls: 'topo-p',\n        };\n\n\n    angular.module('ovTopo')\n    .factory('TopoDialogService',\n        ['DialogService',\n\n        function (ds) {\n            return {\n                openDialog: function () { return ds.openDialog(idDialog, opts); },\n                closeDialog: ds.closeDialog,\n                createDiv: ds.createDiv,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, wss, tps, tis, tfs, tss, tov, tspr;\n\n    var handlerMap,\n        openListener;\n\n\n    function createHandlerMap() {\n        handlerMap = {\n            showSummary: tps,\n\n            showDetails: tss,\n\n            showHighlights: tov,\n\n            addInstance: tis,\n            updateInstance: tis,\n            removeInstance: tis,\n\n            addDevice: tfs,\n            updateDevice: tfs,\n            removeDevice: tfs,\n            addHost: tfs,\n            updateHost: tfs,\n            moveHost: tfs,\n            removeHost: tfs,\n            addLink: tfs,\n            updateLink: tfs,\n            removeLink: tfs,\n\n            topoStartDone: tfs,\n\n            spriteListResponse: tspr,\n            spriteDataResponse: tspr,\n        };\n    }\n\n    function wsOpen(host, url) {\n        $log.debug('TOPO: web socket open - cluster node:', host, 'URL:', url);\n        wss.sendEvent('topoStart');\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoEventService',\n        ['$log', 'WebSocketService',\n            'TopoPanelService', 'TopoInstService', 'TopoForceService',\n            'TopoSelectService', 'TopoOverlayService', 'TopoSpriteService',\n\n        function (_$log_, _wss_,\n                  _tps_, _tis_, _tfs_, _tss_, _tov_, _tspr_) {\n            $log = _$log_;\n            wss = _wss_;\n            tps = _tps_;\n            tis = _tis_;\n            tfs = _tfs_;\n            tss = _tss_;\n            tov = _tov_;\n            tspr = _tspr_;\n\n            createHandlerMap();\n\n            function bindHandlers() {\n                wss.bindHandlers(handlerMap);\n                $log.debug('topo event handlers bound');\n            }\n\n            function start() {\n                openListener = wss.addOpenListener(wsOpen);\n                wss.sendEvent('topoStart');\n                $log.debug('topo comms started');\n            }\n\n            function stop() {\n                wss.sendEvent('topoStop');\n                wss.unbindHandlers(handlerMap);\n                wss.removeOpenListener(openListener);\n                openListener = null;\n                $log.debug('topo comms stopped');\n            }\n\n            return {\n                bindHandlers: bindHandlers,\n                start: start,\n                stop: stop,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var flash;\n\n    var api;\n\n    var topoLion = function (x) {\n        return '#tfltr#' + x + '#';\n    };\n\n    var smax = 'suppressedmax';\n\n    var layerLookup = {\n            host: {\n                endstation: 'pkt', \n                router: 'pkt',\n                bgpSpeaker: 'pkt',\n            },\n            device: {\n                switch: 'pkt',\n                router: 'pkt',\n                roadm: 'opt',\n                otn: 'opt',\n            },\n            link: {\n                hostLink: 'pkt',\n                direct: 'pkt',\n                indirect: '',\n                tunnel: '',\n                optical: 'opt',\n            },\n        },\n        dispatch = [\n            {\n                type: 'all',\n                action: function () { suppressLayers(false); },\n            },\n            {\n                type: 'pkt',\n                action: function () { showLayer('pkt'); },\n            },\n            {\n                type: 'opt',\n                action: function () { showLayer('opt'); },\n            },\n        ],\n        layer = 0,\n        layerType,\n        lionKey;\n\n    function clickAction() {\n        layer = (layer + 1) % dispatch.length;\n        dispatch[layer].action();\n        layerType = dispatch[layer].type;\n        lionKey = 'fl_layer_' + layerType;\n        flash.flash(topoLion(lionKey));\n    }\n\n    function selected() {\n        return dispatch[layer].type;\n    }\n\n    function inLayer(d, layer) {\n        var type = d.class === 'link' ? d.type() : d.type,\n            look = layerLookup[d.class],\n            lyr = look && look[type];\n        return lyr === layer;\n    }\n\n    function unsuppressLayer(which) {\n        api.node().each(function (d) {\n            var node = d.el;\n            if (inLayer(d, which)) {\n                node.classed(smax, false);\n            }\n        });\n\n        api.link().each(function (d) {\n            var link = d.el;\n            if (inLayer(d, which)) {\n                link.classed(smax, false);\n            }\n        });\n    }\n\n    function suppressLayers(b) {\n        api.node().classed(smax, b);\n        api.link().classed(smax, b);\n    }\n\n    function showLayer(which) {\n        suppressLayers(true);\n        unsuppressLayer(which);\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n    }\n\n\n    angular.module('ovTopo')\n        .factory('TopoFilterService', ['FlashService',\n            function (_flash_) {\n                flash = _flash_;\n\n                function initFilter(_api_) {\n                    api = _api_;\n                }\n\n                return {\n                    initFilter: initFilter,\n\n                    clickAction: clickAction,\n                    selected: selected,\n                    inLayer: inLayer,\n                    setLionBundle: setLionBundle,\n                };\n            },\n        ]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $timeout, fs, sus, ts, flash, wss, tov,\n        tis, tms, td3, tss, tts, tos, fltr, tls, uplink, svg, tpis;\n\n    var topoLion = function (x) {\n        return '#tfs#' + x + '#';\n    };\n\n    var linkConfig = {\n        light: {\n            baseColor: '#939598',\n            inColor: '#66f',\n            outColor: '#f00',\n        },\n        dark: {\n            baseColor: '#939598',\n            inColor: '#66f',\n            outColor: '#f00',\n        },\n        inWidth: 12,\n        outWidth: 10,\n    };\n\n    var settings, \n        force, \n        drag, \n        network = {\n            nodes: [],\n            links: [],\n            linksByDevice: {},\n            lookup: {},\n            revLinkToKey: {},\n        },\n        lu, \n        rlk, \n        showHosts = false, \n        showOffline = true, \n        nodeLock = false, \n        fTimer, \n        fNodesTimer, \n        fLinksTimer, \n        dim, \n        linkNums = [], \n        devIconDim = 36, \n        devIconDimMin = 20, \n        devIconDimMax = 40, \n        portLabelDim = 30;\n\n    var linkG, linkLabelG, numLinkLblsG, portLabelG, nodeG;\n\n    var link, linkLabel, node;\n\n    var defaultSettings = {\n        gravity: 0.4,\n        friction: 0.7,\n        charge: {\n            device: -8000,\n            host: -5000,\n            _def_: -12000,\n        },\n        linkDistance: {\n            direct: 100,\n            optical: 120,\n            hostLink: 3,\n            _def_: 50,\n        },\n        linkStrength: {\n            _def_: 1.0,\n        },\n    };\n\n\n\n    function mergeNodeData(o, n) {\n        angular.extend(o, n);\n        if (!n.location) {\n            delete o.location;\n        }\n    }\n\n    function addDevice(data) {\n        var id = data.id,\n            d;\n\n        uplink.showNoDevs(false);\n\n        if (lu[id]) {\n            updateDevice(data);\n            return;\n        }\n\n        d = tms.createDeviceNode(data);\n        network.nodes.push(d);\n        lu[id] = d;\n        updateNodes();\n        fStart();\n    }\n\n    function updateDevice(data) {\n        var id = data.id,\n            d = lu[id],\n            wasOnline;\n\n        if (d) {\n            wasOnline = d.online;\n            mergeNodeData(d, data);\n            if (tms.positionNode(d, true)) {\n                sendUpdateMeta(d);\n            }\n            updateNodes();\n            tick();\n            if (wasOnline !== d.online) {\n                tms.findAttachedLinks(d.id).forEach(restyleLinkElement);\n                updateOfflineVisibility(d);\n            }\n            fStart();\n        }\n    }\n\n    function removeDevice(data) {\n        var id = data.id,\n            d = lu[id];\n        if (d) {\n            removeDeviceElement(d);\n        }\n    }\n\n    function addHost(data) {\n        var id = data.id,\n            d;\n\n        if (lu[id]) {\n            updateHost(data);\n            return;\n        }\n\n        d = tms.createHostNode(data);\n        network.nodes.push(d);\n        lu[id] = d;\n        updateNodes();\n\n        createHostLinks(data.allCps, d);\n\n        if (d.links.length) {\n            updateLinks();\n        }\n        fStart();\n    }\n\n    function updateHost(data) {\n        var id = data.id,\n            d = lu[id];\n        if (d) {\n            mergeNodeData(d, data);\n            if (tms.positionNode(d, true)) {\n                sendUpdateMeta(d);\n            }\n            updateNodes();\n            tick();\n            fStart();\n        }\n    }\n\n    function createHostLinks(cps, model) {\n        model.links = [];\n        cps.forEach(function (cp) {\n            var linkData = {\n                key: model.id + '/0-' + cp.device + '/' + cp.port,\n                dst: cp.device,\n                dstPort: cp.port,\n            };\n            model.links.push(linkData);\n\n            var lnk = tms.createHostLink(model.id, cp.device, cp.port);\n            if (lnk) {\n                network.links.push(lnk);\n                lu[linkData.key] = lnk;\n            }\n        });\n    }\n\n    function moveHost(data) {\n        var id = data.id,\n            d = lu[id];\n\n        if (d) {\n            removeAllLinkElements(d.links);\n\n            angular.extend(d, data);\n            if (tms.positionNode(d, true)) {\n                sendUpdateMeta(d);\n            }\n\n            createHostLinks(data.allCps, d);\n\n            updateNodes();\n            updateLinks();\n            fResume();\n        }\n    }\n\n    function removeHost(data) {\n        var id = data.id,\n            d = lu[id];\n        if (d) {\n            removeHostElement(d, true);\n        }\n    }\n\n    function addLink(data) {\n        var result = tms.findLink(data, 'add'),\n            bad = result.badLogic,\n            d = result.ldata;\n\n        if (bad) {\n            $log.debug(bad + ': ' + link.id);\n            return;\n        }\n\n        if (d) {\n            addLinkUpdate(d, data);\n            return;\n        }\n\n        d = tms.createLink(data);\n        if (d) {\n            network.links.push(d);\n            aggregateLink(d, data);\n            lu[d.key] = d;\n            updateLinks();\n            fStart();\n        }\n    }\n\n    function updateLink(data) {\n        var result = tms.findLink(data, 'update'),\n            bad = result.badLogic;\n        if (bad) {\n            $log.debug(bad + ': ' + link.id);\n            return;\n        }\n        result.updateWith(data);\n    }\n\n    function removeLink(data) {\n        var result = tms.findLink(data, 'remove');\n\n        if (!result.badLogic) {\n            result.removeRawLink();\n        }\n    }\n\n    function topoStartDone(data) {\n        uplink.topoStartDone();\n    }\n\n\n    function nodeById(id) {\n        return lu[id];\n    }\n\n    function makeNodeKey(node1, node2) {\n        return node1 + '-' + node2;\n    }\n\n    function findNodePair(key, keyRev) {\n        if (network.linksByDevice[key]) {\n            return key;\n        } else if (network.linksByDevice[keyRev]) {\n            return keyRev;\n        } else {\n            return false;\n        }\n    }\n\n    function aggregateLink(ldata, link) {\n        var key = makeNodeKey(link.src, link.dst),\n            keyRev = makeNodeKey(link.dst, link.src),\n            found = findNodePair(key, keyRev);\n\n        if (found) {\n            network.linksByDevice[found].push(ldata);\n            ldata.devicePair = found;\n        } else {\n            network.linksByDevice[key] = [ldata];\n            ldata.devicePair = key;\n        }\n    }\n\n    function addLinkUpdate(ldata, link) {\n        ldata.fromTarget = link;\n        rlk[link.id] = ldata.key;\n        restyleLinkElement(ldata);\n    }\n\n\n    var widthRatio = 1.4,\n        linkScale = d3.scale.linear()\n            .domain([1, 12])\n            .range([widthRatio, 12 * widthRatio])\n            .clamp(true),\n        allLinkTypes = 'direct indirect optical tunnel',\n        allLinkSubTypes = 'inactive not-permitted';\n\n    function restyleLinkElement(ldata, immediate) {\n        var th = ts.theme(),\n            el = ldata.el,\n            type = ldata.type(),\n            lw = ldata.linkWidth(),\n            online = ldata.online(),\n            modeCls = ldata.expected() ? 'inactive' : 'not-permitted',\n            delay = immediate ? 0 : 1000;\n\n        if (el && !el.empty()) {\n            el.classed('link', true);\n            el.classed(allLinkSubTypes, false);\n            el.classed(modeCls, !online);\n            el.classed(allLinkTypes, false);\n            if (type) {\n                el.classed(type, true);\n            }\n            el.transition()\n                .duration(delay)\n                .attr('stroke-width', linkScale(lw))\n                .attr('stroke', linkConfig[th].baseColor);\n        }\n    }\n\n    function removeAllLinkElements(links) {\n        links.forEach(function (lnk) {\n            removeLinkElement(lnk);\n        });\n    }\n\n    function removeLinkElement(d) {\n        var idx = fs.find(d.key, network.links, 'key'),\n            removed;\n        if (idx >=0) {\n            removed = network.links.splice(idx, 1);\n            delete lu[removed[0].key];\n            updateLinks();\n            fResume();\n        }\n    }\n\n    function removeHostElement(d, upd) {\n        removeAllLinkElements(d.links);\n\n        delete lu[d.id];\n        var idx = fs.find(d.id, network.nodes);\n        network.nodes.splice(idx, 1);\n\n        if (upd) {\n            updateNodes();\n            fResume();\n        }\n    }\n\n    function removeDeviceElement(d) {\n        var id = d.id,\n            idx;\n        tms.findAttachedHosts(id).forEach(removeHostElement);\n        tms.findAttachedLinks(id).forEach(removeLinkElement);\n\n        delete lu[id];\n        idx = fs.find(id, network.nodes);\n        if (idx > -1) {\n            network.nodes.splice(idx, 1);\n        }\n\n        if (!network.nodes.length) {\n            uplink.showNoDevs(true);\n        }\n\n        updateNodes();\n        fResume();\n    }\n\n    function updateHostVisibility() {\n        sus.visible(nodeG.selectAll('.host'), showHosts);\n        sus.visible(linkG.selectAll('.hostLink'), showHosts);\n        sus.visible(linkLabelG.selectAll('.hostLinkLabel'), showHosts);\n    }\n\n    function updateOfflineVisibility(dev) {\n        function updDev(d, show) {\n            var b;\n            sus.visible(d.el, show);\n\n            tms.findAttachedLinks(d.id).forEach(function (link) {\n                b = show && ((link.type() !== 'hostLink') || showHosts);\n                sus.visible(link.el, b);\n            });\n            tms.findAttachedHosts(d.id).forEach(function (host) {\n                b = show && showHosts;\n                sus.visible(host.el, b);\n            });\n        }\n\n        if (dev) {\n            updDev(dev, dev.online || showOffline);\n        } else {\n            tms.findDevices(true).forEach(function (d) {\n                updDev(d, showOffline);\n            });\n        }\n    }\n\n\n    function sendUpdateMeta(d, clearPos) {\n        var metaUi = {},\n            ll;\n\n        if (!clearPos) {\n            ll = tms.lngLatFromCoord([d.x, d.y]);\n            metaUi = {\n                x: d.x,\n                y: d.y,\n                equivLoc: {\n                    lng: ll[0],\n                    lat: ll[1],\n                },\n            };\n        }\n        d.metaUi = metaUi;\n        wss.sendEvent('updateMeta', {\n            id: d.id,\n            class: d.class,\n            memento: metaUi,\n        });\n    }\n\n\n    function mkSvgClass(d) {\n        return d.fixed ? d.svgClass + ' fixed' : d.svgClass;\n    }\n\n    function vis(b) {\n        return topoLion(b ? 'visible' : 'hidden');\n    }\n\n    function toggleHosts(x) {\n        var kev = (x === 'keyev'),\n            on = kev ? !showHosts : !!x;\n\n        showHosts = on;\n        updateHostVisibility();\n        flash.flash(topoLion('hosts') + ' ' + vis(on));\n        return on;\n    }\n\n    function toggleOffline(x) {\n        var kev = (x === 'keyev'),\n            on = kev ? !showOffline : !!x;\n\n        showOffline = on;\n        updateOfflineVisibility();\n        flash.flash(topoLion('fl_offline_devices') + ' ' + vis(on));\n        return on;\n    }\n\n    function cycleDeviceLabels() {\n        flash.flash(td3.incDevLabIndex());\n        tms.findDevices().forEach(function (d) {\n            td3.updateDeviceLabel(d);\n        });\n    }\n\n    function cycleHostLabels() {\n        flash.flash(td3.incHostLabIndex());\n        tms.findHosts().forEach(function (d) {\n            td3.updateHostLabel(d);\n        });\n    }\n\n    function unpin() {\n        var hov = tss.hovered();\n        if (hov) {\n            sendUpdateMeta(hov, true);\n            hov.fixed = false;\n            hov.el.classed('fixed', false);\n            fResume();\n        }\n    }\n\n    function showMastership(masterId) {\n        if (!masterId) {\n            restoreLayerState();\n        } else {\n            showMastershipFor(masterId);\n        }\n    }\n\n    function restoreLayerState() {\n        suppressLayers(false);\n    }\n\n    function showMastershipFor(id) {\n        suppressLayers(true);\n        node.each(function (n) {\n            if (n.master === id) {\n                n.el.classed('suppressedmax', false);\n            }\n        });\n    }\n\n    function supAmt(less) {\n        return less ? 'suppressed' : 'suppressedmax';\n    }\n\n    function suppressLayers(b, less) {\n        var cls = supAmt(less);\n        node.classed(cls, b);\n        link.classed(cls, b);\n    }\n\n    function unsuppressNode(id, less) {\n        var cls = supAmt(less);\n        node.each(function (n) {\n            if (n.id === id) {\n                n.el.classed(cls, false);\n            }\n        });\n    }\n\n    function unsuppressLink(key, less) {\n        var cls = supAmt(less);\n        link.each(function (n) {\n            if (n.key === key) {\n                n.el.classed(cls, false);\n            }\n        });\n    }\n\n    function showBadLinks() {\n        var badLinks = tms.findBadLinks();\n        flash.flash(topoLion('fl_bad_links') + ': ' + badLinks.length);\n        $log.debug('Bad Link List (' + badLinks.length + '):');\n        badLinks.forEach(function (d) {\n            $log.debug('bad link: (' + d.bad + ') ' + d.key, d);\n            if (d.el) {\n                d.el.attr('stroke-width', linkScale(2.8))\n                    .attr('stroke', 'red');\n            }\n        });\n        $timeout(updateLinks, 2000);\n    }\n\n    function deviceScale() {\n        var scale = uplink.zoomer().scale(),\n            dim = devIconDim,\n            multiplier = 1;\n\n        if (dim * scale < devIconDimMin) {\n            multiplier = devIconDimMin / (dim * scale);\n        } else if (dim * scale > devIconDimMax) {\n            multiplier = devIconDimMax / (dim * scale);\n        }\n\n        return multiplier;\n    }\n\n    function linkWidthScale(scale) {\n        var scale = uplink.zoomer().scale();\n        return linkScale(widthRatio) / scale;\n    }\n\n    function portLabelScale(scale) {\n        var scale = uplink.zoomer().scale();\n        return portLabelDim / (portLabelDim * scale);\n    }\n\n    function setNodeScale(scale) {\n        _.each(network.nodes, function (node) {\n            if (node.class === 'host') {\n                node.el.selectAll('g').style('transform', 'scale(' + deviceScale(scale) + ')');\n                node.el.selectAll('text').style('transform', 'scale(' + deviceScale(scale) + ')');\n                return;\n            }\n            node.el.selectAll('*')\n                .style('transform', 'scale(' + deviceScale(scale) + ')');\n        });\n\n        _.each(network.links, function (link) {\n            link.el.style('stroke-width', linkWidthScale(scale) + 'px');\n        });\n\n        d3.select('#topo-portLabels')\n            .selectAll('.portLabel')\n            .selectAll('*')\n            .style('transform', 'scale(' + portLabelScale(scale) + ')');\n    }\n\n    function resetAllLocations() {\n        tms.resetAllLocations();\n        updateNodes();\n        tick(); \n        flash.flash(topoLion('fl_reset_node_locations'));\n    }\n\n\n    function updateNodes() {\n        if (fNodesTimer) {\n            $timeout.cancel(fNodesTimer);\n        }\n        fNodesTimer = $timeout(_updateNodes, 150);\n    }\n\n    function _updateNodes() {\n        node = nodeG.selectAll('.node')\n            .data(network.nodes, function (d) { return d.id; });\n\n        node.filter('.device').each(td3.deviceExisting);\n        node.filter('.host').each(td3.hostExisting);\n\n        var entering = node.enter()\n            .append('g')\n            .attr({\n                id: function (d) { return sus.safeId(d.id); },\n                class: mkSvgClass,\n                transform: function (d) {\n                    return sus.translate(d.x, d.y);\n                },\n                opacity: 0,\n            })\n            .call(drag)\n            .on('mouseover', tss.nodeMouseOver)\n            .on('mouseout', tss.nodeMouseOut)\n            .transition()\n            .attr('opacity', 1);\n\n        entering.filter('.device').each(td3.deviceEnter);\n        entering.filter('.host').each(td3.hostEnter);\n\n        td3.updateDeviceColors();\n\n        var exiting = node.exit()\n            .transition()\n            .duration(2000)\n            .style('opacity', 0)\n            .remove();\n\n        exiting.filter('.host').each(td3.hostExit);\n        exiting.filter('.device').each(td3.deviceExit);\n        tick();\n    }\n\n\n    function getDefaultPos(link) {\n        return {\n            x1: link.source.x,\n            y1: link.source.y,\n            x2: link.target.x,\n            y2: link.target.y,\n        };\n    }\n\n    function amt(numLinks, linkIdx) {\n        var gap = 6;\n        return (linkIdx - ((numLinks - 1) / 2)) * gap;\n    }\n\n    function calcMovement(d, amt, flipped) {\n        var pos = getDefaultPos(d),\n            mult = flipped ? -amt : amt,\n            dx = pos.x2 - pos.x1,\n            dy = pos.y2 - pos.y1,\n            length = Math.sqrt((dx * dx) + (dy * dy));\n\n        return {\n            x1: pos.x1 + (mult * dy / length),\n            y1: pos.y1 + (mult * -dx / length),\n            x2: pos.x2 + (mult * dy / length),\n            y2: pos.y2 + (mult * -dx / length),\n        };\n    }\n\n    function calcPosition() {\n        var lines = this,\n            linkSrcId;\n        linkNums = [];\n        lines.each(function (d) {\n            if (d.type() === 'hostLink') {\n                d.position = getDefaultPos(d);\n            }\n        });\n\n        function normalizeLinkSrc(link) {\n            if (!linkSrcId) {\n                linkSrcId = link.source.id;\n                return false;\n            }\n\n            return link.source.id !== linkSrcId;\n        }\n\n        angular.forEach(network.linksByDevice, function (linkArr, key) {\n            var numLinks = linkArr.length,\n                link;\n\n            if (numLinks === 1) {\n                link = linkArr[0];\n                link.position = getDefaultPos(link);\n                link.position.multiLink = false;\n            } else if (numLinks >= 5) {\n                angular.forEach(linkArr, function (link) {\n                    link.position = getDefaultPos(link);\n                    link.position.multiLink = true;\n                });\n                linkNums.push({\n                    id: key,\n                    num: numLinks,\n                    linkCoords: linkArr[0].position,\n                });\n            } else {\n                linkSrcId = null;\n                angular.forEach(linkArr, function (link, index) {\n                    var offsetAmt = amt(numLinks, index),\n                        needToFlip = normalizeLinkSrc(link);\n                    link.position = calcMovement(link, offsetAmt, needToFlip);\n                    link.position.multiLink = false;\n                });\n            }\n        });\n    }\n\n    function updateLinks() {\n        if (fLinksTimer) {\n            $timeout.cancel(fLinksTimer);\n        }\n        fLinksTimer = $timeout(_updateLinks, 150);\n    }\n\n    function _updateLinks() {\n        var th = ts.theme();\n\n        link = linkG.selectAll('.link')\n            .data(network.links, function (d) { return d.key; });\n\n        link.each(function (d) {\n            if (d.el) {\n                restyleLinkElement(d, true);\n            }\n        });\n\n        var entering = link.enter()\n            .append('line')\n            .call(calcPosition)\n            .attr({\n                x1: function (d) { return d.position.x1; },\n                y1: function (d) { return d.position.y1; },\n                x2: function (d) { return d.position.x2; },\n                y2: function (d) { return d.position.y2; },\n                stroke: linkConfig[th].inColor,\n                'stroke-width': linkConfig.inWidth,\n            });\n\n        entering.each(td3.linkEntering);\n\n\n        td3.applyNumLinkLabels(linkNums, numLinkLblsG);\n\n        td3.applyLinkLabels();\n\n        link.exit()\n            .attr('stroke-dasharray', '3 3')\n            .attr('stroke', linkConfig[th].outColor)\n            .style('opacity', 0.5)\n            .transition()\n            .duration(1500)\n            .attr({\n                'stroke-dasharray': '3 12',\n                'stroke-width': linkConfig.outWidth,\n            })\n            .style('opacity', 0.0)\n            .remove();\n    }\n\n\n\n    function fResume() {\n        if (!tos.isOblique()) {\n            force.resume();\n        }\n    }\n\n    function fStart() {\n        if (!tos.isOblique()) {\n            if (fTimer) {\n                $timeout.cancel(fTimer);\n            }\n            fTimer = $timeout(function () {\n                $log.debug('Starting force-layout');\n                force.start();\n            }, 200);\n        }\n    }\n\n    var tickStuff = {\n        nodeAttr: {\n            transform: function (d) {\n                var dx = isNaN(d.x) ? 0 : d.x,\n                    dy = isNaN(d.y) ? 0 : d.y;\n                return sus.translate(dx, dy);\n            },\n        },\n        linkAttr: {\n            x1: function (d) { return d.position.x1; },\n            y1: function (d) { return d.position.y1; },\n            x2: function (d) { return d.position.x2; },\n            y2: function (d) { return d.position.y2; },\n        },\n        linkLabelAttr: {\n            transform: function (d) {\n                var lnk = tms.findLinkById(d.key);\n                if (lnk) {\n                    return td3.transformLabel(lnk.position, d.key);\n                }\n            },\n        },\n    };\n\n    function tick() {\n        if (node && node.size()) {\n            node.attr(tickStuff.nodeAttr);\n        }\n        if (link && link.size()) {\n            link.call(calcPosition)\n                .attr(tickStuff.linkAttr);\n            td3.applyNumLinkLabels(linkNums, numLinkLblsG);\n        }\n        if (linkLabel && linkLabel.size()) {\n            linkLabel.attr(tickStuff.linkLabelAttr);\n        }\n    }\n\n\n\n    function zoomingOrPanning(ev) {\n        return ev.metaKey || ev.altKey;\n    }\n\n    function atDragEnd(d) {\n        d.fixed = true;\n        d3.select(this).classed('fixed', true);\n        sendUpdateMeta(d);\n        tss.clickConsumed(true);\n    }\n\n    function dragEnabled() {\n        var ev = d3.event.sourceEvent;\n        return !nodeLock && !zoomingOrPanning(ev);\n    }\n\n    function clickEnabled() {\n        return true;\n    }\n\n\n    var allTrafficClasses = 'primary secondary optical animated ' +\n        'port-traffic-green port-traffic-yellow port-traffic-orange ' +\n        'port-traffic-red';\n\n    function clearLinkTrafficStyle() {\n        link.style('stroke-width', null)\n            .classed(allTrafficClasses, false);\n    }\n\n    function removeLinkLabels() {\n        network.links.forEach(function (d) {\n            d.label = '';\n        });\n    }\n\n    function clearNodeDeco() {\n        node.selectAll('g.badge').remove();\n    }\n\n    function removeNodeBadges() {\n        network.nodes.forEach(function (d) {\n            d.badge = null;\n        });\n    }\n\n    function updateLinkLabelModel() {\n        var data = [];\n        link.each(function (d) {\n            if (d.label) {\n                data.push({\n                    id: 'lab-' + d.key,\n                    key: d.key,\n                    label: d.label,\n                    ldata: d,\n                });\n            }\n        });\n\n        linkLabel = linkLabelG.selectAll('.linkLabel')\n            .data(data, function (d) { return d.id; });\n    }\n\n\n    function mkModelApi(uplink) {\n        return {\n            projection: uplink.projection,\n            network: network,\n            restyleLinkElement: restyleLinkElement,\n            removeLinkElement: removeLinkElement,\n        };\n    }\n\n    function mkD3Api() {\n        return {\n            node: function () { return node; },\n            link: function () { return link; },\n            linkLabel: function () { return linkLabel; },\n            instVisible: function () { return tis.isVisible(); },\n            posNode: tms.positionNode,\n            showHosts: function () { return showHosts; },\n            restyleLinkElement: restyleLinkElement,\n            updateLinkLabelModel: updateLinkLabelModel,\n            linkConfig: function () { return linkConfig; },\n            deviceScale: deviceScale,\n            linkWidthScale: linkWidthScale,\n        };\n    }\n\n    function mkSelectApi() {\n        return {\n            node: function () { return node; },\n            zoomingOrPanning: zoomingOrPanning,\n            updateDeviceColors: td3.updateDeviceColors,\n            deselectAllLinks: tls.deselectAllLinks,\n        };\n    }\n\n    function mkTrafficApi() {\n        return {\n            hovered: tss.hovered,\n            somethingSelected: tss.somethingSelected,\n            selectOrder: tss.selectOrder,\n        };\n    }\n\n    function mkOverlayApi() {\n        return {\n            clearNodeDeco: clearNodeDeco,\n            removeNodeBadges: removeNodeBadges,\n            clearLinkTrafficStyle: clearLinkTrafficStyle,\n            removeLinkLabels: removeLinkLabels,\n            findLinkById: tms.findLinkById,\n            findNodeById: nodeById,\n            updateLinks: updateLinks,\n            updateNodes: updateNodes,\n            supLayers: suppressLayers,\n            unsupNode: unsuppressNode,\n            unsupLink: unsuppressLink,\n        };\n    }\n\n    function mkObliqueApi(uplink, fltr) {\n        return {\n            force: function () { return force; },\n            zoomLayer: uplink.zoomLayer,\n            nodeGBBox: function () { return nodeG.node().getBBox(); },\n            node: function () { return node; },\n            link: function () { return link; },\n            linkLabel: function () { return linkLabel; },\n            nodes: function () { return network.nodes; },\n            tickStuff: tickStuff,\n            nodeLock: function (b) {\n                var old = nodeLock;\n                nodeLock = b;\n                return old;\n            },\n            opacifyMap: uplink.opacifyMap,\n            inLayer: fltr.inLayer,\n            calcLinkPos: calcPosition,\n            applyNumLinkLabels: function () {\n                td3.applyNumLinkLabels(linkNums, numLinkLblsG);\n            },\n        };\n    }\n\n    function mkFilterApi() {\n        return {\n            node: function () { return node; },\n            link: function () { return link; },\n        };\n    }\n\n    function mkLinkApi(svg, uplink) {\n        return {\n            svg: svg,\n            zoomer: uplink.zoomer(),\n            network: network,\n            portLabelG: function () { return portLabelG; },\n            showHosts: function () { return showHosts; },\n        };\n    }\n\n    function updateLinksAndNodes() {\n        updateLinks();\n        updateNodes();\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n        td3.setLionBundle(bundle);\n        fltr.setLionBundle(bundle);\n        tls.setLionBundle(bundle);\n        tos.setLionBundle(bundle);\n        tov.setLionBundle(bundle);\n        tss.setLionBundle(bundle);\n    }\n\n    angular.module('ovTopo')\n    .factory('TopoForceService',\n        ['$log', '$timeout', 'FnService', 'SvgUtilService',\n            'ThemeService', 'FlashService', 'WebSocketService',\n            'TopoOverlayService', 'TopoInstService', 'TopoModelService',\n            'TopoD3Service', 'TopoSelectService', 'TopoTrafficService',\n            'TopoObliqueService', 'TopoFilterService', 'TopoLinkService',\n            'TopoProtectedIntentsService',\n\n        function (_$log_, _$timeout_, _fs_, _sus_, _ts_, _flash_, _wss_, _tov_,\n                  _tis_, _tms_, _td3_, _tss_, _tts_, _tos_, _fltr_, _tls_, _tpis_) {\n            $log = _$log_;\n            $timeout = _$timeout_;\n            fs = _fs_;\n            sus = _sus_;\n            ts = _ts_;\n            flash = _flash_;\n            wss = _wss_;\n            tov = _tov_;\n            tis = _tis_;\n            tms = _tms_;\n            td3 = _td3_;\n            tss = _tss_;\n            tts = _tts_;\n            tos = _tos_;\n            fltr = _fltr_;\n            tls = _tls_;\n            tpis = _tpis_;\n\n            ts.addListener(updateLinksAndNodes);\n\n            function initForce(_svg_, forceG, _uplink_, _dim_, opts) {\n                uplink = _uplink_;\n                dim = _dim_;\n                svg = _svg_;\n\n                lu = network.lookup;\n                rlk = network.revLinkToKey;\n\n                $log.debug('initForce().. dim = ' + dim);\n\n                tov.setApi(mkOverlayApi(), tss);\n                tms.initModel(mkModelApi(uplink), dim);\n                td3.initD3(mkD3Api(), uplink.zoomer());\n                tss.initSelect(mkSelectApi());\n                tts.initTraffic(mkTrafficApi());\n                tpis.initProtectedIntents(mkTrafficApi());\n                tos.initOblique(mkObliqueApi(uplink, fltr));\n                fltr.initFilter(mkFilterApi());\n                tls.initLink(mkLinkApi(svg, uplink), td3);\n\n                settings = angular.extend({}, defaultSettings, opts);\n\n                linkG = forceG.append('g').attr('id', 'topo-links');\n                linkLabelG = forceG.append('g').attr('id', 'topo-linkLabels');\n                numLinkLblsG = forceG.append('g').attr('id', 'topo-numLinkLabels');\n                nodeG = forceG.append('g').attr('id', 'topo-nodes');\n                portLabelG = forceG.append('g').attr('id', 'topo-portLabels');\n\n                link = linkG.selectAll('.link');\n                linkLabel = linkLabelG.selectAll('.linkLabel');\n                node = nodeG.selectAll('.node');\n\n                force = d3.layout.force()\n                    .size(dim)\n                    .nodes(network.nodes)\n                    .links(network.links)\n                    .gravity(settings.gravity)\n                    .friction(settings.friction)\n                    .charge(settings.charge._def_)\n                    .linkDistance(settings.linkDistance._def_)\n                    .linkStrength(settings.linkStrength._def_)\n                    .on('tick', tick);\n\n                drag = sus.createDragBehavior(force,\n                    tss.selectObject, atDragEnd, dragEnabled, clickEnabled);\n            }\n\n            function newDim(_dim_) {\n                dim = _dim_;\n                force.size(dim);\n                tms.newDim(dim);\n            }\n\n            function destroyForce() {\n                force.stop();\n\n                tls.destroyLink();\n                tos.destroyOblique();\n                tts.destroyTraffic();\n                tpis.destroyProtectedIntents();\n                tss.destroySelect();\n                td3.destroyD3();\n                tms.destroyModel();\n                ts.removeListener(updateLinksAndNodes);\n\n                svg.selectAll('g').remove();\n                svg.selectAll('defs').remove();\n\n                network.nodes = [];\n                network.links = [];\n                network.linksByDevice = {};\n                network.lookup = {};\n                network.revLinkToKey = {};\n\n                linkNums = [];\n\n                linkG = linkLabelG = numLinkLblsG = nodeG = portLabelG = null;\n                link = linkLabel = node = null;\n                force = drag = null;\n\n                if (fTimer) {\n                    $timeout.cancel(fTimer);\n                }\n                if (fNodesTimer) {\n                    $timeout.cancel(fNodesTimer);\n                }\n                if (fLinksTimer) {\n                    $timeout.cancel(fLinksTimer);\n                }\n            }\n\n            return {\n                initForce: initForce,\n                newDim: newDim,\n                destroyForce: destroyForce,\n\n                updateDeviceColors: td3.updateDeviceColors,\n                toggleHosts: toggleHosts,\n                togglePorts: tls.togglePorts,\n                toggleOffline: toggleOffline,\n                cycleDeviceLabels: cycleDeviceLabels,\n                cycleHostLabels: cycleHostLabels,\n                unpin: unpin,\n                showMastership: showMastership,\n                showBadLinks: showBadLinks,\n                setNodeScale: setNodeScale,\n\n                resetAllLocations: resetAllLocations,\n                addDevice: addDevice,\n                updateDevice: updateDevice,\n                removeDevice: removeDevice,\n                addHost: addHost,\n                updateHost: updateHost,\n                moveHost: moveHost,\n                removeHost: removeHost,\n                addLink: addLink,\n                updateLink: updateLink,\n                removeLink: removeLink,\n                topoStartDone: topoStartDone,\n\n                setLionBundle: setLionBundle,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, ps, sus, gs, ts, fs, flash;\n\n    var api;\n\n    var showLogicErrors = true,\n        idIns = 'topo-p-instance',\n        instOpts = {\n            edge: 'left',\n            width: 20,\n        };\n\n    var onosInstances,\n        onosOrder,\n        oiShowMaster,\n        oiBox;\n\n    var topoLion = function (x) {\n        return '#tis#' + x + '#';\n    };\n\n\n    function addInstance(data) {\n        var id = data.id;\n\n        if (onosInstances[id]) {\n            updateInstance(data);\n            return;\n        }\n        onosInstances[id] = data;\n        onosOrder.push(data);\n        updateInstances();\n    }\n\n    function updateInstance(data) {\n        var id = data.id,\n            d = onosInstances[id];\n        if (d) {\n            angular.extend(d, data);\n            updateInstances();\n        } else {\n            logicError('updateInstance: lookup fail: ID = \"' + id + '\"');\n        }\n    }\n\n    function removeInstance(data) {\n        var id = data.id,\n            d = onosInstances[id];\n        if (d) {\n            var idx = fs.find(id, onosOrder);\n            if (idx >= 0) {\n                onosOrder.splice(idx, 1);\n            }\n            delete onosInstances[id];\n            updateInstances();\n        } else {\n            logicError('removeInstance lookup fail. ID = \"' + id + '\"');\n        }\n    }\n\n\n    function clickInst(d) {\n        var el = d3.select(this),\n            aff = el.classed('affinity');\n        if (!aff) {\n            setAffinity(el, d);\n        } else {\n            cancelAffinity();\n        }\n    }\n\n    function setAffinity(el, d) {\n        d3.selectAll('.onosInst')\n            .classed('mastership', true)\n            .classed('affinity', false);\n        el.classed('affinity', true);\n\n        api.showMastership(d.id);\n        oiShowMaster = true;\n    }\n\n    function cancelAffinity() {\n        d3.selectAll('.onosInst')\n            .classed('mastership affinity', false);\n\n        api.showMastership(null);\n        oiShowMaster = false;\n    }\n\n    function attachUiBadge(svg) {\n        gs.addGlyph(svg, 'uiAttached', 24, true, [14, 54])\n            .classed('badgeIcon uiBadge', true);\n    }\n\n    function attachReadyBadge(svg) {\n        gs.addGlyph(svg, 'checkMark', 16, true, [18, 40])\n            .classed('badgeIcon readyBadge', true);\n    }\n\n    function instColor(id, online) {\n        return sus.cat7().getColor(id, !online, ts.theme());\n    }\n\n\n    function updateInstances() {\n        var rox = 5,\n            roy = 5,\n            rw = 160,\n            rhh = 30,\n            rbh = 45,\n            tx = 48,\n            instSvg = {\n                width: 170,\n                height: 85,\n                viewBox: '0 0 170 85',\n            },\n            headRect = {\n                x: rox,\n                y: roy,\n                width: rw,\n                height: rhh,\n            },\n            bodyRect = {\n                x: rox,\n                y: roy + rhh,\n                width: rw,\n                height: rbh,\n            },\n            titleAttr = {\n                class: 'instTitle',\n                x: tx,\n                y: 27,\n            };\n\n        var onoses = oiBox.el().selectAll('.onosInst')\n                .data(onosOrder, function (d) { return d.id; });\n\n        function nSw(n) {\n            return topoLion('devices') + ': ' + n;\n        }\n\n        onoses.each(function (d) {\n            var el = d3.select(this),\n                svg = el.select('svg');\n\n            el.classed('online', d.online);\n            el.classed('ready', d.ready);\n\n            svg.select('use.uiBadge').remove();\n            if (d.uiAttached) {\n                attachUiBadge(svg);\n            }\n\n            function updAttr(id, value) {\n                svg.select('text.instLabel.'+id).text(value);\n            }\n\n            updAttr('ip', d.ip);\n            updAttr('ns', nSw(d.switches));\n        });\n\n\n        var entering = onoses.enter()\n            .append('div')\n            .classed('onosInst', true)\n            .classed('online', function (d) { return d.online; })\n            .classed('ready', function (d) { return d.ready; })\n            .on('click', clickInst);\n\n        entering.each(function (d) {\n            var el = d3.select(this),\n                svg = el.append('svg').attr(instSvg);\n\n            svg.append('rect').attr(headRect);\n            svg.append('rect').attr(bodyRect);\n\n            gs.addGlyph(svg, 'bird', 20, false, [15, 10])\n                .classed('badgeIcon bird', true);\n\n            attachReadyBadge(svg);\n\n            if (d.uiAttached) {\n                attachUiBadge(svg);\n            }\n\n            svg.append('text')\n                .attr(titleAttr)\n                .text(d.id);\n\n            var ty = 55;\n            function addAttr(id, label) {\n                svg.append('text').attr({\n                    class: 'instLabel ' + id,\n                    x: tx,\n                    y: ty,\n                }).text(label);\n                ty += 18;\n            }\n\n            addAttr('ip', d.ip);\n            addAttr('ns', nSw(d.switches));\n        });\n\n        onoses.each(function (d) {\n            var el = d3.select(this),\n                rect = el.select('svg').select('rect'),\n                col = instColor(d.id, d.online);\n            rect.style('fill', col);\n        });\n\n        oiBox.width(instSvg.width * onosOrder.length);\n        oiBox.height(instSvg.height);\n\n        onoses.exit().remove();\n    }\n\n\n\n    function logicError(msg) {\n        if (showLogicErrors) {\n            $log.warn('TopoInstService: ' + msg);\n        }\n    }\n\n    function initInst(_api_) {\n        api = _api_;\n        oiBox = ps.createPanel(idIns, instOpts);\n        oiBox.show();\n\n        onosInstances = {};\n        onosOrder = [];\n        oiShowMaster = false;\n\n        ts.addListener(updateInstances);\n    }\n\n    function destroyInst() {\n        ts.removeListener(updateInstances);\n\n        ps.destroyPanel(idIns);\n        oiBox = null;\n\n        onosInstances = {};\n        onosOrder = [];\n        oiShowMaster = false;\n    }\n\n    function showInsts() {\n        oiBox.show();\n    }\n\n    function hideInsts() {\n        oiBox.hide();\n    }\n\n    function toggleInsts(x) {\n        var kev = (x === 'keyev'),\n            on,\n            verb;\n\n        if (kev) {\n            on = oiBox.toggle();\n        } else {\n            on = !!x;\n            if (on) {\n                showInsts();\n            } else {\n                hideInsts();\n            }\n        }\n        verb = on ? topoLion('show') : topoLion('hide');\n        flash.flash(verb + ' ' + topoLion('fl_panel_instances'));\n        return on;\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoInstService',\n        ['$log', 'PanelService', 'SvgUtilService', 'GlyphService',\n            'ThemeService', 'FnService', 'FlashService',\n\n        function (_$log_, _ps_, _sus_, _gs_, _ts_, _fs_, _flash_) {\n            $log = _$log_;\n            ps = _ps_;\n            sus = _sus_;\n            gs = _gs_;\n            ts = _ts_;\n            fs = _fs_;\n            flash = _flash_;\n\n            return {\n                initInst: initInst,\n                destroyInst: destroyInst,\n\n                addInstance: addInstance,\n                updateInstance: updateInstance,\n                removeInstance: removeInstance,\n\n                cancelAffinity: cancelAffinity,\n\n                isVisible: function () { return oiBox.isVisible(); },\n                show: showInsts,\n                hide: hideInsts,\n                toggle: toggleInsts,\n                showMaster: function () { return oiShowMaster; },\n                setLionBundle: function (bundle) { topoLion = bundle; },\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, fs, flash, tss;\n\n    var api,\n        td3,\n        network,\n        showPorts = true, \n        enhancedLink = null, \n        selectedLinks = {}; \n\n    var svg;\n\n    var topoLion = function (x) {\n        return '#tlink#' + x + '#';\n    };\n\n\n    function getLogicalMousePosition(container) {\n        var m = d3.mouse(container),\n            sc = api.zoomer.scale(),\n            tr = api.zoomer.translate(),\n            mx = (m[0] - tr[0]) / sc,\n            my = (m[1] - tr[1]) / sc;\n        return { x: mx, y: my };\n    }\n\n\n    function sq(x) { return x * x; }\n\n    function mdist(p, m) {\n        return Math.sqrt(sq(p.x - m.x) + sq(p.y - m.y));\n    }\n\n    function prox(dist) {\n        return dist / api.zoomer.scale();\n    }\n\n    function computeNearestNode(mouse) {\n        var proximity = prox(30),\n            nearest = null,\n            minDist;\n\n        if (network.nodes.length) {\n            minDist = proximity * 2;\n\n            network.nodes.forEach(function (d) {\n                var dist;\n\n                if (!api.showHosts() && d.class === 'host') {\n                    return; \n                }\n\n                dist = mdist({ x: d.x, y: d.y }, mouse);\n                if (dist < minDist && dist < proximity) {\n                    minDist = dist;\n                    nearest = d;\n                }\n            });\n        }\n        return nearest;\n    }\n\n\n    function computeNearestLink(mouse) {\n        var proximity = prox(30),\n            nearest = null,\n            minDist;\n\n        function pdrop(line, mouse) {\n            var x1 = line.x1,\n                y1 = line.y1,\n                x2 = line.x2,\n                y2 = line.y2,\n                x3 = mouse.x,\n                y3 = mouse.y,\n                k = ((y2-y1) * (x3-x1) - (x2-x1) * (y3-y1)) /\n                    (sq(y2-y1) + sq(x2-x1)),\n                x4 = x3 - k * (y2-y1),\n                y4 = y3 + k * (x2-x1);\n            return { x: x4, y: y4 };\n        }\n\n        function lineHit(line, p, m) {\n            if (p.x < line.x1 && p.x < line.x2) return false;\n            if (p.x > line.x1 && p.x > line.x2) return false;\n            if (p.y < line.y1 && p.y < line.y2) return false;\n            if (p.y > line.y1 && p.y > line.y2) return false;\n            return mdist(p, m) <= proximity;\n        }\n\n        if (network.links.length) {\n            minDist = proximity * 2;\n\n            network.links.forEach(function (d) {\n                var line = d.position,\n                    point,\n                    hit,\n                    dist;\n\n                if (!api.showHosts() && d.type() === 'hostLink') {\n                    return; \n                }\n\n                if (line) {\n                    point = pdrop(line, mouse);\n                    hit = lineHit(line, point, mouse);\n                    if (hit) {\n                        dist = mdist(point, mouse);\n                        if (dist < minDist) {\n                            minDist = dist;\n                            nearest = d;\n                        }\n                    }\n                }\n            });\n        }\n        return nearest;\n    }\n\n    function enhanceLink(ldata) {\n        if (enhancedLink && ldata && enhancedLink.key === ldata.key) return;\n\n        if (enhancedLink) {\n            unenhance(enhancedLink);\n        }\n        enhancedLink = ldata;\n        if (enhancedLink) {\n            enhance(enhancedLink);\n        }\n    }\n\n    function unenhance(d) {\n        if (d.el) {\n            d.el.classed('enhanced', false);\n        }\n        api.portLabelG().selectAll('.portLabel').remove();\n    }\n\n    function enhance(d) {\n        var data = [],\n            point;\n\n        if (!d.el) return;\n\n        d.el.classed('enhanced', true);\n\n\n        point = locatePortLabel(d);\n        angular.extend(point, {\n            id: 'topo-port-tgt',\n            num: d.tgtPort,\n        });\n        data.push(point);\n\n        if (d.srcPort) {\n            point = locatePortLabel(d, 1);\n            angular.extend(point, {\n                id: 'topo-port-src',\n                num: d.srcPort,\n            });\n            data.push(point);\n        }\n\n        td3.applyPortLabels(data, api.portLabelG());\n    }\n\n    function locatePortLabel(link, src) {\n        var offset = 32,\n            pos = link.position,\n            nearX = src ? pos.x1 : pos.x2,\n            nearY = src ? pos.y1 : pos.y2,\n            farX = src ? pos.x2 : pos.x1,\n            farY = src ? pos.y2 : pos.y1;\n\n        function dist(x, y) { return Math.sqrt(x*x + y*y); }\n\n        var dx = farX - nearX,\n            dy = farY - nearY,\n            k = offset / dist(dx, dy);\n\n        return { x: k * dx + nearX, y: k * dy + nearY };\n    }\n\n    function selectLink(ldata) {\n         if (d3.event.shiftKey && ldata.el.classed('selected')) {\n            unselLink(ldata);\n            return;\n         }\n\n         if (d3.event.shiftKey && !ldata.el.classed('selected')) {\n            selLink(ldata);\n            return;\n         }\n\n         tss.deselectAll();\n\n         if (ldata) {\n            if (ldata.el.classed('selected')) {\n                unselLink(ldata);\n            } else {\n                selLink(ldata);\n            }\n         }\n    }\n\n    function unselLink(d) {\n        if (d.el) {\n            d.el.classed('selected', false);\n            delete selectedLinks[d.key];\n        }\n    }\n\n    function selLink(d) {\n        if (!d.el) return;\n\n        d.el.classed('selected', true);\n        selectedLinks[d.key] = { key: d };\n\n    }\n\n\n    function mouseMoveHandler() {\n        var mp = getLogicalMousePosition(this),\n            link = computeNearestLink(mp);\n        enhanceLink(link);\n    }\n\n    function mouseClickHandler() {\n        var mp, link, node;\n        if (!d3.event.shiftKey) {\n            deselectAllLinks();\n        }\n\n        if (!tss.clickConsumed()) {\n            mp = getLogicalMousePosition(this);\n            node = computeNearestNode(mp);\n            if (node) {\n                $log.debug('found nearest node:', node.labels[1]);\n                tss.selectObject(node);\n            } else {\n                link = computeNearestLink(mp);\n                selectLink(link);\n                tss.selectObject(link);\n            }\n        }\n    }\n\n\n\n    function togglePorts(x) {\n        var kev = (x === 'keyev'),\n            on = kev ? !showPorts : !!x,\n            what = on ? topoLion('enable') : topoLion('disable'),\n            philite = topoLion('fl_port_highlighting'),\n            handler = on ? mouseMoveHandler : null;\n\n        showPorts = on;\n\n        if (!on) {\n            enhanceLink(null);\n        }\n        svg.on('mousemove', handler);\n        flash.flash(what + ' ' + philite);\n        return on;\n    }\n\n    function deselectAllLinks() {\n\n        if (Object.keys(selectedLinks).length > 0) {\n            network.links.forEach(function (d) {\n                if (selectedLinks[d.key]) {\n                    unselLink(d);\n                }\n            });\n        }\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n    }\n\n\n    angular.module('ovTopo')\n        .factory('TopoLinkService',\n        ['$log', 'FnService', 'FlashService', 'TopoSelectService',\n\n        function (_$log_, _fs_, _flash_, _tss_) {\n            $log = _$log_;\n            fs = _fs_;\n            flash = _flash_;\n            tss = _tss_;\n\n            function initLink(_api_, _td3_) {\n                api = _api_;\n                td3 = _td3_;\n                svg = api.svg;\n                network = api.network;\n                if (showPorts && !fs.isMobile()) {\n                    svg.on('mousemove', mouseMoveHandler);\n                }\n                svg.on('click', mouseClickHandler);\n            }\n\n            function destroyLink() {\n                svg.on('mousemove', null);\n                svg.on('click', null);\n            }\n\n            return {\n                initLink: initLink,\n                destroyLink: destroyLink,\n                togglePorts: togglePorts,\n                deselectAllLinks: deselectAllLinks,\n                setLionBundle: setLionBundle,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, wss, tds, delegate;\n\n    var mapRequest = 'mapSelectorRequest';\n\n    var order, maps, map, mapItems, msgHandlers;\n\n    var topoLion = function (x) {\n        return '#tmap#' + x + '#';\n    };\n\n\n    function openMapSelection() {\n        wss.sendEvent(mapRequest);\n    }\n\n    function closeMapSelection() {\n        tds.closeDialog();\n    }\n\n    function start(d) {\n        delegate = d;\n        wss.bindHandlers(msgHandlers);\n    }\n\n    function stop() {\n        wss.unbindHandlers(msgHandlers);\n    }\n\n    function dOk() {\n        var p = {\n            mapid: map.id,\n            mapscale: map.scale,\n            mapfilepath: map.filePath,\n            tint: 'off',\n        };\n        setMap(p);\n    }\n\n    function dClose() {\n    }\n\n    function selectMap() {\n        map = maps[this.options[this.selectedIndex].value];\n        $log.info('Selected map', map);\n    }\n\n    function createListContent() {\n        var content = tds.createDiv('map-list'),\n            form = content.append('form'),\n            current = currentMap();\n\n        map = maps[current.mapid];\n        mapItems = form.append('select').on('change', selectMap);\n        order.forEach(function (id) {\n            var m = maps[id];\n            mapItems.append('option')\n                    .attr('value', m.id)\n                    .attr('selected', m.id === current.mapid ? true : null)\n                    .text(m.description);\n        });\n\n        return content;\n    }\n\n    function handleMapResponse(data) {\n        $log.info('Got response', data);\n        order = data.order;\n        maps = data.maps;\n        tds.openDialog()\n            .setTitle(topoLion('title_select_map'))\n            .addContent(createListContent())\n            .addOk(dOk, topoLion('ok'))\n            .addCancel(dClose, topoLion('close'))\n            .bindKeys();\n    }\n\n    function toggleMap() {\n        delegate.toggleMap();\n    }\n\n    function currentMap() {\n        return delegate.currentMap();\n    }\n\n    function setMap(map) {\n        delegate.setMap(map);\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n    }\n\n    angular.module('ovTopo')\n    .factory('TopoMapService',\n        ['$log', 'WebSocketService', 'TopoDialogService',\n\n        function (_$log_, _wss_, _tds_) {\n            $log = _$log_;\n            wss = _wss_;\n            tds = _tds_;\n\n            msgHandlers = {\n                mapSelectorResponse: handleMapResponse,\n            };\n\n            return {\n                toggleMap: toggleMap,\n                currentMap: currentMap,\n                setMap: setMap,\n\n                openMapSelection: openMapSelection,\n                closeMapSelection: closeMapSelection,\n                start: start,\n                stop: stop,\n\n                setLionBundle: setLionBundle,\n            };\n        }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, fs, rnd;\n\n    var api;\n\n    var lu, rlk, nodes, links, linksByDevice;\n\n    var dim; \n\n    var defaultLinkType = 'direct',\n        nearDist = 15;\n\n\n    function coordFromLngLat(loc) {\n        var p = api.projection();\n        return p ? p([loc.longOrX, loc.latOrY]) : [0, 0];\n    }\n\n    function lngLatFromCoord(coord) {\n        var p = api.projection();\n        return p ? p.invert(coord) : [0, 0];\n    }\n\n    function coordFromXY(loc) {\n        var bgWidth = 1000,\n            bgHeight = 1000;\n\n        var scale = 1000 / bgWidth,\n            yOffset = (1000 - (bgHeight * scale)) / 2;\n\n        var x = scale * loc.longOrX,\n            y = (scale * loc.latOrY) + yOffset;\n\n        return [x, y];\n    }\n\n    function positionNode(node, forUpdate) {\n        var meta = node.metaUi,\n            x = meta && meta.x,\n            y = meta && meta.y,\n            xy;\n\n        if (setLongLat(node)) {\n            return false;\n        }\n\n        if (x != undefined && y != undefined) {\n            node.fixed = true;\n            node.px = node.x = x;\n            node.py = node.y = y;\n            return true;\n        }\n\n        if (forUpdate && node.x != undefined && node.y != undefined) {\n            return false;\n        }\n\n\n        function rand() {\n            return {\n                x: rnd.randDim(dim[0]),\n                y: rnd.randDim(dim[1]),\n            };\n        }\n\n        function near(node) {\n            return {\n                x: node.x + nearDist + rnd.spread(nearDist),\n                y: node.y + nearDist + rnd.spread(nearDist),\n            };\n        }\n\n        function getDevice(cp) {\n            var d = lu[cp.device];\n            return d || rand();\n        }\n\n        node.fixed = false;\n        xy = (node.class === 'host') ? near(getDevice(node.cp)) : rand();\n        angular.extend(node, xy);\n        return false;\n    }\n\n    function setLongLat(node) {\n        var loc = node.location,\n            coord;\n\n        if (!loc || loc.locType === 'none') {\n            node.fixed = false;\n\n        } else if (loc) {\n            coord = loc.locType === 'geo' ? coordFromLngLat(loc) : coordFromXY(loc);\n            node.fixed = true;\n            node.px = node.x = coord[0];\n            node.py = node.y = coord[1];\n            return true;\n        }\n        return false;\n    }\n\n    function resetAllLocations() {\n        nodes.forEach(function (d) {\n            setLongLat(d);\n        });\n    }\n\n    function mkSvgCls(dh, t, on) {\n        var ndh = 'node ' + dh,\n            ndht = t ? ndh + ' ' + t : ndh;\n        return on ? ndht + ' online' : ndht;\n    }\n\n    function createDeviceNode(device) {\n        var node = device;\n\n        node.class = 'device';\n        node.svgClass = mkSvgCls('device', device.type, device.online);\n        positionNode(node);\n        return node;\n    }\n\n    function createHostNode(host) {\n        var node = host;\n\n        node.class = 'host';\n        if (!node.type) {\n            node.type = 'endstation';\n        }\n        node.svgClass = mkSvgCls('host', node.type);\n        positionNode(node);\n        return node;\n    }\n\n    function createHostLink(hostId, devId, devPort) {\n        var linkKey = hostId + '/0-' + devId + '/' + devPort,\n            lnk = linkEndPoints(hostId, devId);\n\n        if (!lnk) {\n            return null;\n        }\n\n        angular.extend(lnk, {\n            key: linkKey,\n            class: 'link',\n            tgtPort: devPort,\n\n            type: function () { return 'hostLink'; },\n            expected: function () { return true; },\n            online: function () {\n                return lnk.target.online;\n            },\n            linkWidth: function () { return 1; },\n        });\n        return lnk;\n    }\n\n    function createLink(link) {\n        var lnk = linkEndPoints(link.src, link.dst);\n\n        if (!lnk) {\n            return null;\n        }\n\n        angular.extend(lnk, {\n            key: link.id,\n            class: 'link',\n            fromSource: link,\n            srcPort: link.srcPort,\n            tgtPort: link.dstPort,\n            position: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n            },\n\n            type: function () {\n                var s = lnk.fromSource,\n                    t = lnk.fromTarget;\n                return (s && s.type) || (t && t.type) || defaultLinkType;\n            },\n            expected: function () {\n                var s = lnk.fromSource,\n                    t = lnk.fromTarget;\n                return (s && s.expected) && (t && t.expected);\n            },\n            online: function () {\n                var s = lnk.fromSource,\n                    t = lnk.fromTarget,\n                    both = lnk.source.online && lnk.target.online;\n                return both && (s && s.online) && (t && t.online);\n            },\n            linkWidth: function () {\n                var s = lnk.fromSource,\n                    t = lnk.fromTarget,\n                    ws = (s && s.linkWidth) || 0,\n                    wt = (t && t.linkWidth) || 0;\n                return lnk.position.multiLink ? 5 : Math.max(ws, wt);\n            },\n            extra: link.extra,\n        });\n        return lnk;\n    }\n\n\n    function linkEndPoints(srcId, dstId) {\n        var srcNode = lu[srcId],\n            dstNode = lu[dstId],\n            sMiss = !srcNode ? missMsg('src', srcId) : '',\n            dMiss = !dstNode ? missMsg('dst', dstId) : '';\n\n        if (sMiss || dMiss) {\n            $log.error('Node(s) not on map for link:' + sMiss + dMiss);\n            return null;\n        }\n\n        return {\n            source: srcNode,\n            target: dstNode,\n        };\n    }\n\n    function missMsg(what, id) {\n        return '\\n[' + what + '] \"' + id + '\" missing';\n    }\n\n\n    function makeNodeKey(d, what) {\n        var port = what + 'Port';\n        return d[what] + '/' + d[port];\n    }\n\n    function makeLinkKey(d, flipped) {\n        var one = flipped ? makeNodeKey(d, 'dst') : makeNodeKey(d, 'src'),\n            two = flipped ? makeNodeKey(d, 'src') : makeNodeKey(d, 'dst');\n        return one + '-' + two;\n    }\n\n    function findLinkById(id) {\n        var key = rlk[id] || id;\n        return key && lu[key];\n    }\n\n    function findLink(linkData, op) {\n        var key = makeLinkKey(linkData),\n            keyrev = makeLinkKey(linkData, 1),\n            link = lu[key],\n            linkRev = lu[keyrev],\n            result = {},\n            ldata = link || linkRev,\n            rawLink;\n\n        if (op === 'add') {\n            if (link) {\n                result.ldata = link;\n                result.badLogic = 'addLink: link already added';\n\n            } else if (linkRev) {\n                result.ldata = linkRev;\n                if (linkRev.fromTarget) {\n                    result.badLogic = 'addLink: link already added';\n                }\n            }\n        } else if (op === 'update') {\n            if (!ldata) {\n                result.badLogic = 'updateLink: link not found';\n            } else {\n                rawLink = link ? ldata.fromSource : ldata.fromTarget;\n                result.updateWith = function (data) {\n                    angular.extend(rawLink, data);\n                    api.restyleLinkElement(ldata);\n                };\n            }\n        } else if (op === 'remove') {\n            if (!ldata) {\n                result.badLogic = 'removeLink: link not found';\n            } else {\n                rawLink = link ? ldata.fromSource : ldata.fromTarget;\n\n                if (!rawLink) {\n                    result.badLogic = 'removeLink: link not found';\n\n                } else {\n                    result.removeRawLink = function () {\n                        var linksForDevPair = linksByDevice[ldata.devicePair],\n                            rmvIdx = fs.find(ldata.key, linksForDevPair, 'key');\n                        if (rmvIdx >= 0) {\n                            linksForDevPair.splice(rmvIdx, 1);\n                        }\n                        ldata.position.multilink = linksForDevPair.length >= 5;\n\n                        if (link) {\n                            ldata.fromSource = null;\n                            if (ldata.fromTarget) {\n                                ldata.fromSource = ldata.fromTarget;\n                                ldata.fromTarget = null;\n                                ldata.key = keyrev;\n                                delete lu[key];\n                                lu[keyrev] = ldata;\n                                delete rlk[keyrev];\n                            }\n                        } else {\n                            ldata.fromTarget = null;\n                            delete rlk[keyrev];\n                        }\n                        if (ldata.fromSource) {\n                            api.restyleLinkElement(ldata);\n                        } else {\n                            api.removeLinkElement(ldata);\n                        }\n                    };\n                }\n            }\n        }\n        return result;\n    }\n\n    function findDevices(offlineOnly) {\n        var a = [];\n        nodes.forEach(function (d) {\n            if (d.class === 'device' && !(offlineOnly && d.online)) {\n                a.push(d);\n            }\n        });\n        return a;\n    }\n\n    function findHosts() {\n        var hosts = [];\n        nodes.forEach(function (d) {\n            if (d.class === 'host') {\n                hosts.push(d);\n            }\n        });\n        return hosts;\n    }\n\n    function findAttachedHosts(devId) {\n        var hosts = [];\n        nodes.forEach(function (d) {\n            if (d.class === 'host' && d.cp.device === devId) {\n                hosts.push(d);\n            }\n        });\n        return hosts;\n    }\n\n    function findAttachedLinks(devId) {\n        var lnks = [];\n        links.forEach(function (d) {\n            if (d.source.id === devId || d.target.id === devId) {\n                lnks.push(d);\n            }\n        });\n        return lnks;\n    }\n\n    function findBadLinks() {\n        var lnks = [],\n            src, tgt;\n        links.forEach(function (d) {\n            if (d.type() !== 'hostLink') {\n                delete d.bad;\n                src = d.fromSource;\n                tgt = d.fromTarget;\n                if (src && !tgt) {\n                    d.bad = 'missing link';\n                } else if (src.type !== tgt.type) {\n                    d.bad = 'type mismatch';\n                }\n                if (d.bad) {\n                    lnks.push(d);\n                }\n            }\n        });\n        return lnks;\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoModelService',\n        ['$log', 'FnService', 'RandomService',\n\n        function (_$log_, _fs_, _rnd_) {\n            $log = _$log_;\n            fs = _fs_;\n            rnd = _rnd_;\n\n            function initModel(_api_, _dim_) {\n                api = _api_;\n                dim = _dim_;\n                lu = api.network.lookup;\n                rlk = api.network.revLinkToKey;\n                nodes = api.network.nodes;\n                links = api.network.links;\n                linksByDevice = api.network.linksByDevice;\n            }\n\n            function newDim(_dim_) {\n                dim = _dim_;\n            }\n\n            function destroyModel() { }\n\n            return {\n                initModel: initModel,\n                newDim: newDim,\n                destroyModel: destroyModel,\n\n                positionNode: positionNode,\n                resetAllLocations: resetAllLocations,\n                createDeviceNode: createDeviceNode,\n                createHostNode: createHostNode,\n                createHostLink: createHostLink,\n                createLink: createLink,\n                coordFromLngLat: coordFromLngLat,\n                lngLatFromCoord: lngLatFromCoord,\n                findLink: findLink,\n                findLinkById: findLinkById,\n                findDevices: findDevices,\n                findHosts: findHosts,\n                findAttachedHosts: findAttachedHosts,\n                findAttachedLinks: findAttachedLinks,\n                findBadLinks: findBadLinks,\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var sus, flash;\n\n    var api;\n\n    var xsky = -.7, \n        xsk = -35, \n        ysc = .5, \n        pad = 50,\n        time = 1500,\n        fill = {\n            pkt: 'rgba(130,130,170,0.3)', \n            opt: 'rgba(170,130,170,0.3)', \n        };\n\n    var oblique = false,\n        xffn = null,\n        plane = {},\n        oldNodeLock;\n\n    var topoLion = function (x) {\n        return '#tobq#' + x + '#';\n    };\n\n    function planeId(tag) {\n        return 'topo-obview-' + tag + 'Plane';\n    }\n\n    function ytfn(h, dir) {\n        return h * ysc * dir * 1.1;\n    }\n\n    function obXform(h, dir) {\n        var yt = ytfn(h, dir);\n        return sus.scale(1, ysc) + sus.translate(0, yt) + sus.skewX(xsk);\n    }\n\n    function noXform() {\n        return sus.skewX(0) + sus.translate(0, 0) + sus.scale(1, 1);\n    }\n\n    function padBox(box, p) {\n        box.x -= p;\n        box.y -= p;\n        box.width += p*2;\n        box.height += p*2;\n    }\n\n    function toObliqueView() {\n        var box = api.nodeGBBox(),\n            ox, oy;\n\n        padBox(box, pad);\n\n        ox = box.x + box.width / 2;\n        oy = box.y + box.height / 2;\n\n        oldNodeLock = api.nodeLock(true);\n        api.opacifyMap(false);\n\n        insertPlanes(ox, oy);\n\n        xffn = function (xy, dir) {\n            var yt = ytfn(box.height, dir),\n                ax = xy.x - ox,\n                ay = xy.y - oy,\n                x = ax + ay * xsky,\n                y = (ay + yt) * ysc;\n            return { x: ox + x, y: oy + y };\n        };\n\n        showPlane('pkt', box, -1);\n        showPlane('opt', box, 1);\n        obTransitionNodes();\n    }\n\n    function toNormalView() {\n        xffn = null;\n\n        hidePlane('pkt');\n        hidePlane('opt');\n        obTransitionNodes();\n\n        removePlanes();\n\n        api.nodeLock(oldNodeLock);\n        api.opacifyMap(true);\n    }\n\n    function obTransitionNodes() {\n        function dir(d) {\n            return api.inLayer(d, 'pkt') ? -1 : 1;\n        }\n\n        if (xffn) {\n            api.nodes().forEach(function (d) {\n                var oldxy = { x: d.x, y: d.y },\n                    coords = xffn(oldxy, dir(d));\n                d.oldxy = oldxy;\n                d.px = d.x = coords.x;\n                d.py = d.y = coords.y;\n            });\n        } else {\n            api.nodes().forEach(function (d) {\n                var old = d.oldxy || { x: d.x, y: d.y };\n                d.px = d.x = old.x;\n                d.py = d.y = old.y;\n                delete d.oldxy;\n            });\n        }\n\n        api.node().transition()\n            .duration(time)\n            .attr(api.tickStuff.nodeAttr);\n        api.link().transition()\n            .duration(time)\n            .call(api.calcLinkPos)\n            .attr(api.tickStuff.linkAttr)\n            .call(api.applyNumLinkLabels);\n        api.linkLabel().transition()\n            .duration(time)\n            .attr(api.tickStuff.linkLabelAttr);\n    }\n\n    function showPlane(tag, box, dir) {\n        box.x = -box.width/2;\n        box.y = -box.height/2;\n\n        plane[tag].select('rect')\n            .attr(box)\n            .attr('opacity', 0)\n            .transition()\n            .duration(time)\n            .attr('opacity', 1)\n            .attr('transform', obXform(box.height, dir));\n    }\n\n    function hidePlane(tag) {\n        plane[tag].select('rect')\n            .transition()\n            .duration(time)\n            .attr('opacity', 0)\n            .attr('transform', noXform());\n    }\n\n    function insertPlanes(ox, oy) {\n        function ins(tag) {\n            var id = planeId(tag),\n                g = api.zoomLayer().insert('g', '#topo-G')\n                    .attr('id', id)\n                    .attr('transform', sus.translate(ox, oy));\n            g.append('rect')\n                .attr('fill', fill[tag])\n                .attr('opacity', 0);\n            plane[tag] = g;\n        }\n        ins('opt');\n        ins('pkt');\n    }\n\n    function removePlanes() {\n        function rem(tag) {\n            var id = planeId(tag);\n            api.zoomLayer().select('#'+id)\n                .transition()\n                .duration(time + 50)\n                .remove();\n            delete plane[tag];\n        }\n        rem('opt');\n        rem('pkt');\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n    }\n\n\nangular.module('ovTopo')\n    .factory('TopoObliqueService',\n    ['SvgUtilService', 'FlashService',\n\n    function (_sus_, _flash_) {\n        sus = _sus_;\n        flash = _flash_;\n\n        function initOblique(_api_) {\n            api = _api_;\n        }\n\n        function destroyOblique() { }\n\n        function toggleOblique() {\n            oblique = !oblique;\n            if (oblique) {\n                api.force().stop();\n                flash.flash(topoLion('fl_oblique_view'));\n                toObliqueView();\n            } else {\n                flash.flash(topoLion('fl_normal_view'));\n                toNormalView();\n            }\n        }\n\n        return {\n            initOblique: initOblique,\n            destroyOblique: destroyOblique,\n\n            isOblique: function () { return oblique; },\n            toggleOblique: toggleOblique,\n            setLionBundle: setLionBundle,\n        };\n    }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var tos = 'TopoOverlayService: ';\n\n    var $log, $timeout, fs, gs, wss, ns, tss, tps, api;\n\n    var overlays = {},\n        current = null,\n        reset = true;\n\n    var topoLion = function (x) {\n        return '#tov#' + x + '#';\n    };\n\n    function error(fn, msg) {\n        $log.error(tos + fn + '(): ' + msg);\n    }\n\n    function warn(fn, msg) {\n        $log.warn(tos + fn + '(): ' + msg);\n    }\n\n    function mkGlyphId(oid, gid) {\n        return (gid[0] === '*') ? oid + '-' + gid.slice(1) : gid;\n    }\n\n    function handleGlyphs(o) {\n        var gdata = fs.isO(o.glyphs),\n            oid = o.overlayId,\n            gid = o.glyphId || 'unknown',\n            data = {},\n            note = [];\n\n        o._glyphId = mkGlyphId(oid, gid);\n\n        o.mkGid = function (g) {\n            return mkGlyphId(oid, g);\n        };\n        o.mkId = function (s) {\n            return oid + '-' + s;\n        };\n\n        if (gdata) {\n            angular.forEach(gdata, function (value, key) {\n                var fullkey = oid + '-' + key;\n                data['_' + fullkey] = value.vb;\n                data[fullkey] = value.d;\n                note.push('*' + key);\n            });\n            gs.registerGlyphs(data);\n            $log.debug('registered overlay glyphs:', oid, note);\n        }\n    }\n\n    function register(overlay) {\n        var r = 'register',\n            over = fs.isO(overlay),\n            kb = over ? fs.isO(overlay.keyBindings) : null,\n            id = over ? over.overlayId : '';\n\n        if (!id) {\n            return error(r, 'not a recognized overlay');\n        }\n        if (overlays[id]) {\n            return warn(r, 'already registered: \"' + id + '\"');\n        }\n        overlays[id] = overlay;\n        handleGlyphs(overlay);\n\n        if (kb) {\n            if (!fs.isA(kb._keyOrder)) {\n                warn(r, 'no _keyOrder array defined on keyBindings');\n            } else {\n                kb._keyOrder.forEach(function (k) {\n                    if (k !== '-' && !kb[k]) {\n                        warn(r, 'no \"' + k + '\" property defined on keyBindings');\n                    }\n                });\n            }\n        }\n\n        $log.debug(tos + 'registered overlay: ' + id, overlay);\n    }\n\n    function list() {\n        return d3.map(overlays).keys();\n    }\n\n    function overlaysAcceptingIntents(intentType) {\n        var result = [];\n        angular.forEach(overlays, function (ov) {\n            var ovid = ov.overlayId,\n                hooks = fs.isO(ov.hooks) || {},\n                aicb = fs.isF(hooks.acceptIntent),\n                sicb = fs.isF(hooks.showIntent);\n\n            if (sicb && aicb && aicb(intentType)) {\n                result.push({\n                    id: ovid,\n                    tt: ov.tooltip || '%' + ovid + '%',\n                });\n            }\n        });\n        return result;\n    }\n\n    function augmentRbset(rset, switchFn) {\n        var map = {},\n            idx = 1;\n\n        angular.forEach(overlays, function (ov) {\n            rset.push({\n                gid: ov._glyphId,\n                tooltip: (ov.tooltip || ''),\n                cb: function () {\n                    tbSelection(ov.overlayId, switchFn);\n                },\n            });\n            map[ov.overlayId] = idx++;\n        });\n        return map;\n    }\n\n    function tbSelection(id, switchFn) {\n        var same = current && current.overlayId === id,\n            payload = {},\n            actions;\n\n        function doop(op) {\n            var oid = current.overlayId;\n            $log.debug('Overlay:', op, oid);\n            current[op]();\n            payload[op] = oid;\n        }\n\n        if (reset || !same) {\n            reset = false;\n            current && doop('deactivate');\n            current = overlays[id];\n            current && doop('activate');\n            actions = current && fs.isO(current.keyBindings);\n            switchFn(id, actions);\n\n            wss.sendEvent('topoSelectOverlay', payload);\n\n            wss.sendEvent('requestSummary');\n            tss.updateDetail();\n        }\n    }\n\n    var coreButtons = {\n        showDeviceView: {\n            gid: 'switch',\n            tt: function () { return topoLion('btn_show_view_device'); },\n            path: 'device',\n        },\n        showFlowView: {\n            gid: 'flowTable',\n            tt: function () { return topoLion('btn_show_view_flow'); },\n            path: 'flow',\n        },\n        showPortView: {\n            gid: 'portTable',\n            tt: function () { return topoLion('btn_show_view_port'); },\n            path: 'port',\n        },\n        showGroupView: {\n            gid: 'groupTable',\n            tt: function () { return topoLion('btn_show_view_group'); },\n            path: 'group',\n        },\n        showMeterView: {\n            gid: 'meterTable',\n            tt: function () { return topoLion('btn_show_view_meter'); },\n            path: 'meter',\n        },\n    };\n\n    function _getButtonDef(id, data) {\n        var btns = current && current.buttons,\n            b = btns && btns[id],\n            cb = fs.isF(b.cb),\n            f = cb ? function () { cb(data); } : function () {};\n\n        return b ? {\n            id: current.mkId(id),\n            gid: current.mkGid(b.gid),\n            tt: b.tt,\n            cb: f,\n        } : null;\n    }\n\n    function installButtons(buttons, data, devId) {\n        buttons.forEach(function (id) {\n            var btn = coreButtons[id],\n                gid = btn && btn.gid,\n                tt = btn && btn.tt,\n                path = btn && btn.path;\n\n            if (btn) {\n                tps.addAction({\n                    id: 'core-' + id,\n                    gid: gid,\n                    tt: tt,\n                    cb: function () { ns.navTo(path, { devId: devId }); },\n                });\n            } else if (btn = _getButtonDef(id, data)) {\n                tps.addAction(btn);\n            }\n        });\n    }\n\n    function addDetailButton(id) {\n        var b = _getButtonDef(id);\n        if (b) {\n            tps.addAction({\n                id: current.mkId(id),\n                gid: current.mkGid(b.gid),\n                cb: b.cb,\n                tt: b.tt,\n            });\n        }\n    }\n\n\n\n    function _hook(x) {\n        var h = current && current.hooks;\n        return h && fs.isF(h[x]);\n    }\n\n    function escapeHook() {\n        var eh = _hook('escape');\n        return eh ? eh() : false;\n    }\n\n    function emptySelectHook() {\n        var cb = _hook('empty');\n        cb && cb();\n    }\n\n    function singleSelectHook(data) {\n        var cb = _hook('single');\n        cb && cb(data);\n    }\n\n    function multiSelectHook(selectOrder) {\n        var cb = _hook('multi');\n        cb && cb(selectOrder);\n    }\n\n    function mouseOverHook(what) {\n        var cb = _hook('mouseover');\n        cb && cb(what);\n    }\n\n    function mouseOutHook() {\n        var cb = _hook('mouseout');\n        cb && cb();\n    }\n\n    function showIntentHook(intentData) {\n        var cb = _hook('showIntent');\n        return cb && cb(intentData);\n    }\n\n    function injectLion(topoBundle) {\n        var cb = _hook('injectLion');\n        return cb && cb(topoBundle);\n    }\n\n\n    function setApi(_api_, _tss_) {\n        api = _api_;\n        tss = _tss_;\n    }\n\n    function showHighlights(data) {\n        function doHighlight() {\n            _showHighlights(data);\n        }\n\n        if (data.delay) {\n            $timeout(doHighlight, data.delay);\n        } else {\n            doHighlight();\n        }\n    }\n\n    function _showHighlights(data) {\n        var less;\n\n\n        api.clearNodeDeco();\n        api.removeNodeBadges();\n        api.clearLinkTrafficStyle();\n        api.removeLinkLabels();\n\n        if (data.subdue) {\n            less = data.subdue === 'min';\n            api.supLayers(true, less);\n\n        } else {\n            api.supLayers(false);\n            api.supLayers(false, true);\n        }\n\n        data.hosts.forEach(function (host) {\n            var hdata = api.findNodeById(host.id),\n                badgeData = host.badge || null;\n\n            if (hdata && hdata.el && !hdata.el.empty()) {\n                hdata.badge = badgeData;\n                if (!host.subdue) {\n                    api.unsupNode(hdata.id, less);\n                }\n            } else {\n                $log.warn('HILITE: no host element:', host.id);\n            }\n        });\n\n        data.devices.forEach(function (device) {\n            var ddata = api.findNodeById(device.id),\n                badgeData = device.badge || null;\n\n            if (ddata && ddata.el && !ddata.el.empty()) {\n                ddata.badge = badgeData;\n                if (!device.subdue) {\n                    api.unsupNode(ddata.id, less);\n                }\n            } else {\n                $log.warn('HILITE: no device element:', device.id);\n            }\n        });\n\n        data.links.forEach(function (link) {\n            var ldata = api.findLinkById(link.id);\n\n            if (ldata && ldata.el && !ldata.el.empty()) {\n                if (!link.subdue) {\n                    api.unsupLink(ldata.key, less);\n                }\n                ldata.el.classed(link.css, true);\n                ldata.label = link.label;\n\n            } else {\n                $log.warn('HILITE: no link element:', link.id);\n            }\n        });\n\n        api.updateNodes();\n        api.updateLinks();\n    }\n\n    function setLionBundle(bundle) {\n        topoLion = bundle;\n        angular.forEach(overlays, function (ov) {\n            var hooks = fs.isO(ov.hooks) || {},\n                inj = fs.isF(hooks.injectLion);\n            inj && inj(bundle);\n        });\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoOverlayService',\n        ['$log', '$timeout', 'FnService', 'GlyphService', 'WebSocketService',\n            'NavService', 'TopoPanelService',\n\n        function (_$log_, _$timeout_, _fs_, _gs_, _wss_, _ns_, _tps_) {\n            $log = _$log_;\n            $timeout = _$timeout_;\n            fs = _fs_;\n            gs = _gs_;\n            wss = _wss_;\n            ns = _ns_;\n            tps = _tps_;\n\n            return {\n                register: register,\n                setApi: setApi,\n                list: list,\n                overlaysAcceptingIntents: overlaysAcceptingIntents,\n                augmentRbset: augmentRbset,\n                mkGlyphId: mkGlyphId,\n                tbSelection: tbSelection,\n                installButtons: installButtons,\n                addDetailButton: addDetailButton,\n                resetOnToolbarDestroy: function () { reset = true; },\n                hooks: {\n                    escape: escapeHook,\n                    emptySelect: emptySelectHook,\n                    singleSelect: singleSelectHook,\n                    multiSelect: multiSelectHook,\n                    mouseOver: mouseOverHook,\n                    mouseOut: mouseOutHook,\n                    showIntent: showIntentHook,\n                },\n\n                showHighlights: showHighlights,\n                setLionBundle: setLionBundle,\n            };\n        }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, $window, $rootScope, fs, ps, gs, flash, wss, bns, mast, ns;\n\n    var topoLion = function (x) {\n        return '#tps#' + x + '#';\n    };\n\n    var pCls = 'topo-p',\n        idSum = 'topo-p-summary',\n        idDet = 'topo-p-detail',\n        panelOpts = {\n            width: 260, \n        },\n        sumMax = 226, \n        padTop = 16, \n        padding = 16, \n        padFudge = padTop + 2 * padding;\n\n    var useDetails = true, \n        haveDetails = false, \n        sumFromTop, \n        unbindWatch;\n\n    var summary, detail;\n\n    function createTopoPanel(id, opts) {\n        var p = ps.createPanel(id, opts),\n            pid = id,\n            header, body, footer;\n        p.classed(pCls, true);\n\n        function panel() {\n            return p;\n        }\n\n        function hAppend(x) {\n            return header.append(x);\n        }\n\n        function bAppend(x) {\n            return body.append(x);\n        }\n\n        function fAppend(x) {\n            return footer.append(x);\n        }\n\n        function setup() {\n            p.empty();\n\n            p.append('div').classed('header', true);\n            p.append('div').classed('body', true);\n            p.append('div').classed('footer', true);\n\n            header = p.el().select('.header');\n            body = p.el().select('.body');\n            footer = p.el().select('.footer');\n        }\n\n        function destroy() {\n            ps.destroyPanel(pid);\n        }\n\n        function adjustHeight(fromTop, max) {\n            var totalPHeight, avSpace,\n                overflow = 0;\n\n            if (!fromTop) {\n                $log.warn('adjustHeight: height from top of page not given');\n                return null;\n            } else if (!body || !p) {\n                return null;\n            }\n\n            p.el().style('top', fromTop + 'px');\n            p.el().style('height', null);\n            body.style('height', null);\n\n            totalPHeight = fromTop + p.height();\n            avSpace = fs.windowSize(padFudge).height;\n\n            if (totalPHeight >= avSpace) {\n                overflow = totalPHeight - avSpace;\n            }\n\n            function _adjustBody(height) {\n                if (height < 10) {\n                    return false;\n                } else {\n                    body.style('height', height + 'px');\n                }\n                return true;\n            }\n\n            if (!_adjustBody(fs.noPxStyle(body, 'height') - overflow)) {\n                return p.height();\n            }\n\n            if (max && p.height() > max) {\n                _adjustBody(fs.noPxStyle(body, 'height') - (p.height() - max));\n            }\n            return p.height();\n        }\n\n        return {\n            panel: panel,\n            setup: setup,\n            destroy: destroy,\n            appendHeader: hAppend,\n            appendBody: bAppend,\n            appendFooter: fAppend,\n            adjustHeight: adjustHeight,\n        };\n    }\n\n\n    function addSep(tbody) {\n        tbody.append('tr').append('td').attr('colspan', 2).append('hr');\n    }\n\n    function addBtnFooter(sepAlreadyThere) {\n        if (!sepAlreadyThere) {\n            detail.appendFooter('hr');\n        }\n        detail.appendFooter('div').classed('actionBtns', true);\n    }\n\n    function addProp(tbody, label, value) {\n        var tr = tbody.append('tr'),\n            lab;\n        if (typeof label === 'string') {\n            lab = label.replace(/_/g, ' ');\n        } else {\n            lab = label;\n        }\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n\n        addCell('label', lab + ' :');\n        addCell('value', value);\n    }\n\n    function listProps(tbody, data) {\n        var sepLast = false;\n\n        data.propOrder.forEach(function (p) {\n            if (p === '-') {\n                addSep(tbody);\n                sepLast = true;\n            } else {\n                addProp(tbody, data.propLabels[p], data.propValues[p]);\n                sepLast = false;\n            }\n        });\n        return sepLast;\n    }\n\n    function watchWindow() {\n        unbindWatch = $rootScope.$watchCollection(\n            function () {\n                return {\n                    h: $window.innerHeight,\n                    w: $window.innerWidth,\n                };\n            }, function () {\n                var h = summary.adjustHeight(sumFromTop, sumMax),\n                    ss = summary.panel().isVisible(),\n                    dtop = h && ss ? sumFromTop + h + padFudge : 0,\n                    dy = dtop || ss ? detail.ypos.current : sumFromTop;\n                detail.adjustHeight(dy);\n            }\n        );\n    }\n\n\n    function populateSummary(data) {\n        summary.setup();\n\n        var svg = summary.appendHeader('div')\n                .classed('icon', true)\n                .append('svg'),\n            title = summary.appendHeader('h2'),\n            table = summary.appendBody('table'),\n            tbody = table.append('tbody'),\n            glyphId = data.glyphId || 'bird';\n\n        gs.addGlyph(svg, glyphId, 24, 0, [1, 1]);\n\n        title.text(data.title);\n        listProps(tbody, data);\n\n        augmentDetailPanel();\n    }\n\n\n    var navPathIdKey = {\n        device: 'devId',\n        host: 'hostId',\n    };\n\n    function displaySingle(data) {\n        var sepLast;\n\n        detail.setup();\n\n        var svg = detail.appendHeader('div')\n                .classed('icon clickable', true)\n                .append('svg'),\n            title = detail.appendHeader('h2')\n                .classed('clickable', true),\n            table = detail.appendBody('table'),\n            tbody = table.append('tbody'),\n            navFn,\n            navPath;\n\n        gs.addGlyph(svg, (data.glyphId || 'm_unknown'), 26);\n        title.text(data.title);\n\n        navPath = data.navPath;\n        if (navPath) {\n            navFn = function () {\n                var arg = {};\n                arg[navPathIdKey[navPath]] = data.id;\n                ns.navTo(navPath, arg);\n            };\n\n            svg.on('click', navFn);\n            title.on('click', navFn);\n        }\n\n        sepLast = listProps(tbody, data);\n        addBtnFooter(sepLast);\n    }\n\n    function displayMulti(ids) {\n        detail.setup();\n\n        var title = detail.appendHeader('h3'),\n            table = detail.appendBody('table'),\n            tbody = table.append('tbody');\n\n        title.text(topoLion('title_selected_items'));\n        ids.forEach(function (d, i) {\n            addProp(tbody, i + 1, d);\n        });\n        addBtnFooter();\n    }\n\n    function addAction(o) {\n        var btnDiv = d3.select('#' + idDet)\n            .select('.actionBtns')\n            .append('div')\n            .classed('actionBtn', true);\n        bns.button(btnDiv, idDet + '-' + o.id, o.gid, o.cb, o.tt);\n    }\n\n    function displayNothing() {\n        haveDetails = false;\n        hideDetailPanel();\n    }\n\n    function displaySomething() {\n        haveDetails = true;\n        if (useDetails) {\n            showDetailPanel();\n        }\n    }\n\n\n    function showSummary(data) {\n        populateSummary(data);\n        showSummaryPanel();\n    }\n\n    function toggleSummary(x) {\n        var kev = (x === 'keyev'),\n            on = kev ? !summary.panel().isVisible() : !!x,\n            verb = on ? topoLion('show') : topoLion('hide'),\n            sumpan = topoLion('fl_panel_summary');\n\n        if (on) {\n            wss.sendEvent('requestSummary');\n        } else {\n            hideSummaryPanel();\n        }\n        flash.flash(verb + ' ' + sumpan);\n        return on;\n    }\n\n\n    function showSummaryPanel() {\n        function _show() {\n            summary.panel().show();\n            summary.adjustHeight(sumFromTop, sumMax);\n        }\n\n        if (detail.panel().isVisible()) {\n            detail.down(_show);\n        } else {\n            _show();\n        }\n    }\n\n    function hideSummaryPanel() {\n        wss.sendEvent('cancelSummary');\n        summary.panel().hide(detail.up);\n    }\n\n    function showDetailPanel() {\n        if (summary.panel().isVisible()) {\n            detail.down(detail.panel().show);\n        } else {\n            detail.up(detail.panel().show);\n        }\n    }\n\n    function summaryBBox() {\n        return d3.select('#' + idSum).node().getBoundingClientRect();\n    }\n\n    function hideDetailPanel() {\n        detail.panel().hide();\n    }\n\n\n    function augmentDetailPanel() {\n        var d = detail,\n            downPos = summaryBBox().bottom + padTop;\n\n        d.ypos = { up: sumFromTop, down: downPos, current: downPos };\n\n        d._move = function (y, cb) {\n            var yp = d.ypos,\n                endCb;\n\n            if (fs.isF(cb)) {\n                endCb = function () {\n                    cb();\n                    d.adjustHeight(d.ypos.current);\n                };\n            } else {\n                endCb = function () {\n                    d.adjustHeight(d.ypos.current);\n                };\n            }\n            if (yp.current !== y) {\n                yp.current = y;\n                d.panel().el().transition().duration(300)\n                    .each('end', endCb)\n                    .style('top', yp.current + 'px');\n            } else {\n                endCb();\n            }\n        };\n\n        d.down = function (cb) { d._move(d.ypos.down, cb); };\n        d.up = function (cb) { d._move(d.ypos.up, cb); };\n    }\n\n    function toggleUseDetailsFlag(x) {\n        var kev = (x === 'keyev'),\n            verb;\n\n        useDetails = kev ? !useDetails : !!x;\n        verb = topoLion(useDetails ? 'enable' : 'disable');\n\n        if (useDetails) {\n            if (haveDetails) {\n                showDetailPanel();\n            }\n        } else {\n            hideDetailPanel();\n        }\n        flash.flash(verb + ' ' + topoLion('fl_panel_details'));\n        return useDetails;\n    }\n\n\n    function initPanels() {\n        sumFromTop = mast.mastHeight() + padTop;\n        summary = createTopoPanel(idSum, panelOpts);\n        detail = createTopoPanel(idDet, panelOpts);\n\n        augmentDetailPanel();\n        watchWindow();\n    }\n\n    function destroyPanels() {\n        summary.destroy();\n        summary = null;\n\n        detail.destroy();\n        detail = null;\n        haveDetails = false;\n        unbindWatch();\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoPanelService',\n        ['$log', '$window', '$rootScope', 'FnService', 'PanelService', 'GlyphService',\n            'FlashService', 'WebSocketService', 'ButtonService', 'MastService',\n            'NavService',\n\n        function (_$log_, _$window_, _$rootScope_,\n                  _fs_, _ps_, _gs_, _flash_, _wss_, _bns_, _mast_, _ns_) {\n            $log = _$log_;\n            $window = _$window_;\n            $rootScope = _$rootScope_;\n            fs = _fs_;\n            ps = _ps_;\n            gs = _gs_;\n            flash = _flash_;\n            wss = _wss_;\n            bns = _bns_;\n            mast = _mast_;\n            ns = _ns_;\n\n            return {\n                initPanels: initPanels,\n                destroyPanels: destroyPanels,\n                createTopoPanel: createTopoPanel,\n\n                showSummary: showSummary,\n                toggleSummary: toggleSummary,\n                hideSummary: hideSummaryPanel,\n\n                toggleUseDetailsFlag: toggleUseDetailsFlag,\n                displaySingle: displaySingle,\n                displayMulti: displayMulti,\n                displayNothing: displayNothing,\n                displaySomething: displaySomething,\n                addAction: addAction,\n\n                detailVisible: function () { return detail.panel().isVisible(); },\n                summaryVisible: function () { return summary.panel().isVisible(); },\n\n                setLionBundle: function (bundle) { topoLion = bundle; },\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var flash, wss;\n\n    var topoLion = function (x) {\n        return '#tproti#' + x + '#';\n    };\n\n    var showingProtectedIntent = null;\n\n\n    function cancelHighlights() {\n        if (!showingProtectedIntent) {\n            return false;\n        }\n\n        showingProtectedIntent = false;\n        wss.sendEvent('cancelProtectedIntentHighlight');\n        flash.flash(topoLion('fl_monitoring_canceled'));\n        return true;\n    }\n\n    function showProtectedIntent(data) {\n        wss.sendEvent('selectProtectedIntent', data);\n        flash.flash(topoLion('fl_selecting_intent') + ' ' + data.key);\n        showingProtectedIntent = true;\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoProtectedIntentsService',\n        ['FlashService', 'WebSocketService',\n\n        function (_flash_, _wss_) {\n            flash = _flash_;\n            wss = _wss_;\n\n            return {\n                initProtectedIntents: function (_api_) {},\n                destroyProtectedIntents: function () { },\n                setLionBundle: function (bundle) { topoLion = bundle; },\n\n                cancelHighlights: cancelHighlights,\n                showProtectedIntent: showProtectedIntent,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, tov, tpis;\n\n    var topoLion = function (x) {\n        return '#tprotiov#' + x + '#';\n    };\n\n\n    var overlay = {\n        overlayId: 'protectedIntent',\n        glyphId: 'm_ips',\n        tooltip: function () { return topoLion('ov_tt_protected_intents'); },\n\n        activate: function () {\n            $log.debug('Protected Intent overlay ACTIVATED');\n        },\n\n        deactivate: function () {\n            tpis.cancelHighlights();\n            $log.debug('Protected Intent overlay DEACTIVATED');\n        },\n\n        hooks: {\n            escape: function () {\n                return tpis.cancelHighlights();\n            },\n            acceptIntent: function (type) {\n                return (type.startsWith('Protected'));\n            },\n            showIntent: function (info) {\n                tpis.showProtectedIntent(info);\n            },\n            injectLion: function (bundle) {\n                topoLion = bundle;\n                tpis.setLionBundle(bundle);\n            },\n        },\n    };\n\n    angular.module('ovTopo')\n        .run(['$log', 'TopoOverlayService', 'TopoProtectedIntentsService',\n\n        function (_$log_, _tov_, _tpis_) {\n            $log = _$log_;\n            tov = _tov_;\n            tpis = _tpis_;\n            tov.register(overlay);\n        }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, fs, wss, tov, tps, tts, sus;\n\n    var api;\n\n    var hovered, selections, selectOrder, consumeClick;\n\n    var topoLion = function (x) {\n        return '#tsel#' + x + '#';\n    };\n\n    function setInitialState() {\n        hovered = null; \n        selections = {}; \n        selectOrder = []; \n        consumeClick = false; \n    }\n\n\n    function nSel() {\n        return selectOrder.length;\n    }\n    function getSel(idx) {\n        return selections[selectOrder[idx]];\n    }\n    function allSelectionsClass(cls) {\n        for (var i=0, n=nSel(); i<n; i++) {\n            if (getSel(i).obj.class !== cls) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n\n    function nodeMouseOver(m) {\n        if (!m.dragStarted) {\n            if (hovered !== m) {\n                hovered = m;\n                tov.hooks.mouseOver({\n                    id: m.id,\n                    class: m.class,\n                    type: m.type,\n                });\n            }\n        }\n    }\n\n    function nodeMouseOut(m) {\n        if (!m.dragStarted) {\n            if (hovered) {\n                hovered = null;\n                tov.hooks.mouseOut();\n            }\n        }\n    }\n\n\n    function selectObject(obj) {\n        var el = this,\n            nodeEv = el && el.tagName === 'g',\n            ev = d3.event.sourceEvent || {},\n            n;\n\n        if (api.zoomingOrPanning(ev)) {\n            return;\n        }\n\n        if (nodeEv) {\n            n = d3.select(el);\n        } else {\n            api.node().each(function (d) {\n                if (d === obj) {\n                    n = d3.select(el = this);\n                }\n            });\n        }\n\n        if (obj && obj.class === 'link') {\n            if (selections[obj.key]) {\n                deselectObject(obj.key);\n            } else {\n                selections[obj.key] = { obj: obj, el: el };\n                selectOrder.push(obj.key);\n            }\n            updateDetail();\n            return;\n        }\n\n        if (!n) {\n            return;\n        }\n\n        if (nodeEv) {\n            consumeClick = true;\n        }\n\n        if (ev.shiftKey && n.classed('selected')) {\n            deselectObject(obj.id);\n            updateDetail();\n            return;\n        }\n\n        if (!ev.shiftKey) {\n            deselectAll(true);\n        }\n\n        selections[obj.id] = { obj: obj, el: el };\n        selectOrder.push(obj.id);\n\n        n.classed('selected', true);\n        if (n.classed('device')) {\n            api.updateDeviceColors(obj);\n        }\n        updateDetail();\n    }\n\n    function reselect() {\n        selectOrder.forEach(function (id) {\n            var sel = d3.select('g#' + sus.safeId(id));\n            sel.classed('selected', true);\n        });\n        updateDetail();\n    }\n\n    function deselectObject(id) {\n        var obj = selections[id];\n        if (obj) {\n            d3.select(obj.el).classed('selected', false);\n            delete selections[id];\n            fs.removeFromArray(id, selectOrder);\n            api.updateDeviceColors(obj.obj);\n        }\n    }\n\n    function deselectAll(skipUpdate) {\n        var something = (selectOrder.length > 0);\n\n        api.node().classed('selected', false);\n        selections = {};\n        selectOrder = [];\n        api.updateDeviceColors();\n        if (!skipUpdate) {\n            updateDetail();\n        }\n\n        return something;\n    }\n\n\n    function requestDetails(data) {\n        var itemClass = data.class,\n            payload = {\n                class: itemClass,\n                id: data.id,\n            };\n\n        if (itemClass === 'link') {\n            payload.key = data.key;\n            payload.sourceId = data.source.id;\n            payload.targetId = data.target.id;\n            payload.targetPort = data.tgtPort;\n\n            if (data.source.class === 'host') {\n                payload.isEdgeLink = true;\n            } else {\n                payload.isEdgeLink = false;\n                payload.sourcePort = data.srcPort;\n            }\n        }\n\n        wss.sendEvent('requestDetails', payload);\n    }\n\n\n    function updateDetail() {\n        var nSel = selectOrder.length;\n        if (!nSel) {\n            emptySelect();\n        } else if (nSel === 1) {\n            singleSelect();\n        } else {\n            multiSelect();\n        }\n    }\n\n    function emptySelect() {\n        tov.hooks.emptySelect();\n        tps.displayNothing();\n    }\n\n    function singleSelect() {\n        var data = getSel(0).obj;\n\n        $log.debug('Requesting details from server for', data);\n        requestDetails(data);\n    }\n\n    function multiSelect() {\n        tps.displayMulti(selectOrder);\n        addHostSelectionActions();\n        tov.hooks.multiSelect(selectOrder);\n        tps.displaySomething();\n    }\n\n    function addHostSelectionActions() {\n        if (allSelectionsClass('host')) {\n            if (nSel() === 2) {\n                tps.addAction({\n                    id: 'host-flow-btn',\n                    gid: 'm_endstation',\n                    cb: tts.addHostIntent,\n                    tt: function () { return topoLion('tr_btn_create_h2h_flow'); },\n                });\n            } else if (nSel() >= 2) {\n                tps.addAction({\n                    id: 'mult-src-flow-btn',\n                    gid: 'flows',\n                    cb: tts.addMultiSourceIntent,\n                    tt: function () { return topoLion('tr_btn_create_msrc_flow'); },\n                });\n            }\n        }\n    }\n\n\n\n    function showDetails(data) {\n        var buttons = fs.isA(data.buttons) || [];\n        tps.displaySingle(data);\n        tov.installButtons(buttons, data, data.propValues['uri']);\n        tov.hooks.singleSelect(data);\n        tps.displaySomething();\n    }\n\n    function somethingSelected() {\n        return nSel();\n    }\n\n    function clickConsumed(x) {\n        var cc = consumeClick;\n        consumeClick = !!x;\n        return cc;\n    }\n\n    function selectionContext() {\n        var devices = [],\n            hosts = [],\n            types = {};\n\n        angular.forEach(selections, function (d) {\n            var o = d.obj,\n                c = o.class;\n\n            if (c === 'device') {\n                devices.push(o.id);\n                types[o.id] = o.type;\n            }\n            if (c === 'host') {\n                hosts.push(o.id);\n                types[o.id] = o.type;\n            }\n        });\n\n        return {\n            devices: devices,\n            hosts: hosts,\n            types: types,\n        };\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoSelectService',\n        ['$log', 'FnService', 'WebSocketService', 'TopoOverlayService',\n        'TopoPanelService', 'TopoTrafficService', 'SvgUtilService',\n\n        function (_$log_, _fs_, _wss_, _tov_, _tps_, _tts_, _sus_) {\n            $log = _$log_;\n            fs = _fs_;\n            wss = _wss_;\n            tov = _tov_;\n            tps = _tps_;\n            tts = _tts_;\n            sus = _sus_;\n\n            function initSelect(_api_) {\n                api = _api_;\n                if (!selections) {\n                    setInitialState();\n                }\n            }\n\n            function destroySelect() { }\n\n            return {\n                initSelect: initSelect,\n                destroySelect: destroySelect,\n\n                showDetails: showDetails,\n\n                nodeMouseOver: nodeMouseOver,\n                nodeMouseOut: nodeMouseOut,\n                selectObject: selectObject,\n                deselectObject: deselectObject,\n                deselectAll: deselectAll,\n                updateDetail: updateDetail,\n\n                hovered: function () { return hovered; },\n                selectOrder: function () { return selectOrder; },\n                somethingSelected: somethingSelected,\n\n                clickConsumed: clickConsumed,\n                selectionContext: selectionContext,\n                reselect: reselect,\n                setLionBundle: function (bundle) { topoLion = bundle; },\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, fs, gs, sus, wss;\n\n    var tssid = 'TopoSpriteService: ',\n        fontsize = 20; \n\n    var spriteLayer, defsElement;\n\n\n    function registerPathsAsGlyphs(paths) {\n        var custom = {},\n            ids = [];\n\n        function mkd(d) {\n            return fs.isA(d) ? d.join('') : d;\n        }\n\n        paths.forEach(function (path) {\n            var tag = 'spr_' + path.tag;\n\n            if (path.glyph) {\n                return;\n            }\n\n            custom['_' + tag] = path.viewbox || '0 0 1000 1000';\n            custom[tag] = mkd(path.d);\n            ids.push(tag);\n        });\n\n        gs.registerGlyphs(custom);\n        gs.loadDefs(defsElement, ids, true);\n    }\n\n    function applyStrokeStyle(s, use) {\n        var style;\n        if (s) {\n            style = {};\n            angular.forEach(s, function (value, key) {\n                style['stroke-' + key] = value;\n            });\n            use.style(style);\n        }\n    }\n\n    function applyFillClass(f, use) {\n        use.classed('fill-' + f, true);\n    }\n\n    function doSprite(spr, def, pathmeta) {\n        var pmeta = pathmeta[def.path],\n            c = spr.class || 'gray1',\n            p = spr.pos || [0, 0],\n            lab = spr.label,\n            dim = def.dim || [40, 40],\n            w = dim[0],\n            h = dim[1],\n            dy = def.labelyoff || 1,\n            sc = def.scale,\n            xfm = sus.translate(p),\n            g, attr, use;\n\n        if (sc) {\n            xfm += sus.scale(sc, sc);\n        }\n\n        g = spriteLayer.append('g')\n            .classed(c, true)\n            .attr('transform', xfm);\n\n        attr = {\n            width: w,\n            height: h,\n            'xlink:href': '#' + pmeta.u,\n        };\n\n        use = g.append('use').attr(attr);\n        applyStrokeStyle(pmeta.s, use);\n        applyFillClass(def.fill, use);\n\n\n        if (fs.isA(def.subpaths)) {\n            def.subpaths.forEach(function (v) {\n                pmeta = pathmeta[v.path];\n                attr = {\n                    width: w,\n                    height: h,\n                    'xlink:href': '#' + pmeta.u,\n                    transform: sus.translate(v.pos),\n                };\n                use = g.append('use').attr(attr);\n                applyStrokeStyle(pmeta.s, use);\n                applyFillClass(def.subpathfill, use);\n            });\n        }\n\n        if (lab) {\n            g.append('text')\n                .text(lab)\n                .attr({ x: w / 2, y: h * dy });\n        }\n    }\n\n    function doLabel(label) {\n        var c = label.class || 'gray1',\n            p = label.pos || [0, 0],\n            sz = label.size || 1.0;\n\n            spriteLayer.append('g')\n                .classed(c, true)\n                .attr('transform', sus.translate(p))\n                .append('text')\n                .text(label.text)\n                .style('font-size', (fontsize * sz)+'pt');\n    }\n\n\n\n    function inList(payload) {\n        $log.debug(tssid + 'Registered sprite definitions:', payload.names);\n    }\n\n    function inData(payload) {\n        var data = payload.data,\n            name, desc, pfx, sprites, labels, alpha,\n            paths, defn, load,\n            pathmeta = {},\n            defs = {},\n            warn = [];\n\n        if (!data) {\n            $log.warn(tssid + 'No sprite data loaded.');\n            return;\n        }\n        name = data.defn_name;\n        desc = data.defn_desc;\n        paths = data.paths;\n        defn = data.defn;\n        load = data.load;\n        pfx = tssid + '[' + name + ']: ';\n\n        $log.debug('Loading sprites...[' + name + ']', desc);\n\n        function no(what) {\n            warn.push(pfx + 'No ' + what + ' property defined');\n        }\n\n        if (!paths) no('paths');\n        if (!defn) no('defn');\n        if (!load) no('load');\n\n        if (warn.length) {\n            $log.error(warn.join('\\n'));\n            return;\n        }\n\n        registerPathsAsGlyphs(paths);\n\n        paths.forEach(function (p) {\n            pathmeta[p.tag] = {\n                s: p.stroke,\n                u: p.glyph || 'spr_' + p.tag,\n            };\n        });\n\n        defn.forEach(function (d) {\n            defs[d.id] = d;\n        });\n\n        sprites = load.sprites;\n        labels = load.labels;\n        alpha = load.alpha;\n\n        if (alpha) {\n            spriteLayer.style('opacity', alpha);\n        }\n\n        if (sprites) {\n            sprites.forEach(function (spr) {\n                var def = defs[spr.id];\n                doSprite(spr, def, pathmeta);\n            });\n        }\n\n        if (labels) {\n            labels.forEach(doLabel);\n        }\n    }\n\n\n    function loadSprites(layer, defsElem, defname) {\n        var name = defname || 'sprites';\n        spriteLayer = layer;\n        defsElement = defsElem;\n\n        $log.info(tssid + 'Requesting sprite definition ['+name+']...');\n\n        wss.sendEvent('spriteListRequest');\n        wss.sendEvent('spriteDataRequest', { name: name });\n    }\n\n\n    angular.module('ovTopo')\n    .factory('TopoSpriteService',\n        ['$log', 'FnService', 'GlyphService',\n            'SvgUtilService', 'WebSocketService',\n\n        function (_$log_, _fs_, _gs_, _sus_, _wss_) {\n            $log = _$log_;\n            fs = _fs_;\n            gs = _gs_;\n            sus = _sus_;\n            wss = _wss_;\n\n            return {\n                loadSprites: loadSprites,\n                spriteListResponse: inList,\n                spriteDataResponse: inData,\n            };\n        }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, fs, tbs, ps, tov, tds, api;\n\n\n    var topoLion = function (x) {\n        return '#ttbar#' + x + '#';\n    };\n\n    var toolbar, keyData, cachedState, thirdRow, ovRset, ovIndex;\n\n    var name = 'topo-tbar',\n        cooktag = 'topo_prefs',\n        soa = 'switchOverlayActions: ',\n        selOver = '************',\n        defaultOverlay = 'traffic';\n\n\n    var k2b = {\n        O: { id: 'summary-tog', gid: 'm_summary', isel: true },\n        I: { id: 'instance-tog', gid: 'm_uiAttached', isel: true },\n        D: { id: 'details-tog', gid: 'm_details', isel: true },\n        H: { id: 'hosts-tog', gid: 'm_endstation', isel: false },\n        M: { id: 'offline-tog', gid: 'm_switch', isel: true },\n        P: { id: 'ports-tog', gid: 'm_ports', isel: true },\n        B: { id: 'bkgrnd-tog', gid: 'm_map', isel: false },\n        G: { id: 'bkgrnd-sel', gid: 'm_selectMap' },\n        S: { id: 'sprite-tog', gid: 'm_cloud', isel: false },\n\n        Z: { id: 'oblique-tog', gid: 'm_oblique', isel: false },\n        N: { id: 'filters-btn', gid: 'm_filters' },\n        L: { id: 'cycleLabels-btn', gid: 'm_cycleLabels' },\n        R: { id: 'resetZoom-btn', gid: 'm_resetZoom' },\n\n        E: { id: 'eqMaster-btn', gid: 'm_eqMaster' },\n    };\n\n    var prohibited = [\n        'T', 'backSlash', 'slash',\n        'X', \n    ];\n    prohibited = prohibited.concat(d3.map(k2b).keys());\n\n\n    var defaultPrefsState = {\n            insts: 1,\n            summary: 1,\n            detail: 1,\n            hosts: 0,\n            offdev: 1,\n            dlbls: 0,\n            hlbls: 0,\n            porthl: 1,\n            bg: 0,\n            spr: 0,\n            ovid: 'traffic', \n            toolbar: 0,\n        },\n        prefsMap = {\n            summary: 'O',\n            insts: 'I',\n            detail: 'D',\n            hosts: 'H',\n            offdev: 'M',\n            porthl: 'P',\n            bg: 'B',\n            spr: 'S',\n        };\n\n    function init(_api_) {\n        api = _api_;\n        setInitToggleState();\n    }\n\n    function topoDefPrefs() {\n        return angular.extend({}, defaultPrefsState);\n    }\n\n    function setInitToggleState() {\n        cachedState = ps.asNumbers(\n            ps.getPrefs(cooktag, defaultPrefsState), ['ovid'], true\n        );\n        $log.debug('TOOLBAR---- read prefs state:', cachedState);\n\n        if (!cachedState) {\n            cachedState = topoDefPrefs();\n            ps.setPrefs(cooktag, cachedState);\n            $log.debug('TOOLBAR---- Set default prefs state:', cachedState);\n        }\n\n        angular.forEach(prefsMap, function (v, k) {\n            var cfg = k2b[v];\n            cfg && (cfg.isel = !!cachedState[k]);\n        });\n    }\n\n    function initKeyData() {\n        keyData = d3.map(k2b);\n        keyData.forEach(function (key, value) {\n            var data = api.getActionEntry(key),\n                ttfn = data[1]; \n\n            value.key = key;\n            value.cb = data[0]; \n\n            value.tt = function () {\n                return fs.isF(ttfn) ? ttfn() : '' + ttfn;\n            };\n        });\n    }\n\n    function deferredText(v) {\n        return function () {\n            return (fs.isF(v.tt) ? v.tt() : v.tt) + ' (' + v.key + ')';\n        };\n    }\n\n    function addButton(key) {\n        var v = keyData.get(key);\n        v.btn = toolbar.addButton(v.id, v.gid, v.cb, deferredText(v));\n    }\n\n    function addToggle(key, suppressIfMobile) {\n        var v = keyData.get(key);\n        if (suppressIfMobile && fs.isMobile()) { return; }\n        v.tog = toolbar.addToggle(v.id, v.gid, v.isel, v.cb, deferredText(v));\n    }\n\n    function addFirstRow() {\n        addToggle('I');\n        addToggle('O');\n        addToggle('D');\n        toolbar.addSeparator();\n\n        addToggle('H');\n        addToggle('M');\n        addToggle('P', true);\n        addToggle('B');\n        addButton('G');\n        addToggle('S', true);\n    }\n\n    function addSecondRow() {\n        addToggle('Z');\n        addButton('N');\n        addButton('L');\n        addButton('R');\n        toolbar.addSeparator();\n        addButton('E');\n    }\n\n    function addOverlays() {\n        toolbar.addSeparator();\n\n        var rset = [{\n                gid: 'm_unknown',\n                tooltip: topoLion('ov_tt_none'),\n                cb: function () {\n                    tov.tbSelection(null, switchOverlayActions);\n                },\n            }];\n        ovIndex = tov.augmentRbset(rset, switchOverlayActions);\n        ovRset = toolbar.addRadioSet('topo-overlays', rset);\n    }\n\n    function switchOverlayActions(oid, keyBindings) {\n        var prohibits = [],\n            kb = fs.isO(keyBindings) || {},\n            order = fs.isA(kb._keyOrder) || [];\n\n        if (keyBindings && !keyBindings._keyOrder) {\n            $log.warn(soa + 'no _keyOrder property defined');\n        } else {\n            ['esc', '_keyListener', '_helpFormat'].forEach(function (k) {\n                fs.removeFromArray(k, order);\n            });\n        }\n\n        tds.closeDialog();\n        thirdRow.clear();\n\n        persistTopoPrefs('ovid', oid);\n\n        if (!order.length) {\n            thirdRow.setText(selOver);\n            thirdRow.classed('right', true);\n            api.setUpKeys(); \n\n        } else {\n            thirdRow.classed('right', false);\n            angular.forEach(order, function (key) {\n                var value, bid, gid, tt;\n\n                if (prohibited.indexOf(key) > -1) {\n                    prohibits.push(key);\n\n                } else {\n                    value = keyBindings[key];\n                    bid = oid + '-' + key;\n                    gid = tov.mkGlyphId(oid, value.gid);\n                    tt = function () {\n                        var ttfn = value.tt,\n                            txt = fs.isF(ttfn) ? ttfn() : ttfn;\n                        return txt + ' (' + key + ')';\n                    };\n                    thirdRow.addButton(bid, gid, value.cb, tt);\n                }\n            });\n            api.setUpKeys(keyBindings); \n        }\n\n        if (prohibits.length) {\n            $log.warn(soa + 'Prohibited key bindings ignored:', prohibits);\n        }\n    }\n\n    function createToolbar() {\n        initKeyData();\n        toolbar = tbs.createToolbar(name);\n        addFirstRow();\n        toolbar.addRow();\n        addSecondRow();\n        addOverlays();\n        thirdRow = toolbar.addRow();\n        thirdRow.setText(selOver);\n        thirdRow.classed('right', true);\n\n        if (cachedState.toolbar) {\n            toolbar.show();\n        } else {\n            toolbar.hide();\n        }\n    }\n\n    function destroyToolbar() {\n        tbs.destroyToolbar(name);\n        tov.resetOnToolbarDestroy();\n    }\n\n    function keyListener(key) {\n        var v = keyData.get(key);\n\n        if (v) {\n            if (v.tog) {\n                v.tog.toggleNoCb();\n            }\n        }\n    }\n\n    function persistTopoPrefs(key, val) {\n        var prefs = ps.getPrefs(cooktag, defaultPrefsState);\n        prefs[key] = val === undefined ? !prefs[key] : val;\n        ps.setPrefs('topo_prefs', prefs);\n    }\n\n    function toggleToolbar() {\n        toolbar.toggle();\n        persistTopoPrefs('toolbar');\n    }\n\n    function setToolbar(state) {\n        if (state) {\n            toolbar.show();\n        } else {\n            toolbar.hide();\n        }\n     }\n\n    function selectOverlay(ovid) {\n        var idx = ovIndex[defaultOverlay] || 0,\n            pidx = (ovid === null) ? 0 : ovIndex[ovid] || -1;\n        if (pidx >= 0 && pidx < ovRset.size()) {\n            idx = pidx;\n        }\n        ovRset.selectedIndex(idx);\n    }\n\n    function fnkey(idx) {\n        if (idx < ovRset.size() && idx !== ovRset.selectedIndex()) {\n            ovRset.selectedIndex(idx);\n        }\n    }\n\n    angular.module('ovTopo')\n        .factory('TopoToolbarService',\n        ['$log', 'FnService', 'ToolbarService', 'PrefsService',\n            'TopoOverlayService', 'TopoDialogService',\n\n        function (_$log_, _fs_, _tbs_, _ps_, _tov_, _tds_) {\n            $log = _$log_;\n            fs = _fs_;\n            tbs = _tbs_;\n            ps = _ps_;\n            tov = _tov_;\n            tds = _tds_;\n\n            return {\n                init: init,\n                createToolbar: createToolbar,\n                destroyToolbar: destroyToolbar,\n                keyListener: keyListener,\n                toggleToolbar: toggleToolbar,\n                setToolbar: setToolbar,\n                selectOverlay: selectOverlay,\n                defaultPrefs: defaultPrefsState,\n                fnkey: fnkey,\n                setLionBundle: function (bundle) { topoLion = bundle; },\n            };\n        }]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $log, flash, wss, api;\n\n    var topoLion = function (x) {\n        return '#ttraf#' + x + '#';\n    };\n\n\n    var allTrafficTypes = [\n            'flowStatsBytes',\n            'portStatsBitSec',\n            'portStatsPktSec',\n        ],\n        allTrafficMsgs = []; \n\n    var trafficMode = null,\n        hoverMode = null,\n        allTrafficIndex = 0;\n\n\n\n    function setLionBundle(bundle) {\n        $log.debug('topoTraffic: setting Lion bundle');\n        topoLion = bundle;\n        allTrafficMsgs = [\n            topoLion('tr_fl_fstats_bytes'),\n            topoLion('tr_fl_pstats_bits'),\n            topoLion('tr_fl_pstats_pkts'),\n        ];\n    }\n\n    function requestTrafficForMode(mouse) {\n        if (trafficMode === 'flows') {\n            requestDeviceLinkFlows();\n        } else if (trafficMode === 'intents') {\n            if (!mouse || hoverMode === 'intents') {\n                requestRelatedIntents();\n            }\n        } else {\n        }\n    }\n\n    function requestDeviceLinkFlows() {\n        var hov = api.hovered();\n\n        function hoverValid() {\n            return hoverMode === 'flows' &&\n                hov && (hov.class === 'device');\n        }\n\n        if (api.somethingSelected()) {\n            wss.sendEvent('requestDeviceLinkFlows', {\n                ids: api.selectOrder(),\n                hover: hoverValid() ? hov.id : '',\n            });\n        }\n    }\n\n    function requestRelatedIntents() {\n        var hov = api.hovered();\n\n        function hoverValid() {\n            return hoverMode === 'intents' && hov && (\n            hov.class === 'host' ||\n            hov.class === 'device' ||\n            hov.class === 'link');\n        }\n\n        if (api.somethingSelected()) {\n            wss.sendEvent('requestRelatedIntents', {\n                ids: api.selectOrder(),\n                hover: hoverValid() ? hov.id : '',\n            });\n        }\n    }\n\n\n\n    function cancelTraffic(forced) {\n        if (!trafficMode || (!forced && trafficMode === 'allFlowPort')) {\n            return false;\n        }\n\n        trafficMode = hoverMode = null;\n        wss.sendEvent('cancelTraffic');\n        flash.flash(topoLion('fl_monitoring_canceled'));\n        return true;\n    }\n\n    function showAllTraffic() {\n        trafficMode = 'allFlowPort';\n        hoverMode = null;\n        wss.sendEvent('requestAllTraffic', {\n            trafficType: allTrafficTypes[allTrafficIndex],\n        });\n        flash.flash(allTrafficMsgs[allTrafficIndex]);\n        allTrafficIndex = (allTrafficIndex + 1) % 3;\n    }\n\n    function showDeviceLinkFlows() {\n        trafficMode = hoverMode = 'flows';\n        requestDeviceLinkFlows();\n        flash.flash(topoLion('tr_fl_dev_flows'));\n    }\n\n    function showRelatedIntents() {\n        trafficMode = hoverMode = 'intents';\n        requestRelatedIntents();\n        flash.flash(topoLion('tr_fl_rel_paths'));\n    }\n\n    function showPrevIntent() {\n        if (trafficMode === 'intents') {\n            hoverMode = null;\n            wss.sendEvent('requestPrevRelatedIntent');\n            flash.flash(topoLion('tr_fl_prev_rel_int'));\n        }\n    }\n\n    function showNextIntent() {\n        if (trafficMode === 'intents') {\n            hoverMode = null;\n            wss.sendEvent('requestNextRelatedIntent');\n            flash.flash(topoLion('tr_fl_next_rel_int'));\n        }\n    }\n\n    function showSelectedIntentTraffic() {\n        if (trafficMode === 'intents') {\n            hoverMode = null;\n            wss.sendEvent('requestSelectedIntentTraffic');\n            flash.flash(topoLion('tr_fl_traf_on_path'));\n        }\n    }\n\n    function selectIntent(data) {\n        trafficMode = 'intents';\n        hoverMode = null;\n        wss.sendEvent('selectIntent', data);\n        flash.flash(topoLion('fl_selecting_intent') + ' ' + data.key);\n    }\n\n\n\n    function addHostIntent() {\n        var so = api.selectOrder();\n\n        wss.sendEvent('addHostIntent', {\n            one: so[0],\n            two: so[1],\n            ids: so,\n        });\n        trafficMode = 'intents';\n        hoverMode = null;\n        flash.flash(topoLion('tr_fl_h2h_flow_added'));\n    }\n\n    function removeIntent(d) {\n        var action = topoLion(d.intentPurge ? 'purged' : 'withdrawn');\n\n        wss.sendEvent('removeIntent', {\n            appId: d.appId,\n            appName: d.appName,\n            key: d.key,\n            purge: d.intentPurge,\n        });\n        trafficMode = 'intents';\n        hoverMode = null;\n        flash.flash(topoLion('intent') + ' ' + action);\n    }\n\n    function resubmitIntent(d) {\n        wss.sendEvent('resubmitIntent', {\n            appId: d.appId,\n            appName: d.appName,\n            key: d.key,\n            purge: d.intentPurge,\n        });\n        trafficMode = 'intents';\n        hoverMode = null;\n        flash.flash(topoLion('intent') + ' ' + topoLion('resubmitted'));\n    }\n\n    function addMultiSourceIntent() {\n        var so = api.selectOrder();\n\n        wss.sendEvent('addMultiSourceIntent', {\n            src: so.slice(0, so.length - 1),\n            dst: so[so.length - 1],\n            ids: so,\n        });\n        trafficMode = 'intents';\n        hoverMode = null;\n        flash.flash(topoLion('tr_fl_multisrc_flow') + ' ' + topoLion('added'));\n    }\n\n    function removeIntents() {\n        wss.sendEvent('removeIntents', {});\n        trafficMode = 'intents';\n        hoverMode = null;\n        flash.flash(topoLion('intents') + ' ' + topoLion('purged'));\n    }\n\n\n\n    angular.module('ovTopo')\n    .factory('TopoTrafficService',\n        ['$log', 'FlashService', 'WebSocketService',\n\n        function (_$log_, _flash_, _wss_) {\n            $log = _$log_;\n            flash = _flash_;\n            wss = _wss_;\n\n            return {\n                initTraffic: function (_api_) { api = _api_; },\n                destroyTraffic: function () { },\n\n                cancelTraffic: cancelTraffic,\n                showAllTraffic: showAllTraffic,\n                showDeviceLinkFlows: showDeviceLinkFlows,\n                showRelatedIntents: showRelatedIntents,\n                showPrevIntent: showPrevIntent,\n                showNextIntent: showNextIntent,\n                showSelectedIntentTraffic: showSelectedIntentTraffic,\n                selectIntent: selectIntent,\n\n                requestTrafficForMode: requestTrafficForMode,\n\n                addHostIntent: addHostIntent,\n                addMultiSourceIntent: addMultiSourceIntent,\n                removeIntent: removeIntent,\n                resubmitIntent: resubmitIntent,\n                removeIntents: removeIntents,\n\n                setLionBundle: setLionBundle,\n            };\n        }]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, tov, tts;\n\n    var topoLion = function (x) {\n        return '#ttrafov#' + x + '#';\n    };\n\n\n\n\n    var overlay = {\n        overlayId: 'traffic',\n        glyphId: 'm_allTraffic',\n        tooltip: function () { return topoLion('ov_tt_traffic'); },\n\n\n        activate: function () {\n            $log.debug('Traffic overlay ACTIVATED');\n        },\n\n        deactivate: function () {\n            tts.cancelTraffic(true);\n            $log.debug('Traffic overlay DEACTIVATED');\n        },\n\n        buttons: {\n            showDeviceFlows: {\n                gid: 'm_flows',\n                tt: function () { return topoLion('tr_btn_show_device_flows'); },\n                cb: function (data) { tts.showDeviceLinkFlows(); },\n            },\n\n            showRelatedTraffic: {\n                gid: 'm_relatedIntents',\n                tt: function () { return topoLion('tr_btn_show_related_traffic'); },\n                cb: function (data) { tts.showRelatedIntents(); },\n            },\n        },\n\n        keyBindings: {\n            0: {\n                cb: function () { tts.cancelTraffic(true); },\n                tt: function () { return topoLion('tr_btn_cancel_monitoring'); },\n                gid: 'm_xMark',\n            },\n\n            A: {\n                cb: function () { tts.showAllTraffic(); },\n                tt: function () { return topoLion('tr_btn_monitor_all'); },\n                gid: 'm_allTraffic',\n            },\n            F: {\n                cb: function () { tts.showDeviceLinkFlows(); },\n                tt: function () { return topoLion('tr_btn_show_dev_link_flows'); },\n                gid: 'm_flows',\n            },\n            V: {\n                cb: function () { tts.showRelatedIntents(); },\n                tt: function () { return topoLion('tr_btn_show_all_rel_intents'); },\n                gid: 'm_relatedIntents',\n            },\n            leftArrow: {\n                cb: function () { tts.showPrevIntent(); },\n                tt: function () { return topoLion('tr_btn_show_prev_rel_intent'); },\n                gid: 'm_prev',\n            },\n            rightArrow: {\n                cb: function () { tts.showNextIntent(); },\n                tt: function () { return topoLion('tr_btn_show_next_rel_intent'); },\n                gid: 'm_next',\n            },\n            W: {\n                cb: function () { tts.showSelectedIntentTraffic(); },\n                tt: function () { return topoLion('tr_btn_monitor_sel_intent'); },\n                gid: 'm_intentTraffic',\n            },\n\n            _keyOrder: [\n                '0', 'A', 'F', 'V', 'leftArrow', 'rightArrow', 'W',\n            ],\n        },\n\n        hooks: {\n            escape: function () {\n                return tts.cancelTraffic(true);\n            },\n\n            empty: function () {\n                tts.cancelTraffic();\n            },\n            single: function (data) {\n                tts.requestTrafficForMode();\n            },\n            multi: function (selectOrder) {\n                tts.requestTrafficForMode();\n                tov.addDetailButton('showRelatedTraffic');\n            },\n\n            mouseover: function (m) {\n                tts.requestTrafficForMode(true);\n            },\n            mouseout: function () {\n                tts.requestTrafficForMode(true);\n            },\n\n            acceptIntent: function (type) {\n                return (!type.startsWith('Protected'));\n            },\n            showIntent: function (info) {\n                $log.debug('^^ trafficOverlay.showintent() ^^', info);\n                tts.selectIntent(info);\n            },\n            injectLion: function (bundle) {\n                topoLion = bundle;\n                tts.setLionBundle(bundle);\n            },\n        },\n    };\n\n    angular.module('ovTopo')\n        .run(['$log', 'TopoOverlayService', 'TopoTrafficService',\n\n        function (_$log_, _tov_, _tts_) {\n            $log = _$log_;\n            tov = _tov_;\n            tts = _tts_;\n            tov.register(overlay);\n        }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var $scope, $log, fs, mast, ks, wss,\n        gs, sus, t2es, t2fs, t2is, t2bcs, t2kcs, t2ms, t2zs, t2ts;\n\n    var ovtopo2, svg, defs, zoomLayer, forceG;\n\n    var zoomer;\n\n\n    function setUpDefs() {\n        defs = svg.append('defs');\n        gs.loadDefs(defs);\n\n        sus.loadGlowDefs(defs);\n    }\n\n    function svgResized(s) {\n        t2fs.newDim([s.width, s.height]);\n    }\n\n\n    function zoomEnabled(ev) {\n        return fs.isMobile() || (ev.metaKey || ev.altKey);\n    }\n\n    function zoomCallback() {\n        var sc = zoomer.scale(),\n            tr = zoomer.translate(),\n            metaUi = isNaN(sc) ? {\n                useCfg: 1,\n            } : {\n                scale: sc,\n                offsetX: tr[0],\n                offsetY: tr[1],\n            };\n\n        t2ms.zoomCallback(sc, tr);\n\n\n        wss.sendEvent('updateMeta2', {\n            id: 'layoutZoom',\n            memento: metaUi,\n        });\n    }\n\n    function setUpZoom() {\n        zoomLayer = svg.append('g').attr('id', 'topo2-zoomlayer');\n\n        zoomer = t2zs.createZoomer({\n            svg: svg,\n            zoomLayer: zoomLayer,\n            zoomEnabled: zoomEnabled,\n            zoomCallback: zoomCallback,\n        });\n    }\n\n\n    angular.module('ovTopo2', ['onosUtil', 'onosSvg', 'onosRemote'])\n    .controller('OvTopo2Ctrl', [\n        '$scope', '$log', '$location',\n        'FnService', 'MastService', 'KeyService', 'GlyphService', 'MapService',\n        'SvgUtilService', 'FlashService', 'WebSocketService', 'ThemeService',\n        'Topo2EventService', 'Topo2ForceService', 'Topo2InstanceService',\n        'Topo2BreadcrumbService', 'Topo2KeyCommandService', 'Topo2MapService',\n        'Topo2ZoomService', 'Topo2SpriteLayerService',\n        'Topo2SummaryPanelService', 'Topo2DeviceDetailsPanel', 'Topo2ToolbarService',\n        'Topo2NoDevicesConnectedService', 'Topo2OverlayService', 'Topo2TrafficService',\n\n        function (\n            _$scope_, _$log_, _$loc_,\n            _fs_, _mast_, _ks_, _gs_, _ms_,\n            _sus_, _flash_, _wss_, _th_,\n            _t2es_, _t2fs_, _t2is_,\n            _t2bcs_, _t2kcs_, _t2ms_,\n            _t2zs_, t2sls,\n            summaryPanel, detailsPanel, t2tbs, t2ndcs, t2os,\n            _t2ts_\n        ) {\n            var params = _$loc_.search(),\n                dim,\n                wh,\n                uplink = {\n                    zoomLayer: function () { return zoomLayer; },\n                    zoomer: function () { return zoomer; },\n                };\n\n            $scope = _$scope_;\n            $log = _$log_;\n\n            fs = _fs_;\n            mast = _mast_;\n            ks = _ks_;\n            wss = _wss_;\n            gs = _gs_;\n            sus = _sus_;\n\n            t2es = _t2es_;\n            t2fs = _t2fs_;\n            t2is = _t2is_;\n            t2bcs = _t2bcs_;\n            t2kcs = _t2kcs_;\n            t2ms = _t2ms_;\n            t2zs = _t2zs_;\n            t2ts = _t2ts_;\n\n            if (params.intentKey &&\n                params.intentAppId &&\n                params.intentAppName) {\n\n                $scope.intentData = {\n                    key: params.intentKey,\n                    appId: params.intentAppId,\n                    appName: params.intentAppName,\n                    intentType: params.intentType,\n                };\n            }\n\n            $scope.notifyResize = function () {\n                svgResized(fs.windowSize(mast.mastHeight()));\n            };\n\n            $scope.$on('$destroy', function () {\n                $log.log('OvTopo2Ctrl is saying Buh-Bye!');\n                t2es.stop();\n                ks.unbindKeys();\n                t2fs.destroy();\n                t2is.destroy();\n                summaryPanel.destroy();\n                detailsPanel.destroy();\n            });\n\n            ovtopo2 = d3.select('#ov-topo2');\n            svg = ovtopo2.select('svg');\n            wh = fs.windowSize(mast.mastHeight());\n            $log.debug('setting topo SVG size to', wh);\n            svg.attr(wh);\n            dim = [wh.width, wh.height];\n\n            setUpZoom();\n            setUpDefs();\n\n            t2ndcs.init();\n\n            t2es.bindHandlers();\n\n            t2bcs.init();\n            t2kcs.init(t2fs, t2tbs, svg);\n            t2is.initInst({ showMastership: t2fs.showMastership });\n            t2fs.init(svg, forceG, uplink, dim, zoomer);\n\n\n            t2os.setOverlay('traffic-2-overlay');\n\n            summaryPanel.init(detailsPanel);\n            detailsPanel.init(summaryPanel);\n\n            t2es.start();\n\n            $log.log('OvTopo2Ctrl has been created');\n        }]);\n})();\n","\n\n(function () {\n\n    var $log;\n\n    var instance;\n\n    function getZoom(z, useCfg) {\n        var u = z.usr,\n            c = z.cfg;\n        return (u && !u.useCfg && !useCfg) ? u : c;\n    }\n\n    function zoomPan(z, useCfg) {\n        var zoom = getZoom(z, useCfg);\n        return [zoom.offsetX, zoom.offsetY];\n    }\n\n    function zoomScale(z, useCfg) {\n        var zoom = getZoom(z, useCfg);\n        return zoom.scale;\n    }\n\n    angular.module('ovTopo2')\n        .factory('Topo2BackgroundService', [\n            '$log', 'Topo2ViewController', 'Topo2SpriteLayerService', 'Topo2MapService',\n            'Topo2MapConfigService', 'Topo2ZoomService',\n            function (_$log_, ViewController, t2sls, t2ms, t2mcs, t2zs) {\n\n                $log = _$log_;\n\n                var BackgroundView = ViewController.extend({\n\n                    id: 'topo2-background',\n                    displayName: 'Background',\n\n                    init: function () {\n                        instance = this;\n                        this.appendElement('#topo2-zoomlayer', 'g');\n                        t2sls.init();\n                        t2ms.init();\n                        this.zoomer = t2zs.getZoomer();\n                    },\n\n                    addLayout: function (data) {\n                        this.background = data;\n                        this.bgType = data.bgType;\n                        this.bgId = data.bgId;\n                        this.zoomData = data.bgZoom;\n\n                        var _this = this,\n                            pan = zoomPan(this.zoomData),\n                            scale = zoomScale(this.zoomData);\n\n                        if (this.bgType === 'geo') {\n                            t2sls.hide();\n                            t2ms.show();\n\n                            t2ms.setUpMap(data.bgId, data.bgFilePath)\n                            .then(function (proj) {\n                                t2mcs.projection(proj);\n                                $log.debug('** We installed the projection:', proj);\n                                _this.region.loaded('bgRendered', true);\n                                t2zs.panAndZoom(pan, scale, 1000);\n                            });\n                        } else if (this.bgType === 'grid') {\n\n                            t2ms.hide();\n                            t2sls.show();\n\n                            t2sls.loadLayout(data.bgId).then(function (spriteLayout) {\n                                _this.background.layout = spriteLayout;\n                                _this.region.loaded('bgRendered', true);\n                                t2zs.panAndZoom(pan, scale, 1000);\n                            });\n                        } else {\n                            t2ms.hide();\n                            t2sls.hide();\n\n                            _this.region.loaded('bgRendered', true);\n\n                            t2zs.panAndZoom([0, 0], 1);\n                        }\n                    },\n\n                    getBackgroundType: function () {\n                        return this.bgType;\n                    },\n\n                    resetZoom: function () {\n                        var pan = zoomPan(this.zoomData, true);\n                        t2zs.panAndZoom(pan, zoomScale(this.zoomData, true), 1000);\n                    },\n                });\n\n                return instance || new BackgroundView();\n            },\n        ]);\n})();\n","/*\n * Copyright 2017-present Open Networking Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n ONOS GUI -- Topo2Badge\n A badge positioned at the top-left corner of a node\n usage: new NodeBadge({text, icon}, DOM Element, Node);\n */\n\n// TODO: Create a badge class\n","\n\n(function () {\n\n    'use strict';\n\n    var t2rns;\n\n    var breadcrumbContainer,\n        breadcrumbs;\n\n    function init() {\n        breadcrumbs = [];\n        breadcrumbContainer = d3.select('#breadcrumbs');\n\n        breadcrumbContainer\n            .append('span')\n            .text('Regions: ');\n\n        render();\n    }\n\n    function addBreadcrumb(crumbs) {\n        breadcrumbContainer.selectAll('.breadcrumb').remove();\n        breadcrumbs = crumbs.reverse();\n        render();\n    }\n\n    function navigateToRegion(data, index) {\n        if (index === breadcrumbs.length - 1) {\n            return;\n        }\n\n        breadcrumbs.splice(index + 1);\n        t2rns.navigateToRegion(data.id);\n\n        render();\n    }\n\n    function render() {\n        var selection = breadcrumbContainer.selectAll('.breadcrumb')\n            .data(breadcrumbs);\n\n        selection.enter()\n            .append('div')\n                .attr('class', 'breadcrumb')\n                .on('click', navigateToRegion)\n            .append('a')\n                .text(function (d) {\n                    return d.name;\n                });\n\n        selection.exit()\n            .transition()\n            .duration(200)\n            .style('opacity', 0)\n            .remove();\n    }\n\n    function hide() {\n        var view = d3.select('body');\n        view.classed('breadcrumb--hidden', true);\n\n        var startTranslateState = 'translate(0px,0%)',\n            endTranslateState = 'translate(0px,-100%)',\n            translateInterpolator = d3.interpolateString(startTranslateState, endTranslateState);\n\n        breadcrumbContainer\n            .transition()\n            .duration(600)\n            .style('opacity', 0)\n            .styleTween('transform', function (d) {\n                return translateInterpolator;\n            });\n    }\n\n    function addLayout(_layout_) {}\n\n    angular.module('ovTopo2')\n    .factory('Topo2BreadcrumbService', [\n        'Topo2RegionNavigationService',\n        function (_t2rns_) {\n            t2rns = _t2rns_;\n\n            return {\n                init: init,\n                addBreadcrumb: addBreadcrumb,\n                addLayout: addLayout,\n                hide: hide,\n            };\n        },\n    ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var Model;\n\n    function Collection(models, options) {\n\n        var opts = options || {};\n\n        this.models = [];\n        this._reset();\n\n        this.initialize.apply(this, arguments);\n\n        if (opts.comparator) {\n            this.comparator = opts.comparator;\n        }\n\n        if (models) {\n            this.add(models);\n        }\n    }\n\n    Collection.prototype = {\n        model: Model,\n        initialize: function () {},\n        addModel: function (data) {\n            if (Object.getPrototypeOf(data) !== Object.prototype) {\n                this.models.push(data);\n                data.collection = this;\n                this._byId[data.get('id')] = data;\n                return data;\n            }\n\n            if (this._byId[data.id]) {\n                return this._byId[data.id];\n            }\n\n            var CollectionModel = this.model;\n            var model = new CollectionModel(data, this);\n            model.collection = this;\n\n            this.models.push(model);\n            this._byId[data.id] = model;\n\n            return model;\n        },\n        add: function (data) {\n            var _this = this;\n\n            if (angular.isArray(data)) {\n                data.forEach(function (d) {\n                    _this.addModel(d);\n                });\n            } else {\n                return this.addModel(data);\n            }\n        },\n        remove: function (model) {\n            var index = _.indexOf(this.models, model);\n            this.models.splice(index, 1);\n        },\n        get: function (id) {\n\n            if (!id) {\n                return null;\n            }\n\n            return this._byId[id] || null;\n        },\n        sort: function () {\n\n            var comparator = this.comparator;\n\n            comparator = comparator.bind(this);\n            this.models.sort(comparator);\n\n            return this;\n        },\n        filter: function (comparator) {\n            return _.filter(this.models, comparator);\n        },\n        empty: function () {\n            _.map(this.models, function (m) {\n                m.remove();\n            });\n            this._reset();\n        },\n        _reset: function () {\n            this._byId = [];\n            this.models = [];\n        },\n        toJSON: function (options) {\n            return this.models.map(function (model) {\n                return model.toJSON(options);\n            });\n        },\n    };\n\n    angular.module('ovTopo2')\n        .factory('Topo2Collection',\n        ['Topo2Model', 'FnService',\n            function (_Model_, fn) {\n                Collection.extend = fn.extend;\n                Model = _Model_;\n                return Collection;\n            },\n        ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n\n\n\n    var Panel, flash;\n\n    var useDetails = true,\n        detailsPanel,\n        summaryPanel;\n\n    var id = 'topo2-p-detail',\n        className = 'topo2-p',\n        transTime = 750,\n        panelPadding = 64,\n        panelSpacing = 20,\n        panelOpts = {\n            width: 260, \n        };\n\n    function getInstance(_summaryPanel_) {\n        if (detailsPanel) {\n            return detailsPanel;\n        }\n\n        summaryPanel = _summaryPanel_;\n\n        var options = angular.extend({}, panelOpts, {\n            class: className,\n        });\n\n        Panel = Panel.extend({\n            up: function () {\n                detailsPanel.el.el()\n                    .transition()\n                    .duration(transTime)\n                    .style('top', panelPadding + 'px');\n            },\n            down: function (position, callback) {\n                detailsPanel.el.el()\n                    .transition()\n                    .duration(transTime)\n                    .style('top', position + (panelPadding + panelSpacing) + 'px')\n                    .each('end', callback);\n            },\n            show: function () {\n\n                if (!useDetails) {\n                    return;\n                }\n\n                var summaryInstance = summaryPanel.getInstance(),\n                    position = 0;\n\n                if (summaryInstance.isVisible()) {\n                    position = summaryInstance.el.bbox().height;\n                    position = position + panelSpacing;\n                }\n\n                detailsPanel.el.el()\n                    .style('top', panelPadding + position + 'px');\n                detailsPanel.el.show();\n            },\n            hide: function () {\n                detailsPanel.el.hide();\n            },\n            toggleUseDetailsFlag: function (x) {\n                var kev = (x === 'keyev'),\n                    verb;\n\n                useDetails = kev ? !useDetails : !!x;\n                verb = useDetails ? 'Enable' : 'Disable';\n\n                if (useDetails) {\n                    this.show();\n                } else {\n                    this.hide();\n                }\n\n                flash.flash(verb + ' details panel');\n                return useDetails;\n            },\n        });\n\n        detailsPanel = new Panel(id, options);\n        detailsPanel.el.classed(className, true);\n\n        return detailsPanel;\n    }\n\n\n    angular.module('ovTopo2')\n    .factory('Topo2DetailsPanelService', [\n        'Topo2PanelService', 'FlashService',\n        function (_ps_, _flash_) {\n            Panel = _ps_;\n            flash = _flash_;\n\n            return getInstance;\n        },\n    ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var Collection, Model;\n\n    var remappedDeviceTypes = {\n        switch: 'm_switch',\n        virtual: 'cord',\n    };\n\n    function createDeviceCollection(data) {\n\n        var DeviceCollection = Collection.extend({\n            model: Model,\n        });\n\n        var devices = [];\n        data.forEach(function (deviceLayer) {\n            deviceLayer.forEach(function (device) {\n                devices.push(device);\n            });\n        });\n\n        return new DeviceCollection(devices);\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2DeviceService', [\n            'Topo2Collection', 'Topo2NodeModel', 'Topo2DeviceDetailsPanel',\n            'PrefsService',\n            function (_c_, _nm_, detailsPanel, ps) {\n\n                Collection = _c_;\n\n                Model = _nm_.extend({\n\n                    nodeType: 'device',\n                    multiSelectEnabled: true,\n                    events: {\n                        'click': 'onClick',\n                    },\n\n                    initialize: function () {\n                        this.super = this.constructor.__super__;\n                        this.super.initialize.apply(this, arguments);\n                    },\n                    onChange: function () {\n                        if (this.el) {\n                            this.el.attr('class', this.svgClassName());\n                            var rect = this.el.select('.icon-rect');\n                            rect.style('fill', this.devGlyphColor());\n\n                            this.setOfflineVisibility();\n                        }\n                    },\n                    icon: function () {\n                        var type = this.get('type');\n                        return remappedDeviceTypes[type] || type || 'unknown';\n                    },\n                    showDetails: function () {\n                        var id = this.get('id'),\n                            nodeType = this.get('nodeType');\n                        detailsPanel.updateDetails(id, nodeType);\n                        detailsPanel.show();\n                    },\n                    displayMastership: function () {\n                        var id = this.mastershipService.mastership(),\n                            suppress = id ? this.get('master') !== id : false;\n\n                        this.set({ mastership: suppress });\n                    },\n                    setOfflineVisibility: function () {\n                        var showOffline = ps.getPrefs('topo2_prefs')['offline_devices'],\n                            display = this.get('online') || showOffline;\n\n                        this.el.style('visibility', display ? 'visible' : 'hidden');\n                    },\n                    onExit: function () {\n                        var node = this.el;\n                        node.select('use')\n                            .style('opacity', 0.5)\n                            .transition()\n                            .duration(800)\n                            .style('opacity', 0);\n\n                        node.selectAll('rect')\n                            .style('stroke-fill', '#555')\n                            .style('fill', '#888')\n                            .style('opacity', 0.5);\n                    },\n                });\n\n                return {\n                    createDeviceCollection: createDeviceCollection,\n                };\n            },\n        ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    var panel, gs, wss, flash, bs, fs, ns, ls;\n\n    var detailsPanel;\n\n    var id = 'topo2-p-detail',\n        devicePath = 'device',\n        handlerMap = {\n            'showDetails': showDetails,\n        };\n\n    var coreButtons = {\n        showDeviceView: {\n            gid: 'switch',\n            tt: 'Show Device View',\n            path: 'device',\n        },\n        showFlowView: {\n            gid: 'flowTable',\n            tt: 'Show Flow View for this Device',\n            path: 'flow',\n        },\n        showPortView: {\n            gid: 'portTable',\n            tt: 'Show Port View for this Device',\n            path: 'port',\n        },\n        showGroupView: {\n            gid: 'groupTable',\n            tt: 'Show Group View for this Device',\n            path: 'group',\n        },\n        showMeterView: {\n            gid: 'meterTable',\n            tt: 'Show Meter View for this Device',\n            path: 'meter',\n        },\n    };\n\n    function init(summaryPanel) {\n\n        bindHandlers();\n        detailsPanel = panel(summaryPanel);\n    }\n\n    function addBtnFooter() {\n        detailsPanel.appendToFooter('hr');\n        detailsPanel.appendToFooter('div').classed('actionBtns', true);\n    }\n\n    function addAction(o) {\n        var btnDiv = d3.select('#' + id)\n            .select('.actionBtns')\n            .append('div')\n            .classed('actionBtn', true);\n        bs.button(btnDiv, id + '-' + o.id, o.gid, o.cb, o.tt);\n    }\n\n    function installButtons(buttons, data, devId) {\n        buttons.forEach(function (id) {\n            var btn = coreButtons[id],\n                gid = btn && btn.gid,\n                tt = btn && btn.tt,\n                path = btn && btn.path;\n\n            if (btn) {\n                addAction({\n                    id: 'core-' + id,\n                    gid: gid,\n                    tt: tt,\n                    cb: function () { ns.navTo(path, { devId: devId }); },\n                });\n            }\n        });\n    }\n\n    function renderSingle(data) {\n        var endedWithSeparator;\n\n        detailsPanel.emptyRegions();\n\n        var navFn = function () {\n            ns.navTo(devicePath, { devId: data.id });\n        };\n\n        var svg = detailsPanel.appendToHeader('div')\n                .classed('icon clickable', true)\n                .append('svg'),\n            title = detailsPanel.appendToHeader('h2')\n                .on('click', navFn)\n                .classed('clickable', true),\n            table = detailsPanel.appendToBody('table'),\n            tbody = table.append('tbody');\n\n        gs.addGlyph(svg, (data.glyphId || 'm_unknown'), 26);\n        title.text(data.title);\n\n\n        endedWithSeparator = ls.listProps(tbody, data);\n        addBtnFooter();\n    }\n\n    function addProp(tbody, label, value) {\n        var tr = tbody.append('tr'),\n            lab;\n        if (typeof label === 'string') {\n            lab = label.replace(/_/g, ' ');\n        } else {\n            lab = label;\n        }\n\n        function addCell(cls, txt) {\n            tr.append('td').attr('class', cls).text(txt);\n        }\n        addCell('label', lab + ' :');\n        addCell('value', value);\n    }\n\n    function renderMulti(nodes) {\n        detailsPanel.emptyRegions();\n\n        var title = detailsPanel.appendToHeader('h3'),\n            table = detailsPanel.appendToBody('table'),\n            tbody = table.append('tbody');\n\n        title.text('Selected Items');\n        nodes.forEach(function (n, i) {\n            addProp(tbody, i + 1, n.get('id'));\n        });\n\n        show();\n    }\n\n    function bindHandlers() {\n        wss.bindHandlers(handlerMap);\n    }\n\n    function updateDetails(id, nodeType) {\n        wss.sendEvent('requestDetails', {\n            id: id,\n            class: nodeType,\n        });\n    }\n\n    function showDetails(data) {\n        var buttons = fs.isA(data.buttons) || [];\n        renderSingle(data);\n        installButtons(buttons, data, data.id);\n    }\n\n    function toggle() {\n        var on = detailsPanel.el.toggle(),\n            verb = on ? 'Show' : 'Hide';\n        flash.flash(verb + ' Details Panel');\n    }\n\n    function show() {\n        detailsPanel.show();\n    }\n\n    function hide() {\n        detailsPanel.el.hide();\n    }\n\n    function destroy() {\n        wss.unbindHandlers(handlerMap);\n        detailsPanel.destroy();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2DeviceDetailsPanel', [\n        'Topo2DetailsPanelService', 'GlyphService', 'WebSocketService', 'FlashService',\n        'ButtonService', 'FnService', 'NavService', 'ListService',\n\n        function (_ps_, _gs_, _wss_, _flash_, _bs_, _fs_, _ns_, _ls_) {\n\n            panel = _ps_;\n            gs = _gs_;\n            wss = _wss_;\n            flash = _flash_;\n            bs = _bs_;\n            fs = _fs_;\n            ns = _ns_;\n            ls = _ls_;\n\n            return {\n                init: init,\n                updateDetails: updateDetails,\n                showMulti: renderMulti,\n\n                toggle: toggle,\n                show: show,\n                hide: hide,\n                destroy: destroy,\n                isVisible: function () { return detailsPanel.isVisible(); },\n                getInstance: function () { return detailsPanel; },\n            };\n        },\n    ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var $log, wss, t2fs, t2ovs;\n\n    var handlerMap,\n        openListener;\n\n\n    function createHandlerMap() {\n        handlerMap = {\n            topo2AllInstances: t2fs,\n            topo2CurrentLayout: t2fs,\n            topo2CurrentRegion: t2fs,\n            topo2PeerRegions: t2fs,\n\n            topo2UiModelEvent: t2fs,\n            topo2Highlights: t2ovs.showHighlights,\n\n        };\n    }\n\n    function wsOpen(host, url) {\n        $log.debug('topo2Event: WSopen - cluster node:', host, 'URL:', url);\n        wss.sendEvent('topo2Start');\n    }\n\n    function bindHandlers() {\n        wss.bindHandlers(handlerMap);\n        $log.debug('topo2 event handlers bound');\n    }\n\n    function start() {\n        openListener = wss.addOpenListener(wsOpen);\n        wss.sendEvent('topo2Start');\n        $log.debug('topo2 comms started');\n    }\n\n    function stop() {\n        wss.sendEvent('topo2Stop');\n        wss.unbindHandlers(handlerMap);\n        wss.removeOpenListener(openListener);\n        openListener = null;\n        $log.debug('topo2 comms stopped');\n    }\n\n\n    angular.module('ovTopo2')\n    .factory('Topo2EventService', [\n        '$log', 'WebSocketService', 'Topo2ForceService', 'Topo2OverlayService',\n\n        function (_$log_, _wss_, _t2fs_, _t2ovs_) {\n            $log = _$log_;\n            wss = _wss_;\n            t2fs = _t2fs_;\n            t2ovs = _t2ovs_;\n\n            createHandlerMap();\n\n            return {\n                bindHandlers: bindHandlers,\n                start: start,\n                stop: stop,\n            };\n        }]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var $log, $loc, wss;\n\n    var t2is, t2rs, t2ls, t2vs, t2bcs, t2ss, t2bgs, t2tbs, t2mss;\n    var svg, uplink, dim, opts, zoomer;\n\n\n    function init(_svg_, _forceG_, _uplink_, _dim_, _zoomer_, _opts_) {\n\n        svg = _svg_;\n        uplink = _uplink_;\n        dim = _dim_;\n        zoomer = _zoomer_;\n        opts = _opts_;\n\n\n        t2bgs.init();\n        t2bgs.region = t2rs;\n        t2ls.init(svg, uplink, dim, zoomer, opts);\n        t2bcs.addLayout(t2ls);\n        t2ss.init(svg, zoomer);\n        t2ss.region = t2rs;\n        t2rs.layout = t2ls;\n        t2mss.region = t2rs;\n        t2tbs.init();\n        navToBookmarkedRegion($loc.search().regionId);\n    }\n\n    function destroy() {\n        t2tbs.destroy();\n        $log.debug('Destroy topo force layout');\n    }\n\n    function navToBookmarkedRegion(regionId) {\n        $log.debug('navToBookmarkedRegion:', regionId);\n        if (regionId) {\n            wss.sendEvent('topo2navRegion', {\n                rid: regionId,\n            });\n\n            t2ls.createForceElements();\n            t2ls.transitionDownRegion();\n        }\n    }\n\n\n    function allInstances(data) {\n        $log.debug('>> topo2AllInstances event:', data);\n        t2is.allInstances(data);\n    }\n\n    function currentLayout(data) {\n        $log.debug('>> topo2CurrentLayout event:', data);\n        t2rs.clear();\n        t2bcs.addBreadcrumb(data.crumbs);\n        t2bgs.addLayout(data);\n    }\n\n    function currentRegion(data) {\n        $log.debug('>> topo2CurrentRegion event:', data);\n        t2rs.loaded('regionData', data);\n    }\n\n    function topo2PeerRegions(data) {\n        $log.debug('>> topo2PeerRegions event:', data);\n        t2rs.loaded('peers', data.peers);\n    }\n\n    function modelEvent(data) {\n\n        t2rs.update(data);\n    }\n\n    function showMastership(masterId) {\n        if (masterId) {\n            showMastershipFor(masterId);\n        } else {\n            restoreLayerState();\n        }\n    }\n\n    function restoreLayerState() {\n        suppressLayers(false);\n    }\n\n\n    function newDim(_dim_) {\n        dim = _dim_;\n        t2vs.newDim(dim);\n    }\n\n\n    function update(elements) {\n        angular.forEach(elements, function (el) {\n            el.update();\n        });\n    }\n\n    function updateNodes() {\n        update(t2rs.regionNodes());\n    }\n\n    function updateLinks() {\n        update(t2rs.regionLinks());\n    }\n\n    function resetNodeLocation() {\n\n        var hovered = t2rs.filterRegionNodes(function (model) {\n            return model.get('hovered');\n        });\n\n        angular.forEach(hovered, function (model) {\n            model.resetPosition();\n        });\n    }\n\n    function unpin() {\n\n        var hovered = t2rs.filterRegionNodes(function (model) {\n            return model.get('hovered');\n        });\n\n        angular.forEach(hovered, function (model) {\n            model.fix(false);\n        });\n\n        t2ls.start();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2ForceService', [\n        '$log', '$location', 'WebSocketService', 'Topo2InstanceService',\n        'Topo2RegionService', 'Topo2LayoutService', 'Topo2ViewService',\n        'Topo2BreadcrumbService', 'Topo2ZoomService', 'Topo2SelectService',\n        'Topo2BackgroundService', 'Topo2ToolbarService', 'Topo2MastershipService',\n        function (_$log_, _$loc_, _wss_, _t2is_, _t2rs_, _t2ls_,\n            _t2vs_, _t2bcs_, zoomService, _t2ss_, _t2bgs_, _t2tbs_, _t2mss_) {\n\n            $log = _$log_;\n            $loc = _$loc_;\n            wss = _wss_;\n            t2is = _t2is_;\n            t2rs = _t2rs_;\n            t2ls = _t2ls_;\n            t2vs = _t2vs_;\n            t2bcs = _t2bcs_;\n            t2ss = _t2ss_;\n            t2bgs = _t2bgs_;\n            t2tbs = _t2tbs_;\n            t2mss = _t2mss_;\n\n            var onZoom = function () {\n                if (!t2rs.isLoadComplete()) {\n                    return;\n                }\n\n                var nodes = [].concat(\n                        t2rs.regionNodes(),\n                        t2rs.regionLinks()\n                    );\n\n                angular.forEach(nodes, function (node) {\n                    node.setScale();\n                });\n            };\n\n            zoomService.addZoomEventListener(onZoom);\n\n            return {\n\n                init: init,\n                newDim: newDim,\n\n                destroy: destroy,\n                topo2AllInstances: allInstances,\n                topo2CurrentLayout: currentLayout,\n                topo2CurrentRegion: currentRegion,\n\n                topo2UiModelEvent: modelEvent,\n\n                showMastership: showMastership,\n                topo2PeerRegions: topo2PeerRegions,\n\n                updateNodes: updateNodes,\n                updateLinks: updateLinks,\n                resetNodeLocation: resetNodeLocation,\n                unpin: unpin,\n            };\n        }]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var Collection, Model;\n\n    var hostIconDim = 15,\n        hostIconDimMin = 8,\n        hostIconDimMax = 15,\n        labelPadding = 20,\n        remappedDeviceTypes = {};\n\n    function createHostCollection(data, region) {\n\n        var HostCollection = Collection.extend({\n            model: Model,\n        });\n\n        var hosts = [];\n        data.forEach(function (hostsLayer) {\n            hostsLayer.forEach(function (host) {\n                hosts.push(host);\n            });\n        });\n\n        return new HostCollection(hosts);\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2HostService', [\n        'Topo2Collection', 'Topo2NodeModel', 'Topo2ViewService',\n        'IconService', 'Topo2ZoomService', 'Topo2HostsPanelService', 'PrefsService',\n        'Topo2PrefsService',\n        function (_c_, NodeModel, _t2vs_, is, zs, t2hds, ps, t2ps) {\n\n            Collection = _c_;\n\n            Model = NodeModel.extend({\n\n                nodeType: 'host',\n                events: {\n                    'click': 'onClick',\n                },\n                initialize: function () {\n                    this.super = this.constructor.__super__;\n                    this.super.initialize.apply(this, arguments);\n                },\n                onChange: function () {\n                    if (this.el) {\n                        this.el.attr('class', this.svgClassName());\n                    }\n                },\n                showDetails: function () {\n                    t2hds.displayPanel(this);\n                },\n                icon: function () {\n                    var type = this.get('type');\n                    return remappedDeviceTypes[type] || type || 'm_endstation';\n                },\n                title: function () {\n                    var props = this.get('props');\n                    return props.name || this.get('ips')[0] || 'unknown';\n                },\n                labelIndex: function () {\n                    return t2ps.get('hlbls');\n                },\n                label: function () {\n                    var props = this.get('props'),\n                        id = this.get('ips')[0] || 'unknown',\n                        friendlyName = props && props.name ? props.name : id,\n                        labels = ['', friendlyName || id, id, this.get('id')],\n                        nli = this.labelIndex(),\n                        idx = (nli < labels.length) ? nli : 0;\n\n                    return labels[idx];\n                },\n                updateLabel: function () {\n                    var node = this.el,\n                        label = this.trimLabel(this.label()),\n                        labelWidth;\n\n                    node.select('text').text(label);\n                    labelWidth = !_.isEmpty(this.label()) ? this.computeLabelWidth(node) + (labelPadding * 2) : 0;\n\n                    node.select('rect')\n                        .transition()\n                        .attr({\n                            width: labelWidth,\n                        });\n                },\n                setScale: function () {\n\n                    if (!this.el) return;\n\n                    var dim = hostIconDim,\n                        multipler = 1;\n\n                    if (dim * zs.scale() < hostIconDimMin) {\n                        multipler = hostIconDimMin / (dim * zs.scale());\n                    } else if (dim * zs.scale() > hostIconDimMax) {\n                        multipler = hostIconDimMax / (dim * zs.scale());\n                    }\n\n                    this.el.select('g').selectAll('*')\n                        .style('transform', 'scale(' + multipler + ')');\n                },\n                setVisibility: function () {\n                    var visible = ps.getPrefs('topo2_prefs')['hosts'];\n                    this.el.style('visibility', visible ? 'visible' : 'hidden');\n                },\n                onEnter: function (el) {\n                    var node = d3.select(el),\n                        icon = this.icon(),\n                        textDy = 5,\n                        textDx = (hostIconDim * 2);\n\n                    this.el = node;\n\n                    var g = node.append('g')\n                        .attr('class', 'svgIcon hostIcon');\n\n\n                    var rect = g.append('rect').attr({\n                        width: 0,\n                        height: hostIconDim * 2,\n                        y: - hostIconDim,\n                    });\n\n                    g.append('circle').attr('r', hostIconDim);\n\n                    var glyphSize = hostIconDim * 1.5;\n                    g.append('use').attr({\n                        'xlink:href': '#' + icon,\n                        width: glyphSize,\n                        height: glyphSize,\n                        x: -glyphSize / 2,\n                        y: -glyphSize / 2,\n                    });\n\n                    var labelText = this.label();\n\n                    g.append('text')\n                        .text(labelText)\n                        .attr('dy', textDy)\n                        .attr('dx', textDx)\n                        .attr('text-anchor', 'left');\n\n                    this.setScale();\n                    this.setUpEvents();\n                    this.setVisibility();\n\n                    var labelWidth = !_.isEmpty(this.label()) ? this.computeLabelWidth(node) + (labelPadding * 2) : 0;\n                    rect.attr({ width: labelWidth });\n                },\n            });\n\n            return {\n                createHostCollection: createHostCollection,\n            };\n        },\n    ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    var panel, gs, flash, ls, ns;\n\n    var hostPath = 'host',\n        hostPanel, hostData;\n\n    function init() {\n        hostPanel = panel();\n    }\n\n    function formatHostData(data) {\n        var format = {\n            title: data.title(),\n            propOrder: ['MAC', 'IP', 'VLAN', 'Configured'],\n            propLabels: {\n                'MAC': 'MAC',\n                'Configured': 'Configured',\n                'IP': 'IP',\n                'VLAN': 'VLAN',\n            },\n            propValues: {\n                '-': '',\n                'MAC': data.get('id'),\n                'IP': data.get('ips')[0],\n                'VLAN': 'None', \n                'Configured': data.get('configured'),\n            },\n        };\n\n        if (data.get('location')) {\n            format.propOrder.push('-', 'Latitude', 'Longitude');\n            format.props['Latitude'] = data.get('location').lat;\n            format.props['Longitude'] = data.get('location').lng;\n        }\n\n        return format;\n    }\n\n    function displayPanel(data) {\n        init();\n\n        hostData = formatHostData(data);\n        render();\n    }\n\n    function render() {\n        hostPanel.show();\n        hostPanel.emptyRegions();\n\n        var navFn = function () {\n            ns.navTo(hostPath, { hostId: hostData.title });\n        };\n\n        var svg = hostPanel.appendToHeader('div')\n                .classed('icon', true)\n                .append('svg'),\n            title = hostPanel.appendToHeader('h2')\n                .on('click', navFn)\n                .classed('clickable', true),\n            table = hostPanel.appendToBody('table'),\n            tbody = table.append('tbody');\n\n        title.text(hostData.title);\n        gs.addGlyph(svg, 'bird', 24, 0, [1, 1]);\n        ls.listProps(tbody, hostData);\n    }\n\n    function show() {\n        hostPanel.show();\n    }\n\n    function hide() {\n        hostPanel.el.hide();\n    }\n\n    function toggle() {\n        var on = hostPanel.el.toggle(),\n            verb = on ? 'Show' : 'Hide';\n        flash.flash(verb + ' host Panel');\n    }\n\n    function destroy() {\n        hostPanel.destroy();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2HostsPanelService', [\n        'Topo2DetailsPanelService', 'GlyphService', 'FlashService', 'ListService',\n        'NavService',\n        function (_ps_, _gs_, _flash_, _ls_, _ns_) {\n\n            panel = _ps_;\n            gs = _gs_;\n            flash = _flash_;\n            ls = _ls_;\n            ns = _ns_;\n\n            return {\n                displayPanel: displayPanel,\n                init: init,\n                show: show,\n                hide: hide,\n                toggle: toggle,\n                destroy: destroy,\n                isVisible: function () { return hostPanel.isVisible(); },\n            };\n        },\n    ]);\n\n})();\n","(function () {\n    'use strict';\n\n    var $log, ps, sus, gs, flash, ts, t2mss;\n\n    var showLogicErrors = true,\n        idIns = 'topo2-p-instance',\n        instOpts = {\n            edge: 'left',\n            width: 20,\n        };\n\n    var onosInstances,\n        onosOrder,\n        oiBox;\n\n    function addInstance(data) {\n        var id = data.id;\n\n        if (onosInstances[id]) {\n            updateInstance(data);\n            return;\n        }\n        onosInstances[id] = data;\n        onosOrder.push(data);\n        updateInstances();\n    }\n\n    function updateInstance(data) {\n        var id = data.id,\n            d = onosInstances[id];\n        if (d) {\n            angular.extend(d, data);\n            updateInstances();\n        } else {\n            logicError('updateInstance: lookup fail: ID = \"' + id + '\"');\n        }\n    }\n\n\n    function clickInst(d) {\n        var el = d3.select(this),\n            aff = el.classed('affinity');\n        if (aff) {\n            cancelAffinity();\n        } else {\n            setAffinity(el, d);\n        }\n    }\n\n    function setAffinity(el, d) {\n        d3.selectAll('.onosInst')\n            .classed('mastership', true)\n            .classed('affinity', false);\n        el.classed('affinity', true);\n\n        t2mss.setMastership(d.id);\n    }\n\n    function cancelAffinity() {\n        d3.selectAll('.onosInst')\n            .classed('mastership affinity', false);\n\n        t2mss.setMastership(null);\n    }\n\n    function attachUiBadge(svg) {\n        gs.addGlyph(svg, 'uiAttached', 24, true, [14, 54])\n            .classed('badgeIcon uiBadge', true);\n    }\n\n    function attachReadyBadge(svg) {\n        gs.addGlyph(svg, 'checkMark', 16, true, [18, 40])\n            .classed('badgeIcon readyBadge', true);\n    }\n\n    function instColor(id, online) {\n        return sus.cat7().getColor(id, !online, ts.theme());\n    }\n\n\n    function updateInstances() {\n        var rox = 5,\n            roy = 5,\n            rw = 160,\n            rhh = 30,\n            rbh = 45,\n            tx = 48,\n            instSvg = {\n                width: 170,\n                height: 85,\n                viewBox: '0 0 170 85',\n            },\n            headRect = {\n                x: rox,\n                y: roy,\n                width: rw,\n                height: rhh,\n            },\n            bodyRect = {\n                x: rox,\n                y: roy + rhh,\n                width: rw,\n                height: rbh,\n            },\n            titleAttr = {\n                class: 'instTitle',\n                x: tx,\n                y: 27,\n            };\n\n        var onoses = oiBox.el().selectAll('.onosInst')\n                .data(onosOrder, function (d) { return d.id; });\n\n        function nSw(n) {\n            return 'Devices: ' + n;\n        }\n\n        onoses.each(function (d) {\n            var el = d3.select(this),\n                svg = el.select('svg');\n\n            el.classed('online', d.online);\n            el.classed('ready', d.ready);\n\n            svg.select('use.uiBadge').remove();\n            if (d.uiAttached) {\n                attachUiBadge(svg);\n            }\n\n            function updAttr(id, value) {\n                svg.select('text.instLabel.' + id).text(value);\n            }\n\n            updAttr('ip', d.ip);\n            updAttr('ns', nSw(d.switches));\n        });\n\n        var entering = onoses.enter()\n            .append('div')\n            .classed('onosInst', true)\n            .classed('online', function (d) { return d.online; })\n            .classed('ready', function (d) { return d.ready; })\n            .on('click', clickInst);\n\n        entering.each(function (d) {\n            var el = d3.select(this),\n                svg = el.append('svg').attr(instSvg);\n\n            svg.append('rect').attr(headRect);\n            svg.append('rect').attr(bodyRect);\n\n            gs.addGlyph(svg, 'bird', 20, false, [15, 10])\n                .classed('badgeIcon bird', true);\n\n            attachReadyBadge(svg);\n\n            if (d.uiAttached) {\n                attachUiBadge(svg);\n            }\n\n            svg.append('text')\n                .attr(titleAttr)\n                .text(d.id);\n\n            var ty = 55;\n            function addAttr(id, label) {\n                svg.append('text').attr({\n                    class: 'instLabel ' + id,\n                    x: tx,\n                    y: ty,\n                }).text(label);\n                ty += 18;\n            }\n\n            addAttr('ip', d.ip);\n            addAttr('ns', nSw(d.switches));\n        });\n\n        onoses.each(function (d) {\n\n            var el = d3.select(this),\n                rect = el.select('svg').select('rect'),\n                col = instColor(d.id, d.online);\n\n            rect.style('fill', col);\n        });\n\n        oiBox.width(instSvg.width * onosOrder.length);\n        oiBox.height(instSvg.height);\n\n        onoses.exit().remove();\n    }\n\n    function logicError(msg) {\n        if (showLogicErrors) {\n            $log.warn('Topo2InstService: ' + msg);\n        }\n    }\n\n    function initInst() {\n        oiBox = ps.createPanel(idIns, instOpts);\n        oiBox.show();\n\n        onosInstances = {};\n        onosOrder = [];\n\n        ts.addListener(updateInstances);\n    }\n\n    function allInstances(data) {\n        $log.debug('Update all instances', data);\n\n        var members = data.members;\n\n        members.forEach(function (member) {\n            addInstance(member);\n        });\n    }\n\n    function toggle(x) {\n        var kev = (x === 'keyev'),\n            on,\n            verb;\n\n        if (kev) {\n            on = oiBox.toggle();\n        } else {\n            on = Boolean(x);\n            if (on) {\n                oiBox.show();\n            } else {\n                oiBox.hide();\n            }\n        }\n        verb = on ? 'Show' : 'Hide';\n        flash.flash(verb + ' instances panel');\n        return on;\n    }\n\n    function destroy() {\n        ts.removeListener(updateInstances);\n\n        ps.destroyPanel(idIns);\n        oiBox = null;\n\n        onosInstances = {};\n        onosOrder = [];\n    }\n\n    angular.module('ovTopo2')\n        .factory('Topo2InstanceService', [\n            '$log', 'PanelService', 'SvgUtilService', 'GlyphService',\n            'FlashService', 'ThemeService', 'Topo2MastershipService',\n\n            function (_$log_, _ps_, _sus_, _gs_, _flash_, _ts_, _t2mss_) {\n                $log = _$log_;\n                ps = _ps_;\n                sus = _sus_;\n                gs = _gs_;\n                flash = _flash_;\n                ts = _ts_;\n                t2mss = _t2mss_;\n\n                return {\n                    initInst: initInst,\n                    allInstances: allInstances,\n                    destroy: destroy,\n                    toggle: toggle,\n                    isVisible: function () { return oiBox.isVisible(); },\n                };\n            },\n        ]);\n\n})();\n","\n(function () {\n\n    var $log, fs, ks, flash, wss, t2ps, t2bgs, ps, t2is, t2sp, t2vs, t2rs,\n        t2fs, t2tbs, t2dp, svg, sus;\n\n    function actionMap() {\n        return {\n            L: [cycleDeviceLabels, 'Cycle device labels'],\n            B: [toggleBackground, 'Toggle background'],\n            D: [toggleDetails, 'Toggle details panel'],\n            I: [toggleInstancePanel, 'Toggle ONOS Instance Panel'],\n            O: [toggleSummary, 'Toggle the Summary Panel'],\n            R: [resetZoom, 'Reset pan / zoom'],\n            P: [togglePorts, 'Toggle Port Highlighting'],\n            E: [equalizeMasters, 'Equalize mastership roles'],\n            X: [resetNodeLocation, 'Reset Node Location'],\n            U: [unpinNode, 'Unpin node (mouse over)'],\n            H: [toggleHosts, 'Toggle host visibility'],\n            M: [toggleOfflineDevices, 'Toggle offline visibility'],\n            dot: [toggleToolbar, 'Toggle Toolbar'],\n            'shift-L': [cycleHostLabels, 'Cycle host labels'],\n\n            9: function () { sus.cat7().testCard(svg); },\n\n            esc: handleEscape,\n\n            F1: function () { t2tbs.fnKey(0); },\n            F2: function () { t2tbs.fnKey(1); },\n            F3: function () { t2tbs.fnKey(2); },\n            F4: function () { t2tbs.fnKey(3); },\n            F5: function () { t2tbs.fnKey(4); },\n\n            _keyListener: t2tbs.keyListener.bind(t2tbs),\n\n            _helpFormat: [\n                ['I', 'O', 'D', 'H', 'M', 'P', 'dash', 'B'],\n                ['X', 'Z', 'N', 'L', 'shift-L', 'U', 'R', 'E', 'dot'],\n                [], \n            ],\n        };\n    }\n\n    function init(_t2fs_, _t2tbs_, _svg_) {\n        t2fs = _t2fs_;\n        t2tbs = _t2tbs_;\n        svg = _svg_;\n        bindCommands();\n    }\n\n    function bindCommands(additional) {\n\n        var am = actionMap(),\n            add = fs.isO(additional);\n\n        if (add) {\n            _.each(add, function (value, key) {\n                if (!(_.startsWith(key, '_'))) {\n                    if (am[key]) {\n                        $log.warn('keybind: ' + key + ' already exists');\n                    } else {\n                        am[key] = [value.cb, value.tt];\n                    }\n                }\n            });\n        }\n\n        ks.keyBindings(am);\n\n        ks.gestureNotes([\n            ['click', 'Select the item and show details'],\n            ['shift-click', 'Toggle selection state'],\n            ['drag', 'Reposition (and pin) device / host'],\n            ['cmd-scroll', 'Zoom in / out'],\n            ['cmd-drag', 'Pan'],\n        ]);\n    }\n\n    function handleEscape() {\n\n        if (false) {\n\n        } else if (t2rs.deselectAllNodes()) {\n        } else if (t2rs.deselectLink()) {\n        } else if (t2is.isVisible()) {\n            t2is.toggle();\n        } else if (t2sp.isVisible()) {\n            t2sp.toggle();\n        }\n    }\n\n    var prefsState = {};\n\n    function updatePrefsState(what, b) {\n        prefsState[what] = b ? 1 : 0;\n        ps.setPrefs('topo2_prefs', prefsState);\n    }\n\n    function deviceLabelFlashMessage(index) {\n        switch (index) {\n            case 0: return 'Hide device labels';\n            case 1: return 'Show friendly device labels';\n            case 2: return 'Show device ID labels';\n        }\n    }\n\n    function hostLabelFlashMessage(index) {\n        switch (index) {\n            case 0: return 'Hide host labels';\n            case 1: return 'Show friendly host labels';\n            case 2: return 'Show host IP labels';\n            case 3: return 'Show host MAC Address labels';\n        }\n    }\n\n    function cycleDeviceLabels() {\n        var deviceLabelIndex = t2ps.get('dlbls') + 1,\n            newDeviceLabelIndex = deviceLabelIndex % 3;\n\n        t2ps.set('dlbls', newDeviceLabelIndex);\n        t2fs.updateNodes();\n        flash.flash(deviceLabelFlashMessage(newDeviceLabelIndex));\n    }\n\n    function cycleHostLabels() {\n        var hostLabelIndex = t2ps.get('hlbls') + 1,\n            newHostLabelIndex = hostLabelIndex % 4;\n\n        t2ps.set('hlbls', newHostLabelIndex);\n        t2fs.updateNodes();\n        flash.flash(hostLabelFlashMessage(newHostLabelIndex));\n    }\n\n    function toggleBackground(x) {\n        t2bgs.toggle(x);\n    }\n\n    function toggleDetails(x) {\n        t2dp().toggleUseDetailsFlag(x);\n    }\n\n    function toggleInstancePanel(x) {\n        updatePrefsState('insts', t2is.toggle(x));\n    }\n\n    function toggleSummary() {\n        t2sp.toggle();\n    }\n\n    function resetZoom() {\n        t2bgs.resetZoom();\n        flash.flash('Pan and zoom reset');\n    }\n\n    function togglePorts(x) {\n        updatePrefsState('porthl', t2vs.togglePortHighlights(x));\n        t2fs.updateLinks();\n    }\n\n    function equalizeMasters() {\n        wss.sendEvent('equalizeMasters');\n        flash.flash('Equalizing master roles');\n    }\n\n    function resetNodeLocation() {\n        t2fs.resetNodeLocation();\n        flash.flash('Reset node locations');\n    }\n\n    function unpinNode() {\n        t2fs.unpin();\n        flash.flash('Unpin node');\n    }\n\n    function toggleToolbar() {\n        t2tbs.toggle();\n    }\n\n    function actionedFlashed(action, message) {\n        flash.flash(action + ' ' + message);\n    }\n\n    function toggleHosts() {\n        var on = t2rs.toggleHosts();\n        actionedFlashed(on ? 'Show': 'Hide', 'Hosts');\n    }\n\n    function toggleOfflineDevices() {\n        var on = t2rs.toggleOfflineDevices();\n        actionedFlashed(on ? 'Show': 'Hide', 'offline devices');\n    }\n\n    function notValid(what) {\n        $log.warn('topo.js getActionEntry(): Not a valid ' + what);\n    }\n\n    function getActionEntry(key) {\n        var entry;\n\n        if (!key) {\n            notValid('key');\n            return null;\n        }\n\n        entry = actionMap()[key];\n\n        if (!entry) {\n            notValid('actionMap (' + key + ') entry');\n            return null;\n        }\n        return fs.isA(entry) || [entry, ''];\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2KeyCommandService', [\n        '$log', 'FnService', 'KeyService', 'FlashService', 'WebSocketService',\n        'Topo2PrefsService', 'Topo2BackgroundService', 'PrefsService',\n        'Topo2InstanceService', 'Topo2SummaryPanelService', 'Topo2ViewService',\n        'Topo2RegionService', 'Topo2DetailsPanelService', 'SvgUtilService',\n\n        function (_$log_, _fs_, _ks_, _flash_, _wss_, _t2ps_, _t2bgs_, _ps_,\n                  _t2is_, _t2sp_, _t2vs_, _t2rs_, _t2dp_, _t2tbs_, _sus_) {\n\n            $log = _$log_;\n            fs = _fs_;\n            ks = _ks_;\n            flash = _flash_;\n            wss = _wss_;\n            t2ps = _t2ps_;\n            t2bgs = _t2bgs_;\n            t2is = _t2is_;\n            ps = _ps_;\n            t2sp = _t2sp_;\n            t2vs = _t2vs_;\n            t2rs = _t2rs_;\n            t2dp = _t2dp_;\n            sus = _sus_;\n\n            return {\n                init: init,\n                bindCommands: bindCommands,\n                getActionEntry: getActionEntry,\n            };\n        },\n    ]);\n})();\n","\n\n(function () {\n\n    var defaultStyles = {\n        label: {\n            text: {\n                fill: '#000000',\n            },\n            rect: {\n                fill: '#ffffff',\n            },\n        },\n        icon: {\n            glyph: {\n                fill: '#000000',\n            },\n            rect: {\n                fill: '#ffffff',\n            },\n        },\n    };\n\n    angular.module('ovTopo2')\n        .factory('Topo2Label', [\n            'Topo2Model', 'SvgUtilService', 'IconService', 'Topo2ZoomService',\n            function (Model, sus, is, t2zs) {\n                return Model.extend({\n                    className: 'topo2-label',\n                    _iconG: {},\n                    _labelG: {},\n\n                    initialize: function (data, node) {\n                        this.parent = node;\n                        t2zs.addZoomEventListener(this.setScale.bind(this));\n                        this.beforeRender();\n                        this.render();\n                        this.afterRender();\n                    },\n                    onChange: function (property) {\n                        if (property === 'x' || property === 'y') {\n                            this._position();\n                        }\n\n                        if (property === 'label') {\n                            var width = this._labelG.text.node().getBBox().width + 20,\n                                height = this._labelG.text.node().getBBox().height + 10;\n\n                            this._labelG.text.text(this.get('label'));\n                            this._labelG.rect.attr({\n                                width: width,\n                                height: height,\n                            }).style({\n                                transform: sus.translate(-(width/2) + 'px', -(height/2) + 'px'),\n                            });\n                        }\n                    },\n\n                    setPosition: function () {},\n                    setScale: function () {},\n\n                    applyStyles: function () {\n                        var styles = _.extend({}, defaultStyles, this.get('styles') || {});\n\n                        if (this.get('label')) {\n                            this._labelG.text.style(styles.label.text);\n                            this._labelG.rect.style(styles.label.rect);\n                        }\n\n                        if (this.get('icon')) {\n                            this._iconG.glyph.style(styles.icon.glyph);\n                            this._iconG.rect.style(styles.icon.rect);\n                        }\n                    },\n                    _position: function () {\n                        this.el.style('transform', sus.translate(this.get('x') + 'px',\n                            this.get('y') + 'px'));\n                    },\n                    renderText: function () {\n                        this._labelG.el = this.content.append('g')\n                            .attr('class', 'label-group');\n\n                        this._labelG.rect = this._labelG.el.append('rect');\n                        this._labelG.text = this._labelG.el.append('text')\n                            .text(this.get('label'))\n                            .attr('y', '0.4em')\n                            .style('text-anchor', 'middle');\n\n                        this._labelG.rect.attr({\n                            width: this._labelG.text.node().getBBox().width + 20,\n                            height: this._labelG.text.node().getBBox().height + 10,\n                        }).style({\n                            transform: sus.translate('-50%', '-50%'),\n                        });\n                    },\n                    renderIcon: function () {\n                        var bbox = this._labelG.el.node().getBBox();\n                        this.iconSize = bbox.height;\n\n                        this._iconG.el = this.content.append('g')\n                            .attr('class', 'icon-group');\n\n                        this._iconG.rect = this._iconG.el.append('rect')\n                            .attr({\n                                width: this.iconSize,\n                                height: this.iconSize,\n                            });\n\n                        this._iconG.glyph = is.addDeviceIcon(this._iconG.el,\n                            this.get('icon'), this.iconSize);\n\n\n                        var iconX = (-bbox.width / 2) - this.iconSize + 'px',\n                            iconY = -this.iconSize /2 + 'px';\n                        this._iconG.el.style({\n                            transform: sus.translate(iconX, iconY),\n                        });\n                    },\n                    beforeRender: function () {},\n                    render: function () {\n                        this.el = this.parent.append('g')\n                            .attr('class', 'topo2-label')\n                            .style({\n                                transform: 'translate(300px, 300px)',\n                            });\n\n                        this.content = this.el.append('g')\n                            .attr('class', 'topo2-label__content');\n\n                        this.renderText();\n\n                        if (this.get('icon')) {\n                            this.renderIcon();\n                        }\n\n                        this.applyStyles();\n                        this.setPosition();\n                        this.setScale();\n                    },\n                    afterRender: function () {},\n                    remove: function () {\n                        this.el.remove();\n                    },\n                });\n            },\n        ]);\n})();\n","\n\n(function () {\n\n    var instance;\n\n    angular.module('ovTopo2')\n        .factory('Topo2LabelCollection', [\n            'Topo2Collection',\n            function (Collection) {\n\n                var LabelCollection = Collection.extend({\n                    initialize: function () {\n                        instance = this;\n                    },\n                    addLabel: function (Model, label, targetNode, options) {\n                        if (this._byId[label.id]) {\n                            this.get(label.id).set(label);\n                        } else {\n                            var lab = new Model(label, targetNode, options);\n                            this.add(lab);\n                        }\n                    },\n                });\n\n                return instance || new LabelCollection();\n            },\n        ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var instance,\n        updateTimer;\n\n    var defaultSettings = {\n        gravity: 0.4,\n        friction: 0.7,\n        charge: {\n            device: -8000,\n            host: -20000,\n            region: -8000,\n            _def_: -12000,\n        },\n        linkDistance: {\n            direct: 100,\n            optical: 120,\n            UiEdgeLink: 100,\n            _def_: 50,\n        },\n        linkStrength: {\n            _def_: 1.0,\n        },\n    };\n\n    var linkConfig = {\n        light: {\n            baseColor: '#939598',\n            inColor: '#66f',\n            outColor: '#f00',\n        },\n        dark: {\n            baseColor: '#939598',\n            inColor: '#66f',\n            outColor: '#f00',\n        },\n        inWidth: 12,\n        outWidth: 10,\n    };\n\n    var nodeLock = false; \n\n    function clickEnabled() {\n        return true;\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2LayoutService',\n        [\n            '$log', '$timeout', 'WebSocketService', 'SvgUtilService', 'Topo2RegionService',\n            'Topo2ViewService', 'Topo2SelectService', 'Topo2ZoomService',\n            'Topo2ViewController', 'Topo2RegionNavigationService',\n            function ($log, $timeout, wss, sus, t2rs, t2vs, t2ss, t2zs,\n                      ViewController, t2rns) {\n\n                var Layout = ViewController.extend({\n                    init: function (svg, forceG, uplink, dim, zoomer, opts) {\n                        instance = this;\n\n                        var navToRegion = this.navigateToRegionHandler.bind(this);\n                        t2rns.addListener('region:navigation-start', navToRegion);\n\n                        this.svg = svg;\n\n                        this.createForceElements();\n\n                        this.dim = dim;\n                        this.zoomer = zoomer;\n\n                        this.settings = angular.extend({}, defaultSettings, opts);\n\n                        this.link = this.elements.linkG.selectAll('.link');\n                        this.elements.linkLabelG.selectAll('.linkLabel');\n                        this.node = this.elements.nodeG.selectAll('.node');\n                    },\n                    createForceElements: function () {\n\n                        this.prevForce = this.forceG;\n\n                        this.forceG = d3.select('#topo2-zoomlayer')\n                            .append('g').attr('class', 'topo2-force');\n\n                        this.elements = {\n                            linkG: this.addElement(this.forceG, 'topo2-links'),\n                            linkLabelG: this.addElement(this.forceG, 'topo2-linkLabels'),\n                            numLinksLabels: this.addElement(this.forceG, 'topo2-numLinkLabels'),\n                            nodeG: this.addElement(this.forceG, 'topo2-nodes'),\n                            portLabels: this.addElement(this.forceG, 'topo2-portLabels'),\n                        };\n                    },\n                    addElement: function (parent, className) {\n                        return parent.append('g').attr('class', className);\n                    },\n                    settingOrDefault: function (settingName, node) {\n                        var nodeType = node.get('nodeType');\n                        return this.settings[settingName][nodeType] || this.settings[settingName]._def_;\n                    },\n                    createForceLayout: function () {\n\n                        this.force = d3.layout.force()\n                            .size(t2vs.getDimensions())\n                            .gravity(this.settings.gravity)\n                            .friction(this.settings.friction)\n                            .charge(this.settingOrDefault.bind(this, 'charge'))\n                            .linkDistance(this.settingOrDefault.bind(this, 'linkDistance'))\n                            .linkStrength(this.settingOrDefault.bind(this, 'linkStrength'))\n                            .nodes([])\n                            .links([])\n                            .on('tick', this.tick.bind(this))\n                            .start();\n\n                        this.drag = sus.createDragBehavior(this.force,\n                            function () {}, \n                            this.atDragEnd,\n                            this.dragEnabled.bind(this),\n                            clickEnabled,\n                            t2zs\n                        );\n\n                        this.update();\n                    },\n                    centerLayout: function () {\n                        d3.select('#topo2-zoomlayer').attr('data-layout', t2rs.model.get('id'));\n\n                        var zoomer = d3.select('#topo2-zoomlayer').node().getBBox(),\n                            layoutBBox = this.forceG.node().getBBox(),\n                            scale = (zoomer.height - 150) / layoutBBox.height,\n                            x = (zoomer.width / 2) - ((layoutBBox.x + layoutBBox.width / 2) * scale),\n                            y = (zoomer.height / 2) - ((layoutBBox.y + layoutBBox.height / 2) * scale);\n\n                        t2zs.panAndZoom([x, y], scale, 1000);\n                    },\n                    setLinkPosition: function (link) {\n                        link.setPosition.bind(link)();\n                    },\n                    tick: function () {\n\n                        this.node\n                            .attr({\n                                transform: function (d) {\n                                    var dx = isNaN(d.x) ? 0 : d.x,\n                                        dy = isNaN(d.y) ? 0 : d.y;\n                                    return sus.translate(dx, dy);\n                                },\n                            });\n\n                        this.link\n                            .each(this.setLinkPosition)\n                            .attr('x1', function (d) { return d.get('position').x1; })\n                            .attr('y1', function (d) { return d.get('position').y1; })\n                            .attr('x2', function (d) { return d.get('position').x2; })\n                            .attr('y2', function (d) { return d.get('position').y2; });\n                    },\n\n                    start: function () {\n                        this.force.start();\n                    },\n                    update: function () {\n\n                        if (updateTimer) {\n                            $timeout.cancel(updateTimer);\n                        }\n                        updateTimer = $timeout(this._update.bind(this), 150);\n                    },\n                    _update: function () {\n                        this.updateNodes();\n                        this.updateLinks();\n                        this.force.start();\n                    },\n                    updateNodes: function () {\n                        var regionNodes = t2rs.regionNodes();\n\n                        this.node = this.elements.nodeG.selectAll('.node')\n                            .data(regionNodes, function (d) { return d.get('id'); });\n\n                        var entering = this.node.enter()\n                            .append('g')\n                            .attr({\n                                id: function (d) { return sus.safeId(d.get('id')); },\n                                class: function (d) { return d.svgClassName(); },\n                                transform: function (d) {\n                                    return sus.translate(d.node.x, d.node.y);\n                                },\n                                opacity: 0,\n                            })\n                            .call(this.drag)\n                            .transition()\n                            .attr('opacity', 1);\n\n                        entering.each(function (d) { d.onEnter(this, d); });\n\n                        this.force.nodes(regionNodes);\n                    },\n                    updateLinks: function () {\n\n                        var regionLinks = t2rs.regionLinks();\n\n                        this.link = this.elements.linkG.selectAll('.link')\n                            .data(regionLinks, function (d) { return d.get('id'); });\n\n                        var entering = this.link.enter()\n                            .append('line')\n                            .call(this.calcPosition)\n                            .attr({\n                                x1: function (d) { return d.get('position').x1; },\n                                y1: function (d) { return d.get('position').y1; },\n                                x2: function (d) { return d.get('position').x2; },\n                                y2: function (d) { return d.get('position').y2; },\n                                stroke: linkConfig.light.inColor,\n                                'stroke-width': linkConfig.inWidth,\n                            });\n\n                        entering.each(function (d) { d.onEnter(this, d); });\n\n                        this.link.exit()\n                            .attr('stroke-dasharray', '3 3')\n                            .style('opacity', 0.5)\n                            .transition()\n                            .duration(1500)\n                            .attr({\n                                'stroke-dasharray': '3 12',\n                            })\n                            .style('opacity', 0.0)\n                            .remove();\n\n                        this.force.links(regionLinks);\n                    },\n                    calcPosition: function () {\n                        var lines = this;\n                        lines.each(function (d) {\n                            d.setPosition.bind(d)();\n                        });\n                    },\n                    sendUpdateMeta: function (d, clearPos) {\n                        var metaUi = {},\n                            ll;\n\n                        if (!clearPos) {\n                            ll = d.lngLatFromCoord([d.x, d.y]);\n                            metaUi = {\n                                x: d.x,\n                                y: d.y,\n                                equivLoc: {\n                                    lng: ll[0],\n                                    lat: ll[1],\n                                },\n                            };\n                        }\n                        d.metaUi = metaUi;\n                        wss.sendEvent('updateMeta2', {\n                            id: d.get('id'),\n                            class: d.get('class'),\n                            memento: metaUi,\n                        });\n                    },\n                    setDimensions: function () {\n                        if (this.force) {\n                            this.force.size(t2vs.getDimensions());\n                        }\n                    },\n                    dragEnabled: function () {\n                        var ev = d3.event.sourceEvent;\n                        return !nodeLock && !this.zoomingOrPanning(ev);\n                    },\n                    zoomingOrPanning: function (ev) {\n                        return ev.metaKey || ev.altKey;\n                    },\n                    atDragEnd: function (d) {\n                        d.fix(true);\n                        instance.sendUpdateMeta(d);\n                        t2ss.clickConsumed(true);\n                    },\n                    transitionDownRegion: function () {\n\n                        this.prevForce.transition()\n                            .duration(1500)\n                            .style('opacity', 0)\n                            .remove();\n\n                        this.forceG\n                            .style('opacity', 0)\n                            .transition()\n                            .delay(500)\n                            .duration(500)\n                            .style('opacity', 1)\n                            .each('end', function () {\n                                t2rns.navigateToRegionComplete();\n                            });\n                    },\n                    transitionUpRegion: function () {\n                        this.prevForce.transition()\n                            .duration(1000)\n                            .style('opacity', 0)\n                            .remove();\n\n                        this.forceG\n                            .style('opacity', 0)\n                            .transition()\n                            .delay(500)\n                            .duration(500)\n                            .style('opacity', 1)\n                            .each('end', function () {\n                                t2rns.navigateToRegionComplete();\n                            }); ;\n                    },\n                    navigateToRegionHandler: function () {\n                        this.createForceElements();\n                        this.transitionDownRegion();\n                    },\n                });\n\n                function getInstance(svg, forceG, uplink, dim, zoomer, opts) {\n                    return instance || new Layout(svg, forceG, uplink, dim, zoomer, opts);\n                }\n\n                return getInstance();\n            },\n        ]\n    );\n})();\n","\n\n(function () {\n    'use strict';\n\n    var $log, Collection, Model, ts, sus, t2zs, t2vs, t2lps,\n        fn, ps, t2mss, t2ts;\n\n    var linkLabelOffset = '0.35em';\n\n    var widthRatio = 1.4,\n        linkScale = d3.scale.linear()\n            .domain([1, 12])\n            .range([widthRatio, 12 * widthRatio])\n            .clamp(true),\n        labelDim = 30;\n\n    var linkConfig = {\n        light: {\n            baseColor: '#939598',\n            inColor: '#66f',\n            outColor: '#f00',\n        },\n        dark: {\n            baseColor: '#939598',\n            inColor: '#66f',\n            outColor: '#f00',\n        },\n        inWidth: 12,\n        outWidth: 10,\n    };\n\n    function createLink() {\n\n        var linkPoints = this.linkEndPoints(this.get('epA'), this.get('epB'));\n\n        var attrs = angular.extend({}, linkPoints, {\n            key: this.get('id'),\n            class: 'link',\n            position: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n            },\n        });\n\n        this.set(attrs);\n    }\n\n    function rectAroundText(el) {\n        var text = el.select('text'),\n            box = text.node().getBBox();\n\n        box.x = -box.width / 2;\n        box.y = -box.height / 2;\n\n        box.x -= 4;\n        box.width += 8;\n        return box;\n    }\n\n    function isLinkOnline(node) {\n        return (node.get('nodeType') === 'region') ? true : node.get('online');\n    }\n\n    function linkEndPoints(srcId, dstId) {\n\n        var findNodeById = this.region.model.findNodeById.bind(this.region),\n            allNodes = this.region.model.nodes(),\n            sourceNode = findNodeById(this, srcId),\n            targetNode = findNodeById(this, dstId);\n\n        if (!sourceNode || !targetNode) {\n            $log.error('Node(s) not on map for link:' + srcId + '~' + dstId);\n            return null;\n        }\n\n        this.source = allNodes.indexOf(sourceNode);\n        this.target = allNodes.indexOf(targetNode);\n        this.sourceNode = sourceNode;\n        this.targetNode = targetNode;\n\n        return {\n            source: sourceNode,\n            target: targetNode,\n        };\n    }\n\n    function createLinkCollection(data, _region) {\n\n        var LinkModel = Model.extend({\n            initialize: function () {\n                this.super = this.constructor.__super__;\n                this.super.initialize.apply(this, arguments);\n                this.createLink();\n            },\n            region: _region,\n            createLink: createLink,\n            linkEndPoints: linkEndPoints,\n            type: function () {\n                return this.get('type');\n            },\n            svgClassName: function () {\n                return fn.classNames('link',\n                    this.nodeType,\n                    this.get('type'),\n                    {\n                        enhanced: this.get('enhanced'),\n                        selected: this.get('selected'),\n                        suppressedmax: this.get('mastership'),\n                    },\n                    (this.linkLabel) ? this.linkLabel.linkLabelCSSClass() : null\n                );\n            },\n            expected: function () {\n                return true;\n            },\n            online: function () {\n\n                var source = this.get('source'),\n                    target = this.get('target'),\n                    sourceOnline = isLinkOnline(source),\n                    targetOnline = isLinkOnline(target);\n\n                return (sourceOnline) && (targetOnline);\n            },\n            onChange: function () {\n                if (this.el) {\n                    this.el.attr('class', this.svgClassName());\n                    this.setScale();\n                }\n            },\n            enhance: function () {\n                var data = [],\n                    point;\n\n                var hostsVisible = ps.getPrefs('topo2_prefs')['hosts'];\n                if (!hostsVisible && this.get('type') === 'UiEdgeLink') {\n                    return;\n                }\n\n                if (showPort()) {\n                    this.set('enhanced', true);\n                    point = this.locatePortLabel();\n                    angular.extend(point, {\n                        id: 'topo2-port-tgt',\n                        num: this.get('portB'),\n                    });\n                    data.push(point);\n\n                    if (this.get('portA')) {\n                        point = this.locatePortLabel(1);\n                        angular.extend(point, {\n                            id: 'topo2-port-src',\n                            num: this.get('portA'),\n                        });\n                        data.push(point);\n                    }\n\n                    var entering = d3.select('.topo2-portLabels')\n                        .selectAll('.portLabel')\n                        .data(data)\n                        .enter().append('g')\n                        .classed('portLabel', true)\n                        .attr('id', function (d) { return d.id; });\n\n                    entering.each(function (d) {\n                        var el = d3.select(this),\n                            rect = el.append('rect'),\n                            text = el.append('text').text(d.num);\n\n                        var rectSize = rectAroundText(el);\n\n                        rect.attr(rectSize)\n                            .attr('rx', 2)\n                            .attr('ry', 2);\n\n                        text.attr('dy', linkLabelOffset)\n                            .attr('text-anchor', 'middle');\n\n                        el.attr('transform', sus.translate(d.x, d.y));\n\n                    });\n\n                    this.setScale();\n                }\n            },\n            unenhance: function () {\n                this.set('enhanced', false);\n                d3.select('.topo2-portLabels').selectAll('.portLabel').remove();\n                this.setScale();\n            },\n            amt: function (numLinks, index) {\n                var bbox = this.get('source').el.node().getBBox(),\n                    gap = bbox.width / 4;\n                return (index - ((numLinks - 1) / 2)) * gap;\n            },\n            defaultPosition: function () {\n                return {\n                    x1: this.get('source').x,\n                    y1: this.get('source').y,\n                    x2: this.get('target').x,\n                    y2: this.get('target').y,\n                };\n            },\n            calcMovement: function (amt, flipped) {\n                var pos = this.defaultPosition(),\n                    mult = flipped ? -amt : amt,\n                    dx = pos.x2 - pos.x1,\n                    dy = pos.y2 - pos.y1,\n                    length = Math.sqrt((dx * dx) + (dy * dy));\n\n                return {\n                    x1: pos.x1 + (mult * dy / length),\n                    y1: pos.y1 + (mult * -dx / length),\n                    x2: pos.x2 + (mult * dy / length),\n                    y2: pos.y2 + (mult * -dx / length),\n                };\n            },\n            setPosition: function () {\n                var multiline = this.get('multiline');\n                if (multiline) {\n                    var offsetAmt = this.amt(multiline.deviceLinks, multiline.index);\n                    this.set('position', this.calcMovement(offsetAmt));\n                } else {\n                    this.set('position', this.defaultPosition());\n                }\n\n                if (this.get('enhanced')) {\n                    this.updatePortPosition();\n                }\n\n                if (this.el) {\n                    this.el.attr(this.get('position'));\n                }\n\n                if (this.linkLabel) {\n                    this.linkLabel.setPosition();\n                }\n            },\n            updatePortPosition: function () {\n                var sourcePos = this.locatePortLabel(1),\n                    targetPos = this.locatePortLabel();\n                d3.select('#topo2-port-src')\n                    .attr('transform', sus.translate(sourcePos.x, sourcePos.y));\n                d3.select('#topo2-port-tgt')\n                    .attr('transform', sus.translate(targetPos.x, targetPos.y));\n            },\n            getSelected: function () {\n                return this.collection.filter(function (m) {\n                    return m.get('selected');\n                });\n            },\n            select: function () {\n                this.set({ 'selected': true });\n                return this.getSelected();\n            },\n            deselect: function () {\n                this.set({\n                    'selected': false,\n                    'enhanced': false,\n                });\n            },\n            showDetails: function () {\n                var selected = this.getSelected();\n\n                if (selected) {\n                    t2lps.displayLink(this);\n                } else {\n                    t2lps.hide();\n                }\n            },\n            locatePortLabel: function (src) {\n                var offset = 32 / (labelDim * t2zs.scale()),\n                    sourceX = this.get('position').x1,\n                    sourceY = this.get('position').y1,\n                    targetX = this.get('position').x2,\n                    targetY = this.get('position').y2,\n                    nearX = src ? sourceX : targetX,\n                    nearY = src ? sourceY : targetY,\n                    farX = src ? targetX : sourceX,\n                    farY = src ? targetY : sourceY;\n\n                function dist(x, y) {\n                    return Math.sqrt(x * x + y * y);\n                }\n\n                var dx = farX - nearX,\n                    dy = farY - nearY,\n                    k = (32 * offset) / dist(dx, dy);\n\n                return { x: k * dx + nearX, y: k * dy + nearY };\n            },\n            onEnter: function (el) {\n                var link = d3.select(el),\n                    th = ts.theme(),\n                    delay = 1000;\n\n                this.el = link;\n\n                link.transition()\n                    .duration(delay)\n                    .attr('stroke', linkConfig[th].baseColor);\n\n                this.setVisibility();\n                this.setScale();\n            },\n            linkWidth: function () {\n                var width = widthRatio;\n                if (this.get('enhanced')) { width = 3.5; }\n                if (this.linkLabel) {\n                    var scale = d3.scale.ordinal()\n                            .rangeRoundPoints([4, 8]),\n                        label = this.linkLabel.get('label').split(' ');\n\n                    switch (t2ts.selectedTrafficOverlay()) {\n                        case 'flowStatsBytes':\n                            scale.domain(['KB', 'MB', 'GB']);\n                            width = scale(label[1]);\n                            break;\n                        case 'portStatsBitSec':\n                            scale.domain(['Kbps', 'Mbps', 'Gbps']);\n                            width = scale(label[1]);\n                            break;\n                        case 'portStatsPktSec':\n                            scale = d3.scale.linear()\n                                .domain([1, 10, 100, 1000, 10000])\n                                .range(d3.range(3.5, 9))\n                                .clamp(true);\n                            width = scale(parseInt(label[0]));\n                    }\n                }\n\n                return width;\n            },\n            setScale: function () {\n\n                if (!this.el) return;\n\n                var linkWidthRatio = this.linkWidth();\n\n                var width = linkScale(linkWidthRatio) / t2zs.scale();\n                this.el.attr('stroke-width', width + 'px');\n\n                var labelScale = labelDim / (labelDim * t2zs.scale());\n\n                d3.select('.topo2-portLabels')\n                    .selectAll('.portLabel')\n                    .selectAll('*')\n                    .style('transform', 'scale(' + labelScale + ')');\n\n                this.setPosition();\n\n                if (this.linkLabel) {\n                    this.linkLabel.setScale();\n                }\n            },\n            update: function () {\n                if (this.get('enhanced')) {\n                    this.enhance();\n                }\n            },\n            setVisibility: function () {\n\n                if (this.get('type') !== 'UiEdgeLink') {\n                    return;\n                }\n\n                var visible = ps.getPrefs('topo2_prefs')['hosts'];\n                this.el.style('visibility', visible ? 'visible' : 'hidden');\n            },\n            displayMastership: function () {\n                this.set({ mastership: t2mss.mastership() !== null });\n            },\n            remove: function () {\n\n                var width = linkScale(widthRatio) / t2zs.scale();\n\n                this.el.transition()\n                    .duration(300)\n                    .attr('stroke', '#ff0000')\n                    .style('stroke-width', width * 4)\n                    .transition()\n                    .delay(1000)\n                    .style('opacity', 0);\n            },\n        });\n\n        var LinkCollection = Collection.extend({\n            model: LinkModel,\n        });\n\n        return new LinkCollection(data);\n    }\n\n    function showPort() {\n        return t2vs.getPortHighlighting();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2LinkService', [\n        '$log', 'Topo2Collection', 'Topo2Model',\n        'ThemeService', 'SvgUtilService', 'Topo2ZoomService',\n        'Topo2ViewService', 'Topo2LinkPanelService', 'FnService', 'PrefsService',\n        'Topo2MastershipService', 'Topo2TrafficService',\n        function (_$log_, _c_, _Model_, _ts_, _sus_,\n            _t2zs_, _t2vs_, _t2lps_, _fn_, _ps_, _t2mss_, _t2ts_) {\n\n            $log = _$log_;\n            ts = _ts_;\n            sus = _sus_;\n            t2zs = _t2zs_;\n            t2vs = _t2vs_;\n            Collection = _c_;\n            Model = _Model_;\n            t2lps = _t2lps_;\n            fn = _fn_;\n            ps = _ps_;\n            t2mss = _t2mss_;\n            t2ts = _t2ts_;\n\n            return {\n                createLinkCollection: createLinkCollection,\n            };\n        },\n    ]);\n})();\n","\n\n(function () {\n\n    angular.module('ovTopo2')\n        .factory('Topo2LinkLabel', [\n            'Topo2Label', 'Topo2ZoomService',\n            function (Label, t2zs) {\n                return Label.extend({\n                    className: 'topo2-linklabel',\n                    maxHeight: 30,\n                    minHeight: 20,\n                    initialize: function (label, dom, options) {\n                        this.link = options.link;\n                        this.parent = dom;\n                        this.super = this.constructor.__super__;\n                        this.super.initialize.apply(this, arguments);\n                    },\n                    onChange: function () {\n                        this.link.onChange();\n                        this.constructor.__super__.onChange.apply(this, arguments);\n                    },\n                    linkLabelCSSClass: function () {\n                        return this.get('css') || '';\n                    },\n                    setPosition: function () {\n                        var link = this.link;\n                        this.set({\n                            x: (link.source.x + link.target.x) / 2,\n                            y: (link.source.y + link.target.y) / 2,\n                        });\n                    },\n                    setScale: function () {\n                        this.content.style('transform',\n                            'scale(' + t2zs.adjustmentScale(20, 30) + ')');\n                    },\n                    beforeRender: function () {\n                        this.link.linkLabel = this;\n                    },\n                    remove: function () {\n                        this.link.linkLabel = null;\n                        this.link.onChange();\n                        this.constructor.__super__.remove.apply(this, arguments);\n                    },\n                });\n            },\n        ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var panel, gs, flash, ls;\n\n    var linkPanel, linkData;\n\n    function init() {\n        linkPanel = panel();\n    }\n\n    function formatLinkData(data) {\n\n        var source = data.get('source'),\n            target = data.get('target');\n\n        return {\n            title: 'Link',\n            propOrder: [\n                'Type', '-',\n                'A Type', 'A Id', 'A Label', 'A Port', '-',\n                'B Type', 'B Id', 'B Label', 'B Port',\n            ],\n            propLabels: {\n                'Type': 'Type',\n                'A Type': 'A Type',\n                'A Id': 'A Id',\n                'A Label': 'A Label',\n                'A Port': 'A Port',\n                'B Type': 'B Type',\n                'B Id': 'B Id',\n                'B Label': 'B Label',\n                'B Port': 'B Port',\n            },\n            propValues: {\n                '-': '',\n                'Type': data.get('type'),\n                'A Type': source.get('nodeType'),\n                'A Id': source.get('id'),\n                'A Label': source.get('props').name,\n                'A Port': data.get('portA') || 'N/A',\n                'B Type': target.get('nodeType'),\n                'B Id': target.get('id'),\n                'B Label': target.get('props').name,\n                'B Port': data.get('portB') || 'N/A',\n            },\n        };\n    }\n\n    function displayLink(data) {\n        init();\n\n        linkData = formatLinkData(data);\n        render();\n    }\n\n    function render() {\n        linkPanel.show();\n        linkPanel.emptyRegions();\n\n        var svg = linkPanel.appendToHeader('div')\n                .classed('icon', true)\n                .append('svg'),\n            title = linkPanel.appendToHeader('h2'),\n            table = linkPanel.appendToBody('table'),\n            tbody = table.append('tbody');\n\n        title.text(linkData.title);\n        gs.addGlyph(svg, 'bird', 24, 0, [1, 1]);\n        ls.listProps(tbody, linkData);\n    }\n\n    function show() {\n        linkPanel.show();\n    }\n\n    function hide() {\n        linkPanel.el.hide();\n    }\n\n    function toggle() {\n        var on = linkPanel.el.toggle(),\n            verb = on ? 'Show' : 'Hide';\n        flash.flash(verb + ' Link Panel');\n    }\n\n    function destroy() {\n        linkPanel.destroy();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2LinkPanelService', [\n        'Topo2DetailsPanelService', 'GlyphService', 'FlashService', 'ListService',\n        function (_ps_, _gs_, _flash_, _ls_) {\n\n            panel = _ps_;\n            gs = _gs_;\n            flash = _flash_;\n            ls = _ls_;\n\n            return {\n                displayLink: displayLink,\n                init: init,\n                show: show,\n                hide: hide,\n                toggle: toggle,\n                destroy: destroy,\n                isVisible: function () { return linkPanel.isVisible(); },\n            };\n        },\n    ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    var t2zs, countryFilters, ms;\n\n    var instance, zoomer, currentMap;\n\n    function init() {\n        this.appendElement('#topo2-background', 'g');\n        zoomer = t2zs.getZoomer();\n        currentMap = null;\n    }\n\n    function setUpMap(mapId, mapFilePath, mapScale) {\n\n        if (currentMap === mapId) {\n            return new Promise(function (resolve) {\n                resolve();\n            });\n        }\n\n        currentMap = mapId;\n\n        var loadMap = ms.loadMapInto,\n            promise, cfilter;\n\n        this.node().selectAll('*').remove();\n\n        if (mapFilePath === '*countries') {\n            cfilter = countryFilters[mapId] || countryFilters.uk;\n            loadMap = ms.loadMapRegionInto;\n        }\n\n        promise = loadMap(this.node(), mapFilePath, mapId, {\n            countryFilters: cfilter,\n            adjustScale: mapScale || 1,\n            shading: '',\n        });\n\n        return promise;\n    }\n\n\n    function resetZoom() {\n        zoomer.reset();\n    }\n\n    function zoomCallback(sc, tr) {\n        this.node().style('stroke-width', (2.0 / sc) + 'px');\n    }\n\n    function getCurrentMap() {\n        return currentMap;\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2MapService', [\n        'Topo2ZoomService', 'MapService', 'Topo2ViewController',\n\n        function (_t2zs_, _ms_, ViewController) {\n            t2zs = _t2zs_;\n            ms = _ms_;\n\n            var MapLayer = ViewController.extend({\n\n                id: 'topo2-map',\n                displayName: 'Map',\n\n                init: init,\n                setUpMap: setUpMap,\n                resetZoom: resetZoom,\n                zoomCallback: zoomCallback,\n                getCurrentMap: getCurrentMap,\n            });\n\n            return instance || new MapLayer();\n        },\n    ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var $log;\n\n    var proj;\n\n    function projection(x) {\n        if (x) {\n            proj = x;\n            $log.debug('Set the projection');\n        }\n        return proj;\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2MapConfigService',\n        ['$log',\n            function (_$log_) {\n\n                $log = _$log_;\n\n                return {\n                    projection: projection,\n                };\n            },\n        ]\n    );\n})();\n","\n\n(function () {\n\n    var instance;\n\n    angular.module('ovTopo2')\n        .factory('Topo2MastershipService', [\n\n            function () {\n\n                var MastershipController = function () {\n                    instance = this;\n                    this.region = null;\n                    this.currentMastership = null;\n                };\n\n                MastershipController.prototype = {\n                    displayMastership: function () {\n                        var nodes = this.region.regionNodes(),\n                            links = this.region.regionLinks();\n\n                        _.each(nodes.concat(links), function (n) {\n                            n.displayMastership(this.currentMastership);\n                        });\n                    },\n                    mastership: function () {\n                        return this.currentMastership;\n                    },\n                    setMastership: function (id) {\n                        this.currentMastership = id;\n                        this.displayMastership();\n                    },\n                };\n\n                return instance || new MastershipController();\n            },\n        ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    function Model(attributes, collection) {\n        this.attributes = {};\n        this.set(angular.extend({}, attributes || {}), { silent: true });\n        this.collection = collection;\n        this.initialize.apply(this, arguments);\n    }\n\n    Model.prototype = {\n\n        initialize: function () {},\n\n        onChange: function (property, value, options) {},\n\n        get: function (attr) {\n            return this.attributes[attr];\n        },\n\n        set: function (key, val, options) {\n\n            if (!key) {\n                return this;\n            }\n\n            var attributes;\n            if (typeof key === 'object') {\n                attributes = key;\n                options = val;\n            } else {\n                (attributes = {})[key] = val;\n            }\n\n            var opts = options || (options = {});\n\n            var unset = opts.unset,\n                silent = opts.silent,\n                changes = [],\n                changing = this._changing;\n\n            this._changing = true;\n\n            if (!changing) {\n\n                this._previousAttributes = Object.create(\n                    Object.getPrototypeOf(this.attributes)\n                );\n                this.changed = {};\n            }\n\n            var current = this.attributes,\n                changed = this.changed,\n                previous = this._previousAttributes;\n\n            angular.forEach(attributes, function (attribute, index) {\n\n                val = attribute;\n\n                if (!_.isEqual(current[index], val)) {\n                    changes.push(index);\n                }\n\n                if (!_.isEqual(previous[index], val)) {\n                    delete changed[index];\n                } else {\n                    changed[index] = val;\n                }\n\n                if (unset) {\n                    delete current[index];\n                } else {\n                    current[index] = val;\n                }\n            });\n\n            if (!silent) {\n                if (changes.length) {\n                    this._pending = opts;\n                }\n                for (var i = 0; i < changes.length; i++) {\n                    this.onChange(changes[i], this,\n                        current[changes[i]], opts);\n                }\n            }\n\n            this._changing = false;\n            return this;\n        },\n        toJSON: function (options) {\n            return angular.copy(this.attributes);\n        },\n        remove: function () {\n            if (this.collection) {\n                this.collection.remove(this);\n            }\n        },\n    };\n\n    angular.module('ovTopo2')\n    .factory('Topo2Model', [\n        'FnService',\n        function (fn) {\n            Model.extend = fn.extend;\n\n            return Model;\n        },\n    ]);\n})();\n","\n\n(function () {\n\n    var instance;\n\n    angular.module('ovTopo2')\n        .factory('Topo2NoDevicesConnectedService', [\n            '$log', 'Topo2ViewController', 'GlyphService', 'SvgUtilService',\n            function ($log, ViewController, gs, sus) {\n\n                var NoDevicesConnected = ViewController.extend({\n                    id: 'topo2-noDevsLayer',\n                    displayName: 'No Devices Connected',\n\n                    init: function () {\n                        instance = this;\n                        this.appendElement('#topo2', 'g')\n                            .attr({\n                                transform: sus.translate(500, 500),\n                            });\n\n                        this.render();\n                        this.show();\n                    },\n\n                    render: function () {\n                        var g, box;\n\n                        g = this.node().append('g');\n                        gs.addGlyph(g, 'bird', 100).attr('class', 'noDevsBird');\n                        g.append('text').text('No devices are connected')\n                            .attr({ x: 120, y: 80 });\n\n                        box = g.node().getBBox();\n                        box.x -= box.width/2;\n                        box.y -= box.height/2;\n                        g.attr('transform', sus.translate(box.x, box.y));\n                    },\n                });\n\n                return instance || new NoDevicesConnected();\n            },\n        ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var t2ps, sus, is, ts, t2mcs, t2nps, fn;\n\n    var devIconDim = 36,\n        devIconDimMin = 20,\n        devIconDimMax = 40,\n        labelPad = 5,\n        textPad = 5,\n        halfDevIcon = devIconDim / 2;\n\n    var dColTheme = {\n            light: {\n                online: '#444444',\n                offline: '#cccccc',\n            },\n            dark: {\n                online: '#444444',\n                offline: '#cccccc',\n            },\n        },\n        dUseTheme = {\n            light: 'white',\n            dark: 'black',\n        };\n\n    angular.module('ovTopo2')\n    .factory('Topo2NodeModel', [\n        'Topo2Model', 'FnService', 'Topo2PrefsService',\n        'SvgUtilService', 'IconService', 'ThemeService',\n        'Topo2MapConfigService', 'Topo2ZoomService', 'Topo2NodePositionService',\n        'Topo2SelectService', 'Topo2MastershipService',\n        function (Model, _fn_, _t2ps_, _sus_, _is_, _ts_,\n            _t2mcs_, zoomService, _t2nps_, t2ss, t2mss) {\n\n            ts = _ts_;\n            fn = _fn_;\n            t2ps = _t2ps_;\n            sus = _sus_;\n            is = _is_;\n            t2mcs = _t2mcs_;\n            t2nps = _t2nps_;\n\n            return Model.extend({\n                initialize: function () {\n                    this.node = this.createNode();\n                    this.mastershipService = t2mss;\n                    this._events = {\n                        'mouseover': 'mouseoverHandler',\n                        'mouseout': 'mouseoutHandler',\n                    };\n                },\n                select: function () {\n                    this.set('selected', true);\n                },\n                index: function () {\n\n                    var models = this.collection.models,\n                        id = this.get('id');\n\n                    var index = _.find(models, function (model, i) {\n                        return model.get('id') === id;\n                    });\n\n                    return index || models.length;\n                },\n                deselect: function () {\n                    this.set('selected', false);\n                },\n                createNode: function () {\n                    this.set('svgClass', this.svgClassName());\n                    t2nps.positionNode(this);\n                    return this;\n                },\n                setUpEvents: function () {\n                    var _this = this,\n                        events = angular.extend({}, this._events, this.events);\n                    angular.forEach(events, function (handler, key) {\n                        _this.el.on(key, _this[handler].bind(_this));\n                    });\n                },\n                mouseoverHandler: function () {\n                    this.set('hovered', true);\n                },\n                mouseoutHandler: function () {\n                    this.set('hovered', false);\n                },\n                onClick: function () {\n                    if (d3.event.defaultPrevented) return;\n\n                    d3.event.preventDefault();\n                    t2ss.selectObject(this, this.multiSelectEnabled);\n                },\n                fix: function (fixed) {\n                    this.set({ fixed: fixed });\n                    this.fixed = fixed;\n                },\n                icon: function () {\n                    return 'unknown';\n                },\n                labelIndex: function () {\n                    return t2ps.get('dlbls');\n                },\n                label: function () {\n                    var props = this.get('props'),\n                        id = this.get('id'),\n                        friendlyName = props && props.name ? props.name : id,\n                        labels = ['', friendlyName || id, id],\n                        nli = this.labelIndex(),\n                        idx = (nli < labels.length) ? nli : 0;\n\n                    return labels[idx];\n                },\n                trimLabel: function (label) {\n                    return (label && label.trim()) || '';\n                },\n                computeLabelWidth: function (el) {\n                    var text = el.select('text'),\n                        box = text.node().getBBox();\n                    return box.width + labelPad * 2;\n                },\n                devGlyphColor: function () {\n                    var o = this.get('online'),\n                        id = this.get('master'),\n                        otag = o ? 'online' : 'offline';\n                    return o ? sus.cat7().getColor(id, 0, ts.theme()) :\n                        dColTheme[ts.theme()][otag];\n                },\n                labelBox: function (dim, labelWidth) {\n                    var _textPad = (textPad * 2) - labelPad;\n\n                    if (labelWidth === 0) {\n                        _textPad = 0;\n                    }\n\n                    return {\n                        x: -dim / 2 - labelPad,\n                        y: -dim / 2 - labelPad,\n                        width: dim + labelWidth + (labelPad * 2) + _textPad,\n                        height: dim + (labelPad * 2),\n                    };\n                },\n                iconBox: function (dim, labelWidth) {\n                    return {\n                        x: -dim / 2,\n                        y: -dim / 2,\n                        width: dim + labelWidth,\n                        height: dim,\n                    };\n                },\n                svgClassName: function () {\n                    return fn.classNames('node',\n                        this.nodeType,\n                        this.get('type'),\n                        {\n                            online: this.get('online'),\n                            selected: this.get('selected'),\n                            hovered: this.get('hovered'),\n                            fixed: this.get('fixed'),\n                            suppressedmax: this.get('mastership'),\n                        }\n                    );\n                },\n                lngLatFromCoord: function (coord) {\n                    var p = t2mcs.projection();\n                    return p ? p.invert(coord) : [0, 0];\n                },\n                resetPosition: function () {\n                    t2nps.setLongLat(this);\n                },\n                displayMastership: function () {\n                    this.set({ mastership: t2mss.mastership() !== null });\n                },\n                update: function () {\n                    this.updateLabel();\n                },\n                updateLabel: function () {\n                    var node = this.el,\n                        label = this.trimLabel(this.label()),\n                        labelWidth;\n\n                    node.select('text').text(label);\n                    labelWidth = label ? this.computeLabelWidth(node) : 0;\n\n                    node.select('rect')\n                        .transition()\n                        .attr(this.labelBox(devIconDim, labelWidth));\n                },\n                onEnter: function (el) {\n                    this.el = d3.select(el);\n                    this.render();\n\n                    if (this.setOfflineVisibility) {\n                        this.setOfflineVisibility();\n                    }\n                },\n                setScale: function () {\n\n                    if (!this.el) return;\n\n                    var dim = devIconDim,\n                        multipler = 1;\n\n                    if (dim * zoomService.scale() < devIconDimMin) {\n                        multipler = devIconDimMin / (dim * zoomService.scale());\n                    } else if (dim * zoomService.scale() > devIconDimMax) {\n                        multipler = devIconDimMax / (dim * zoomService.scale());\n                    }\n\n                    this.el.select('.node-content')\n                        .style('transform', 'scale(' + multipler + ')');\n                },\n                addLabelElements: function (label) {\n\n                    var labelG = this.el.select('.node-content')\n                        .append('g')\n                        .attr('class', 'label');\n\n                    var rect = labelG.append('rect')\n                        .attr('class', 'node-container');\n\n                    var text = labelG.append('text').text(label)\n                        .attr('text-anchor', 'left')\n                        .attr('y', '0.3em')\n                        .attr('x', halfDevIcon + labelPad + textPad);\n\n                    return {\n                        rect: rect,\n                        text: text,\n                    };\n                },\n                addIconElements: function (el) {\n\n                    var glyphId = this.icon(this.get('type')),\n                        glyph;\n\n                    var iconG = el.append('g')\n                        .attr('class', 'icon');\n\n                    iconG.append('rect')\n                        .attr('class', 'icon-rect')\n                        .attr('y', -halfDevIcon)\n                        .attr('x', -halfDevIcon)\n                        .attr('width', devIconDim)\n                        .attr('height', devIconDim)\n                        .style('fill', this.devGlyphColor.bind(this));\n\n                    glyph = is.addDeviceIcon(iconG, glyphId, devIconDim);\n                    glyph.attr(this.iconBox(devIconDim, 0));\n                    glyph.style('fill', dUseTheme[ts.theme()]);\n                },\n                render: function () {\n                    var node = this.el,\n                        label = this.trimLabel(this.label()),\n                        labelWidth;\n\n                    var nodeG = node.append('g')\n                        .attr('class', 'node-content');\n\n                    var labelElements = this.addLabelElements(label);\n                    labelWidth = label ? this.computeLabelWidth(node) : 0;\n                    labelElements.rect\n                        .attr(this.labelBox(devIconDim, labelWidth));\n\n                    this.addIconElements(nodeG);\n\n                    node.attr('transform',\n                        sus.translate(-halfDevIcon, -halfDevIcon));\n\n                    if (this.events) {\n                        this.setUpEvents();\n                    }\n\n                    this.setScale();\n                },\n\n                setOfflineVisibility: function () {},\n            });\n        }]\n    );\n})();\n","\n\n(function () {\n    'use strict';\n\n    var rs, t2mcs, t2sls, t2bgs;\n\n    var nearDist = 15;\n\n    function setElCoord(el, coord) {\n        el.fix(true);\n        el.x = el.px = coord[0];\n        el.y = el.py = coord[1];\n        return true;\n    }\n\n    function positionNode(node, forUpdate) {\n\n        var meta = node.get('metaUi'),\n            x = meta && meta.x,\n            y = meta && meta.y,\n            hasMeta = x !== undefined && y !== undefined,\n            dim = [800, 600],\n            xy;\n\n\n        if (hasMeta) {\n            node.fix(true);\n            node.px = node.x = x;\n            node.py = node.y = y;\n            return;\n        }\n\n\n        if (node.nodeType === 'peer-region') {\n            if (t2bgs.getBackgroundType() === 'geo') {\n                setLongLat(node);\n                return true;\n            }\n\n            var loc = node.get('location');\n\n            if (!loc.latOrY && !loc.longOrX) {\n                loc = {\n                    longOrX: -20,\n                    latOrY: 10 * node.index(),\n                };\n            }\n\n            setElCoord(node, coordFromXY(loc));\n            return;\n        }\n\n        if (setLongLat(node)) {\n            return true;\n        }\n\n        if (forUpdate) {\n            return;\n        }\n\n\n        function rand() {\n            return {\n                x: rs.randDim(dim[0]),\n                y: rs.randDim(dim[1]),\n            };\n        }\n\n        function near(node) {\n            return {\n                x: node.x + nearDist + rs.spread(nearDist),\n                y: node.y + nearDist + rs.spread(nearDist),\n            };\n        }\n\n        function getDevice(cp) {\n            return rand();\n        }\n\n        xy = (node.class === 'host') ? near(getDevice(node.cp)) : rand();\n\n        if (node.class === 'sub-region') {\n            xy = rand();\n            node.x = node.px = xy.x;\n            node.y = node.py = xy.y;\n        }\n        angular.extend(node, xy);\n    }\n\n    function setLongLat(el) {\n        var loc = el.get('location');\n\n        if (!loc || (loc.latOrY === 0 && loc.longOrX === 0)) {\n            return false;\n        }\n\n        if (loc.locType === 'geo') {\n            return setElCoord(el, coordFromLngLat(loc));\n        }\n        if (loc.locType === 'grid') {\n            return setElCoord(el, coordFromXY(loc));\n        }\n\n        return false;\n    }\n\n    function coordFromLngLat(loc) {\n        var p = t2mcs.projection();\n        return p ? p([loc.longOrX, loc.latOrY]) : [0, 0];\n    }\n\n    function coordFromXY(loc) {\n        var bgWidth = t2sls.getWidth() || 100,\n            bgHeight = t2sls.getHeight() || 100;\n\n        var scale = 1000 / bgWidth,\n            yOffset = (1000 - (bgHeight * scale)) / 2;\n\n        var x = scale * loc.longOrX,\n            y = (scale * loc.latOrY) + yOffset;\n\n        return [x, y];\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2NodePositionService',\n        ['RandomService', 'Topo2MapConfigService',\n            'Topo2SpriteLayerService', 'Topo2BackgroundService',\n            function (_rs_, _t2mcs_, _t2sls_, _t2bgs_) {\n\n                rs = _rs_;\n                t2mcs = _t2mcs_;\n                t2sls = _t2sls_;\n                t2bgs = _t2bgs_;\n\n                return {\n                    positionNode: positionNode,\n                    setLongLat: setLongLat,\n                };\n            },\n        ]);\n})();\n","\n(function () {\n    'use strict';\n\n    var t2os = 'Topo2OverlayService: ';\n\n    var $log, fs, t2kcs, t2rs, t2lc, LinkLabel;\n\n    var overlays = {},\n        current = null,\n        reset = true;\n\n    function error(fn, msg) {\n        $log.error(t2os + fn + '(): ' + msg);\n    }\n\n    function warn(fn, msg) {\n        $log.warn(t2os + fn + '(): ' + msg);\n    }\n\n    function mkGlyphId(oid, gid) {\n        return (gid[0] === '*') ? oid + '-' + gid.slice(1) : gid;\n    }\n\n    function handleGlyphs(o) {\n        var gdata = fs.isO(o.glyphs),\n            oid = o.overlayId,\n            gid = o.glyphId || 'unknown',\n            data = {},\n            note = [];\n\n        o._glyphId = mkGlyphId(oid, gid);\n\n        o.mkGid = function (g) {\n            return mkGlyphId(oid, g);\n        };\n        o.mkId = function (s) {\n            return oid + '-' + s;\n        };\n\n        if (gdata) {\n            angular.forEach(gdata, function (value, key) {\n                var fullkey = oid + '-' + key;\n                data['_' + fullkey] = value.vb;\n                data[fullkey] = value.d;\n                note.push('*' + key);\n            });\n            gs.registerGlyphs(data);\n            $log.debug('registered overlay glyphs:', oid, note);\n        }\n    }\n\n    function register(overlay) {\n        var r = 'register',\n            over = fs.isO(overlay),\n            kb = over ? fs.isO(overlay.keyBindings) : null,\n            id = over ? over.overlayId : '';\n\n        if (!id) {\n            return error(r, 'not a recognized overlay');\n        }\n        if (overlays[id]) {\n            return warn(r, 'already registered: \"' + id + '\"');\n        }\n        overlays[id] = overlay;\n        handleGlyphs(overlay);\n\n        if (kb) {\n            if (!fs.isA(kb._keyOrder)) {\n                warn(r, 'no _keyOrder array defined on keyBindings');\n            } else {\n                kb._keyOrder.forEach(function (k) {\n                    if (k !== '-' && !kb[k]) {\n                        warn(r, 'no \"' + k + '\" property defined on keyBindings');\n                    }\n                });\n            }\n        }\n\n        $log.debug(t2os + 'registered overlay: ' + id, overlay);\n    }\n\n    function augmentRbset(rset, switchFn) {\n        var map = {},\n            idx = 1;\n\n        angular.forEach(overlays, function (ov) {\n            rset.push({\n                gid: ov._glyphId,\n                tooltip: (ov.tooltip || ''),\n                cb: function () {\n                    tbSelection(ov.overlayId, switchFn);\n                },\n            });\n            map[ov.overlayId] = idx++;\n        });\n        return map;\n    }\n\n    function tbSelection(id, switchFn) {\n        var same = current && current.overlayId === id,\n            payload = {},\n            actions;\n\n        function doop(op) {\n            var oid = current.overlayId;\n            $log.debug('Overlay:', op, oid);\n            current[op]();\n            payload[op] = oid;\n        }\n\n        if (reset || !same) {\n            current && doop('deactivate');\n            current = overlays[id];\n            current && doop('activate');\n            actions = current && fs.isO(current.keyBindings);\n            switchFn(id, actions);\n        }\n    }\n\n\n\n    function _hook(x) {\n        var h = current && current.hooks;\n        return h && fs.isF(h[x]);\n    }\n\n    function escapeHook() {\n        var eh = _hook('escape');\n        return eh ? eh() : false;\n    }\n\n    function emptySelectHook() {\n        var cb = _hook('empty');\n        cb && cb();\n    }\n\n    function singleSelectHook(data) {\n        var cb = _hook('single');\n        cb && cb(data);\n    }\n\n    function multiSelectHook(selectOrder) {\n        var cb = _hook('multi');\n        cb && cb(selectOrder);\n    }\n\n    function mouseOverHook(what) {\n        var cb = _hook('mouseover');\n        cb && cb(what);\n    }\n\n    function mouseOutHook() {\n        var cb = _hook('mouseout');\n        cb && cb();\n    }\n\n\n\n\n\n    function setOverlay(ovid) {\n        var ov = overlays[ovid];\n        if (!ov) {\n            $log.error('setOverlay: no such overlay ID: ' + ovid);\n        } else {\n            current = ov;\n            t2kcs.bindCommands(current.keyBindings);\n        }\n    }\n\n    function showHighlights(data) {\n        $log.info('+++ TOPO 2 +++ show highlights', data);\n        t2lc.empty();\n        var linkLabelsDOM = d3.select('.topo2-linkLabels');\n        _.each(data.links, function (link) {\n            var id = link.id.replace('/None/0', '/None').replace('-', '~'),\n                nodeLink = t2rs.getLink(id);\n                if (nodeLink) {\n                    t2lc.addLabel(LinkLabel, link, linkLabelsDOM, {\n                        link: nodeLink,\n                    });\n                }\n        });\n    }\n\n\n    angular.module('ovTopo2')\n    .factory('Topo2OverlayService', [\n        '$log', 'FnService', 'Topo2KeyCommandService',\n        'Topo2RegionService', 'Topo2LabelCollection', 'Topo2LinkLabel',\n\n        function (_$log_, _fs_, _t2kcs_, _t2rs_,\n            _t2lc_, _t2ll_) {\n            $log = _$log_;\n            fs = _fs_;\n            t2kcs = _t2kcs_;\n            t2rs = _t2rs_;\n            t2lc = _t2lc_;\n            LinkLabel = _t2ll_;\n\n            return {\n                register: register,\n                setOverlay: setOverlay,\n                augmentRbset: augmentRbset,\n                tbSelection: tbSelection,\n                mkGlyphId: mkGlyphId,\n\n                hooks: {\n                    escape: escapeHook,\n                    emptySelect: emptySelectHook,\n                    singleSelect: singleSelectHook,\n                    multiSelect: multiSelectHook,\n                    mouseOver: mouseOverHook,\n                    mouseOut: mouseOutHook,\n                },\n                showHighlights: showHighlights,\n            };\n        },\n    ]);\n}());\n","\n\n(function () {\n    'use strict';\n\n    var ps;\n\n    var panel = {\n        initialize: function (id, options) {\n            this.id = id;\n            this.el = ps.createPanel(id, options);\n            this.setup();\n\n            if (options.show) {\n                this.el.show();\n            }\n        },\n        setup: function () {\n            this.el.empty();\n            this.header = this.el.append('div').classed('header', true);\n            this.body = this.el.append('div').classed('body', true);\n            this.footer = this.el.append('div').classed('footer', true);\n        },\n        appendToHeader: function (x) {\n            return this.header.append(x);\n        },\n        appendToBody: function (x) {\n            return this.body.append(x);\n        },\n        appendToFooter: function (x) {\n            return this.footer.append(x);\n        },\n        emptyRegions: function () {\n            this.header.selectAll('*').remove();\n            this.body.selectAll('*').remove();\n            this.footer.selectAll('*').remove();\n        },\n        destroy: function () {\n            ps.destroyPanel(this.id);\n        },\n        isVisible: function () {\n            return this.el.isVisible();\n        },\n    };\n\n    angular.module('ovTopo2')\n    .factory('Topo2PanelService', [\n        'Topo2UIView', 'PanelService',\n        function (View, _ps_) {\n\n            ps = _ps_;\n\n            return View.extend(panel);\n        },\n    ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    var Collection, Model;\n\n    var remappedDeviceTypes = {\n        virtual: 'cord',\n    };\n\n    function createCollection(data, region) {\n\n        var PeerRegionCollection = Collection.extend({\n            model: Model,\n            region: region,\n        });\n\n        return new PeerRegionCollection(data);\n    }\n\n    angular.module('ovTopo2')\n        .factory('Topo2PeerRegionService', [\n            'WebSocketService', 'Topo2Collection', 'Topo2NodeModel',\n            'Topo2SubRegionPanelService', 'Topo2RegionNavigationService',\n\n            function (wss, _c_, NodeModel, t2srp, t2rns) {\n\n                Collection = _c_;\n\n                Model = NodeModel.extend({\n\n                    nodeType: 'peer-region',\n                    events: {\n                        'dblclick': 'navigateToRegion',\n                        'click': 'onClick',\n                    },\n\n                    initialize: function () {\n                        this.super = this.constructor.__super__;\n                        this.super.initialize.apply(this, arguments);\n                    },\n                    onChange: function () {\n                        if (this.el) {\n                            this.el.attr('class', this.svgClassName());\n                        }\n                    },\n                    showDetails: function () {\n                        t2srp.displayPanel(this);\n                    },\n                    icon: function () {\n                        var type = this.get('type');\n                        return remappedDeviceTypes[type] || type || 'm_cloud';\n                    },\n                    navigateToRegion: function () {\n                        if (d3.event.defaultPrevented) return;\n                        t2rns.navigateToRegion(this.get('id'));\n                        t2srp.hide();\n                    },\n                });\n\n                return {\n                    createCollection: createCollection,\n                };\n            },\n        ]);\n\n})();\n","\n(function () {\n\n    var ps;\n\n    var defaultPrefsState = {\n        insts: 1,\n        summary: 1,\n        detail: 1,\n        hosts: 0,\n        offdev: 1,\n        dlbls: 0,\n        hlbls: 0,\n        porthl: 1,\n        bg: 0,\n        spr: 0,\n        ovid: 'traffic', \n        toolbar: 0,\n    };\n\n    function topo2Prefs() {\n        return ps.getPrefs('topo2_prefs', defaultPrefsState);\n    }\n\n    function get(key) {\n        var preferences = topo2Prefs();\n        return preferences[key];\n    }\n\n    function set(key, value) {\n        var preferences = topo2Prefs();\n        preferences[key] = value;\n        ps.setPrefs('topo2_prefs', preferences);\n        return preferences[key];\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2PrefsService', [\n        'PrefsService',\n        function (_ps_) {\n\n            ps = _ps_;\n\n            return {\n                get: get,\n                set: set,\n            };\n        },\n    ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var Model;\n\n    var instance;\n\n    var ROOT = '(root)';\n\n    angular.module('ovTopo2')\n    .factory('Topo2RegionService', [\n        '$log', 'Topo2Model', 'Topo2SubRegionService', 'Topo2DeviceService',\n        'Topo2HostService', 'Topo2LinkService', 'Topo2ZoomService', 'Topo2DetailsPanelService',\n        'Topo2BreadcrumbService', 'Topo2ViewController', 'Topo2SpriteLayerService', 'Topo2MapService',\n        'Topo2MapConfigService', 'Topo2PeerRegionService', 'Topo2NoDevicesConnectedService',\n        function ($log, _Model_, t2sr, t2ds, t2hs, t2ls, t2zs, t2dps, t2bcs, ViewController,\n                  t2sls, t2ms, t2mcs, t2pr, t2ndcs) {\n\n            Model = _Model_;\n\n            var Region = ViewController.extend({\n                initialize: function () {\n                    instance = this;\n                    this.model = null;\n\n                    this.bgRendered = false;\n                    this.regionData = null;\n                    this.peers = null;\n\n                    var RegionModel = Model.extend({\n                        findNodeById: this.findNodeById,\n                        nodes: this.regionNodes.bind(this),\n                    });\n\n                    this.model = new RegionModel();\n                    this.createEmptyModel();\n\n                },\n                createEmptyModel: function () {\n                    this.model.set({ subregions: t2sr.createSubRegionCollection([], this) });\n                    this.model.set({ devices: t2ds.createDeviceCollection([], this) });\n                    this.model.set({ hosts: t2hs.createHostCollection([], this) });\n                    this.model.set({ peerRegions: t2pr.createCollection([], this) });\n                    this.model.set({ links: t2ls.createLinkCollection([], this) });\n                },\n                isLoadComplete: function () {\n                    return this.bgRendered && this.regionData && this.peers;\n                },\n                loaded: function (key, value) {\n                    this[key] = value;\n                    if (this.isLoadComplete()) {\n                        this.startRegion();\n                    }\n                },\n                startRegion: function () {\n\n                    this.model.set({\n                        id: this.regionData.id,\n                        layerOrder: this.regionData.layerOrder,\n                    });\n\n                    this.sortMultiLinks();\n                    this.assignPeerLocations();\n\n\n                    this.model.set({ subregions: t2sr.createSubRegionCollection(this.regionData.subregions, this) });\n                    this.model.set({ devices: t2ds.createDeviceCollection(this.regionData.devices, this) });\n                    this.model.set({ hosts: t2hs.createHostCollection(this.regionData.hosts, this) });\n                    this.model.set({ peerRegions: t2pr.createCollection(this.peers, this) });\n                    this.model.set({ links: t2ls.createLinkCollection(this.regionData.links, this) });\n\n                    if (this.isRootRegion() && !this.model.get('subregions').models.length) {\n                        t2bcs.hide();\n                    }\n\n                    this.layout.createForceLayout();\n                    this.displayNoDevs();\n                },\n                clear: function () {\n                    this.regionData = null;\n                    this.createEmptyModel();\n                },\n                removePort: function (key) {\n                    var regex = new RegExp('^[^/]*');\n                    return regex.exec(key)[0];\n                },\n                assignPeerLocations: function () {\n                    var _this = this;\n                    _.each(this.regionData.peerLocations, function (location, id) {\n                        _.each(_this.peers, function (peer) {\n                            if (peer.id === id) {\n                                peer.location = location;\n                            }\n                        });\n                    });\n                },\n                sortMultiLinks: function () {\n                    var _this = this,\n                        deviceConnections = {};\n\n                    _.each(this.regionData.links, function (link) {\n\n                        var epA = _this.removePort(link.epA),\n                            epB = _this.removePort(link.epB),\n                            key = epA + '~' + epB,\n                            collection = deviceConnections[key] || [],\n                            dup = _.find(collection, link);\n\n                        if (!dup) {\n                            collection.push(link);\n                        }\n\n                        deviceConnections[key] = collection;\n                    });\n\n                    _.forIn(deviceConnections, function (collection) {\n                        if (collection.length > 1) {\n                            _.each(collection, function (link, index) {\n                                link.multiline = {\n                                    deviceLinks: collection.length,\n                                    index: index,\n                                };\n                            });\n                        }\n                    });\n                },\n                isRootRegion: function () {\n                    return this.model.get('id') === ROOT;\n                },\n                findNodeById: function (link, id) {\n                    if (link.get('type') !== 'UiEdgeLink') {\n                        id = this.removePort(id);\n                    }\n                    return this.model.get('devices').get(id) ||\n                        this.model.get('hosts').get(id) ||\n                        this.model.get('subregions').get(id);\n                },\n                regionNodes: function () {\n                    if (this.model) {\n                        return [].concat(\n                            this.model.get('devices').models,\n                            this.model.get('hosts').models,\n                            this.model.get('subregions').models,\n                            this.model.get('peerRegions').models\n                        );\n                    }\n                    return [];\n                },\n                regionLinks: function () {\n                    return this.model.get('links').models;\n                },\n                getLink: function (linkId) {\n                    return this.model.get('links').get(linkId);\n                },\n                getDevice: function (deviceId) {\n                    return this.model.get('devices').get(deviceId);\n                },\n                filterRegionNodes: function (predicate) {\n                    var nodes = this.regionNodes();\n                    return _.filter(nodes, predicate);\n                },\n                deselectAllNodes: function () {\n                    var selected = this.filterRegionNodes(function (node) {\n                        return node.get('selected', true);\n                    });\n\n                    if (selected.length) {\n\n                        selected.forEach(function (node) {\n                            node.deselect();\n                        });\n\n                        t2dps().el.hide();\n                        return true;\n                    }\n\n                    return false;\n                },\n                deselectLink: function () {\n                    var selected = _.filter(this.regionLinks(), function (link) {\n                        return link.get('selected', true);\n                    });\n\n                    if (selected.length) {\n\n                        selected.forEach(function (link) {\n                            link.deselect();\n                        });\n\n                        t2dps().el.hide();\n                        return true;\n                    }\n\n                    return false;\n                },\n                toggleHosts: function () {\n                    var state = this.lookupPrefState('hosts');\n                    this.updatePrefState('hosts', !state);\n\n                    _.each(this.model.get('hosts').models, function (host) {\n                        host.setVisibility();\n                    });\n\n                    _.each(this.model.get('links').models, function (link) {\n                        link.setVisibility();\n                    });\n\n                    return !state;\n                },\n                toggleOfflineDevices: function () {\n                    var state = this.lookupPrefState('offline_devices');\n                    this.updatePrefState('offline_devices', !state);\n                    _.each(this.regionNodes(), function (node) {\n                        node.setOfflineVisibility();\n                    });\n\n                    return !state;\n                },\n                update: function (event) {\n\n                    if (!this.isLoadComplete()) {\n                        this.layout.createForceLayout();\n                    }\n\n                    if (this[event.type]) {\n                        this[event.type](event);\n                    } else {\n                        $log.error('Unhanded topology update', event);\n                    }\n\n                    this.layout.update();\n                    this.displayNoDevs();\n                },\n                displayNoDevs: function () {\n                    if (this.regionNodes().length > 0) {\n                        t2ndcs.hide();\n                    } else {\n                        t2ndcs.show();\n                    }\n                },\n\n                LINK_ADDED_OR_UPDATED: function (event) {\n\n                    var regionLinks = this.model.get('links');\n\n                    if (!regionLinks) {\n                        this.model.set({ links: t2ls.createLinkCollection([], this) });\n                    }\n\n                    if (event.memo === 'added') {\n                        var link = this.model.get('links').add(event.data);\n                        link.createLink();\n                        $log.debug('Added Link', link);\n                    }\n                },\n                LINK_REMOVED: function (event) {\n                    var link = this.getLink(event.subject);\n                    link.remove();\n                    this.model.get('links').remove(link);\n                },\n                DEVICE_ADDED_OR_UPDATED: function (event) {\n\n                    var regionDevices = this.model.get('devices'),\n                        device;\n\n                    if (!regionDevices) {\n                        this.model.set({ devices: t2ds.createDeviceCollection([], this) });\n                    }\n\n                    if (event.memo === 'added') {\n                        device = this.model.get('devices').add(event.data);\n                        $log.debug('Added device', device);\n                    } else if (event.memo === 'updated') {\n                        device = this.getDevice(event.subject);\n                        device.set(event.data);\n                    }\n                },\n                DEVICE_REMOVED: function (event) {\n                    device.remove();\n                },\n                HOST_ADDED_OR_UPDATED: function (event) {\n                    var regionHosts = this.model.get('hosts'),\n                        host;\n\n                    if (!regionHosts) {\n                        this.model.set({ hosts: t2hs.createHostCollection([], this) });\n                    }\n\n                    if (event.memo === 'added') {\n                        host = this.model.get('hosts').add(event.data);\n                        $log.debug('Added host', host);\n                    }\n                },\n                REGION_ADDED_OR_UPDATED: function (event) {\n                    var regionSubRegions = this.model.get('subregions'),\n                        region;\n\n                    if (!regionSubRegions) {\n                        this.model.set({ subregions: t2sr.createSubRegionCollection([], this) });\n                    }\n\n                    if (event.memo === 'added') {\n                        region = this.model.get('subregions').add(event.data);\n                        $log.debug('Added region', region);\n                    }\n                },\n            });\n\n            function getInstance() {\n                return instance || new Region();\n            }\n\n            return getInstance();\n\n        }]);\n\n})();\n","\n\n(function () {\n\n    var $loc, wss;\n    var instance;\n\n    var RegionNavigationService = function () {\n        this.listeners = {};\n        instance = this;\n    };\n\n    RegionNavigationService.prototype = {\n\n        addListener: function (event, sub) {\n            if (!this.listeners[event]) {\n                this.listeners[event] = [];\n            }\n            this.listeners[event].push(sub);\n        },\n        removeListener: function (sub) {\n        },\n        notifyListeners: function (event, payload) {\n            _.each(this.listeners[event], function (cb) {\n                cb(payload);\n            });\n        },\n\n        navigateToRegion: function (id) {\n            $loc.search('regionId', id);\n            wss.sendEvent('topo2navRegion', {\n                rid: id,\n            });\n            this.notifyListeners('region:navigation-start', id);\n        },\n        navigateToRegionComplete: function () {\n            this.notifyListeners('region:navigation-complete');\n        },\n\n        destory: function () {\n            this.listeners = {};\n        },\n    };\n\n    angular.module('ovTopo2')\n        .factory('Topo2RegionNavigationService', [\n            '$location', 'WebSocketService',\n            function (_$loc_, _wss_) {\n\n                $loc = _$loc_;\n                wss = _wss_;\n\n                return instance || new RegionNavigationService();\n            },\n        ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var t2zs, t2ddp;\n\n    var instance,\n        consumeClick,\n        zoomer,\n        previousNearestLink; \n\n    function mouseClickHandler() {\n        if (d3.event.defaultPrevented) return;\n\n        if (!d3.event.shiftKey) {\n            this.clearSelection();\n        }\n\n        if (!this.clickConsumed()) {\n            if (previousNearestLink) {\n                this.selectObject(previousNearestLink, true);\n            }\n        }\n    }\n\n    function mouseMoveHandler(ev) {\n        var mp = getLogicalMousePosition(this),\n            link = computeNearestLink(mp);\n\n        if (link) {\n            if (previousNearestLink && previousNearestLink !== link) {\n                previousNearestLink.unenhance();\n            }\n            link.enhance();\n        } else if (previousNearestLink) {\n            previousNearestLink.unenhance();\n        }\n\n        previousNearestLink = link;\n    }\n\n    function getLogicalMousePosition(container) {\n        var m = d3.mouse(container),\n            sc = zoomer.scale(),\n            tr = zoomer.translate(),\n            mx = (m[0] - tr[0]) / sc,\n            my = (m[1] - tr[1]) / sc;\n        return { x: mx, y: my };\n    }\n\n    function sq(x) {\n        return x * x;\n    }\n\n    function mdist(p, m) {\n        return Math.sqrt(sq(p.x - m.x) + sq(p.y - m.y));\n    }\n\n    function prox(dist) {\n        return dist / zoomer.scale();\n    }\n\n    function computeNearestLink(mouse) {\n        var proximity = prox(30),\n            nearest = null,\n            minDist;\n\n        function pdrop(line, mouse) {\n            var x1 = line.x1,\n                y1 = line.y1,\n                x2 = line.x2,\n                y2 = line.y2,\n                x3 = mouse.x,\n                y3 = mouse.y,\n                k = ((y2 - y1) * (x3 - x1) - (x2 - x1) * (y3 - y1)) /\n                    (sq(y2 - y1) + sq(x2 - x1)),\n                x4 = x3 - k * (y2 - y1),\n                y4 = y3 + k * (x2 - x1);\n            return { x: x4, y: y4 };\n        }\n\n        function lineHit(line, p, m) {\n            if (p.x < line.x1 && p.x < line.x2) return false;\n            if (p.x > line.x1 && p.x > line.x2) return false;\n            if (p.y < line.y1 && p.y < line.y2) return false;\n            if (p.y > line.y1 && p.y > line.y2) return false;\n            return mdist(p, m) <= proximity;\n        }\n\n        var links = [];\n\n        if (instance.region.model.get('links')) {\n            links = instance.region.regionLinks();\n        }\n\n        if (links.length) {\n            minDist = proximity * 2;\n\n            links.forEach(function (d) {\n                var line = d.get('position'),\n                    point,\n                    hit,\n                    dist;\n\n\n                if (line) {\n                    point = pdrop(line, mouse);\n                    hit = lineHit(line, point, mouse);\n                    if (hit) {\n                        dist = mdist(point, mouse);\n                        if (dist < minDist) {\n                            minDist = dist;\n                            nearest = d;\n                        }\n                    }\n                }\n            });\n        }\n\n        return nearest;\n    }\n\n    var SelectionService = function () {\n        instance = this;\n        this.selectedNodes = [];\n        this.selectionOrder = [];\n    };\n\n    SelectionService.prototype = {\n        init: function () {\n            zoomer = t2zs.getZoomer();\n\n            var svg = d3.select('#topo2');\n            svg.on('mousemove', mouseMoveHandler);\n            svg.on('click', mouseClickHandler.bind(this));\n        },\n        updateDetails: function () {\n\n            var nodeCount = this.selectedNodes.length;\n\n            if (nodeCount === 1) {\n                this.selectedNodes[0].showDetails();\n            } else if (nodeCount > 1) {\n                t2ddp.showMulti(this.selectedNodes);\n            } else {\n                t2ddp.hide();\n            }\n        },\n        selectObject: function (node, multiSelectEnabled) {\n\n            var event = d3.event,\n                nodeIndex = _.indexOf(this.selectionOrder, node.get('id'));\n\n            if (nodeIndex < 0) {\n\n                if (multiSelectEnabled && !event.shiftKey || !multiSelectEnabled) {\n                    this.clearSelection();\n                }\n\n                this.selectedNodes.push(node);\n                this.selectionOrder.push(node.get('id'));\n\n                node.select();\n            } else {\n                this.removeNode(node, nodeIndex);\n            }\n\n            this.updateDetails();\n        },\n        removeNode: function (node, index) {\n            this.selectedNodes.splice(index, 1);\n            this.selectionOrder.splice(index, 1);\n            node.deselect();\n        },\n        clearSelection: function () {\n            _.each(this.selectedNodes, function (node) {\n                node.deselect();\n            });\n\n            this.selectedNodes = [];\n            this.selectionOrder = [];\n            this.updateDetails();\n        },\n        clickConsumed: function (x) {\n            var cc = consumeClick;\n            consumeClick = Boolean(x);\n            return cc;\n        },\n    };\n\n    angular.module('ovTopo2')\n    .factory('Topo2SelectService', [\n        'Topo2ZoomService', 'Topo2DeviceDetailsPanel',\n        function (_t2zs_, _t2ddp_) {\n            t2zs = _t2zs_;\n            t2ddp = _t2ddp_;\n            return instance || new SelectionService();\n        },\n    ]);\n\n})();\n","\n\n (function () {\n    'use strict';\n\n    var instance;\n\n    function vbox(w, h) {\n      return '0 0 ' + w + ' ' + h;\n    }\n\n    angular.module('ovTopo2')\n        .factory('Topo2SpriteLayerService', [\n            '$log', 'FnService',\n            'Topo2ViewController', 'SpriteService', 'ThemeService',\n\n            function ($log, fs, ViewController, ss, ts) {\n\n                var SpriteLayer = ViewController.extend({\n\n                    id: 'topo2-sprites',\n                    displayName: 'Sprite Layer',\n\n                    init: function () {\n                        this.svg = d3.select('#topo2');\n                        this.createSpriteDefs();\n                        this.container = this.appendElement('#topo2-background', 'g');\n                    },\n                    loadLayout: function (id) {\n                        var _this = this;\n                        this.container.selectAll('*').remove();\n                        this.layout = ss.layout(id);\n\n                        if (this.layout) {\n                            this.width = this.layout.data.w;\n                            this.height = this.layout.data.h;\n\n                            this.renderLayout();\n\n                            if (fs.debugOn('sprite_grid')) {\n                                this.renderGrid();\n                            }\n                        } else {\n                            $log.warn('no sprite layout registered:', id);\n                        }\n\n                        return new Promise(function (resolve) {\n                            resolve(_this);\n                        });\n                    },\n                    createSpriteDefs: function () {\n                       this.defs = this.svg.append('defs')\n                            .attr('id', 'sprites');\n                    },\n                    getWidth: function () {\n                        return this.width;\n                    },\n                    getHeight: function () {\n                        return this.height;\n                    },\n                    renderSprite: function (spriteData) {\n\n                        var id = spriteData.sprite.data.id,\n                            definition = d3.select('#' + id);\n\n                        if (definition.empty()) {\n\n                            var data = spriteData.sprite.data,\n                                spriteEl = this.defs.append('symbol')\n                                    .attr('viewBox', vbox(data.w, data.h))\n                                    .attr('id', id);\n\n\n                            _.each(spriteData.sprite.rects, function (rect) {\n                                spriteEl.append('rect')\n                                    .attr('width', rect.w)\n                                    .attr('height', rect.h)\n                                    .attr('x', rect.x)\n                                    .attr('y', rect.y)\n                                    .style('fill', ts.spriteColor(rect.o.fill, 'fill'))\n                                    .style('stroke', ts.spriteColor(rect.o.stroke, 'stroke'));\n                            });\n\n                            _.each(spriteData.sprite.paths, function (path) {\n                                spriteEl.append('path')\n                                    .attr('d', path.d)\n                                    .style('fill', ts.spriteColor(path.o.fill, 'fill'))\n                                    .style('stroke', ts.spriteColor(path.o.stroke, 'stroke'));\n                            });\n                        }\n\n                        return spriteEl;\n                    },\n                    renderLayout: function () {\n\n                        var _this = this;\n                        var layout = this.container.append('svg')\n                            .attr('class', layout)\n                            .attr('viewBox', vbox(this.layout.data.w, this.layout.data.h));\n\n                        _.each(this.layout.sprites, function (spriteData) {\n                            _this.renderSprite(spriteData);\n\n                            layout\n                                .append('g')\n                                .append('use')\n                                .attr('xlink:href', '#rack')\n                                .attr('width', 20)\n                                .attr('height', 25)\n                                .attr('x', spriteData.x)\n                                .attr('y', spriteData.y);\n                        });\n                    },\n                    renderGrid: function () {\n\n                        var layout = this.container.select('svg').append('g');\n\n                        var gridSpacing = 5,\n                            x = this.width / gridSpacing,\n                            y = this.height / gridSpacing,\n                            i, l;\n\n                        for (i = 0, l = x; i < l; i++) {\n                            layout.append('rect')\n                                .attr('width', 0.1)\n                                .attr('height', this.height)\n                                .attr('x', i * gridSpacing)\n                                .attr('y', 0);\n                        }\n\n                        for (i = 0, l = y; i < l; i++) {\n                            layout.append('rect')\n                                .attr('height', 0.1)\n                                .attr('width', this.width)\n                                .attr('y', i * gridSpacing)\n                                .attr('x', 0);\n                        }\n                    },\n                });\n\n                function getInstance() {\n                    return instance || new SpriteLayer();\n                }\n\n                return getInstance();\n            },\n        ]);\n })();\n","\n\n(function () {\n    'use strict';\n\n    var Collection, Model;\n\n    var remappedDeviceTypes = {\n        virtual: 'cord',\n    };\n\n    function createSubRegionCollection(data, region) {\n\n        var SubRegionCollection = Collection.extend({\n            model: Model,\n            region: region,\n        });\n\n        return new SubRegionCollection(data);\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2SubRegionService', [\n        '$location', 'WebSocketService', 'Topo2Collection', 'Topo2NodeModel',\n        'Topo2SubRegionPanelService', 'Topo2RegionNavigationService',\n\n        function ($loc, wss, _c_, NodeModel, t2srp, t2rns) {\n\n            Collection = _c_;\n\n            Model = NodeModel.extend({\n\n                nodeType: 'sub-region',\n                events: {\n                    'dblclick': 'navigateToRegion',\n                    'click': 'onClick',\n                },\n\n                initialize: function () {\n                    this.super = this.constructor.__super__;\n                    this.super.initialize.apply(this, arguments);\n                },\n                onChange: function () {\n                    if (this.el) {\n                        this.el.attr('class', this.svgClassName());\n                    }\n                },\n                showDetails: function () {\n                    t2srp.displayPanel(this);\n                },\n                icon: function () {\n                    var type = this.get('type');\n                    return remappedDeviceTypes[type] || type || 'm_cloud';\n                },\n                navigateToRegion: function () {\n                    if (d3.event.defaultPrevented) return;\n                    t2rns.navigateToRegion(this.get('id'));\n                    t2srp.hide();\n                },\n            });\n\n            return {\n                createSubRegionCollection: createSubRegionCollection,\n            };\n        },\n    ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    var panel, gs, flash, ls;\n\n    var subRegionPanel, subRegionData;\n\n    function init() {\n        subRegionPanel = panel();\n    }\n\n    function formatSubRegionData(data) {\n        return {\n            title: data.get('name'),\n            propLabels: {\n                '-': '-',\n                'id': 'Id',\n                'nodeType': 'Type',\n                'nDevs': '# Devices',\n                'nHosts': '# Hosts',\n            },\n            propValues: {\n                '-': '-',\n                'id': data.get('id'),\n                'nodeType': data.get('nodeType'),\n                'nDevs': data.get('nDevs'),\n                'nHosts': data.get('nHosts'),\n            },\n            propOrder: [\n                'id',\n                'nodeType',\n                '-',\n                'nDevs',\n                'nHosts',\n            ],\n        };\n    }\n\n    function displayPanel(data) {\n        init();\n        subRegionData = formatSubRegionData(data);\n        render();\n    }\n\n    function render() {\n        subRegionPanel.show();\n        subRegionPanel.emptyRegions();\n\n        var svg = subRegionPanel.appendToHeader('div')\n                .classed('icon', true)\n                .append('svg'),\n            title = subRegionPanel.appendToHeader('h2'),\n            table = subRegionPanel.appendToBody('table'),\n            tbody = table.append('tbody');\n\n        title.text(subRegionData.title);\n        gs.addGlyph(svg, 'bird', 24, 0, [1, 1]);\n        ls.listProps(tbody, subRegionData);\n    }\n\n    function show() {\n        subRegionPanel.show();\n    }\n\n    function hide() {\n        subRegionPanel.el.hide();\n    }\n\n    function toggle() {\n        var on = subRegionPanel.el.toggle(),\n            verb = on ? 'Show' : 'Hide';\n        flash.flash(verb + ' subRegion Panel');\n    }\n\n    function destroy() {\n        subRegionPanel.destroy();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2SubRegionPanelService', [\n        'Topo2DetailsPanelService', 'GlyphService', 'FlashService', 'ListService',\n        function (_ps_, _gs_, _flash_, _ls_) {\n\n            panel = _ps_;\n            gs = _gs_;\n            flash = _flash_;\n            ls = _ls_;\n\n            return {\n                displayPanel: displayPanel,\n                init: init,\n                show: show,\n                hide: hide,\n                toggle: toggle,\n                destroy: destroy,\n                isVisible: function () { return subRegionPanel.isVisible(); },\n            };\n        },\n    ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    var Panel, gs, wss, flash, ls;\n\n    var summaryPanel, summaryData, detailsPanel;\n\n    var id = 'topo2-p-summary',\n        className = 'topo2-p',\n        panelOpts = {\n            show: true,\n            width: 260, \n        },\n        handlerMap = {\n            showSummary: handleSummaryData,\n        };\n\n    function init(_detailsPanel_) {\n\n        detailsPanel = _detailsPanel_;\n\n        bindHandlers();\n        wss.sendEvent('requestSummary');\n\n        var options = angular.extend({}, panelOpts, {\n            class: className,\n        });\n\n        summaryPanel = new Panel(id, options);\n        summaryPanel.el.classed(className, true);\n    }\n\n    function render() {\n        var endedWithSeparator;\n\n        summaryPanel.emptyRegions();\n\n        var svg = summaryPanel.appendToHeader('div')\n                .classed('icon', true)\n                .append('svg'),\n            title = summaryPanel.appendToHeader('h2'),\n            table = summaryPanel.appendToBody('table'),\n            tbody = table.append('tbody');\n\n        title.text(summaryData.title);\n        gs.addGlyph(svg, 'bird', 24, 0, [1, 1]);\n        endedWithSeparator = ls.listProps(tbody, summaryData);\n    }\n\n    function handleSummaryData(data) {\n        summaryData = data;\n        render();\n    }\n\n    function bindHandlers() {\n        wss.bindHandlers(handlerMap);\n    }\n\n    function hide() {\n        summaryPanel.el.hide(detailsPanel.getInstance().up);\n    }\n\n    function show() {\n\n        var _show = function () {\n            summaryPanel.el.show();\n        };\n\n        var summaryHeight = summaryPanel.el.bbox().height;\n        if (detailsPanel.isVisible()) {\n            detailsPanel.getInstance().down(summaryHeight, _show);\n        } else {\n            _show();\n        }\n    }\n\n\n    function toggle() {\n        var on = summaryPanel.isVisible(),\n            verb = on ? 'Hide' : 'Show';\n\n        flash.flash(verb + ' Summary Panel');\n        wss.sendEvent(on ? 'requestSummary' : 'cancelSummary');\n        on ? hide(): show();\n    }\n\n    function destroy() {\n        wss.unbindHandlers(handlerMap);\n        wss.sendEvent('cancelSummary');\n        summaryPanel.destroy();\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2SummaryPanelService', [\n        'Topo2PanelService', 'GlyphService', 'WebSocketService', 'FlashService', 'ListService',\n        function (_ps_, _gs_, _wss_, _flash_, _ls_) {\n\n            Panel = _ps_;\n            gs = _gs_;\n            wss = _wss_;\n            flash = _flash_;\n            ls = _ls_;\n\n            return {\n                init: init,\n                toggle: toggle,\n                destroy: destroy,\n                isVisible: function () { return summaryPanel.isVisible(); },\n                getInstance: function () { return summaryPanel; },\n            };\n        },\n    ]);\n\n})();\n","\n(function () {\n    'use strict';\n\n    var instance;\n\n\n    var k2b = {\n        O: { id: 'topo2-summary-tog', gid: 'm_summary', isel: true },\n        I: { id: 'topo2-instance-tog', gid: 'm_uiAttached', isel: true },\n        D: { id: 'details-tog', gid: 'm_details', isel: true },\n        H: { id: 'hosts-tog', gid: 'm_endstation', isel: false },\n        M: { id: 'offline-tog', gid: 'm_switch', isel: true },\n        P: { id: 'topo2-ports-tog', gid: 'm_ports', isel: true },\n        B: { id: 'topo2-bkgrnd-tog', gid: 'm_map', isel: true },\n\n        L: { id: 'topo2-cycleLabels-btn', gid: 'm_cycleLabels' },\n        R: { id: 'topo2-resetZoom-btn', gid: 'm_resetZoom' },\n\n        E: { id: 'topo2-eqMaster-btn', gid: 'm_eqMaster' },\n    };\n\n    angular.module('ovTopo2')\n        .factory('Topo2ToolbarService', [\n            'FnService', 'ToolbarService', 'Topo2KeyCommandService',\n            'Topo2OverlayService',\n            function (fs, tbs, t2kcs, t2ov) {\n\n                var Toolbar = function () {\n                    instance = this;\n                };\n\n                Toolbar.prototype = {\n\n                    className: 'topo2-toolbar',\n\n                    init: function () {\n                        this.el = tbs.createToolbar(this.className);\n                        this.radioSet;\n                        this.ovIndex;\n\n                        this.initKeyData();\n                        this.addFirstRow();\n                        this.el.addRow();\n                        this.addSecondRow();\n                        this.addOverlays();\n                        this.el.hide();\n                    },\n                    initKeyData: function () {\n                        _.each(k2b, function (value, key) {\n                            var data = t2kcs.getActionEntry(key);\n                            if (data) {\n                                value.cb = data[0];\n                                value.tt = data[1] + ' (' + key + ')';\n                            }\n                        });\n                    },\n                    getKey: function (key) {\n                        return k2b[key];\n                    },\n                    keyListener: function (key) {\n                        var v = this.getKey(key);\n\n                        if (v && v.tog) {\n                            v.tog.toggleNoCb();\n                        }\n                    },\n                    addButton: function (key) {\n                        var v = this.getKey(key);\n                        v.btn = this.el.addButton(v.id, v.gid, v.cb, v.tt);\n                    },\n                    addToggle: function (key, suppressIfMobile) {\n                        var v = this.getKey(key);\n                        if (suppressIfMobile && fs.isMobile()) { return; }\n                        v.tog = this.el.addToggle(v.id, v.gid, v.isel, v.cb, v.tt);\n                    },\n\n                    toggle: function () {\n                        this.el.toggle();\n                    },\n\n                    selectOverlay: function (ovid) {\n                        var index = this.ovIndex[defaultOverlay] || 0,\n                            pidx = (ovid === null) ? 0 : this.ovIndex[ovid] || -1;\n                        if (pidx >= 0 && pidx < this.radioSet.size()) {\n                            index = pidx;\n                        }\n\n                        this.radioSet.selectedIndex(index);\n                    },\n\n                    fnKey: function (index) {\n                        if (index < this.radioSet.size() && index !== this.radioSet.selectedIndex()) {\n                            this.radioSet.selectedIndex(index);\n                        }\n                    },\n\n                    addFirstRow: function () {\n                        this.addToggle('I');\n                        this.addToggle('O');\n                        this.addToggle('D');\n                        this.el.addSeparator();\n\n                        this.addToggle('H');\n                        this.addToggle('M');\n                        this.addToggle('P', true);\n                        this.addToggle('B');\n                    },\n                    addSecondRow: function () {\n                        this.addButton('L');\n                        this.addButton('R');\n                        this.el.addSeparator();\n                        this.addButton('E');\n                    },\n\n                    switchOverlayActions: function () {\n                    },\n\n                    addOverlays: function () {\n                        var _this = this; \n                        this.el.addSeparator();\n\n                        var rset = [{\n                            gid: 'm_unknown',\n                            tooltip: 'ov_tt_none',\n                            cb: function () {\n                                t2ov.tbSelection(null, _this.switchOverlayActions);\n                            },\n                        }];\n\n                        t2ov.augmentRbset(rset, this.switchOverlayActions);\n                        this.radioSet = this.el.addRadioSet('topo-overlays', rset);\n                    },\n\n                    destroy: function () {\n                        tbs.destroyToolbar(this.className);\n                    },\n                };\n\n                return instance || new Toolbar();\n            },\n        ]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, flash, wss;\n\n    var allTrafficTypes = [\n            'flowStatsBytes',\n            'portStatsBitSec',\n            'portStatsPktSec',\n        ],\n        allTrafficMsgs = [\n            'Flow Stats (bytes)',\n            'Port Stats (bits / second)',\n            'Port Stats (packets / second)',\n        ];\n\n    var mode = null,\n        currentIndex = 0,\n        allIndex = 0;\n\n\n    function cancelTraffic() {\n        $log.debug('Topo2Traffic: Cancel Traffic');\n\n        if (!mode) {\n            return false;\n        }\n        mode = null;\n        wss.sendEvent('topo2CancelTraffic');\n        flash.flash('Traffic monitoring canceled');\n        return true;\n    }\n\n    function showAllTraffic() {\n        $log.debug('Topo2Traffic: Show All Traffic:', allTrafficTypes[allIndex]);\n\n        mode = 'allFlowPort';\n        wss.sendEvent('topo2RequestAllTraffic', {\n            trafficType: allTrafficTypes[allIndex],\n        });\n        flash.flash(allTrafficMsgs[allIndex]);\n        currentIndex = allIndex;\n        allIndex = (allIndex + 1) % 3;\n    }\n\n    function selectedTrafficOverlay() {\n        return allTrafficTypes[currentIndex];\n    }\n\n\n    angular.module('ovTopo2')\n        .factory('Topo2TrafficService', [\n            '$log', 'FlashService', 'WebSocketService',\n\n            function (_$log_, _flash_, _wss_) {\n                $log = _$log_;\n                flash = _flash_;\n                wss = _wss_;\n\n                return {\n                    initTraffic: function (_api_) {},\n                    destroyTraffic: function () {},\n\n                    cancelTraffic: cancelTraffic,\n                    showAllTraffic: showAllTraffic,\n                    selectedTrafficOverlay: selectedTrafficOverlay,\n                };\n            },\n        ]);\n}());\n","\n(function () {\n    'use strict';\n\n    var $log, t2ov, t2ts;\n\n\n    var overlay = {\n        overlayId: 'traffic-2-overlay',\n        glyphId: 'm_allTraffic',\n        tooltip: 'Traffic Overlay',\n\n        activate: function () {\n            $log.debug('Traffic-2 overlay ACTIVATED');\n        },\n\n        deactivate: function () {\n            t2ts.cancelTraffic(true);\n            $log.debug('Traffic-2 overlay DEACTIVATED');\n        },\n\n        keyBindings: {\n            0: {\n                cb: function () { t2ts.cancelTraffic(true); },\n                tt: 'Cancel traffic monitoring',\n                gid: 'm_xMark',\n            },\n\n            A: {\n                cb: function () { t2ts.showAllTraffic(); },\n                tt: 'Monitor all traffic',\n                gid: 'm_allTraffic',\n            },\n\n            _keyOrder: [\n                '0', 'A',\n            ],\n        },\n\n        hooks: {\n            escape: function () {\n                return t2ts.cancelTraffic(true);\n            },\n        },\n    };\n\n    angular.module('ovTopo2')\n        .run(['$log', 'Topo2OverlayService', 'Topo2TrafficService',\n\n        function (_$log_, _t2ov_, _t2ts_) {\n            $log = _$log_;\n            t2ov = _t2ov_;\n            t2ts = _t2ts_;\n            t2ov.register(overlay);\n        }]);\n\n}());\n","\n\n(function () {\n    'use strict';\n\n    var flash;\n\n    var dimensions,\n        viewOptions = {\n            linkPortHighlighting: true,\n        };\n\n    function newDim(_dimensions) {\n        dimensions = _dimensions;\n    }\n\n    function getDimensions() {\n        return dimensions;\n    }\n\n    function togglePortHighlights(x) {\n        var kev = (x === 'keyev'),\n            on = kev ? !viewOptions.linkPortHighlighting : Boolean(x),\n            what = on ? 'Enable' : 'Disable';\n\n        viewOptions.linkPortHighlighting = on;\n        flash.flash(what + ' port highlighting');\n        return on;\n    }\n\n    function getPortHighlighting() {\n        return viewOptions.linkPortHighlighting;\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2ViewService',\n        ['FlashService',\n            function (_flash_) {\n\n                flash = _flash_;\n\n                return {\n                    newDim: newDim,\n                    getDimensions: getDimensions,\n\n                    togglePortHighlights: togglePortHighlights,\n                    getPortHighlighting: getPortHighlighting,\n                };\n            },\n        ]\n    );\n})();\n","\n\n(function () {\n    'use strict';\n\n    var flash, ps;\n\n    function ViewController(options) {\n        this.initialize.apply(this, arguments);\n    }\n\n    ViewController.prototype = {\n\n        id: null,\n        displayName: 'View',\n\n        initialize: function () {\n            this.name = this.displayName.toLowerCase().replace(/ /g, '_');\n            this.prefs = {\n                visible: this.name + '_visible',\n            };\n        },\n        appendElement: function (parent, node) {\n            var el = d3.select('#' + this.id);\n            if (el.empty()) {\n                 return d3.select(parent).append(node).attr('id', this.id);\n            }\n            return el;\n        },\n        node: function () {\n            return d3.select('#' + this.id);\n        },\n        enabled: function () {\n            return ps.getPrefs('topo2_prefs')[this.prefs.visible];\n        },\n        isVisible: function () {\n            return this.node().style('visibility') === 'visible';\n        },\n        hide: function () {\n            var node = this.node();\n\n            if (this.isVisible()) {\n                node\n                    .transition()\n                    .duration(400)\n                    .style('opacity', 0)\n                    .each('end', function () {\n                        node.style('visibility', 'hidden');\n                    });\n            }\n        },\n        show: function () {\n            var node = this.node();\n\n            if (!this.isVisible()) {\n                node\n                    .style('visibility', 'visible')\n                    .transition()\n                    .duration(400)\n                    .style('opacity', 1);\n            }\n        },\n        toggle: function () {\n            var on = !Boolean(this.isVisible()),\n                verb = on ? 'Show' : 'Hide';\n\n            on ? this.show() : this.hide();\n            flash.flash(verb + ' ' + this.displayName);\n            this.updatePrefState(this.prefs.visible, on);\n        },\n        lookupPrefState: function (key) {\n            return ps.getPrefs('topo2_prefs')[key] || 0;\n        },\n        updatePrefState: function (key, value) {\n            var state = ps.getPrefs('topo2_prefs');\n            state[key] = value ? 1 : 0;\n            ps.setPrefs('topo2_prefs', state);\n        },\n    };\n\n    angular.module('ovTopo2')\n        .factory('Topo2ViewController', [\n            'FnService', 'FlashService', 'PrefsService',\n            function (fn, _flash_, _ps_) {\n\n                flash = _flash_;\n                ps = _ps_;\n\n                ViewController.extend = fn.extend;\n                return ViewController;\n            },\n        ]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    var fs, zs;\n\n    var zoomer,\n        zoomEventListeners = [];\n\n    function createZoomer(options) {\n        var origCallback = fs.isF(options.zoomCallback) || function () {};\n\n        options.zoomCallback = function () {\n            origCallback();\n\n            angular.forEach(zoomEventListeners, function (ev) {\n                ev(zoomer);\n            });\n        };\n\n        zoomer = zs.createZoomer(options);\n        return zoomer;\n    }\n\n    function getZoomer() {\n        return zoomer;\n    }\n\n    function findZoomEventListener(ev) {\n        for (var i = 0, len = zoomEventListeners.length; i < len; i++) {\n            if (zoomEventListeners[i] === ev) return i;\n        }\n        return -1;\n    }\n\n    function addZoomEventListener(callback) {\n        zoomEventListeners.push(callback);\n    }\n\n    function removeZoomEventListener(callback) {\n        var evIndex = findZoomEventListener(callback);\n\n        if (evIndex !== -1) {\n            zoomEventListeners.splice(evIndex);\n        }\n    }\n\n    function adjustmentScale(min, max) {\n        var _scale = 1,\n            size = (min + max) / 2;\n\n        if (size * scale() < max) {\n            _scale = min / (size * scale());\n        } else if (size * scale() > max) {\n            _scale = min / (size * scale());\n        }\n\n        return _scale;\n    }\n\n    function scale() {\n        return zoomer.scale();\n    }\n\n    function panAndZoom(translate, scale, transition) {\n        zoomer.panZoom(translate, scale, transition);\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2ZoomService', [\n        'FnService', 'ZoomService',\n        function (_fs_, _zs_) {\n\n            fs = _fs_;\n            zs = _zs_;\n\n            return {\n                getZoomer: getZoomer,\n                createZoomer: createZoomer,\n                addZoomEventListener: addZoomEventListener,\n                removeZoomEventListener: removeZoomEventListener,\n\n                scale: scale,\n                adjustmentScale: adjustmentScale,\n                panAndZoom: panAndZoom,\n            };\n        }]);\n})();\n","\n\n(function () {\n    'use strict';\n\n    function View(options) {\n        if (options && options.el) {\n            this.el = options.el;\n            this.$el = angular.element(this.el);\n        }\n\n        this.initialize.apply(this, arguments);\n    }\n\n    angular.module('ovTopo2')\n    .factory('Topo2UIView', [\n        'FnService',\n        function (fn) {\n\n            _.extend(View.prototype, {\n                el: null,\n                empty: function () {\n                    if (this.$el) {\n                        this.$el.empty();\n                    }\n                },\n                destroy: function () {\n                    this.empty();\n                    return this;\n                },\n            });\n\n            View.extend = fn.extend;\n            return View;\n        },\n    ]);\n\n})();\n","\n\n(function () {\n    'use strict';\n\n    angular.module('ovTunnel', [])\n    .controller('OvTunnelCtrl',\n        ['$log', '$scope', '$sce', 'FnService', 'TableBuilderService',\n\n        function ($log, $scope, $sce, fs, tbs) {\n            tbs.buildTable({\n                scope: $scope,\n                tag: 'tunnel',\n            });\n\n            $scope.$watch('tableData', function () {\n                if (!fs.isEmptyObject($scope.tableData)) {\n                    $scope.tableData.forEach(function (tunnel) {\n                    });\n                }\n            });\n\n            $log.log('OvTunnelCtrl has been created');\n        }]);\n}());\n"]}